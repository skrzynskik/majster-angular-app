"use strict";(self.webpackChunkmajster_angular_app=self.webpackChunkmajster_angular_app||[]).push([[179],{2011:(bt,Se,j)=>{j.d(Se,{Dh:()=>_e,GT:()=>ce,cc:()=>Ae,hO:()=>Ge,on:()=>Z,pX:()=>le,xv:()=>ve});var d=j(4650),G=j(9260),F=j(4976);bt=j.hmd(bt);const se=["ngOnDestroy"],le=(Me,Oe,He,Te={})=>new Proxy(Me,{get:(De,Ne)=>He.runOutsideAngular(()=>{var ze;if(Me[Ne])return!(null===(ze=Te?.spy)||void 0===ze)&&ze.get&&Te.spy.get(Ne,Me[Ne]),Me[Ne];if(se.indexOf(Ne)>-1)return()=>{};const Le=Oe.toPromise().then(ue=>{const ot=ue&&ue[Ne];return"function"==typeof ot?ot.bind(ue):ot&&ot.then?ot.then(Mt=>He.run(()=>Mt)):He.run(()=>ot)});return new Proxy(()=>{},{get:(ue,ot)=>Le[ot],apply:(ue,ot,Mt)=>Le.then(lt=>{var rn;const pt=lt&&lt(...Mt);return!(null===(rn=Te?.spy)||void 0===rn)&&rn.apply&&Te.spy.apply(Ne,Mt,pt),pt})})})}),ce=(Me,Oe)=>{Oe.forEach(He=>{Object.getOwnPropertyNames(He.prototype||He).forEach(Te=>{Object.defineProperty(Me.prototype,Te,Object.getOwnPropertyDescriptor(He.prototype||He,Te))})})};class Ee{constructor(Oe){return Oe}}const _e=new d.OlP("angularfire2.app.options"),ve=new d.OlP("angularfire2.app.name");function Z(Me,Oe,He){const De="object"==typeof He&&He||{};De.name=De.name||"string"==typeof He&&He||"[DEFAULT]";const ze=G.Z.apps.filter(Le=>Le&&Le.name===De.name)[0]||Oe.runOutsideAngular(()=>G.Z.initializeApp(Me,De));try{JSON.stringify(Me)!==JSON.stringify(ze.options)&&W("error",`${ze.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(ze)}const W=(Me,...Oe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Oe)},X={provide:Ee,useFactory:Z,deps:[_e,d.R0b,[new d.FiY,ve]]};let Ge=(()=>{class Me{constructor(He){G.Z.registerVersion("angularfire",F.q4.full,"core"),G.Z.registerVersion("angularfire",F.q4.full,"app-compat"),G.Z.registerVersion("angular",d.q4F.full,He.toString())}static initializeApp(He,Te){return{ngModule:Me,providers:[{provide:_e,useValue:He},{provide:ve,useValue:Te}]}}}return Me.\u0275fac=function(He){return new(He||Me)(d.LFG(d.Lbi))},Me.\u0275mod=d.oAB({type:Me}),Me.\u0275inj=d.cJS({providers:[X]}),Me})();function Ae(Me,Oe,He,Te,De){const[,Ne,ze]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===Me)||[];if(Ne)return function Je(Me,Oe){try{return Me.toString()===Oe.toString()}catch{return Me===Oe}}(De,ze)||(ye("error",`${Oe} was already initialized on the ${He} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:De,was:ze})),Ne;{const Le=Te();return globalThis.\u0275AngularfireInstanceCache.push([Me,Le,De]),Le}}const ct=!!bt.hot,ye=(Me,...Oe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(bt,Se,j)=>{j.d(Se,{q4:()=>Zi,iC:()=>us,fc:()=>Oh,HU:()=>Rt,vb:()=>ka,JM:()=>$l});var d=j(4650),G=j(259),F=j(5861),se=j(6881),le=j(2090),ce=j(4859),Ee=j(1877);const _e=(E,D)=>D.some(A=>E instanceof A);let ve,Z;const Ge=new WeakMap,Ae=new WeakMap,Je=new WeakMap,ct=new WeakMap,ye=new WeakMap;let He={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Ae.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Je.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return ze(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Ne(E){return"function"==typeof E?function De(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function X(){return Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Le(this),D),ze(Ge.get(this))}:function(...D){return ze(E.apply(Le(this),D))}:function(D,...A){const B=E.call(Le(this),D,...A);return Je.set(B,D.sort?D.sort():[D]),ze(B)}}(E):(E instanceof IDBTransaction&&function Oe(E){if(Ae.has(E))return;const D=new Promise((A,B)=>{const K=()=>{E.removeEventListener("complete",ee),E.removeEventListener("error",ae),E.removeEventListener("abort",ae)},ee=()=>{A(),K()},ae=()=>{B(E.error||new DOMException("AbortError","AbortError")),K()};E.addEventListener("complete",ee),E.addEventListener("error",ae),E.addEventListener("abort",ae)});Ae.set(E,D)}(E),_e(E,function W(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,He):E)}function ze(E){if(E instanceof IDBRequest)return function Me(E){const D=new Promise((A,B)=>{const K=()=>{E.removeEventListener("success",ee),E.removeEventListener("error",ae)},ee=()=>{A(ze(E.result)),K()},ae=()=>{B(E.error),K()};E.addEventListener("success",ee),E.addEventListener("error",ae)});return D.then(A=>{A instanceof IDBCursor&&Ge.set(A,E)}).catch(()=>{}),ye.set(D,E),D}(E);if(ct.has(E))return ct.get(E);const D=Ne(E);return D!==E&&(ct.set(E,D),ye.set(D,E)),D}const Le=E=>ye.get(E),Mt=["get","getKey","getAll","getAllKeys","count"],lt=["put","add","delete","clear"],rn=new Map;function pt(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(rn.get(D))return rn.get(D);const A=D.replace(/FromIndex$/,""),B=D!==A,K=lt.includes(A);if(!(A in(B?IDBIndex:IDBObjectStore).prototype)||!K&&!Mt.includes(A))return;const ee=function(){var ae=(0,F.Z)(function*(Qe,...Ke){const mt=this.transaction(Qe,K?"readwrite":"readonly");let Vt=mt.store;return B&&(Vt=Vt.index(Ke.shift())),(yield Promise.all([Vt[A](...Ke),K&&mt.done]))[0]});return function(Ke){return ae.apply(this,arguments)}}();return rn.set(D,ee),ee}!function Te(E){He=E(He)}(E=>({...E,get:(D,A,B)=>pt(D,A)||E.get(D,A,B),has:(D,A)=>!!pt(D,A)||E.has(D,A)}));const me="@firebase/installations",ge="0.6.4",Ce=1e4,Re=`w:${ge}`,Ye="FIS_v2",We="https://firebaseinstallations.googleapis.com/v1",yt=36e5,Ht=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function St(E){return E instanceof le.ZR&&E.code.includes("request-failed")}function Jt({projectId:E}){return`${We}/projects/${E}/installations`}function Vn(E){return{token:E.token,requestStatus:2,expiresIn:Ui(E.expiresIn),creationTime:Date.now()}}function On(E,D){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,F.Z)(function*(E,D){const B=(yield D.json()).error;return Ht.create("request-failed",{requestName:E,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function lr({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function ri(E){return gi.apply(this,arguments)}function gi(){return(gi=(0,F.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function Ui(E){return Number(E.replace("s","000"))}function vt(){return(vt=(0,F.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:A}){const B=Jt(E),K=lr(E),ee=D.getImmediate({optional:!0});if(ee){const mt=yield ee.getHeartbeatsHeader();mt&&K.append("x-firebase-client",mt)}const Qe={method:"POST",headers:K,body:JSON.stringify({fid:A,authVersion:Ye,appId:E.appId,sdkVersion:Re})},Ke=yield ri(()=>fetch(B,Qe));if(Ke.ok){const mt=yield Ke.json();return{fid:mt.fid||A,registrationStatus:2,refreshToken:mt.refreshToken,authToken:Vn(mt.authToken)}}throw yield On("Create Installation",Ke)})).apply(this,arguments)}function zn(E){return new Promise(D=>{setTimeout(D,E)})}const Kn=/^[cdef][\w-]{21}$/,Zr="";function ii(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function fn(E){return function fs(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Kn.test(A)?A:Zr}catch{return Zr}}function Xt(E){return`${E.appName}!${E.appId}`}const gt=new Map;function jt(E,D){const A=Xt(E);Un(A,D),function si(E,D){const A=function mr(){return!qn&&"BroadcastChannel"in self&&(qn=new BroadcastChannel("[Firebase] FID Change"),qn.onmessage=E=>{Un(E.data.key,E.data.fid)}),qn}();A&&A.postMessage({key:E,fid:D}),function en(){0===gt.size&&qn&&(qn.close(),qn=null)}()}(A,D)}function Un(E,D){const A=gt.get(E);if(A)for(const B of A)B(D)}let qn=null;const Ri="firebase-installations-database",sn=1,mi="firebase-installations-store";let Gt=null;function Qn(){return Gt||(Gt=function ue(E,D,{blocked:A,upgrade:B,blocking:K,terminated:ee}={}){const ae=indexedDB.open(E,D),Qe=ze(ae);return B&&ae.addEventListener("upgradeneeded",Ke=>{B(ze(ae.result),Ke.oldVersion,Ke.newVersion,ze(ae.transaction))}),A&&ae.addEventListener("blocked",()=>A()),Qe.then(Ke=>{ee&&Ke.addEventListener("close",()=>ee()),K&&Ke.addEventListener("versionchange",()=>K())}).catch(()=>{}),Qe}(Ri,sn,{upgrade:(E,D)=>{0===D&&E.createObjectStore(mi)}})),Gt}function Bn(E,D){return Br.apply(this,arguments)}function Br(){return(Br=(0,F.Z)(function*(E,D){const A=Xt(E),K=(yield Qn()).transaction(mi,"readwrite"),ee=K.objectStore(mi),ae=yield ee.get(A);return yield ee.put(D,A),yield K.done,(!ae||ae.fid!==D.fid)&&jt(E,D.fid),D})).apply(this,arguments)}function Jn(E){return oi.apply(this,arguments)}function oi(){return(oi=(0,F.Z)(function*(E){const D=Xt(E),B=(yield Qn()).transaction(mi,"readwrite");yield B.objectStore(mi).delete(D),yield B.done})).apply(this,arguments)}function Kr(E,D){return ai.apply(this,arguments)}function ai(){return(ai=(0,F.Z)(function*(E,D){const A=Xt(E),K=(yield Qn()).transaction(mi,"readwrite"),ee=K.objectStore(mi),ae=yield ee.get(A),Qe=D(ae);return void 0===Qe?yield ee.delete(A):yield ee.put(Qe,A),yield K.done,Qe&&(!ae||ae.fid!==Qe.fid)&&jt(E,Qe.fid),Qe})).apply(this,arguments)}function q(E){return H.apply(this,arguments)}function H(){return H=(0,F.Z)(function*(E){let D;const A=yield Kr(E.appConfig,B=>{const K=function P(E){return At(E||{fid:ii(),registrationStatus:0})}(B),ee=function L(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ht.create("app-offline"))};const A={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},B=function k(E,D){return Y.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:B}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ie(E)}:{installationEntry:D}}(E,K);return D=ee.registrationPromise,ee.installationEntry});return A.fid===Zr?{installationEntry:yield D}:{installationEntry:A,registrationPromise:D}}),H.apply(this,arguments)}function Y(){return Y=(0,F.Z)(function*(E,D){try{const A=yield function Gn(E,D){return vt.apply(this,arguments)}(E,D);return Bn(E.appConfig,A)}catch(A){throw St(A)&&409===A.customData.serverCode?yield Jn(E.appConfig):yield Bn(E.appConfig,{fid:D.fid,registrationStatus:0}),A}}),Y.apply(this,arguments)}function Ie(E){return st.apply(this,arguments)}function st(){return(st=(0,F.Z)(function*(E){let D=yield Nt(E.appConfig);for(;1===D.registrationStatus;)yield zn(100),D=yield Nt(E.appConfig);if(0===D.registrationStatus){const{installationEntry:A,registrationPromise:B}=yield q(E);return B||A}return D})).apply(this,arguments)}function Nt(E){return Kr(E,D=>{if(!D)throw Ht.create("installation-not-found");return At(D)})}function At(E){return function tn(E){return 1===E.registrationStatus&&E.registrationTime+Ce<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function xn(){return(xn=(0,F.Z)(function*({appConfig:E,heartbeatServiceProvider:D},A){const B=function zt(E,{fid:D}){return`${Jt(E)}/${D}/authTokens:generate`}(E,A),K=function ni(E,{refreshToken:D}){const A=lr(E);return A.append("Authorization",function xo(E){return`${Ye} ${E}`}(D)),A}(E,A),ee=D.getImmediate({optional:!0});if(ee){const mt=yield ee.getHeartbeatsHeader();mt&&K.append("x-firebase-client",mt)}const Qe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Re,appId:E.appId}})},Ke=yield ri(()=>fetch(B,Qe));if(Ke.ok)return Vn(yield Ke.json());throw yield On("Generate Auth Token",Ke)})).apply(this,arguments)}function Sr(E){return Rs.apply(this,arguments)}function Rs(){return Rs=(0,F.Z)(function*(E,D=!1){let A;const B=yield Kr(E.appConfig,ee=>{if(!on(ee))throw Ht.create("not-registered");const ae=ee.authToken;if(!D&&function Et(E){return 2===E.requestStatus&&!function yn(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+yt}(E)}(ae))return ee;if(1===ae.requestStatus)return A=function fe(E,D){return ie.apply(this,arguments)}(E,D),ee;{if(!navigator.onLine)throw Ht.create("app-offline");const Qe=function cn(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(ee);return A=function wt(E,D){return Ot.apply(this,arguments)}(E,Qe),Qe}});return A?yield A:B.authToken}),Rs.apply(this,arguments)}function ie(){return(ie=(0,F.Z)(function*(E,D){let A=yield Pe(E.appConfig);for(;1===A.authToken.requestStatus;)yield zn(100),A=yield Pe(E.appConfig);const B=A.authToken;return 0===B.requestStatus?Sr(E,D):B})).apply(this,arguments)}function Pe(E){return Kr(E,D=>{if(!on(D))throw Ht.create("not-registered");return function Yr(E){return 1===E.requestStatus&&E.requestTime+Ce<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ot(){return Ot=(0,F.Z)(function*(E,D){try{const A=yield function Pt(E,D){return xn.apply(this,arguments)}(E,D),B=Object.assign(Object.assign({},D),{authToken:A});return yield Bn(E.appConfig,B),A}catch(A){if(!St(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const B=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Bn(E.appConfig,B)}else yield Jn(E.appConfig);throw A}}),Ot.apply(this,arguments)}function on(E){return void 0!==E&&2===E.registrationStatus}function ml(){return(ml=(0,F.Z)(function*(E){const D=E,{installationEntry:A,registrationPromise:B}=yield q(D);return B?B.catch(console.error):Sr(D).catch(console.error),A.fid})).apply(this,arguments)}function Ro(){return Ro=(0,F.Z)(function*(E,D=!1){const A=E;return yield function xr(E){return nt.apply(this,arguments)}(A),(yield Sr(A,D)).token}),Ro.apply(this,arguments)}function nt(){return(nt=(0,F.Z)(function*(E){const{registrationPromise:D}=yield q(E);D&&(yield D)})).apply(this,arguments)}function Mi(E){return Ht.create("missing-app-config-values",{valueName:E})}const Zt="installations",Bi=E=>{const D=E.getProvider("app").getImmediate(),A=function du(E){if(!E||!E.options)throw Mi("App Configuration");if(!E.name)throw Mi("App Name");const D=["projectId","apiKey","appId"];for(const A of D)if(!E.options[A])throw Mi(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:A,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},hu=E=>{const D=E.getProvider("app").getImmediate(),A=(0,se._getProvider)(D,Zt).getImmediate();return{getId:()=>function Ar(E){return ml.apply(this,arguments)}(A),getToken:K=>function Cp(E){return Ro.apply(this,arguments)}(A,K)}};(function to(){(0,se._registerComponent)(new ce.wA(Zt,Bi,"PUBLIC")),(0,se._registerComponent)(new ce.wA("installations-internal",hu,"PRIVATE"))})(),(0,se.registerVersion)(me,ge),(0,se.registerVersion)(me,ge,"esm2017");const _r="@firebase/remote-config",Qr=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class e_{constructor(D,A,B,K){this.client=D,this.storage=A,this.storageCache=B,this.logger=K}isCachedDataFresh(D,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-A,K=B<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var A=this;return(0,F.Z)(function*(){const[B,K]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(K&&A.isCachedDataFresh(D.cacheMaxAgeMillis,B))return K;D.eTag=K&&K.eTag;const ee=yield A.client.fetch(D),ae=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&ae.push(A.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(ae),ee})()}}function Qd(E=navigator){return E.languages&&E.languages[0]||E.language}class Dp{constructor(D,A,B,K,ee,ae){this.firebaseInstallations=D,this.sdkVersion=A,this.namespace=B,this.projectId=K,this.apiKey=ee,this.appId=ae}fetch(D){var A=this;return(0,F.Z)(function*(){const[B,K]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ke={sdk_version:A.sdkVersion,app_instance_id:B,app_instance_id_token:K,app_id:A.appId,language_code:Qd()},mt={method:"POST",headers:Qe,body:JSON.stringify(Ke)},Vt=fetch(ae,mt),Ut=new Promise((kr,vs)=>{D.signal.addEventListener(()=>{const ws=new Error("The operation was aborted.");ws.name="AbortError",vs(ws)})});let Gr;try{yield Promise.race([Vt,Ut]),Gr=yield Vt}catch(kr){let vs="fetch-client-network";throw"AbortError"===kr?.name&&(vs="fetch-timeout"),Qr.create(vs,{originalErrorMessage:kr?.message})}let Tn=Gr.status;const Kt=Gr.headers.get("ETag")||void 0;let ys,Uu;if(200===Gr.status){let kr;try{kr=yield Gr.json()}catch(vs){throw Qr.create("fetch-client-parse",{originalErrorMessage:vs?.message})}ys=kr.entries,Uu=kr.state}if("INSTANCE_STATE_UNSPECIFIED"===Uu?Tn=500:"NO_CHANGE"===Uu?Tn=304:("NO_TEMPLATE"===Uu||"EMPTY_CONFIG"===Uu)&&(ys={}),304!==Tn&&200!==Tn)throw Qr.create("fetch-status",{httpStatus:Tn});return{status:Tn,eTag:Kt,config:ys}})()}}class Xd{constructor(D,A){this.client=D,this.storage=A}fetch(D){var A=this;return(0,F.Z)(function*(){const B=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(D,B)})()}attemptFetch(D,{throttleEndTimeMillis:A,backoffCount:B}){var K=this;return(0,F.Z)(function*(){yield function Jd(E,D){return new Promise((A,B)=>{const K=Math.max(D-Date.now(),0),ee=setTimeout(A,K);E.addEventListener(()=>{clearTimeout(ee),B(Qr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,A);try{const ee=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function t_(E){if(!(E instanceof le.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ee))throw ee;const ae={throttleEndTimeMillis:Date.now()+(0,le.$s)(B),backoffCount:B+1};return yield K.storage.setThrottleMetadata(ae),K.attemptFetch(D,ae)}})()}}class Tp{constructor(D,A,B,K,ee){this.app=D,this._client=A,this._storageCache=B,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function io(E,D){const A=E.target.error||void 0;return Qr.create(D,{originalErrorMessage:A&&A?.message})}const Oo="app_namespace_store";class nh{constructor(D,A,B,K=function Ap(){return new Promise((E,D)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=B=>{D(io(B,"storage-open"))},A.onsuccess=B=>{E(B.target.result)},A.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(Oo,{keyPath:"compositeKey"})}}catch(A){D(Qr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=D,this.appName=A,this.namespace=B,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var A=this;return(0,F.Z)(function*(){const B=yield A.openDbPromise;return new Promise((K,ee)=>{const Qe=B.transaction([Oo],"readonly").objectStore(Oo),Ke=A.createCompositeKey(D);try{const mt=Qe.get(Ke);mt.onerror=Vt=>{ee(io(Vt,"storage-get"))},mt.onsuccess=Vt=>{const Ut=Vt.target.result;K(Ut?Ut.value:void 0)}}catch(mt){ee(Qr.create("storage-get",{originalErrorMessage:mt?.message}))}})})()}set(D,A){var B=this;return(0,F.Z)(function*(){const K=yield B.openDbPromise;return new Promise((ee,ae)=>{const Ke=K.transaction([Oo],"readwrite").objectStore(Oo),mt=B.createCompositeKey(D);try{const Vt=Ke.put({compositeKey:mt,value:A});Vt.onerror=Ut=>{ae(io(Ut,"storage-set"))},Vt.onsuccess=()=>{ee()}}catch(Vt){ae(Qr.create("storage-set",{originalErrorMessage:Vt?.message}))}})})()}delete(D){var A=this;return(0,F.Z)(function*(){const B=yield A.openDbPromise;return new Promise((K,ee)=>{const Qe=B.transaction([Oo],"readwrite").objectStore(Oo),Ke=A.createCompositeKey(D);try{const mt=Qe.delete(Ke);mt.onerror=Vt=>{ee(io(Vt,"storage-delete"))},mt.onsuccess=()=>{K()}}catch(mt){ee(Qr.create("storage-delete",{originalErrorMessage:mt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class ks{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const A=D.storage.getLastFetchStatus(),B=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),ee=yield A;ee&&(D.lastFetchStatus=ee);const ae=yield B;ae&&(D.lastSuccessfulFetchTimestampMillis=ae);const Qe=yield K;Qe&&(D.activeConfig=Qe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function ih(){return vl.apply(this,arguments)}function vl(){return(vl=(0,F.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function pa(){(0,se._registerComponent)(new ce.wA("remote-config",function E(D,{instanceIdentifier:A}){const B=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Qr.create("registration-window");if(!(0,le.hl)())throw Qr.create("indexed-db-unavailable");const{projectId:ee,apiKey:ae,appId:Qe}=B.options;if(!ee)throw Qr.create("registration-project-id");if(!ae)throw Qr.create("registration-api-key");if(!Qe)throw Qr.create("registration-app-id");const Ke=new nh(Qe,B.name,A=A||"firebase"),mt=new ks(Ke),Vt=new Ee.Yd(_r);Vt.logLevel=Ee.in.ERROR;const Ut=new Dp(K,se.SDK_VERSION,A,ee,ae,Qe),Gr=new Xd(Ut,Ke),Tn=new e_(Gr,Ke,mt,Vt),Kt=new Tp(B,Tn,mt,Ke,Vt);return function ui(E){const D=(0,le.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Kt),Kt},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(_r,"0.4.4"),(0,se.registerVersion)(_r,"0.4.4","esm2017")}();const xp=(E,D)=>D.some(A=>E instanceof A);let so,Ic;const ga=new WeakMap,Po=new WeakMap,jn=new WeakMap,mu=new WeakMap,El=new WeakMap;let Lo={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Po.get(E);if("objectStoreNames"===D)return E.objectStoreNames||jn.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return li(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function bl(E){return"function"==typeof E?function Mp(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Rp(){return Ic||(Ic=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Mr(this),D),li(ga.get(this))}:function(...D){return li(E.apply(Mr(this),D))}:function(D,...A){const B=E.call(Mr(this),D,...A);return jn.set(B,D.sort?D.sort():[D]),li(B)}}(E):(E instanceof IDBTransaction&&function Fo(E){if(Po.has(E))return;const D=new Promise((A,B)=>{const K=()=>{E.removeEventListener("complete",ee),E.removeEventListener("error",ae),E.removeEventListener("abort",ae)},ee=()=>{A(),K()},ae=()=>{B(E.error||new DOMException("AbortError","AbortError")),K()};E.addEventListener("complete",ee),E.addEventListener("error",ae),E.addEventListener("abort",ae)});Po.set(E,D)}(E),xp(E,function wl(){return so||(so=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Lo):E)}function li(E){if(E instanceof IDBRequest)return function yr(E){const D=new Promise((A,B)=>{const K=()=>{E.removeEventListener("success",ee),E.removeEventListener("error",ae)},ee=()=>{A(li(E.result)),K()},ae=()=>{B(E.error),K()};E.addEventListener("success",ee),E.addEventListener("error",ae)});return D.then(A=>{A instanceof IDBCursor&&ga.set(A,E)}).catch(()=>{}),El.set(D,E),D}(E);if(mu.has(E))return mu.get(E);const D=bl(E);return D!==E&&(mu.set(E,D),El.set(D,E)),D}const Mr=E=>El.get(E);function _u(E,D,{blocked:A,upgrade:B,blocking:K,terminated:ee}={}){const ae=indexedDB.open(E,D),Qe=li(ae);return B&&ae.addEventListener("upgradeneeded",Ke=>{B(li(ae.result),Ke.oldVersion,Ke.newVersion,li(ae.transaction))}),A&&ae.addEventListener("blocked",()=>A()),Qe.then(Ke=>{ee&&Ke.addEventListener("close",()=>ee()),K&&Ke.addEventListener("versionchange",()=>K())}).catch(()=>{}),Qe}function oo(E,{blocked:D}={}){const A=indexedDB.deleteDatabase(E);return D&&A.addEventListener("blocked",()=>D()),li(A).then(()=>{})}const sh=["get","getKey","getAll","getAllKeys","count"],Ps=["put","add","delete","clear"],yu=new Map;function ma(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(yu.get(D))return yu.get(D);const A=D.replace(/FromIndex$/,""),B=D!==A,K=Ps.includes(A);if(!(A in(B?IDBIndex:IDBObjectStore).prototype)||!K&&!sh.includes(A))return;const ee=function(){var ae=(0,F.Z)(function*(Qe,...Ke){const mt=this.transaction(Qe,K?"readwrite":"readonly");let Vt=mt.store;return B&&(Vt=Vt.index(Ke.shift())),(yield Promise.all([Vt[A](...Ke),K&&mt.done]))[0]});return function(Ke){return ae.apply(this,arguments)}}();return yu.set(D,ee),ee}!function $r(E){Lo=E(Lo)}(E=>({...E,get:(D,A,B)=>ma(D,A)||E.get(D,A,B),has:(D,A)=>!!ma(D,A)||E.has(D,A)}));const Lt="/firebase-messaging-sw.js",Il="/firebase-cloud-messaging-push-scope",Np="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Cc="https://fcmregistrations.googleapis.com/v1",Dc="google.c.a.c_id",Tc="google.c.a.c_l",oh="google.c.a.ts",ah="google.c.a.e";var pe=(()=>{return(E=pe||(pe={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",pe;var E})();function $t(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sc(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(A),K=new Uint8Array(B.length);for(let ee=0;ee<B.length;++ee)K[ee]=B.charCodeAt(ee);return K}const vu="fcm_token_details_db",Xn=5,uh="fcm_token_object_Store";function Hi(){return Hi=(0,F.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(vu))return null;let D=null;return(yield _u(vu,Xn,{upgrade:(B=(0,F.Z)(function*(K,ee,ae,Qe){var Ke;if(ee<2||!K.objectStoreNames.contains(uh))return;const mt=Qe.objectStore(uh),Vt=yield mt.index("fcmSenderId").get(E);if(yield mt.clear(),Vt)if(2===ee){const Ut=Vt;if(!Ut.auth||!Ut.p256dh||!Ut.endpoint)return;D={token:Ut.fcmToken,createTime:null!==(Ke=Ut.createTime)&&void 0!==Ke?Ke:Date.now(),subscriptionOptions:{auth:Ut.auth,p256dh:Ut.p256dh,endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:"string"==typeof Ut.vapidKey?Ut.vapidKey:$t(Ut.vapidKey)}}}else if(3===ee){const Ut=Vt;D={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:$t(Ut.auth),p256dh:$t(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:$t(Ut.vapidKey)}}}else if(4===ee){const Ut=Vt;D={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:$t(Ut.auth),p256dh:$t(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:$t(Ut.vapidKey)}}}}),function(ee,ae,Qe,Ke){return B.apply(this,arguments)})})).close(),yield oo(vu),yield oo("fcm_vapid_details_db"),yield oo("undefined"),function Cl(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var B}),Hi.apply(this,arguments)}const lh="firebase-messaging-database",ch=1,ao="firebase-messaging-store";let ya=null;function Hr(){return ya||(ya=_u(lh,ch,{upgrade:(E,D)=>{0===D&&E.createObjectStore(ao)}})),ya}function yi(E){return uo.apply(this,arguments)}function uo(){return uo=(0,F.Z)(function*(E){const D=hh(E),B=yield(yield Hr()).transaction(ao).objectStore(ao).get(D);if(B)return B;{const K=yield function _a(E){return Hi.apply(this,arguments)}(E.appConfig.senderId);if(K)return yield Fs(E,K),K}}),uo.apply(this,arguments)}function Fs(E,D){return gs.apply(this,arguments)}function gs(){return(gs=(0,F.Z)(function*(E,D){const A=hh(E),K=(yield Hr()).transaction(ao,"readwrite");return yield K.objectStore(ao).put(D,A),yield K.done,D})).apply(this,arguments)}function Vo(){return(Vo=(0,F.Z)(function*(E){const D=hh(E),B=(yield Hr()).transaction(ao,"readwrite");yield B.objectStore(ao).delete(D),yield B.done})).apply(this,arguments)}function hh({appConfig:E}){return E.appId}const er=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dl(E,D){return wu.apply(this,arguments)}function wu(){return(wu=(0,F.Z)(function*(E,D){const A=yield Eu(E),B=Sl(D),K={method:"POST",headers:A,body:JSON.stringify(B)};let ee;try{ee=yield(yield fetch(Ac(E.appConfig),K)).json()}catch(ae){throw er.create("token-subscribe-failed",{errorInfo:ae?.toString()})}if(ee.error)throw er.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw er.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Tl(){return(Tl=(0,F.Z)(function*(E,D){const A=yield Eu(E),B=Sl(D.subscriptionOptions),K={method:"PATCH",headers:A,body:JSON.stringify(B)};let ee;try{ee=yield(yield fetch(`${Ac(E.appConfig)}/${D.token}`,K)).json()}catch(ae){throw er.create("token-update-failed",{errorInfo:ae?.toString()})}if(ee.error)throw er.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw er.create("token-update-no-token");return ee.token})).apply(this,arguments)}function ph(E,D){return va.apply(this,arguments)}function va(){return(va=(0,F.Z)(function*(E,D){const B={method:"DELETE",headers:yield Eu(E)};try{const ee=yield(yield fetch(`${Ac(E.appConfig)}/${D}`,B)).json();if(ee.error)throw er.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(K){throw er.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function Ac({projectId:E}){return`${Cc}/projects/${E}/registrations`}function Eu(E){return xc.apply(this,arguments)}function xc(){return(xc=(0,F.Z)(function*({appConfig:E,installations:D}){const A=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Sl({p256dh:E,auth:D,endpoint:A,vapidKey:B}){const K={web:{endpoint:A,auth:D,p256dh:E}};return B!==Np&&(K.web.applicationPubKey=B),K}const gh=6048e5;function mh(){return mh=(0,F.Z)(function*(E){const D=yield function i_(E,D){return _h.apply(this,arguments)}(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:$t(D.getKey("auth")),p256dh:$t(D.getKey("p256dh"))},B=yield yi(E.firebaseDependencies);if(B){if(function s_(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(B.subscriptionOptions,A))return Date.now()>=B.createTime+gh?function Fn(E,D){return Mc.apply(this,arguments)}(E,{token:B.token,createTime:Date.now(),subscriptionOptions:A}):B.token;try{yield ph(E.firebaseDependencies,B.token)}catch(K){console.warn(K)}return wa(E.firebaseDependencies,A)}return wa(E.firebaseDependencies,A)}),mh.apply(this,arguments)}function ms(){return ms=(0,F.Z)(function*(E){const D=yield yi(E.firebaseDependencies);D&&(yield ph(E.firebaseDependencies,D.token),yield function dh(E){return Vo.apply(this,arguments)}(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),ms.apply(this,arguments)}function Mc(){return Mc=(0,F.Z)(function*(E,D){try{const A=yield function fh(E,D){return Tl.apply(this,arguments)}(E.firebaseDependencies,D),B=Object.assign(Object.assign({},D),{token:A,createTime:Date.now()});return yield Fs(E.firebaseDependencies,B),A}catch(A){throw yield function Jr(E){return ms.apply(this,arguments)}(E),A}}),Mc.apply(this,arguments)}function wa(E,D){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,F.Z)(function*(E,D){const B={token:yield Dl(E,D),createTime:Date.now(),subscriptionOptions:D};return yield Fs(E,B),B.token})).apply(this,arguments)}function _h(){return(_h=(0,F.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sc(D)})})).apply(this,arguments)}function Al(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function kc(E,D){if(!D.notification)return;E.notification={};const A=D.notification.title;A&&(E.notification.title=A);const B=D.notification.body;B&&(E.notification.body=B);const K=D.notification.image;K&&(E.notification.image=K);const ee=D.notification.icon;ee&&(E.notification.icon=ee)}(D,E),function yh(E,D){D.data&&(E.data=D.data)}(D,E),function vh(E,D){var A,B,K,ee,ae;if(!(D.fcmOptions||null!==(A=D.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const Qe=null!==(K=null===(B=D.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==K?K:null===(ee=D.notification)||void 0===ee?void 0:ee.click_action;Qe&&(E.fcmOptions.link=Qe);const Ke=null===(ae=D.fcmOptions)||void 0===ae?void 0:ae.analytics_label;Ke&&(E.fcmOptions.analyticsLabel=Ke)}(D,E),D}function Ea(E,D){const A=[];for(let B=0;B<E.length;B++)A.push(E.charAt(B)),B<D.length&&A.push(D.charAt(B));return A.join("")}function Ls(E){return er.create("missing-app-config-values",{valueName:E})}Ea("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ea("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class o_{constructor(D,A,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function bu(E){if(!E||!E.options)throw Ls("App Configuration Object");if(!E.name)throw Ls("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const B of D)if(!A[B])throw Ls(B);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:A,analyticsProvider:B}}_delete(){return Promise.resolve()}}function kp(E){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,F.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Lt,{scope:Il}),E.swRegistration.update().catch(()=>{})}catch(D){throw er.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Vs(){return(Vs=(0,F.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield kp(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw er.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function Iu(){return(Iu=(0,F.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Np)})).apply(this,arguments)}function ba(){return ba=(0,F.Z)(function*(E,D){if(!navigator)throw er.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw er.create("permission-blocked");return yield function Oc(E,D){return Iu.apply(this,arguments)}(E,D?.vapidKey),yield function wh(E,D){return Vs.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function Rc(E){return mh.apply(this,arguments)}(E)}),ba.apply(this,arguments)}function lo(){return(lo=(0,F.Z)(function*(E,D,A){const B=function Uo(E){switch(E){case pe.NOTIFICATION_CLICKED:return"notification_open";case pe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:A[Dc],message_name:A[Tc],message_time:A[oh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bo(){return Bo=(0,F.Z)(function*(E,D){const A=D.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===pe.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Al(A)):E.onMessageHandler.next(Al(A)));const B=A.data;(function xl(E){return"object"==typeof E&&!!E&&Dc in E})(B)&&"1"===B[ah]&&(yield function Eh(E,D,A){return lo.apply(this,arguments)}(E,A.messageType,B))}),Bo.apply(this,arguments)}const Ca="@firebase/messaging",Du=E=>{const D=new o_(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Ia(E,D){return Bo.apply(this,arguments)}(D,A)),D},Pc=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:B=>function Ml(E,D){return ba.apply(this,arguments)}(D,B)}};function Op(){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,F.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Tu(){(0,se._registerComponent)(new ce.wA("messaging",Du,"PUBLIC")),(0,se._registerComponent)(new ce.wA("messaging-internal",Pc,"PRIVATE")),(0,se.registerVersion)(Ca,"0.12.4"),(0,se.registerVersion)(Ca,"0.12.4","esm2017")}();const co="analytics",kl="firebase_id",Ch="origin",Su=6e4,Dh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ol="https://www.googletagmanager.com/gtag/js",vr=new Ee.Yd("@firebase/analytics"),$n=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Pp(E){if(!E.startsWith(Ol)){const D=$n.create("invalid-gtag-resource",{gtagURL:E});return vr.warn(D.message),""}return E}function ho(E){return Promise.all(E.map(D=>D.catch(A=>A)))}function fo(){return(fo=(0,F.Z)(function*(E,D,A,B,K,ee){const ae=B[K];try{if(ae)yield D[ae];else{const Ke=(yield ho(A)).find(mt=>mt.measurementId===K);Ke&&(yield D[Ke.appId])}}catch(Qe){vr.error(Qe)}E("config",K,ee)})).apply(this,arguments)}function jo(){return(jo=(0,F.Z)(function*(E,D,A,B,K){try{let ee=[];if(K&&K.send_to){let ae=K.send_to;Array.isArray(ae)||(ae=[ae]);const Qe=yield ho(A);for(const Ke of ae){const mt=Qe.find(Ut=>Ut.measurementId===Ke),Vt=mt&&D[mt.appId];if(!Vt){ee=[];break}ee.push(Vt)}}0===ee.length&&(ee=Object.values(D)),yield Promise.all(ee),E("event",B,K||{})}catch(ee){vr.error(ee)}})).apply(this,arguments)}const Fl=30,Ho=new class Th{constructor(D={},A=1e3){this.throttleMetadata=D,this.intervalMillis=A}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,A){this.throttleMetadata[D]=A}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Lp(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function dn(){return(dn=(0,F.Z)(function*(E){var D;const{appId:A,apiKey:B}=E,K={method:"GET",headers:Lp(B)},ee=Dh.replace("{app-id}",A),ae=yield fetch(ee,K);if(200!==ae.status&&304!==ae.status){let Qe="";try{const Ke=yield ae.json();null!==(D=Ke.error)&&void 0!==D&&D.message&&(Qe=Ke.error.message)}catch{}throw $n.create("config-fetch-failed",{httpStatus:ae.status,responseMessage:Qe})}return ae.json()})).apply(this,arguments)}function Ah(){return(Ah=(0,F.Z)(function*(E,D=Ho,A){const{appId:B,apiKey:K,measurementId:ee}=E.options;if(!B)throw $n.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:B};throw $n.create("no-api-key")}const ae=D.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Vv;return setTimeout((0,F.Z)(function*(){Qe.abort()}),void 0!==A?A:Su),Hc({appId:B,apiKey:K,measurementId:ee},ae,Qe,D)})).apply(this,arguments)}function Hc(E,D,A){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,F.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:A},B,K=Ho){var ee;const{appId:ae,measurementId:Qe}=E;try{yield function Vp(E,D){return new Promise((A,B)=>{const K=Math.max(D-Date.now(),0),ee=setTimeout(A,K);E.addEventListener(()=>{clearTimeout(ee),B($n.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(B,D)}catch(Ke){if(Qe)return vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${Ke?.message}]`),{appId:ae,measurementId:Qe};throw Ke}try{const Ke=yield function Sh(E){return dn.apply(this,arguments)}(E);return K.deleteThrottleMetadata(ae),Ke}catch(Ke){const mt=Ke;if(!function Lv(E){if(!(E instanceof le.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(mt)){if(K.deleteThrottleMetadata(ae),Qe)return vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${mt?.message}]`),{appId:ae,measurementId:Qe};throw Ke}const Vt=503===Number(null===(ee=mt?.customData)||void 0===ee?void 0:ee.httpStatus)?(0,le.$s)(A,K.intervalMillis,Fl):(0,le.$s)(A,K.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+Vt,backoffCount:A+1};return K.setThrottleMetadata(ae,Ut),vr.debug(`Calling attemptFetch again in ${Vt} millis`),Hc(E,Ut,B,K)}}),Gc.apply(this,arguments)}class Vv{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Go,Wc;function Up(){return(Up=(0,F.Z)(function*(E,D,A,B,K){if(K&&K.global)E("event",A,B);else{const ee=yield D;E("event",A,Object.assign(Object.assign({},B),{send_to:ee}))}})).apply(this,arguments)}function hn(){return(hn=(0,F.Z)(function*(){if(!(0,le.hl)())return vr.warn($n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(E){return vr.warn($n.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function rt(){return rt=(0,F.Z)(function*(E,D,A,B,K,ee,ae){var Qe;const Ke=function $c(E){return Ah.apply(this,arguments)}(E);Ke.then(Tn=>{A[Tn.measurementId]=Tn.appId,E.options.measurementId&&Tn.measurementId!==E.options.measurementId&&vr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Tn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Tn=>vr.error(Tn)),D.push(Ke);const mt=function Gi(){return hn.apply(this,arguments)}().then(Tn=>{if(Tn)return B.getId()}),[Vt,Ut]=yield Promise.all([Ke,mt]);(function Sa(E){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(Ol)&&A.src.includes(E))return A;return null})(ee)||function Ta(E,D){const A=function Pl(E,D){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,D)),A}("firebase-js-sdk-policy",{createScriptURL:Pp}),B=document.createElement("script"),K=`${Ol}?l=${E}&id=${D}`;B.src=A?A?.createScriptURL(K):K,B.async=!0,document.head.appendChild(B)}(ee,Vt.measurementId),Wc&&(K("consent","default",Wc),function Vl(E){Wc=E}(void 0)),K("js",new Date);const Gr=null!==(Qe=ae?.config)&&void 0!==Qe?Qe:{};return Gr[Ch]="firebase",Gr.update=!0,null!=Ut&&(Gr[kl]=Ut),K("config",Vt.measurementId,Gr),Go&&(K("set",Go),function Zc(E){Go=E}(void 0)),Vt.measurementId}),rt.apply(this,arguments)}class os{constructor(D){this.app=D}_delete(){return delete nr[this.app.options.appId],Promise.resolve()}}let nr={},Rh=[];const Mu={};let Mh,qi,Xr="dataLayer",Kc="gtag",go=!1;function qo(E,D,A){!function zo(){const E=[];if((0,le.ru)()&&E.push("This is a browser extension environment."),(0,le.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((B,K)=>`(${K+1}) ${B}`).join(" "),A=$n.create("invalid-analytics-context",{errorInfo:D});vr.warn(A.message)}}();const B=E.options.appId;if(!B)throw $n.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw $n.create("no-api-key");vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=nr[B])throw $n.create("already-exists",{id:B});if(!go){!function Uc(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(Xr);const{wrappedGtag:ee,gtagCore:ae}=function $o(E,D,A,B,K){let ee=function(...ae){window[B].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function Au(E,D,A,B){function ee(){return ee=(0,F.Z)(function*(ae,...Qe){try{if("event"===ae){const[Ke,mt]=Qe;yield function Fp(E,D,A,B,K){return jo.apply(this,arguments)}(E,D,A,Ke,mt)}else if("config"===ae){const[Ke,mt]=Qe;yield function Bc(E,D,A,B,K,ee){return fo.apply(this,arguments)}(E,D,A,B,Ke,mt)}else if("consent"===ae){const[Ke]=Qe;E("consent","update",Ke)}else if("get"===ae){const[Ke,mt,Vt]=Qe;E("get",Ke,mt,Vt)}else if("set"===ae){const[Ke]=Qe;E("set",Ke)}else E(ae,...Qe)}catch(Ke){vr.error(Ke)}}),ee.apply(this,arguments)}return function K(ae){return ee.apply(this,arguments)}}(ee,E,D,A),{gtagCore:ee,wrappedGtag:window[K]}}(nr,Rh,Mu,Xr,Kc);qi=ee,Mh=ae,go=!0}return nr[B]=function zi(E,D,A,B,K,ee,ae){return rt.apply(this,arguments)}(E,Rh,Mu,D,Mh,Xr,A),new os(E)}function Nh(){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,F.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const xa="@firebase/analytics";!function Xc(){(0,se._registerComponent)(new ce.wA(co,(D,{options:A})=>qo(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,se._registerComponent)(new ce.wA("analytics-internal",function E(D){try{const A=D.getProvider(co).getImmediate();return{logEvent:(B,K,ee)=>function Bp(E,D,A,B){E=(0,le.m9)(E),function Uv(E,D,A,B,K){return Up.apply(this,arguments)}(qi,nr[E.app.options.appId],D,A,B).catch(K=>vr.error(K))}(A,B,K,ee)}}catch(A){throw $n.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,se.registerVersion)(xa,"0.10.0"),(0,se.registerVersion)(xa,"0.10.0","esm2017")}();var ed=j(4408),ki=j(7565);const Nr=new class td extends ki.v{}(class Pu extends ed.o{constructor(D,A){super(D,A),this.scheduler=D,this.work=A}schedule(D,A=0){return A>0?super.schedule(D,A):(this.delay=A,this.state=D,this.scheduler.flush(this),this)}execute(D,A){return A>0||this.closed?super.execute(D,A):this._execute(D,A)}requestAsyncId(D,A,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(D,A,B):(D.flush(this),0)}});var jp=j(4986),Rn=j(8505),Oi=j(5363),Ra=j(9468);const Zi=new d.GfV("7.5.0"),rr="__angularfire_symbol__analyticsIsSupportedValue",Lu="__angularfire_symbol__analyticsIsSupported",jl="__angularfire_symbol__remoteConfigIsSupportedValue",Ma="__angularfire_symbol__remoteConfigIsSupported",as="__angularfire_symbol__messagingIsSupportedValue",mo="__angularfire_symbol__messagingIsSupported";function $l(E,D,A){if(D){if(1===D.length)return D[0];const ee=D.filter(ae=>ae.app===A);if(1===ee.length)return ee[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[Lu]||(globalThis[Lu]=Nh().then(E=>globalThis[rr]=E).catch(()=>globalThis[rr]=!1)),globalThis[mo]||(globalThis[mo]=Op().then(E=>globalThis[as]=E).catch(()=>globalThis[as]=!1)),globalThis[Ma]||(globalThis[Ma]=ih().then(E=>globalThis[jl]=E).catch(()=>globalThis[jl]=!1));const ka=(E,D)=>{const A=D?[D]:(0,G.C6)(),B=[];return A.forEach(K=>{K.container.getProvider(E).instances.forEach(ae=>{B.includes(ae)||B.push(ae)})}),B};function Zo(){}class nd{constructor(D,A=Nr){this.zone=D,this.delegate=A}now(){return this.delegate.now()}schedule(D,A,B){const K=this.zone;return this.delegate.schedule(function(ae){K.runGuarded(()=>{D.apply(this,[ae])})},A,B)}}class Vu{constructor(D){this.zone=D,this.task=null}call(D,A){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zo,{},Zo,Zo)),A.pipe((0,Rn.b)({next:B,complete:B,error:B})).subscribe(D).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rt=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new nd(Zone.current)),this.insideAngular=A.run(()=>new nd(Zone.current,jp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(d.LFG(d.R0b))},E.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function wi(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Oh(E){return E.pipe((0,Oi.Q)(wi().outsideAngular))}function us(E){return wi(),function Fh(E){return function(A){return(A=A.lift(new Vu(E.ngZone))).pipe((0,Ra.R)(E.outsideAngular),(0,Oi.Q)(E.insideAngular))}}(wi())(E)}},1389:(bt,Se,j)=>{j.d(Se,{$:()=>Lt,A:()=>W,D:()=>Ae,I:()=>Wn,J:()=>Bi,L:()=>ps,N:()=>Kr,P:()=>zi,Q:()=>nh,R:()=>Ll,U:()=>rh,V:()=>ih,W:()=>vl,X:()=>Os,Y:()=>wl,Z:()=>Rp,_:()=>El,a:()=>vi,a0:()=>Np,a1:()=>Dc,a2:()=>n_,a3:()=>uh,a4:()=>Hi,a5:()=>lh,a6:()=>ao,a7:()=>Hr,a8:()=>uo,a9:()=>gs,aA:()=>ue,aB:()=>jl,aC:()=>Jn,aD:()=>ai,aE:()=>Oi,aF:()=>Ou,aG:()=>ku,aH:()=>vn,aL:()=>_s,aO:()=>so,aa:()=>dh,ab:()=>hh,ac:()=>r_,ad:()=>fh,ae:()=>ph,af:()=>Ac,ai:()=>gh,aj:()=>mh,ak:()=>Jr,an:()=>Mp,ao:()=>kc,aq:()=>Iu,ar:()=>Ca,as:()=>Mt,at:()=>At,au:()=>Ie,av:()=>Te,aw:()=>Gr,ax:()=>Er,ay:()=>tn,az:()=>De,b:()=>Nl,c:()=>qi,d:()=>qo,e:()=>Yc,f:()=>xa,g:()=>td,h:()=>ed,i:()=>jc,j:()=>jp,k:()=>kr,l:()=>Ru,m:()=>Hp,p:()=>_e,r:()=>xh,s:()=>po,u:()=>Gi});var d=j(5861),G=j(2090),F=j(6881),se=j(655),le=j(1877),ce=j(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new le.Yd("@firebase/auth");function He(w,...g){Me.logLevel<=le.in.ERROR&&Me.error(`Auth (${F.SDK_VERSION}): ${w}`,...g)}function Te(w,...g){throw Le(w,...g)}function De(w,...g){return Le(w,...g)}function Ne(w,g,_){const I=Object.assign(Object.assign({},Je()),{[g]:_});return new G.LL("auth","Firebase",I).create(g,{appName:w.name})}function ze(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Te(w,"argument-error"),Ne(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(w,...g){if("string"!=typeof w){const _=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return ct.create(w,...g)}function ue(w,g,..._){if(!w)throw Le(g,..._)}function ot(w){const g="INTERNAL ASSERTION FAILED: "+w;throw He(g),new Error(g)}function Mt(w,g){w||ot(g)}function lt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function rn(){return"http:"===pt()||"https:"===pt()}function pt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ce{constructor(g,_){this.shortDelay=g,this.longDelay=_,Mt(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function me(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(rn()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Re(w,g){Mt(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ye{static initialize(g,_,I){this.fetchImpl=g,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const We={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yt=new Ce(3e4,6e4);function Ze(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Bt(w,g,_,I){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,d.Z)(function*(w,g,_,I,R={}){return Ht(w,R,(0,d.Z)(function*(){let O={},J={};I&&("GET"===g?J=I:O={body:JSON.stringify(I)});const he=(0,G.xO)(Object.assign({key:w.config.apiKey},J)).slice(1),je=yield w._getAdditionalHeaders();return je["Content-Type"]="application/json",w.languageCode&&(je["X-Firebase-Locale"]=w.languageCode),Ye.fetch()(On(w,w.config.apiHost,_,he),Object.assign({method:g,headers:je,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ht(w,g,_){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(w,g,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},We),g);try{const R=new Wr(w),O=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const J=yield O.json();if("needConfirmation"in J)throw lr(w,"account-exists-with-different-credential",J);if(O.ok&&!("errorMessage"in J))return J;{const he=O.ok?J.errorMessage:J.error.message,[je,Xe]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw lr(w,"credential-already-in-use",J);if("EMAIL_EXISTS"===je)throw lr(w,"email-already-in-use",J);if("USER_DISABLED"===je)throw lr(w,"user-disabled",J);const It=I[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Ne(w,It,Xe);Te(w,It)}}catch(R){if(R instanceof G.ZR)throw R;Te(w,"network-request-failed",{message:String(R)})}})).apply(this,arguments)}function Jt(w,g,_,I){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,d.Z)(function*(w,g,_,I,R={}){const O=yield Bt(w,g,_,I,R);return"mfaPendingCredential"in O&&Te(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function On(w,g,_,I){const R=`${g}${_}?${I}`;return w.config.emulator?Re(w.config,R):`${w.config.apiScheme}://${R}`}class Wr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(De(this.auth,"network-request-failed")),yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(w,g,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const R=De(w,g,I);return R.customData._tokenResponse=_,R}function ri(){return(ri=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ui(){return(Ui=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function vt(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Kn(){return(Kn=(0,d.Z)(function*(w,g=!1){const _=(0,G.m9)(w),I=yield _.getIdToken(g),R=ii(I);ue(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const O="object"==typeof R.firebase?R.firebase:void 0,J=O?.sign_in_provider;return{claims:R,token:I,authTime:vt(Zr(R.auth_time)),issuedAtTime:vt(Zr(R.iat)),expirationTime:vt(Zr(R.exp)),signInProvider:J||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Zr(w){return 1e3*Number(w)}function ii(w){const[g,_,I]=w.split(".");if(void 0===g||void 0===_||void 0===I)return He("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,G.tV)(_);return R?JSON.parse(R):(He("Failed to decode base64 JWT payload"),null)}catch(R){return He("Caught error parsing JWT payload as JSON",R?.toString()),null}}function Xt(w,g){return gt.apply(this,arguments)}function gt(){return(gt=(0,d.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(I){throw I instanceof G.ZR&&function jt({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Yn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),I)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class Ur{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=vt(this.lastLoginAt),this.creationTime=vt(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Un(w){return si.apply(this,arguments)}function si(){return si=(0,d.Z)(function*(w){var g;const _=w.auth,I=yield w.getIdToken(),R=yield Xt(w,function xo(w,g){return Gn.apply(this,arguments)}(_,{idToken:I}));ue(R?.users.length,_,"internal-error");const O=R.users[0];w._notifyReloadListener(O);const J=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?function Ri(w){return w.map(g=>{var{providerId:_}=g,I=(0,se._T)(g,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(O.providerUserInfo):[],he=function en(w,g){return[...w.filter(I=>!g.some(R=>R.providerId===I.providerId)),...g]}(w.providerData,J),It=!!w.isAnonymous&&!(w.email&&O.passwordHash||he?.length),Yt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:he,metadata:new Ur(O.createdAt,O.lastLoginAt),isAnonymous:It};Object.assign(w,Yt)}),si.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(w){const g=(0,G.m9)(w);yield Un(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(w,g){const _=yield Ht(w,{},(0,d.Z)(function*(){const I=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:O}=w.config,J=On(w,R,"/v1/token",`key=${O}`),he=yield w._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Ye.fetch()(J,{method:"POST",headers:he,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Gt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ue(g.idToken,"internal-error"),ue(typeof g.idToken<"u","internal-error"),ue(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function fn(w){const g=ii(w);return ue(g,"internal-error"),ue(typeof g.exp<"u","internal-error"),ue(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var I=this;return(0,d.Z)(function*(){return ue(!I.accessToken||I.refreshToken,g,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var I=this;return(0,d.Z)(function*(){const{accessToken:R,refreshToken:O,expiresIn:J}=yield function sn(w,g){return mi.apply(this,arguments)}(g,_);I.updateTokensAndExpiration(R,O,Number(J))})()}updateTokensAndExpiration(g,_,I){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,_){const{refreshToken:I,accessToken:R,expirationTime:O}=_,J=new Gt;return I&&(ue("string"==typeof I,"internal-error",{appName:g}),J.refreshToken=I),R&&(ue("string"==typeof R,"internal-error",{appName:g}),J.accessToken=R),O&&(ue("number"==typeof O,"internal-error",{appName:g}),J.expirationTime=O),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Gt,this.toJSON())}_performRefresh(){return ot("not implemented")}}function Qn(w,g){ue("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Bn{constructor(g){var{uid:_,auth:I,stsTokenManager:R}=g,O=(0,se._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Ur(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const I=yield Xt(_,_.stsTokenManager.getToken(_.auth,g));return ue(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(g){return function fs(w){return Kn.apply(this,arguments)}(this,g)}reload(){return function qn(w){return mr.apply(this,arguments)}(this)}_assign(g){this!==g&&(ue(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const _=new Bn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(g){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var I=this;return(0,d.Z)(function*(){let R=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield Un(I)),yield I.auth._persistUserIfCurrent(I),R&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield Xt(g,function ni(w,g){return ri.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var I,R,O,J,he,je,Xe,It;const Yt=null!==(I=_.displayName)&&void 0!==I?I:void 0,Ei=null!==(R=_.email)&&void 0!==R?R:void 0,Ko=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Pa=null!==(J=_.photoURL)&&void 0!==J?J:void 0,rd=null!==(he=_.tenantId)&&void 0!==he?he:void 0,Us=null!==(je=_._redirectEventId)&&void 0!==je?je:void 0,Zp=null!==(Xe=_.createdAt)&&void 0!==Xe?Xe:void 0,Bh=null!==(It=_.lastLoginAt)&&void 0!==It?It:void 0,{uid:id,emailVerified:Fa,isAnonymous:jh,providerData:$h,stsTokenManager:ql}=_;ue(id&&ql,g,"internal-error");const Hh=Gt.fromJSON(this.name,ql);ue("string"==typeof id,g,"internal-error"),Qn(Yt,g.name),Qn(Ei,g.name),ue("boolean"==typeof Fa,g,"internal-error"),ue("boolean"==typeof jh,g,"internal-error"),Qn(Ko,g.name),Qn(Pa,g.name),Qn(rd,g.name),Qn(Us,g.name),Qn(Zp,g.name),Qn(Bh,g.name);const Wl=new Bn({uid:id,auth:g,email:Ei,emailVerified:Fa,displayName:Yt,isAnonymous:jh,photoURL:Pa,phoneNumber:Ko,tenantId:rd,stsTokenManager:Hh,createdAt:Zp,lastLoginAt:Bh});return $h&&Array.isArray($h)&&(Wl.providerData=$h.map(La=>Object.assign({},La))),Us&&(Wl._redirectEventId=Us),Wl}static _fromIdTokenResponse(g,_,I=!1){return(0,d.Z)(function*(){const R=new Gt;R.updateFromServerResponse(_);const O=new Bn({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:I});return yield Un(O),O})()}}const Br=new Map;function Jn(w){Mt(w instanceof Function,"Expected a class definition");let g=Br.get(w);return g?(Mt(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Br.set(w,g),g)}const Kr=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,I){var R=this;return(0,d.Z)(function*(){R.storage[_]=I})()}_get(_){var I=this;return(0,d.Z)(function*(){const R=I.storage[_];return void 0===R?null:R})()}_remove(_){var I=this;return(0,d.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function ai(w,g,_){return`firebase:${w}:${g}:${_}`}class q{constructor(g,_,I){this.persistence=g,this.auth=_,this.userKey=I;const{config:R,name:O}=this.auth;this.fullUserKey=ai(this.userKey,R.apiKey,O),this.fullPersistenceKey=ai("persistence",R.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Bn._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,I="authUser"){return(0,d.Z)(function*(){if(!_.length)return new q(Jn(Kr),g,I);const R=(yield Promise.all(_.map(function(){var Xe=(0,d.Z)(function*(It){if(yield It._isAvailable())return It});return function(It){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=R[0]||Jn(Kr);const J=ai(I,g.config.apiKey,g.name);let he=null;for(const Xe of _)try{const It=yield Xe._get(J);if(It){const Yt=Bn._fromJSON(g,It);Xe!==O&&(he=Yt),O=Xe;break}}catch{}const je=R.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&je.length?(O=je[0],he&&(yield O._set(J,he.toJSON())),yield Promise.all(_.map(function(){var Xe=(0,d.Z)(function*(It){if(It!==O)try{yield It._remove(J)}catch{}});return function(It){return Xe.apply(this,arguments)}}())),new q(O,g,I)):new q(O,g,I)})()}}function H(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Y(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(P(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(st(g))return"Blackberry";if(Nt(g))return"Webos";if(L(g))return"Safari";if((g.includes("chrome/")||k(g))&&!g.includes("edge/"))return"Chrome";if(Ie(g))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function P(w=(0,G.z$)()){return/firefox\//i.test(w)}function L(w=(0,G.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function k(w=(0,G.z$)()){return/crios\//i.test(w)}function Y(w=(0,G.z$)()){return/iemobile/i.test(w)}function Ie(w=(0,G.z$)()){return/android/i.test(w)}function st(w=(0,G.z$)()){return/blackberry/i.test(w)}function Nt(w=(0,G.z$)()){return/webos/i.test(w)}function At(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function tn(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function zt(w=(0,G.z$)()){return At(w)||Ie(w)||Nt(w)||st(w)||/windows phone/i.test(w)||Y(w)}function Rs(w,g=[]){let _;switch(w){case"Browser":_=H((0,G.z$)());break;case"Worker":_=`${H((0,G.z$)())}-${w}`;break;default:_=w}const I=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${F.SDK_VERSION}/${I}`}function ie(){return(ie=(0,d.Z)(function*(w){return(yield Bt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pe(w,g){return wt.apply(this,arguments)}function wt(){return(wt=(0,d.Z)(function*(w,g){return Bt(w,"GET","/v2/recaptchaConfig",Ze(w,g))})).apply(this,arguments)}function Ot(w){return void 0!==w&&void 0!==w.getResponse}function on(w){return void 0!==w&&void 0!==w.enterprise}class Et{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function cn(w){return new Promise((g,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=g,I.onerror=R=>{const O=De("internal-error");O.customData=R,_(O)},I.type="text/javascript",I.charset="UTF-8",function yn(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(I)})}function Yr(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Cp="NO_RECAPTCHA";class Ro{constructor(g){this.type="recaptcha-enterprise",this.auth=vn(g)}verify(g="verify",_=!1){var I=this;return(0,d.Z)(function*(){function O(){return O=(0,d.Z)(function*(he){if(!_){if(null==he.tenantId&&null!=he._agentRecaptchaConfig)return he._agentRecaptchaConfig.siteKey;if(null!=he.tenantId&&void 0!==he._tenantRecaptchaConfigs[he.tenantId])return he._tenantRecaptchaConfigs[he.tenantId].siteKey}return new Promise(function(){var je=(0,d.Z)(function*(Xe,It){Pe(he,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Yt=>{if(void 0!==Yt.recaptchaKey){const Ei=new Et(Yt);return null==he.tenantId?he._agentRecaptchaConfig=Ei:he._tenantRecaptchaConfigs[he.tenantId]=Ei,Xe(Ei.siteKey)}It(new Error("recaptcha Enterprise site key undefined"))}).catch(Yt=>{It(Yt)})});return function(Xe,It){return je.apply(this,arguments)}}())}),O.apply(this,arguments)}function J(he,je,Xe){const It=window.grecaptcha;on(It)?It.enterprise.ready(()=>{It.enterprise.execute(he,{action:g}).then(Yt=>{je(Yt)}).catch(()=>{je(Cp)})}):Xe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((he,je)=>{(function R(he){return O.apply(this,arguments)})(I.auth).then(Xe=>{if(!_&&on(window.grecaptcha))J(Xe,he,je);else{if(typeof window>"u")return void je(new Error("RecaptchaVerifier is only supported in browser"));cn("https://www.google.com/recaptcha/enterprise.js?render="+Xe).then(()=>{J(Xe,he,je)}).catch(It=>{je(It)})}}).catch(Xe=>{je(Xe)})})})()}}function xr(w,g,_){return nt.apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(w,g,_,I=!1){const R=new Ro(w);let O;try{O=yield R.verify(_)}catch{O=yield R.verify(_,!0)}const J=Object.assign({},g);return Object.assign(J,I?{captchaResp:O}:{captchaResponse:O}),Object.assign(J,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(J,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),J})).apply(this,arguments)}class Wt{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const I=O=>new Promise((J,he)=>{try{J(g(O))}catch(je){he(je)}});I.onAbort=_,this.queue.push(I);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===g)return;const I=[];try{for(const R of _.queue)yield R(g),R.onAbort&&I.push(R.onAbort)}catch(R){I.reverse();for(const O of I)try{O()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}class Pn{constructor(g,_,I,R){this.app=g,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eo(this),this.idTokenSubscription=new eo(this),this.beforeStateQueue=new Wt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(g,_){var I=this;return _&&(this._popupRedirectResolver=Jn(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var R,O;if(!I._deleted&&(I.persistenceManager=yield q.create(I,g),!I._deleted)){if(null!==(R=I._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var I;const R=yield _.assertedPersistence.getCurrentUser();let O=R,J=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,je=O?._redirectEventId,Xe=yield _.tryRedirectSignIn(g);(!he||he===je)&&Xe?.user&&(O=Xe.user,J=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(J)try{yield _.beforeStateQueue.runMiddleware(O)}catch(he){O=R,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ue(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){try{yield Un(g)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ge(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const I=g?(0,G.m9)(g):null;return I&&ue(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(g,_=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return g&&ue(I.tenantId===g.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(g)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(g),I.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(Jn(g))}))}initializeRecaptchaConfig(){var g=this;return(0,d.Z)(function*(){const _=yield Pe(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Et(_);null==g.tenantId?g._agentRecaptchaConfig=I:g._tenantRecaptchaConfigs[g.tenantId]=I,I.emailPasswordEnabled&&new Ro(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,_,I){return this.registerStateListener(this.authStateSubscription,g,_,I)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,I){return this.registerStateListener(this.idTokenSubscription,g,_,I)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var I=this;return(0,d.Z)(function*(){const R=yield I.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const I=g&&Jn(g)||_._popupRedirectResolver;ue(I,_,"argument-error"),_.redirectPersistenceManager=yield q.create(_,[Jn(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var I,R;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,I,R){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),J=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(J,this,"internal-error"),J.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,I,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Rs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var _;const I={"X-Client-Version":g.clientVersion};g.app.options.appId&&(I["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();R&&(I["X-Firebase-Client"]=R);const O=yield g._getAppCheckToken();return O&&(I["X-Firebase-AppCheck"]=O),I})()}_getAppCheckToken(){var g=this;return(0,d.Z)(function*(){var _;const I=yield null===(_=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function Oe(w,...g){Me.logLevel<=le.in.WARN&&Me.warn(`Auth (${F.SDK_VERSION}): ${w}`,...g)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function vn(w){return(0,G.m9)(w)}class eo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(_=>this.observer=_)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wn(w,g,_){const I=vn(w);ue(I._canInitEmulator,I,"emulator-config-failed"),ue(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const R=!!_?.disableWarnings,O=du(g),{host:J,port:he}=function Mi(w){const g=du(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(I);if(R){const O=R[1];return{host:O,port:Zt(I.substr(O.length+1))}}{const[O,J]=I.split(":");return{host:O,port:Zt(J)}}}(g);I.config.emulator={url:`${O}//${J}${null===he?"":`:${he}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:J,port:he,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function _l(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function du(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Zt(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Bi{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ot("not implemented")}_getIdTokenResponse(g){return ot("not implemented")}_linkToIdToken(g,_){return ot("not implemented")}_getReauthenticationResolver(g){return ot("not implemented")}}function hu(w,g){return to.apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:resetPassword",Ze(w,g))})).apply(this,arguments)}function _r(w,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ji(){return(ji=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:update",Ze(w,g))})).apply(this,arguments)}function da(w,g){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,d.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:signInWithPassword",Ze(w,g))})).apply(this,arguments)}function Dn(w,g){return $i.apply(this,arguments)}function $i(){return($i=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:sendOobCode",Ze(w,g))})).apply(this,arguments)}function fu(){return(fu=(0,d.Z)(function*(w,g){return Dn(w,g)})).apply(this,arguments)}function ha(w,g){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(w,g){return Dn(w,g)})).apply(this,arguments)}function Ns(w,g){return jr.apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(w,g){return Dn(w,g)})).apply(this,arguments)}function ui(){return(ui=(0,d.Z)(function*(w,g){return Dn(w,g)})).apply(this,arguments)}function ko(){return(ko=(0,d.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:signInWithEmailLink",Ze(w,g))})).apply(this,arguments)}function pu(){return(pu=(0,d.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:signInWithEmailLink",Ze(w,g))})).apply(this,arguments)}class _i extends Bi{constructor(g,_,I,R=null){super("password",I),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new _i(g,_,"password")}static _fromEmailAndCode(g,_,I=null){return new _i(g,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){var I;switch(_.signInMethod){case"password":const R={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=g._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const O=yield xr(g,R,"signInWithPassword");return da(g,O)}return da(g,R).catch(function(){var O=(0,d.Z)(function*(J){if("auth/missing-recaptcha-token"===J.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const he=yield xr(g,R,"signInWithPassword");return da(g,he)}return Promise.reject(J)});return function(J){return O.apply(this,arguments)}}());case"emailLink":return function ss(w,g){return ko.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Te(g,"internal-error")}})()}_linkToIdToken(g,_){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return _r(g,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function yl(w,g){return pu.apply(this,arguments)}(g,{idToken:_,email:I._email,oobCode:I._password});default:Te(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ro(w,g){return gu.apply(this,arguments)}function gu(){return(gu=(0,d.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:signInWithIdp",Ze(w,g))})).apply(this,arguments)}class ps extends Bi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new ps(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Te("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:R}=_,O=(0,se._T)(_,["providerId","signInMethod"]);if(!I||!R)return null;const J=new ps(I,R);return J.idToken=O.idToken||void 0,J.accessToken=O.accessToken||void 0,J.secret=O.secret,J.nonce=O.nonce,J.pendingToken=O.pendingToken||null,J}_getIdTokenResponse(g){return ro(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,ro(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ro(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,G.xO)(_)}return g}}function Qd(){return(Qd=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:sendVerificationCode",Ze(w,g))})).apply(this,arguments)}function Jd(){return(Jd=(0,d.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:signInWithPhoneNumber",Ze(w,g))})).apply(this,arguments)}function Xd(){return(Xd=(0,d.Z)(function*(w,g){const _=yield Jt(w,"POST","/v1/accounts:signInWithPhoneNumber",Ze(w,g));if(_.temporaryProof)throw lr(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const eh={USER_NOT_FOUND:"user-not-found"};function Tp(){return(Tp=(0,d.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:signInWithPhoneNumber",Ze(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),eh)})).apply(this,arguments)}class io extends Bi{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new io({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new io({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Dp(w,g){return Jd.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function t_(w,g){return Xd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function th(w,g){return Tp.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:I,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:I,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:I,phoneNumber:R,temporaryProof:O}=g;return I||_||R||O?new io({verificationId:_,verificationCode:I,phoneNumber:R,temporaryProof:O}):null}}class fa{constructor(g){var _,I,R,O,J,he;const je=(0,G.zd)((0,G.pd)(g)),Xe=null!==(_=je.apiKey)&&void 0!==_?_:null,It=null!==(I=je.oobCode)&&void 0!==I?I:null,Yt=function Oo(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=je.mode)&&void 0!==R?R:null);ue(Xe&&It&&Yt,"argument-error"),this.apiKey=Xe,this.operation=Yt,this.code=It,this.continueUrl=null!==(O=je.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(J=je.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(he=je.tenantId)&&void 0!==he?he:null}static parseLink(g){const _=function Sp(w){const g=(0,G.zd)((0,G.pd)(w)).link,_=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,I=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(I?(0,G.zd)((0,G.pd)(I)).link:null)||I||_||g||w}(g);try{return new fa(_)}catch{return null}}}let nh=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return _i._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const R=fa.parseLink(I);return ue(R,"argument-error"),_i._fromEmailAndCode(_,R.code,R.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ks{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class pa extends ks{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Os extends pa{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ue("providerId"in _&&"signInMethod"in _,"argument-error"),ps._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ue(g.idToken||g.accessToken,"argument-error"),ps._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Os.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Os.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:R,pendingToken:O,nonce:J,providerId:he}=g;if(!I&&!R&&!_&&!O||!he)return null;try{return new Os(he)._credential({idToken:_,accessToken:I,nonce:J,pendingToken:O})}catch{return null}}}let rh=(()=>{class w extends pa{constructor(){super("facebook.com")}static credential(_){return ps._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ih=(()=>{class w extends pa{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return ps._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:R}=_;if(!I&&!R)return null;try{return w.credential(I,R)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),vl=(()=>{class w extends pa{constructor(){super("github.com")}static credential(_){return ps._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class so extends Bi{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return ro(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,ro(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ro(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:R,pendingToken:O}=_;return I&&R&&O&&I===R?new so(I,O):null}static _create(g,_){return new so(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wl extends ks{constructor(g){ue(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return wl.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return wl.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=so.fromJSON(g);return ue(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:I}=g;if(!_||!I)return null;try{return so._create(I,_)}catch{return null}}}let Rp=(()=>{class w extends pa{constructor(){super("twitter.com")}static credential(_,I){return ps._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:R}=_;if(!I||!R)return null;try{return w.credential(I,R)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ga(w,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:signUp",Ze(w,g))})).apply(this,arguments)}class jn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,I,R=!1){return(0,d.Z)(function*(){const O=yield Bn._fromIdTokenResponse(g,I,R),J=mu(I);return new jn({user:O,providerId:J,_tokenResponse:I,operationType:_})})()}static _forOperation(g,_,I){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const R=mu(I);return new jn({user:g,providerId:R,_tokenResponse:I,operationType:_})})()}}function mu(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function El(w){return yr.apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(w){var g;const _=vn(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new jn({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield ga(_,{returnSecureToken:!0}),R=yield jn._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class Fo extends G.ZR{constructor(g,_,I,R){var O;super(_.code,_.message),this.operationType=I,this.user=R,Object.setPrototypeOf(this,Fo.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(g,_,I,R){return new Fo(g,_,I,R)}}function Lo(w,g,_,I){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Fo._fromErrorAndOperation(w,O,g,I):O})}function $r(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Mp(w,g){return bl.apply(this,arguments)}function bl(){return bl=(0,d.Z)(function*(w,g){const _=(0,G.m9)(w);yield _u(!0,_,g);const{providerUserInfo:I}=yield function gi(w,g){return Ui.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=$r(I||[]);return _.providerData=_.providerData.filter(O=>R.has(O.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),bl.apply(this,arguments)}function li(w,g){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(w,g,_=!1){const I=yield Xt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return jn._forOperation(w,"link",I)})).apply(this,arguments)}function _u(w,g,_){return oo.apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(w,g,_){yield Un(g);const R=!1===w?"provider-already-linked":"no-such-provider";ue($r(g.providerData).has(_)===w,g.auth,R)})).apply(this,arguments)}function sh(w,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,d.Z)(function*(w,g,_=!1){const{auth:I}=w,R="reauthenticate";try{const O=yield Xt(w,Lo(I,R,g,w),_);ue(O.idToken,I,"internal-error");const J=ii(O.idToken);ue(J,I,"internal-error");const{sub:he}=J;return ue(w.uid===he,I,"user-mismatch"),jn._forOperation(w,R,O)}catch(O){throw"auth/user-not-found"===O?.code&&Te(I,"user-mismatch"),O}})).apply(this,arguments)}function yu(w,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(w,g,_=!1){const I="signIn",R=yield Lo(w,I,g),O=yield jn._fromIdTokenResponse(w,I,R);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Lt(w,g){return Il.apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(w,g){return yu(vn(w),g)})).apply(this,arguments)}function Np(w,g){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,d.Z)(function*(w,g){const _=(0,G.m9)(w);return yield _u(!1,_,g.providerId),li(_,g)})).apply(this,arguments)}function Dc(w,g){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,d.Z)(function*(w,g){return sh((0,G.m9)(w),g)})).apply(this,arguments)}function ah(){return(ah=(0,d.Z)(function*(w,g){return Jt(w,"POST","/v1/accounts:signInWithCustomToken",Ze(w,g))})).apply(this,arguments)}function n_(w,g){return pe.apply(this,arguments)}function pe(){return pe=(0,d.Z)(function*(w,g){const _=vn(w),I=yield function oh(w,g){return ah.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),R=yield jn._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(R.user),R}),pe.apply(this,arguments)}class $t{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Sc._fromServerResponse(g,_):"totpInfo"in _?vu._fromServerResponse(g,_):Te(g,"internal-error")}}class Sc extends $t{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Sc(_)}}class vu extends $t{constructor(g){super("totp",g)}static _fromServerResponse(g,_){return new vu(_)}}function Xn(w,g,_){var I;ue((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),ue(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ue(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ue(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function uh(w,g,_){return _a.apply(this,arguments)}function _a(){return _a=(0,d.Z)(function*(w,g,_){var I;const R=vn(w),O={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=R._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const J=yield xr(R,O,"getOobCode",!0);_&&Xn(R,J,_),yield ha(R,J)}else _&&Xn(R,O,_),yield ha(R,O).catch(function(){var J=(0,d.Z)(function*(he){if("auth/missing-recaptcha-token"!==he.code)return Promise.reject(he);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const je=yield xr(R,O,"getOobCode",!0);_&&Xn(R,je,_),yield ha(R,je)}});return function(he){return J.apply(this,arguments)}}())}),_a.apply(this,arguments)}function Hi(w,g,_){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,d.Z)(function*(w,g,_){yield hu((0,G.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function lh(w,g){return ch.apply(this,arguments)}function ch(){return ch=(0,d.Z)(function*(w,g){yield function No(w,g){return ji.apply(this,arguments)}((0,G.m9)(w),{oobCode:g})}),ch.apply(this,arguments)}function ao(w,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,d.Z)(function*(w,g){const _=(0,G.m9)(w),I=yield hu(_,{oobCode:g}),R=I.requestType;switch(ue(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(I.mfaInfo,_,"internal-error");default:ue(I.email,_,"internal-error")}let O=null;return I.mfaInfo&&(O=$t._fromServerResponse(vn(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:R}})).apply(this,arguments)}function Hr(w,g){return yi.apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(w,g){const{data:_}=yield ao((0,G.m9)(w),g);return _.email})).apply(this,arguments)}function uo(w,g,_){return Fs.apply(this,arguments)}function Fs(){return Fs=(0,d.Z)(function*(w,g,_){var I;const R=vn(w),O={returnSecureToken:!0,email:g,password:_,clientType:"CLIENT_TYPE_WEB"};let J;if(null!==(I=R._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Xe=yield xr(R,O,"signUpPassword");J=ga(R,Xe)}else J=ga(R,O).catch(function(){var Xe=(0,d.Z)(function*(It){if("auth/missing-recaptcha-token"===It.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Yt=yield xr(R,O,"signUpPassword");return ga(R,Yt)}return Promise.reject(It)});return function(It){return Xe.apply(this,arguments)}}());const he=yield J.catch(Xe=>Promise.reject(Xe)),je=yield jn._fromIdTokenResponse(R,"signIn",he);return yield R._updateCurrentUser(je.user),je}),Fs.apply(this,arguments)}function gs(w,g,_){return Lt((0,G.m9)(w),nh.credential(g,_))}function dh(w,g,_){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,d.Z)(function*(w,g,_){var I;const R=vn(w),O={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function J(he,je){ue(je.handleCodeInApp,R,"argument-error"),je&&Xn(R,he,je)}if(null!==(I=R._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const he=yield xr(R,O,"getOobCode",!0);J(he,_),yield Ns(R,he)}else J(O,_),yield Ns(R,O).catch(function(){var he=(0,d.Z)(function*(je){if("auth/missing-recaptcha-token"!==je.code)return Promise.reject(je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Xe=yield xr(R,O,"getOobCode",!0);J(Xe,_),yield Ns(R,Xe)}});return function(je){return he.apply(this,arguments)}}())}),Vo.apply(this,arguments)}function hh(w,g){return"EMAIL_SIGNIN"===fa.parseLink(g)?.operation}function r_(w,g,_){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(w,g,_){const I=(0,G.m9)(w),R=nh.credentialWithLink(g,_||lt());return ue(R._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Lt(I,R)})).apply(this,arguments)}function wu(){return(wu=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:createAuthUri",Ze(w,g))})).apply(this,arguments)}function fh(w,g){return Tl.apply(this,arguments)}function Tl(){return Tl=(0,d.Z)(function*(w,g){const I={identifier:g,continueUri:rn()?lt():"http://localhost"},{signinMethods:R}=yield function Dl(w,g){return wu.apply(this,arguments)}((0,G.m9)(w),I);return R||[]}),Tl.apply(this,arguments)}function ph(w,g){return va.apply(this,arguments)}function va(){return va=(0,d.Z)(function*(w,g){const _=(0,G.m9)(w),R={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Xn(_.auth,R,g);const{email:O}=yield function bc(w,g){return fu.apply(this,arguments)}(_.auth,R);O!==w.email&&(yield w.reload())}),va.apply(this,arguments)}function Ac(w,g,_){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,d.Z)(function*(w,g,_){const I=(0,G.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&Xn(I.auth,O,_);const{email:J}=yield function Yd(w,g){return ui.apply(this,arguments)}(I.auth,O);J!==w.email&&(yield w.reload())}),Eu.apply(this,arguments)}function Sl(){return(Sl=(0,d.Z)(function*(w,g){return Bt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function gh(w,g){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,d.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const I=(0,G.m9)(w),O={idToken:yield I.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},J=yield Xt(I,function xc(w,g){return Sl.apply(this,arguments)}(I.auth,O));I.displayName=J.displayName||null,I.photoURL=J.photoUrl||null;const he=I.providerData.find(({providerId:je})=>"password"===je);he&&(he.displayName=I.displayName,he.photoURL=I.photoURL),yield I._updateTokensIfNecessary(J)}),Rc.apply(this,arguments)}function mh(w,g){return ms((0,G.m9)(w),g,null)}function Jr(w,g){return ms((0,G.m9)(w),null,g)}function ms(w,g,_){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(w,g,_){const{auth:I}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const J=yield Xt(w,_r(I,O));yield w._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class wa{constructor(g,_,I={}){this.isNewUser=g,this.providerId=_,this.profile=I}}class Nc extends wa{constructor(g,_,I,R){super(g,_,I),this.username=R}}class i_ extends wa{constructor(g,_){super(g,"facebook.com",_)}}class _h extends Nc{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class s_ extends wa{constructor(g,_){super(g,"google.com",_)}}class Al extends Nc{constructor(g,_,I){super(g,"twitter.com",_,I)}}function kc(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Mc(w){var g,_;if(!w)return null;const{providerId:I}=w,R=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const J=null===(_=null===(g=ii(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(J)return new wa(O,"anonymous"!==J&&"custom"!==J?J:null)}if(!I)return null;switch(I){case"facebook.com":return new i_(O,R);case"github.com":return new _h(O,R);case"google.com":return new s_(O,R);case"twitter.com":return new Al(O,R,w.screenName||null);case"custom":case"anonymous":return new wa(O,null);default:return new wa(O,I,R)}}(_)}class Vs{constructor(g,_,I){this.type=g,this.credential=_,this.auth=I}static _fromIdtoken(g,_){return new Vs("enroll",g,_)}static _fromMfaPendingCredential(g){return new Vs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,I;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Vs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(I=g.multiFactorSession)&&void 0!==I&&I.idToken)return Vs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Oc{constructor(g,_,I){this.session=g,this.hints=_,this.signInResolver=I}static _fromError(g,_){const I=vn(g),R=_.customData._serverResponse,O=(R.mfaInfo||[]).map(he=>$t._fromServerResponse(I,he));ue(R.mfaPendingCredential,I,"internal-error");const J=Vs._fromMfaPendingCredential(R.mfaPendingCredential);return new Oc(J,O,function(){var he=(0,d.Z)(function*(je){const Xe=yield je._process(I,J);delete R.mfaInfo,delete R.mfaPendingCredential;const It=Object.assign(Object.assign({},R),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(_.operationType){case"signIn":const Yt=yield jn._fromIdTokenResponse(I,_.operationType,It);return yield I._updateCurrentUser(Yt.user),Yt;case"reauthenticate":return ue(_.user,I,"internal-error"),jn._forOperation(_.user,_.operationType,It);default:Te(I,"internal-error")}});return function(je){return he.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function Iu(w,g){var _;const I=(0,G.m9)(w),R=g;return ue(g.customData.operationType,I,"argument-error"),ue(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Oc._fromError(I,R)}class Ia{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>$t._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new Ia(g)}getSession(){var g=this;return(0,d.Z)(function*(){return Vs._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var I=this;return(0,d.Z)(function*(){const R=g,O=yield I.getSession(),J=yield Xt(I.user,R._process(I.user.auth,O,_));return yield I.user._updateTokensIfNecessary(J),I.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){const I="string"==typeof g?g:g.uid,R=yield _.user.getIdToken();try{const O=yield Xt(_.user,function Uo(w,g){return Bt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ze(w,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:J})=>J!==I),yield _.user._updateTokensIfNecessary(O),yield _.user.reload()}catch(O){throw O}})()}}const Bo=new WeakMap;function Ca(w){const g=(0,G.m9)(w);return Bo.has(g)||Bo.set(g,Ia._fromUser(g)),Bo.get(g)}const Cu="__sak";class Du{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Cu,"1"),this.storage.removeItem(Cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nl=(()=>{class w extends Du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pc(){const w=(0,G.z$)();return L(w)||At(w)}()&&function Sr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const R=this.storage.getItem(I),O=this.localCache[I];R!==O&&_(I,O,R)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((he,je,Xe)=>{this.notifyListeners(he,Xe)});const R=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(R);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!I)return}const O=()=>{const he=this.storage.getItem(R);!I&&this.localCache[R]===he||this.notifyListeners(R,he)},J=this.storage.getItem(R);!function xn(){return(0,G.w1)()&&10===document.documentMode}()||J===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,I){this.localCache[_]=I;const R=this.listeners[_];if(R)for(const O of Array.from(R))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var R=()=>super._set,O=this;return(0,d.Z)(function*(){yield R().call(O,_,I),O.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,R=this;return(0,d.Z)(function*(){const O=yield I().call(R,_);return R.localCache[_]=JSON.stringify(O),O})()}_remove(_){var I=()=>super._remove,R=this;return(0,d.Z)(function*(){yield I().call(R,_),delete R.localCache[_]})()}}return w.type="LOCAL",w})(),vi=(()=>{class w extends Du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let Vc=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(O=>O.isListeningto(_));if(I)return I;const R=new w(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,d.Z)(function*(){const R=_,{eventId:O,eventType:J,data:he}=R.data,je=I.handlersMap[J];if(!je?.size)return;R.ports[0].postMessage({status:"ack",eventId:O,eventType:J});const Xe=Array.from(je).map(function(){var Yt=(0,d.Z)(function*(Ei){return Ei(R.origin,he)});return function(Ei){return Yt.apply(this,arguments)}}()),It=yield function bh(w){return Promise.all(w.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return g.apply(this,arguments)}}()))}(Xe);R.ports[0].postMessage({status:"done",eventId:O,eventType:J,response:It})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function _s(w="",g=10){let _="";for(let I=0;I<g;I++)_+=Math.floor(10*Math.random());return w+_}class Ih{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,I=50){var R=this;return(0,d.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let J,he;return new Promise((je,Xe)=>{const It=_s("",20);O.port1.start();const Yt=setTimeout(()=>{Xe(new Error("unsupported_event"))},I);he={messageChannel:O,onMessage(Ei){const Ko=Ei;if(Ko.data.eventId===It)switch(Ko.data.status){case"ack":clearTimeout(Yt),J=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),je(Ko.data.response);break;default:clearTimeout(Yt),clearTimeout(J),Xe(new Error("invalid_response"))}}},R.handlers.add(he),O.port1.addEventListener("message",he.onMessage),R.target.postMessage({eventType:g,eventId:It,data:_},[O.port2])}).finally(()=>{he&&R.removeMessageHandler(he)})})()}}function tr(){return window}function kl(){return typeof tr().WorkerGlobalScope<"u"&&"function"==typeof tr().importScripts}function Su(){return(Su=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const vr="firebaseLocalStorageDb",Da=1,$n="firebaseLocalStorage",Pp="fbase_key";class ho{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Pl(w,g){return w.transaction([$n],g?"readwrite":"readonly").objectStore($n)}function Uc(){const w=indexedDB.open(vr,Da);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore($n,{keyPath:Pp})}catch(R){_(R)}}),w.addEventListener("success",(0,d.Z)(function*(){const I=w.result;I.objectStoreNames.contains($n)?g(I):(I.close(),yield function Ta(){const w=indexedDB.deleteDatabase(vr);return new ho(w).toPromise()}(),g(yield Uc()))}))})}function Bc(w,g,_){return fo.apply(this,arguments)}function fo(){return(fo=(0,d.Z)(function*(w,g,_){const I=Pl(w,!0).put({[Pp]:g,value:_});return new ho(I).toPromise()})).apply(this,arguments)}function jo(){return(jo=(0,d.Z)(function*(w,g){const _=Pl(w,!1).get(g),I=yield new ho(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Au(w,g){const _=Pl(w,!0).delete(g);return new ho(_).toPromise()}const jc=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Uc()),_.db})()}_withRetries(_){var I=this;return(0,d.Z)(function*(){let R=0;for(;;)try{const O=yield I._openDb();return yield _(O)}catch(O){if(R++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return kl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=Vc._getInstance(function Ol(){return kl()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(R,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(R,O){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(R,O){return["keyChanged"]});return function(R,O){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var I,R;if(_.activeServiceWorker=yield function Ch(){return Su.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ih(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);O&&null!==(I=O[0])&&void 0!==I&&I.fulfilled&&null!==(R=O[0])&&void 0!==R&&R.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Dh(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Uc();return yield Bc(_,Cu,"1"),yield Au(_,Cu),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var R=this;return(0,d.Z)(function*(){return R._withPendingWrite((0,d.Z)(function*(){return yield R._withRetries(O=>Bc(O,_,I)),R.localCache[_]=I,R.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,d.Z)(function*(){const R=yield I._withRetries(O=>function Fp(w,g){return jo.apply(this,arguments)}(O,_));return I.localCache[_]=R,R})()}_remove(_){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(R=>Au(R,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const I=yield _._withRetries(J=>{const he=Pl(J,!1).getAll();return new ho(he).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const R=[],O=new Set;for(const{fbase_key:J,value:he}of I)O.add(J),JSON.stringify(_.localCache[J])!==JSON.stringify(he)&&(_.notifyListeners(J,he),R.push(J));for(const J of Object.keys(_.localCache))_.localCache[J]&&!O.has(J)&&(_.notifyListeners(J,null),R.push(J));return R})()}notifyListeners(_,I){this.localCache[_]=I;const R=this.listeners[_];if(R)for(const O of Array.from(R))O(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),$c=1e12;class Ah{constructor(g){this.auth=g,this.counter=$c,this._widgets=new Map}render(g,_){const I=this.counter;return this._widgets.set(I,new Hc(g,this.auth.name,_||{})),this.counter++,I}reset(g){var _;const I=g||$c;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(g){var _;return(null===(_=this._widgets.get(g||$c))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var I;return null===(I=_._widgets.get(g||$c))||void 0===I||I.execute(),""})()}}class Hc{constructor(g,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;ue(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Gc(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vp=Yr("rcb"),Lv=new Ce(3e4,6e4);class Go{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=tr().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return ue(function Uv(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)&&Ot(tr().grecaptcha)?Promise.resolve(tr().grecaptcha):new Promise((I,R)=>{const O=tr().setTimeout(()=>{R(De(g,"network-request-failed"))},Lv.get());tr()[Vp]=()=>{tr().clearTimeout(O),delete tr()[Vp];const he=tr().grecaptcha;if(!he||!Ot(he))return void R(De(g,"internal-error"));const je=he.render;he.render=(Xe,It)=>{const Yt=je(Xe,It);return this.counter++,Yt},this.hostLanguage=_,I(he)},cn(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Vp,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),R(De(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=tr().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Up{load(g){return(0,d.Z)(function*(){return new Ah(g)})()}clearedOneInstance(){}}const wr="recaptcha",xu={theme:"light",type:"image"};class Ll{constructor(g,_=Object.assign({},xu),I){this.parameters=_,this.type=wr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(I),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;ue(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Up:new Go,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(_)||new Promise(O=>{const J=he=>{he&&(g.tokenChangeListeners.delete(J),O(he))};g.tokenChangeListeners.add(J),g.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof g)g(_);else if("string"==typeof g){const I=tr()[g];"function"==typeof I&&I(_)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){ue(rn()&&!kl(),g.auth,"internal-error"),yield function zc(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function fe(w){return ie.apply(this,arguments)}(g.auth);ue(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ni{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=io._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function po(w,g,_){return qc.apply(this,arguments)}function qc(){return(qc=(0,d.Z)(function*(w,g,_){const I=vn(w),R=yield Vl(I,g,(0,G.m9)(_));return new Ni(R,O=>Lt(I,O))})).apply(this,arguments)}function Ru(w,g,_){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(w,g,_){const I=(0,G.m9)(w);yield _u(!1,I,"phone");const R=yield Vl(I.auth,g,(0,G.m9)(_));return new Ni(R,O=>Np(I,O))})).apply(this,arguments)}function xh(w,g,_){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,d.Z)(function*(w,g,_){const I=(0,G.m9)(w),R=yield Vl(I.auth,g,(0,G.m9)(_));return new Ni(R,O=>Dc(I,O))})).apply(this,arguments)}function Vl(w,g,_){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,d.Z)(function*(w,g,_){var I;const R=yield _.verify();try{let O;if(ue("string"==typeof R,w,"argument-error"),ue(_.type===wr,w,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const J=O.session;if("phoneNumber"in O)return ue("enroll"===J.type,w,"internal-error"),(yield function Ml(w,g){return Bt(w,"POST","/v2/accounts/mfaEnrollment:start",Ze(w,g))}(w,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ue("signin"===J.type,w,"internal-error");const he=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ue(he,w,"missing-multi-factor-info"),(yield function Th(w,g){return Bt(w,"POST","/v2/accounts/mfaSignIn:start",Ze(w,g))}(w,{mfaPendingCredential:J.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield function e_(w,g){return Qd.apply(this,arguments)}(w,{phoneNumber:O.phoneNumber,recaptchaToken:R});return J}}finally{_._reset()}}),Zc.apply(this,arguments)}function Gi(w,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(w,g){yield li((0,G.m9)(w),g)})).apply(this,arguments)}let zi=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=vn(_)}verifyPhoneNumber(_,I){return Vl(this.auth,_,(0,G.m9)(I))}static credential(_,I){return io._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:R}=_;return I&&R?io._fromTokenResponse(I,R):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function rt(w,g){return g?Jn(g):(ue(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class os extends Bi{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ro(g,this._buildIdpRequest())}_linkToIdToken(g,_){return ro(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return ro(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function nr(w){return yu(w.auth,new os(w),w.bypassAuthState)}function Rh(w){const{auth:g,user:_}=w;return ue(_,g,"internal-error"),sh(_,new os(w),w.bypassAuthState)}function Mu(w){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(w){const{auth:g,user:_}=w;return ue(_,g,"internal-error"),li(_,new os(w),w.bypassAuthState)})).apply(this,arguments)}class Kc{constructor(g,_,I,R,O=!1){this.auth=g,this.resolver=I,this.user=R,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(I,R){g.pendingPromise={resolve:I,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(I,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:R,postBody:O,tenantId:J,error:he,type:je}=g;if(he)return void _.reject(he);const Xe={auth:_.auth,requestUri:I,sessionId:R,tenantId:J||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(je)(Xe))}catch(It){_.reject(It)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return nr;case"linkViaPopup":case"linkViaRedirect":return Mu;case"reauthViaPopup":case"reauthViaRedirect":return Rh;default:Te(this.auth,"internal-error")}}resolve(g){Mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mh=new Ce(2e3,1e4);function qi(w,g,_){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(w,g,_){const I=vn(w);ze(w,g,ks);const R=rt(I,_);return new Qc(I,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function Yc(w,g,_){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(w,g,_){const I=(0,G.m9)(w);ze(I.auth,g,ks);const R=rt(I.auth,_);return new Qc(I.auth,"reauthViaPopup",g,R,I).executeNotNull()})).apply(this,arguments)}function qo(w,g,_){return dt.apply(this,arguments)}function dt(){return(dt=(0,d.Z)(function*(w,g,_){const I=(0,G.m9)(w);ze(I.auth,g,ks);const R=rt(I.auth,_);return new Qc(I.auth,"linkViaPopup",g,R,I).executeNotNull()})).apply(this,arguments)}let Qc=(()=>{class w extends Kc{constructor(_,I,R,O,J){super(_,I,O,J),this.provider=R,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const I=yield _.execute();return ue(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,d.Z)(function*(){Mt(1===_.filter.length,"Popup operations only handle one event");const I=_s();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(De(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,R;this.pollId=null!==(R=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Mh.get())};_()}}return w.currentPopupAction=null,w})();const Nh="pendingRedirect",Wi=new Map;class Ul extends Kc{constructor(g,_,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let I=Wi.get(_.auth._key());if(!I){try{const O=(yield function cr(w,g){return Nu.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;I=()=>Promise.resolve(O)}catch(R){I=()=>Promise.reject(R)}Wi.set(_.auth._key(),I)}return _.bypassAuthState||Wi.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(I,g);if("unknown"!==g.type){if(g.eventId){const R=yield I.auth._redirectUserForId(g.eventId);if(R)return I.user=R,_().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Nu(){return(Nu=(0,d.Z)(function*(w,g){const _=Bl(g),I=Bp(w);if(!(yield I._isAvailable()))return!1;const R="true"===(yield I._get(_));return yield I._remove(_),R})).apply(this,arguments)}function Jc(w,g){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(w,g){return Bp(w)._set(Bl(g),"true")})).apply(this,arguments)}function ku(){Wi.clear()}function Ou(w,g){Wi.set(w._key(),g)}function Bp(w){return Jn(w._redirectPersistence)}function Bl(w){return ai(Nh,w.config.apiKey,w.name)}function xa(w,g,_){return function kh(w,g,_){return Xc.apply(this,arguments)}(w,g,_)}function Xc(){return(Xc=(0,d.Z)(function*(w,g,_){const I=vn(w);ze(w,g,ks),yield I._initializationPromise;const R=rt(I,_);return yield Jc(R,I),R._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function ed(w,g,_){return function Pu(w,g,_){return ki.apply(this,arguments)}(w,g,_)}function ki(){return(ki=(0,d.Z)(function*(w,g,_){const I=(0,G.m9)(w);ze(I.auth,g,ks),yield I.auth._initializationPromise;const R=rt(I.auth,_);yield Jc(R,I.auth);const O=yield Zi(I);return R._openRedirect(I.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function td(w,g,_){return function Nr(w,g,_){return Fu.apply(this,arguments)}(w,g,_)}function Fu(){return(Fu=(0,d.Z)(function*(w,g,_){const I=(0,G.m9)(w);ze(I.auth,g,ks),yield I.auth._initializationPromise;const R=rt(I.auth,_);yield _u(!1,I,g.providerId),yield Jc(R,I.auth);const O=yield Zi(I);return R._openRedirect(I.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function jp(w,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(w,g){return yield vn(w)._initializationPromise,Oi(w,g,!1)})).apply(this,arguments)}function Oi(w,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(w,g,_=!1){const I=vn(w),R=rt(I,g),J=yield new Ul(I,R,_).execute();return J&&!_&&(delete J.user._redirectEventId,yield I._persistUserIfCurrent(J.user),yield I._setRedirectUser(null,g)),J})).apply(this,arguments)}function Zi(w){return rr.apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(w){const g=_s(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class jl{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(_=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function mo(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return as(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var I;if(g.error&&!as(g)){const R=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(De(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const I=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ma(g))}saveEventToCache(g){this.cachedEventUids.add(Ma(g)),this.lastProcessedEventTime=Date.now()}}function Ma(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function as({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function Er(w){return _o.apply(this,arguments)}function _o(){return(_o=(0,d.Z)(function*(w,g={}){return Bt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Bv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Na=/^https?/;function ka(){return(ka=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Er(w);for(const _ of g)try{if(Zo(_))return}catch{}Te(w,"unauthorized-domain")})).apply(this,arguments)}function Zo(w){const g=lt(),{protocol:_,hostname:I}=new URL(g);if(w.startsWith("chrome-extension://")){const J=new URL(w);return""===J.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&J.hostname===I}if(!Na.test(_))return!1;if(Bv.test(w))return I===w;const R=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(I)}const nd=new Ce(3e4,6e4);function Vu(){const w=tr().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let wi=null;const Ki=new Ce(5e3,15e3),Oh="__/auth/iframe",Ph="emulator/auth/iframe",us={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lh(w){const g=w.config;ue(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?Re(g,Ph):`https://${w.config.authDomain}/${Oh}`,I={apiKey:g.apiKey,appName:w.name,v:F.SDK_VERSION},R=Fh.get(w.config.apiHost);R&&(I.eid=R);const O=w._getFrameworks();return O.length&&(I.fw=O.join(",")),`${_}?${(0,G.xO)(I).slice(1)}`}function E(){return E=(0,d.Z)(function*(w){const g=yield function $p(w){return wi=wi||function Rt(w){return new Promise((g,_)=>{var I,R,O;function J(){Vu(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Vu(),_(De(w,"network-request-failed"))},timeout:nd.get()})}if(null!==(R=null===(I=tr().gapi)||void 0===I?void 0:I.iframes)&&void 0!==R&&R.Iframe)g(gapi.iframes.getContext());else{if(null===(O=tr().gapi)||void 0===O||!O.load){const he=Yr("iframefcb");return tr()[he]=()=>{gapi.load?J():_(De(w,"network-request-failed"))},cn(`https://apis.google.com/js/api.js?onload=${he}`).catch(je=>_(je))}J()}}).catch(g=>{throw wi=null,g})}(w),wi}(w),_=tr().gapi;return ue(_,w,"internal-error"),g.open({where:document.body,url:Lh(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:us,dontclear:!0},I=>new Promise(function(){var R=(0,d.Z)(function*(O,J){yield I.restyle({setHideOnLeave:!1});const he=De(w,"network-request-failed"),je=tr().setTimeout(()=>{J(he)},Ki.get());function Xe(){tr().clearTimeout(je),O(I)}I.ping(Xe).then(Xe,()=>{J(he)})});return function(O,J){return R.apply(this,arguments)}}()))}),E.apply(this,arguments)}const D={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A=500,B=600,K="_blank",ee="http://localhost";class ae{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const mt="__/auth/handler",Vt="emulator/auth/handler",Ut=encodeURIComponent("fac");function Gr(w,g,_,I,R,O){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(w,g,_,I,R,O){ue(w.config.authDomain,w,"auth-domain-config-required"),ue(w.config.apiKey,w,"invalid-api-key");const J={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:F.SDK_VERSION,eventId:R};if(g instanceof ks){g.setDefaultLanguage(w.languageCode),J.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(J.customParameters=JSON.stringify(g.getCustomParameters()));for(const[It,Yt]of Object.entries(O||{}))J[It]=Yt}if(g instanceof pa){const It=g.getScopes().filter(Yt=>""!==Yt);It.length>0&&(J.scopes=It.join(","))}w.tenantId&&(J.tid=w.tenantId);const he=J;for(const It of Object.keys(he))void 0===he[It]&&delete he[It];const je=yield w._getAppCheckToken(),Xe=je?`#${Ut}=${encodeURIComponent(je)}`:"";return`${function Kt({config:w}){return w.emulator?Re(w,Vt):`https://${w.authDomain}/${mt}`}(w)}?${(0,G.xO)(he).slice(1)}${Xe}`})).apply(this,arguments)}const ys="webStorageSupport",kr=class Uu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vi,this._completeRedirectFn=Oi,this._overrideRedirectResult=Ou}_openPopup(g,_,I,R){var O=this;return(0,d.Z)(function*(){var J;Mt(null===(J=O.eventManagers[g._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const he=yield Gr(g,_,I,lt(),R);return function Qe(w,g,_,I=A,R=B){const O=Math.max((window.screen.availHeight-R)/2,0).toString(),J=Math.max((window.screen.availWidth-I)/2,0).toString();let he="";const je=Object.assign(Object.assign({},D),{width:I.toString(),height:R.toString(),top:O,left:J}),Xe=(0,G.z$)().toLowerCase();_&&(he=k(Xe)?K:_),P(Xe)&&(g=g||ee,je.scrollbars="yes");const It=Object.entries(je).reduce((Ei,[Ko,Pa])=>`${Ei}${Ko}=${Pa},`,"");if(function Pt(w=(0,G.z$)()){var g;return At(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Xe)&&"_self"!==he)return function Ke(w,g){const _=document.createElement("a");_.href=w,_.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(g||"",he),new ae(null);const Yt=window.open(g||"",he,It);ue(Yt,w,"popup-blocked");try{Yt.focus()}catch{}return new ae(Yt)}(g,he,_s())})()}_openRedirect(g,_,I,R){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(g),function co(w){tr().location.href=w}(yield Gr(g,_,I,lt(),R)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:O}=this.eventManagers[_];return R?Promise.resolve(R):(Mt(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(g);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const I=yield function Vh(w){return E.apply(this,arguments)}(g),R=new jl(g);return I.register("authEvent",O=>(ue(O?.authEvent,g,"invalid-auth-event"),{status:R.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=I,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(ys,{type:ys},R=>{var O;const J=null===(O=R?.[0])||void 0===O?void 0:O[ys];void 0!==J&&_(!!J),Te(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function $l(w){return ka.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return zt()||L()||At()}};class vs{constructor(g){this.factorId=g}_process(g,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,I);case"signin":return this._finalizeSignIn(g,_.credential);default:return ot("unexpected MultiFactorSessionType")}}}class ws extends vs{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ws(g)}_finalizeEnroll(g,_,I){return function ba(w,g){return Bt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ze(w,g))}(g,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Ho(w,g){return Bt(w,"POST","/v2/accounts/mfaSignIn:finalize",Ze(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Hp=(()=>{class w{constructor(){}static assertion(_){return ws._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var ju="@firebase/auth";class Oa{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(I=>{g(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,G.Pz)("authIdTokenMaxAge"),function zp(w){(0,F._registerComponent)(new ce.wA("auth",(g,{options:_})=>{const I=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),O=g.getProvider("app-check-internal"),{apiKey:J,authDomain:he}=I.options;ue(J&&!J.includes(":"),"invalid-api-key",{appName:I.name});const je={apiKey:J,authDomain:he,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rs(w)},Xe=new Pn(I,R,O,je);return function Ms(w,g){const _=g?.persistence||[],I=(Array.isArray(_)?_:[_]).map(Jn);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(I,g?.popupRedirectResolver)}(Xe,_),Xe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,I)=>{g.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new ce.wA("auth-internal",g=>{const _=vn(g.getProvider("auth").getImmediate());return new Oa(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(ju,"0.23.2",function zl(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,F.registerVersion)(ju,"0.23.2","esm2017")}("Browser")},2090:(bt,Se,j)=>{j.d(Se,{$s:()=>Jn,BH:()=>Ne,DV:()=>Ui,Dv:()=>Un,G6:()=>Re,GJ:()=>ri,L:()=>ve,LL:()=>Tt,Pz:()=>De,Sg:()=>ze,UG:()=>ot,UI:()=>Gn,US:()=>ce,Wj:()=>mr,Wl:()=>Vn,Yr:()=>Ce,ZB:()=>X,ZR:()=>Bt,aH:()=>Te,b$:()=>rn,cI:()=>Jt,dS:()=>Ri,eu:()=>We,g5:()=>F,gK:()=>si,gQ:()=>fn,h$:()=>_e,hl:()=>Ye,hu:()=>G,jU:()=>Mt,lb:()=>en,m9:()=>ai,ne:()=>Xt,p$:()=>W,pd:()=>ii,r3:()=>gi,ru:()=>lt,tV:()=>Z,uI:()=>ue,ug:()=>sn,vZ:()=>vt,w1:()=>me,w9:()=>ni,xO:()=>Kn,xb:()=>xo,z$:()=>Le,zI:()=>yt,zd:()=>Zr});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},G=function(q,H){if(!q)throw F(H)},F=function(q){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+q)},se=function(q){const H=[];let P=0;for(let L=0;L<q.length;L++){let k=q.charCodeAt(L);k<128?H[P++]=k:k<2048?(H[P++]=k>>6|192,H[P++]=63&k|128):55296==(64512&k)&&L+1<q.length&&56320==(64512&q.charCodeAt(L+1))?(k=65536+((1023&k)<<10)+(1023&q.charCodeAt(++L)),H[P++]=k>>18|240,H[P++]=k>>12&63|128,H[P++]=k>>6&63|128,H[P++]=63&k|128):(H[P++]=k>>12|224,H[P++]=k>>6&63|128,H[P++]=63&k|128)}return H},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,H){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,L=[];for(let k=0;k<q.length;k+=3){const Y=q[k],Ie=k+1<q.length,st=Ie?q[k+1]:0,Nt=k+2<q.length,At=Nt?q[k+2]:0;let xn=(15&st)<<2|At>>6,zt=63&At;Nt||(zt=64,Ie||(xn=64)),L.push(P[Y>>2],P[(3&Y)<<4|st>>4],P[xn],P[zt])}return L.join("")},encodeString(q,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(q):this.encodeByteArray(se(q),H)},decodeString(q,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(q):function(q){const H=[];let P=0,L=0;for(;P<q.length;){const k=q[P++];if(k<128)H[L++]=String.fromCharCode(k);else if(k>191&&k<224){const Y=q[P++];H[L++]=String.fromCharCode((31&k)<<6|63&Y)}else if(k>239&&k<365){const Nt=((7&k)<<18|(63&q[P++])<<12|(63&q[P++])<<6|63&q[P++])-65536;H[L++]=String.fromCharCode(55296+(Nt>>10)),H[L++]=String.fromCharCode(56320+(1023&Nt))}else{const Y=q[P++],Ie=q[P++];H[L++]=String.fromCharCode((15&k)<<12|(63&Y)<<6|63&Ie)}}return H.join("")}(this.decodeStringToByteArray(q,H))},decodeStringToByteArray(q,H){this.init_();const P=H?this.charToByteMapWebSafe_:this.charToByteMap_,L=[];for(let k=0;k<q.length;){const Y=P[q.charAt(k++)],st=k<q.length?P[q.charAt(k)]:0;++k;const At=k<q.length?P[q.charAt(k)]:64;++k;const Pt=k<q.length?P[q.charAt(k)]:64;if(++k,null==Y||null==st||null==At||null==Pt)throw new Ee;L.push(Y<<2|st>>4),64!==At&&(L.push(st<<4&240|At>>2),64!==Pt&&L.push(At<<6&192|Pt))}return L},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(q){const H=se(q);return ce.encodeByteArray(H,!0)},ve=function(q){return _e(q).replace(/\./g,"")},Z=function(q){try{return ce.decodeString(q,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function W(q){return X(void 0,q)}function X(q,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return H}for(const P in H)!H.hasOwnProperty(P)||!Ge(P)||(q[P]=X(q[P],H[P]));return q}function Ge(q){return"__proto__"!==q}const Me=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=q&&Z(q[1]);return H&&JSON.parse(H)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},Te=()=>{var q;return null===(q=Me())||void 0===q?void 0:q.config},De=q=>{var H;return null===(H=Me())||void 0===H?void 0:H[`_${q}`]};class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,P)=>{this.resolve=H,this.reject=P})}wrapCallback(H){return(P,L)=>{P?this.reject(P):this.resolve(L),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(P):H(P,L))}}}function ze(q,H){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const L=H||"demo-project",k=q.iat||0,Y=q.sub||q.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${L}`,aud:L,iat:k,exp:k+3600,auth_time:k,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},q);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(Ie)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function ot(){var q;const H=null===(q=Me())||void 0===q?void 0:q.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Mt(){return"object"==typeof self&&self.self===self}function lt(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function rn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){const q=Le();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Ce(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function Re(){return!ot()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){try{return"object"==typeof indexedDB}catch{return!1}}function We(){return new Promise((q,H)=>{try{let P=!0;const L="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(L);k.onsuccess=()=>{k.result.close(),P||self.indexedDB.deleteDatabase(L),q(!0)},k.onupgradeneeded=()=>{P=!1},k.onerror=()=>{var Y;H((null===(Y=k.error)||void 0===Y?void 0:Y.message)||"")}}catch(P){H(P)}})}function yt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Bt extends Error{constructor(H,P,L){super(P),this.code=H,this.customData=L,this.name="FirebaseError",Object.setPrototypeOf(this,Bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(H,P,L){this.service=H,this.serviceName=P,this.errors=L}create(H,...P){const L=P[0]||{},k=`${this.service}/${H}`,Y=this.errors[H],Ie=Y?function Ht(q,H){return q.replace(St,(P,L)=>{const k=H[L];return null!=k?String(k):`<${L}?>`})}(Y,L):"Error";return new Bt(k,`${this.serviceName}: ${Ie} (${k}).`,L)}}const St=/\{\$([^}]+)}/g;function Jt(q){return JSON.parse(q)}function Vn(q){return JSON.stringify(q)}const On=function(q){let H={},P={},L={},k="";try{const Y=q.split(".");H=Jt(Z(Y[0])||""),P=Jt(Z(Y[1])||""),k=Y[2],L=P.d||{},delete P.d}catch{}return{header:H,claims:P,data:L,signature:k}},ni=function(q){const P=On(q).claims;return!!P&&"object"==typeof P&&P.hasOwnProperty("iat")},ri=function(q){const H=On(q).claims;return"object"==typeof H&&!0===H.admin};function gi(q,H){return Object.prototype.hasOwnProperty.call(q,H)}function Ui(q,H){if(Object.prototype.hasOwnProperty.call(q,H))return q[H]}function xo(q){for(const H in q)if(Object.prototype.hasOwnProperty.call(q,H))return!1;return!0}function Gn(q,H,P){const L={};for(const k in q)Object.prototype.hasOwnProperty.call(q,k)&&(L[k]=H.call(P,q[k],k,q));return L}function vt(q,H){if(q===H)return!0;const P=Object.keys(q),L=Object.keys(H);for(const k of P){if(!L.includes(k))return!1;const Y=q[k],Ie=H[k];if(zn(Y)&&zn(Ie)){if(!vt(Y,Ie))return!1}else if(Y!==Ie)return!1}for(const k of L)if(!P.includes(k))return!1;return!0}function zn(q){return null!==q&&"object"==typeof q}function Kn(q){const H=[];for(const[P,L]of Object.entries(q))Array.isArray(L)?L.forEach(k=>{H.push(encodeURIComponent(P)+"="+encodeURIComponent(k))}):H.push(encodeURIComponent(P)+"="+encodeURIComponent(L));return H.length?"&"+H.join("&"):""}function Zr(q){const H={};return q.replace(/^\?/,"").split("&").forEach(L=>{if(L){const[k,Y]=L.split("=");H[decodeURIComponent(k)]=decodeURIComponent(Y)}}),H}function ii(q){const H=q.indexOf("?");if(!H)return"";const P=q.indexOf("#",H);return q.substring(H,P>0?P:void 0)}class fn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,P){P||(P=0);const L=this.W_;if("string"==typeof H)for(let Pt=0;Pt<16;Pt++)L[Pt]=H.charCodeAt(P)<<24|H.charCodeAt(P+1)<<16|H.charCodeAt(P+2)<<8|H.charCodeAt(P+3),P+=4;else for(let Pt=0;Pt<16;Pt++)L[Pt]=H[P]<<24|H[P+1]<<16|H[P+2]<<8|H[P+3],P+=4;for(let Pt=16;Pt<80;Pt++){const xn=L[Pt-3]^L[Pt-8]^L[Pt-14]^L[Pt-16];L[Pt]=4294967295&(xn<<1|xn>>>31)}let At,tn,k=this.chain_[0],Y=this.chain_[1],Ie=this.chain_[2],st=this.chain_[3],Nt=this.chain_[4];for(let Pt=0;Pt<80;Pt++){Pt<40?Pt<20?(At=st^Y&(Ie^st),tn=1518500249):(At=Y^Ie^st,tn=1859775393):Pt<60?(At=Y&Ie|st&(Y|Ie),tn=2400959708):(At=Y^Ie^st,tn=3395469782);const xn=(k<<5|k>>>27)+At+Nt+tn+L[Pt]&4294967295;Nt=st,st=Ie,Ie=4294967295&(Y<<30|Y>>>2),Y=k,k=xn}this.chain_[0]=this.chain_[0]+k&4294967295,this.chain_[1]=this.chain_[1]+Y&4294967295,this.chain_[2]=this.chain_[2]+Ie&4294967295,this.chain_[3]=this.chain_[3]+st&4294967295,this.chain_[4]=this.chain_[4]+Nt&4294967295}update(H,P){if(null==H)return;void 0===P&&(P=H.length);const L=P-this.blockSize;let k=0;const Y=this.buf_;let Ie=this.inbuf_;for(;k<P;){if(0===Ie)for(;k<=L;)this.compress_(H,k),k+=this.blockSize;if("string"==typeof H){for(;k<P;)if(Y[Ie]=H.charCodeAt(k),++Ie,++k,Ie===this.blockSize){this.compress_(Y),Ie=0;break}}else for(;k<P;)if(Y[Ie]=H[k],++Ie,++k,Ie===this.blockSize){this.compress_(Y),Ie=0;break}}this.inbuf_=Ie,this.total_+=P}digest(){const H=[];let P=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let k=this.blockSize-1;k>=56;k--)this.buf_[k]=255&P,P/=256;this.compress_(this.buf_);let L=0;for(let k=0;k<5;k++)for(let Y=24;Y>=0;Y-=8)H[L]=this.chain_[k]>>Y&255,++L;return H}}function Xt(q,H){const P=new gt(q,H);return P.subscribe.bind(P)}class gt{constructor(H,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{H(this)}).catch(L=>{this.error(L)})}next(H){this.forEachObserver(P=>{P.next(H)})}error(H){this.forEachObserver(P=>{P.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,P,L){let k;if(void 0===H&&void 0===P&&void 0===L)throw new Error("Missing Observer.");k=function Yn(q,H){if("object"!=typeof q||null===q)return!1;for(const P of H)if(P in q&&"function"==typeof q[P])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:P,complete:L},void 0===k.next&&(k.next=Ur),void 0===k.error&&(k.error=Ur),void 0===k.complete&&(k.complete=Ur);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,H)}sendOne(H,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{P(this.observers[H])}catch(L){typeof console<"u"&&console.error&&console.error(L)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ur(){}const Un=function(q,H,P,L){let k;if(L<H?k="at least "+H:L>P&&(k=0===P?"none":"no more than "+P),k)throw new Error(q+" failed: Was called with "+L+(1===L?" argument.":" arguments.")+" Expects "+k+".")};function si(q,H){return`${q} failed: ${H} argument `}function mr(q,H,P,L){if((!L||P)&&"function"!=typeof P)throw new Error(si(q,H)+"must be a valid function.")}function en(q,H,P,L){if((!L||P)&&("object"!=typeof P||null===P))throw new Error(si(q,H)+"must be a valid context object.")}const Ri=function(q){const H=[];let P=0;for(let L=0;L<q.length;L++){let k=q.charCodeAt(L);if(k>=55296&&k<=56319){const Y=k-55296;L++,G(L<q.length,"Surrogate pair missing trail surrogate."),k=65536+(Y<<10)+(q.charCodeAt(L)-56320)}k<128?H[P++]=k:k<2048?(H[P++]=k>>6|192,H[P++]=63&k|128):k<65536?(H[P++]=k>>12|224,H[P++]=k>>6&63|128,H[P++]=63&k|128):(H[P++]=k>>18|240,H[P++]=k>>12&63|128,H[P++]=k>>6&63|128,H[P++]=63&k|128)}return H},sn=function(q){let H=0;for(let P=0;P<q.length;P++){const L=q.charCodeAt(P);L<128?H++:L<2048?H+=2:L>=55296&&L<=56319?(H+=4,P++):H+=3}return H},Gt=1e3,Qn=2,Bn=144e5,Br=.5;function Jn(q,H=Gt,P=Qn){const L=H*Math.pow(P,q),k=Math.round(Br*L*(Math.random()-.5)*2);return Math.min(Bn,L+k)}function ai(q){return q&&q._delegate?q._delegate:q}},6201:(bt,Se,j)=>{var d=j(4650);let G=null;function F(){return G}class le{}const ce=new d.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function _e(){return(0,d.LFG)(Z)}()},providedIn:"platform"}),n})();const ve=new d.OlP("Location Initialized");let Z=(()=>{class n extends Ee{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){W()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){W()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function X(){return new Z((0,d.LFG)(ce))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Ge(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let ct=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Me)},providedIn:"root"}),n})();const ye=new d.OlP("appBaseHref");let Me=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ge(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const u=this.prepareExternalUrl(i+Je(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){const u=this.prepareExternalUrl(i+Je(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ee),d.LFG(ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ge(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let u=this.prepareExternalUrl(i+Je(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){let u=this.prepareExternalUrl(i+Je(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ee),d.LFG(ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ze(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ae(Ne(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Ge,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(d.LFG(ct))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new He((0,d.LFG)(ct))}()},providedIn:"root"}),n})();function Ne(n){return n.replace(/\/index.html$/,"")}const xr=/\s+/,nt=[];let Wt=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=nt,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(xr):nt}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(xr):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(xr).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Rr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ms=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Rr(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,u),Wn(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Wn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Wn(n,e){n.context.$implicit=e.item}let Mi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Zt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_l("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_l("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Zt{constructor(){this.$implicit=null,this.ngIf=null}}function _l(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class bc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class fu{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ha=new fu,no=new bc;let Ns=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return ha;if((0,d.F4k)(t))return no;throw function $i(n,e){return new d.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Oo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Sp="browser",fa="server";function ks(n){return n===Sp}function pa(n){return n===fa}let vl=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new xp((0,d.LFG)(ce),window)}),n})();class xp{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ic(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=so(this.window.history)||so(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function so(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class vh extends le{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xl extends vh{static makeCurrent(){!function se(n){G||(G=n)}(new xl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bu(){return Ea=Ea||document.querySelector("base"),Ea?Ea.getAttribute("href"):null}();return null==t?null:function o_(n){Ls=Ls||document.createElement("a"),Ls.setAttribute("href",n);const e=Ls.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ro(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Ls,Ea=null;const kp=new d.OlP("TRANSITION_ID"),wh=[{provide:d.ip1,useFactory:function Rl(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[kp,ce,d.zs3],multi:!0}];let Oc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=new d.OlP("EventManagerPlugins");let Ml=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const u=i[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Iu),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ba{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Eh=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let o=i.get(t)??0;return o+=r,o>0?i.set(t,o):i.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),lo=(()=>{class n extends Eh{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(o=>o.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ia=/%COMP%/g,Tu=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Nl(n,e){return e.flat(100).map(t=>t.replace(Ia,n))}function Lc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vi=(()=>{class n{constructor(t,r,i,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new bh(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof kl?i.applyToHost(t):i instanceof co&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const u=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestory;switch(r.encapsulation){case d.ifc.Emulated:o=new kl(u,h,r,this.appId,p);break;case d.ifc.ShadowDom:return new tr(u,h,t,r);default:o=new co(u,h,r,p)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ml),d.LFG(lo),d.LFG(d.AFp),d.LFG(Tu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class bh{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Uo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ih(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ih(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Uo[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Uo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lc(r)):this.eventManager.addEventListener(e,t,Lc(r))}}function Ih(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class tr extends bh{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Nl(i.id,i.styles);for(const u of o){const h=document.createElement("style");h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class co extends bh{constructor(e,t,r,i,o=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Nl(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class kl extends co{constructor(e,t,r,i,o){const u=i+"-"+r.id;super(e,t,r,o,u),this.contentAttr=function Op(n){return"_ngcontent-%COMP%".replace(Ia,n)}(u),this.hostAttr=function Fc(n){return"_nghost-%COMP%".replace(Ia,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ch=(()=>{class n extends ba{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Su=["alt","control","meta","shift"],Dh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ol={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vr=(()=>{class n extends ba{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let u="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),u="code."),Su.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),u+=y+".")}),u+=o,0!=r.length||0===o.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static matchEventFullKeyCode(t,r){let i=Dh[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Su.forEach(u=>{u!==i&&(0,Ol[u])(t)&&(o+=u+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fp=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Sp},{provide:d.g9A,useValue:function Ta(){xl.makeCurrent()},multi:!0},{provide:ce,useFactory:function Bc(){return(0,d.RDi)(document),document},deps:[]}]),jo=new d.OlP(""),Au=[{provide:d.rWj,useClass:class Vs{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let o=i.length,u=!1;const h=function(p){u=u||p,o--,0==o&&r(u)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],$o=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Uc(){return new d.qLn},deps:[]},{provide:Iu,useClass:Ch,multi:!0,deps:[ce,d.R0b,d.Lbi]},{provide:Iu,useClass:vr,multi:!0,deps:[ce]},{provide:vi,useClass:vi,deps:[Ml,lo,d.AFp,Tu]},{provide:d.FYo,useExisting:vi},{provide:Eh,useExisting:lo},{provide:lo,useClass:lo,deps:[ce]},{provide:Ml,useClass:Ml,deps:[Iu,d.R0b]},{provide:class Rp{},useClass:Oc,deps:[]},[]];let Sa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:kp,useExisting:d.AFp},wh]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(jo,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...$o,...Au],imports:[Oo,d.hGG]}),n})(),Lp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ho(){return new Lp((0,d.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var hn=j(8996),zi=j(7669);function rt(...n){const e=(0,zi.yG)(n);return(0,hn.D)(n,e)}var os=j(7579);class nr extends os.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Mu=(0,j(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Xr=j(9751);const{isArray:Kc}=Array,{getPrototypeOf:Mh,prototype:qi,keys:go}=Object;function Yc(n){if(1===n.length){const e=n[0];if(Kc(e))return{args:e,keys:null};if(function zo(n){return n&&"object"==typeof n&&Mh(n)===qi}(e)){const t=go(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var qo=j(4671),dt=j(4004);const{isArray:Qc}=Array;function Wi(n){return(0,dt.U)(e=>function Nh(n,e){return Qc(e)?n(...e):n(e)}(n,e))}function Ul(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var cr=j(5403),Nu=j(9672);function Jc(...n){const e=(0,zi.yG)(n),t=(0,zi.jO)(n),{args:r,keys:i}=Yc(n);if(0===r.length)return(0,hn.D)([],e);const o=new Xr.y(function Wo(n,e,t=qo.y){return r=>{ku(e,()=>{const{length:i}=n,o=new Array(i);let u=i,h=i;for(let p=0;p<i;p++)ku(e,()=>{const y=(0,hn.D)(n[p],e);let b=!1;y.subscribe((0,cr.x)(r,S=>{o[p]=S,b||(b=!0,h--),h||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Ul(i,u):qo.y));return t?o.pipe(Wi(t)):o}function ku(n,e,t){n?(0,Nu.f)(t,n,e):e()}var Ou=j(8189);function Bl(...n){return function Bp(){return(0,Ou.J)(1)}()((0,hn.D)(n,(0,zi.yG)(n)))}var xa=j(8421);function kh(n){return new Xr.y(e=>{(0,xa.Xf)(n()).subscribe(e)})}var Xc=j(9635),ed=j(576);function Pu(n,e){const t=(0,ed.m)(n)?n:()=>n,r=i=>i.error(t());return new Xr.y(e?i=>e.schedule(r,0,i):r)}var ki=j(515),td=j(727),Nr=j(4482);function Fu(){return(0,Nr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,cr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class jp extends Xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new td.w0;const t=this.getSubject();e.add(this.source.subscribe((0,cr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=td.w0.EMPTY)}return e}refCount(){return Fu()(this)}}function Rn(n,e){return(0,Nr.e)((t,r)=>{let i=null,o=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe((0,cr.x)(r,p=>{i?.unsubscribe();let y=0;const b=o++;(0,xa.Xf)(n(p,b)).subscribe(i=(0,cr.x)(r,S=>r.next(e?e(p,S,b,y++):S),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function Oi(n){return n<=0?()=>ki.E:(0,Nr.e)((e,t)=>{let r=0;e.subscribe((0,cr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ra(...n){const e=(0,zi.yG)(n);return(0,Nr.e)((t,r)=>{(e?Bl(n,t,e):Bl(n,t)).subscribe(r)})}function Zi(n,e){return(0,Nr.e)((t,r)=>{let i=0;t.subscribe((0,cr.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var rr=j(5577);function Lu(n){return(0,Nr.e)((e,t)=>{let r=!1;e.subscribe((0,cr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function jl(n=Ma){return(0,Nr.e)((e,t)=>{let r=!1;e.subscribe((0,cr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ma(){return new Mu}function as(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zi((i,o)=>n(i,o,r)):qo.y,Oi(1),t?Lu(e):jl(()=>new Mu))}function mo(n,e){return(0,ed.m)(e)?(0,rr.z)(n,e,1):(0,rr.z)(n,1)}var Er=j(8505);function _o(n){return(0,Nr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,cr.x)(t,void 0,void 0,u=>{o=(0,xa.Xf)(n(u,_o(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Na(n,e){return(0,Nr.e)(function Bv(n,e,t,r,i){return(o,u)=>{let h=t,p=e,y=0;o.subscribe((0,cr.x)(u,b=>{const S=y++;p=h?n(p,b,S):(h=!0,b),r&&u.next(p)},i&&(()=>{h&&u.next(p),u.complete()})))}}(n,e,arguments.length>=2,!0))}function $l(n){return n<=0?()=>ki.E:(0,Nr.e)((e,t)=>{let r=[];e.subscribe((0,cr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ka(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zi((i,o)=>n(i,o,r)):qo.y,$l(1),t?Lu(e):jl(()=>new Mu))}function Vu(n){return(0,Nr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Rt="primary",wi=Symbol("RouteTitle");class $p{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ki(n){return new $p(n)}function Oh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const u=r[o],h=n[o];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function us(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Fh(n[i],e[i]))return!1;return!0}function Fh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Lh(n){return Array.prototype.concat.apply([],n)}function Vh(n){return n.length>0?n[n.length-1]:null}function D(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function A(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,hn.D)(Promise.resolve(n)):rt(n)}const B=!1,K={exact:function Ke(n,e,t){if(!kr(n.segments,e.segments)||!Gr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ke(n.children[r],e.children[r],t))return!1;return!0},subset:Vt},ee={exact:function Qe(n,e){return us(n,e)},subset:function mt(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fh(n[t],e[t]))},ignored:()=>!0};function ae(n,e,t){return K[t.paths](n.root,e.root,t.matrixParams)&&ee[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Vt(n,e,t){return Ut(n,e,e.segments,t)}function Ut(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!kr(i,t)||e.hasChildren()||!Gr(i,t,r))}if(n.segments.length===t.length){if(!kr(n.segments,t)||!Gr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Vt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(kr(n.segments,i)&&Gr(n.segments,i,r)&&n.children[Rt])&&Ut(n.children[Rt],e,o,r)}}function Gr(n,e,t){return e.every((r,i)=>ee[t](n[i].parameters,r.parameters))}class Tn{constructor(e=new Kt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ki(this.queryParams)),this._queryParamMap}toString(){return Uh.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,D(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hl(this)}}class ys{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ki(this.parameters)),this._parameterMap}toString(){return a_(this)}}function kr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ws=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Hp},providedIn:"root"}),n})();class Hp{parse(e){const t=new R(e);return new Tn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gl(e.root,!0)}`,r=function u_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ju(t)}=${ju(i)}`).join("&"):`${ju(t)}=${ju(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Gp(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Uh=new Hp;function Hl(n){return n.segments.map(e=>a_(e)).join("/")}function Gl(n,e){if(!n.hasChildren())return Hl(n);if(e){const t=n.children[Rt]?Gl(n.children[Rt],!1):"",r=[];return D(n.children,(i,o)=>{o!==Rt&&r.push(`${o}:${Gl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function vs(n,e){let t=[];return D(n.children,(r,i)=>{i===Rt&&(t=t.concat(e(r,i)))}),D(n.children,(r,i)=>{i!==Rt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Rt?[Gl(n.children[Rt],!1)]:[`${i}:${Gl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${Hl(n)}/${t[0]}`:`${Hl(n)}/(${t.join("//")})`}}function Bu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ju(n){return Bu(n).replace(/%3B/gi,";")}function Oa(n){return Bu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zl(n){return decodeURIComponent(n)}function zp(n){return zl(n.replace(/\+/g,"%20"))}function a_(n){return`${Oa(n.path)}${function qp(n){return Object.keys(n).map(e=>`;${Oa(e)}=${Oa(n[e])}`).join("")}(n.parameters)}`}const jv=/^[^\/()?;=#]+/;function Wp(n){const e=n.match(jv);return e?e[0]:""}const w=/^[^=?&#]+/,_=/^[^&#]+/;class R{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new Kt(e,t)),r}parseSegment(){const e=Wp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,B);return this.capture(e),new ys(zl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Wp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Wp(this.remaining);i&&(r=i,this.capture(r))}e[zl(t)]=zl(r)}parseQueryParam(e){const t=function g(n){const e=n.match(w);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function I(n){const e=n.match(_);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=zp(t),o=zp(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Wp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,B);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Rt);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[Rt]:new Kt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,B)}}function O(n){return n.segments.length>0?new Kt([],{[Rt]:n}):n}function J(n){const e={};for(const r of Object.keys(n.children)){const o=J(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function he(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}function je(n){return n instanceof Tn}const Xe=!1;function Ko(n,e,t,r,i){if(0===t.length)return Us(e.root,e.root,e.root,r,i);const o=function id(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Bh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return D(o.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===u?(o.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new Bh(t,e,r)}(t);return o.toRoot()?Us(e.root,e.root,new Kt([],{}),r,i):function u(p){const y=function $h(n,e,t,r){if(n.isAbsolute)return new Fa(e.root,!0,0);if(-1===r)return new Fa(t,t===e.root,0);return function ql(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new d.vHH(4005,Xe&&"Invalid number of '../'");i=r.segments.length}return new Fa(r,!1,i-o)}(t,r+(Pa(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,p),b=y.processChildren?La(y.segmentGroup,y.index,o.commands):Wl(y.segmentGroup,y.index,o.commands);return Us(e.root,y.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function Pa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function rd(n){return"object"==typeof n&&null!=n&&n.outlets}function Us(n,e,t,r,i){let u,o={};r&&D(r,(p,y)=>{o[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),u=n===e?t:Zp(n,e,t);const h=O(J(u));return new Tn(h,o,i)}function Zp(n,e,t){const r={};return D(n.children,(i,o)=>{r[o]=i===e?t:Zp(i,e,t)}),new Kt(n.segments,r)}class Bh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pa(r[0]))throw new d.vHH(4003,Xe&&"Root segment cannot have matrix parameters");const i=r.find(rd);if(i&&i!==Vh(r))throw new d.vHH(4004,Xe&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fa{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Wl(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return La(n,e,t);const r=function $v(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const u=n.segments[i],h=t[r];if(rd(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Hv(p,y,u))return o;r+=2}else{if(!Hv(p,{},u))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Kt(n.segments.slice(0,r.pathIndex),{});return o.children[Rt]=new Kt(n.segments.slice(r.pathIndex),n.children),La(o,0,i)}return r.match&&0===i.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?Kp(n,e,t):r.match?La(n,0,i):Kp(n,e,t)}function La(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function Hh(n){return rd(n[0])?n[0].outlets:{[Rt]:n}}(t),i={};if(!r[Rt]&&n.children[Rt]&&1===n.numberOfChildren&&0===n.children[Rt].segments.length){const o=La(n.children[Rt],e,t);return new Kt(n.segments,o.children)}return D(r,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[u]=Wl(n.children[u],e,o))}),D(n.children,(o,u)=>{void 0===r[u]&&(i[u]=o)}),new Kt(n.segments,i)}}function Kp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(rd(o)){const p=Yp(o.outlets);return new Kt(r,p)}if(0===i&&Pa(t[0])){r.push(new ys(n.segments[e].path,Fb(t[0]))),i++;continue}const u=rd(o)?o.outlets[Rt]:`${o}`,h=i<t.length-1?t[i+1]:null;u&&h&&Pa(h)?(r.push(new ys(u,Fb(h))),i+=2):(r.push(new ys(u,{})),i++)}return new Kt(r,{})}function Yp(n){const e={};return D(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Kp(new Kt([],{}),0,t))}),e}function Fb(n){const e={};return D(n,(t,r)=>e[r]=`${t}`),e}function Hv(n,e,t){return n==t.path&&us(e,t.parameters)}const Qp="imperative";class Va{constructor(e,t){this.id=e,this.url=t}}class Gv extends Va{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zl extends Va{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jp extends Va{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sd extends Va{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Xp extends Va{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gh extends Va{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZS extends Va{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KS extends Va{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class N1 extends Va{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YS extends Va{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zv{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QS{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l_{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qv{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vb{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wv{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let JS=(()=>{class n{createUrlTree(t,r,i,o,u,h){return Ko(t||r.root,i,o,u,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),eA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return JS.\u0275fac(e)},providedIn:"root"}),n})();class jb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ua(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ua(e,this._root).map(t=>t.value)}}function Zv(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zv(n,t);if(r)return r}return null}function Ua(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ua(n,t);if(r.length)return r.unshift(e),r}return[]}class Bs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class tA extends jb{constructor(e,t){super(e),this.snapshot=t,Kv(this,e)}toString(){return this.snapshot.toString()}}function nA(n,e){const t=function k1(n,e){const u=new c_([],{},{},"",{},Rt,e,null,n.root,-1,{});return new Hb("",new Bs(u,[]))}(n,e),r=new nr([new ys("",{})]),i=new nr({}),o=new nr({}),u=new nr({}),h=new nr(""),p=new eg(r,i,u,h,o,Rt,e,t.root);return p.snapshot=t.root,new tA(new Bs(p,[]),t)}class eg{constructor(e,t,r,i,o,u,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=h,this.title=this.data?.pipe((0,dt.U)(y=>y[wi]))??rt(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>Ki(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>Ki(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rA(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function $b(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class c_{get title(){return this.data?.[wi]}constructor(e,t,r,i,o,u,h,p,y,b,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=b,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ki(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ki(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Hb extends jb{constructor(e,t){super(t),this.url=e,Kv(this,t)}toString(){return Gb(this._root)}}function Kv(n,e){e.value._routerState=n,e.children.forEach(t=>Kv(n,t))}function Gb(n){const e=n.children.length>0?` { ${n.children.map(Gb).join(", ")} } `:"";return`${n.value}${e}`}function tg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,us(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),us(e.params,t.params)||n.params.next(t.params),function Ph(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!us(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),us(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yo(n,e){const t=us(n.params,e.params)&&function Uu(n,e){return kr(n,e)&&n.every((t,r)=>us(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Yo(n.parent,e.parent))}function qh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function zb(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qh(n,r,i);return qh(n,r)})}(n,e,t);return new Bs(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>qh(n,h)),u}}const r=function qb(n){return new eg(new nr(n.url),new nr(n.params),new nr(n.queryParams),new nr(n.fragment),new nr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>qh(n,o));return new Bs(r,i)}}const Wb="ngNavigationCancelingError";function iA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=je(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=sA(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function sA(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Wb]=!0,r.cancellationCode=e,t&&(r.url=t),r}function d_(n){return h_(n)&&je(n.url)}function h_(n){return n&&n[Wb]}class O1{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new f_,this.attachRef=null}}let f_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new O1,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rg=!1;let Yv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Rt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(f_),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,rg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,rg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,rg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,rg);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new oA(t,h,i.injector);if(r&&function aA(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(u,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class oA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===eg?this.route:e===f_?this.childContexts:this.parent.get(e,t)}}let Qv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Yv],encapsulation:2}),n})();function Jv(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function p_(n){const e=n.children&&n.children.map(p_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=Qv),t}function yo(n){return n.outlet||Rt}function Yb(n,e){const t=n.filter(r=>yo(r)===e);return t.push(...n.filter(r=>yo(r)!==e)),t}function ig(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Qb{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),tg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=zh(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,i[u],r),delete i[u]}),D(i,(o,u)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zh(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zh(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=zh(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Vb(o.value.snapshot))}),e.children.length&&this.forwardEvent(new l_(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(tg(i),i===o)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),tg(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=ig(i.snapshot),p=h?.get(d._Vd)??null;u.attachRef=null,u.route=i,u.resolver=p,u.injector=h,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class dA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ew{constructor(e,t){this.component=e,this.route=t}}function sg(n,e,t){const r=n._root;return Wh(r,e?e._root:null,t,[r.value])}function od(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Wh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=zh(e);return n.children.forEach(u=>{(function Jb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const p=function L1(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!kr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!kr(n.url,e.url)||!us(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yo(n,e)||!us(n.queryParams,e.queryParams);default:return!Yo(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new dA(r)):(o.data=u.data,o._resolvedData=u._resolvedData),Wh(n,e,o.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new ew(h.outlet.component,u))}else u&&og(e,h,i),i.canActivateChecks.push(new dA(r)),Wh(n,null,o.component?h?h.children:null:t,r,i)})(u,o[u.value.outlet],t,r.concat([u.value]),i),delete o[u.value.outlet]}),D(o,(u,h)=>og(u,t.getContext(h),i)),i}function og(n,e,t){const r=zh(n),i=n.value;D(r,(o,u)=>{og(o,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new ew(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Zh(n){return"function"==typeof n}function $u(n){return n instanceof Mu||"EmptyError"===n?.name}const g_=Symbol("INITIAL_VALUE");function Kl(){return Rn(n=>Jc(n.map(e=>e.pipe(Oi(1),Ra(g_)))).pipe((0,dt.U)(e=>{for(const t of e)if(!0!==t){if(t===g_)return g_;if(!1===t||t instanceof Tn)return t}return!0}),Zi(e=>e!==g_),Oi(1)))}function aw(n){return(0,Xc.z)((0,Er.b)(e=>{if(je(e))throw iA(0,e)}),(0,dt.U)(e=>!0===e))}const uw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nI(n,e,t,r,i){const o=lw(n,e,t);return o.matched?function Kh(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?rt(i.map(u=>{const h=od(u,n);return A(function iw(n){return n&&Zh(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Kl(),aw()):rt(!0)}(r=Jv(e,r),e,t).pipe((0,dt.U)(u=>!0===u?o:{...uw})):rt(o)}function lw(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...uw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Oh)(t,n,e);if(!i)return{...uw};const o={};D(i.posParams,(h,p)=>{o[p]=h.path});const u=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Yh(n,e,t,r){if(t.length>0&&function yA(n,e,t){return t.some(r=>cw(n,e,r)&&yo(r)!==Rt)}(n,t,r)){const o=new Kt(e,function rI(n,e,t,r){const i={};i[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&yo(o)!==Rt){const u=new Kt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[yo(o)]=u}return i}(n,e,r,new Kt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function iI(n,e,t){return t.some(r=>cw(n,e,r))}(n,t,r)){const o=new Kt(n.segments,function _A(n,e,t,r,i){const o={};for(const u of r)if(cw(n,t,u)&&!i[yo(u)]){const h=new Kt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[yo(u)]=h}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new Kt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function cw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function sI(n,e,t,r){return!!(yo(n)===r||r!==Rt&&cw(e,t,n))&&("**"===n.path||lw(e,n,t).matched)}function Qh(n,e,t){return 0===e.length&&!n.children[t]}const y_=!1;class Hu{constructor(e){this.segmentGroup=e||null}}class Jh{constructor(e){this.urlTree=e}}function ag(n){return Pu(new Hu(n))}function dw(n){return Pu(new Jh(n))}class oI{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=Yh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Rt).pipe((0,dt.U)(o=>this.createUrlTree(J(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_o(o=>{if(o instanceof Jh)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Hu?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Rt).pipe((0,dt.U)(i=>this.createUrlTree(J(i),e.queryParams,e.fragment))).pipe(_o(i=>{throw i instanceof Hu?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,y_)}createUrlTree(e,t,r){const i=O(e);return new Tn(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(o=>new Kt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,hn.D)(i).pipe(mo(o=>{const u=r.children[o],h=Yb(t,o);return this.expandSegmentGroup(e,h,u,o).pipe((0,dt.U)(p=>({segment:p,outlet:o})))}),Na((o,u)=>(o[u.outlet]=u.segment,o),{}),ka())}expandSegment(e,t,r,i,o,u){return(0,hn.D)(r).pipe(mo(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,u).pipe(_o(y=>{if(y instanceof Hu)return rt(null);throw y}))),as(h=>!!h),_o((h,p)=>{if($u(h))return Qh(t,i,o)?rt(new Kt([],{})):ag(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,u,h){return sI(i,t,o,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u):ag(t):ag(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dw(o):this.lineralizeSegments(r,o).pipe((0,rr.z)(u=>{const h=new Kt(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:b}=lw(t,i,o);if(!h)return ag(t);const S=this.applyRedirectCommands(p,i.redirectTo,b);return i.redirectTo.startsWith("/")?dw(S):this.lineralizeSegments(i,S).pipe((0,rr.z)(M=>this.expandSegment(e,t,r,M.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=Jv(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,dt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Kt(i,{})))):rt(new Kt(i,{}))):nI(t,r,i,e).pipe(Rn(({matched:u,consumedSegments:h,remainingSegments:p})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,rr.z)(b=>{const S=b.injector??e,M=b.routes,{segmentGroup:U,slicedSegments:z}=Yh(t,h,p,M),te=new Kt(U.segments,U.children);if(0===z.length&&te.hasChildren())return this.expandChildren(S,M,te).pipe((0,dt.U)(Be=>new Kt(h,Be)));if(0===M.length&&0===z.length)return rt(new Kt(h,{}));const ne=yo(r)===o;return this.expandSegment(S,te,M,z,ne?Rt:o,!0).pipe((0,dt.U)(qe=>new Kt(h.concat(qe.segments),qe.children)))})):ag(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function mA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?rt(!0):rt(i.map(u=>{const h=od(u,n);return A(function nw(n){return n&&Zh(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Kl(),aw())}(e,t,r).pipe((0,rr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Er.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function wA(n){return Pu(sA(y_,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[Rt])return e.redirectTo,Pu(new d.vHH(4e3,y_));i=i.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Tn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return D(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let u={};return D(t.children,(h,p)=>{u[p]=this.createSegmentGroup(e,h,r,i)}),new Kt(o,u)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,y_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class hw{}class ug{constructor(e,t,r,i,o,u,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=u,this.urlSerializer=h}recognize(){const e=Yh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Rt).pipe((0,dt.U)(t=>{if(null===t)return null;const r=new c_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Bs(r,t),o=new Hb(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=rA(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,hn.D)(Object.keys(r.children)).pipe(mo(i=>{const o=r.children[i],u=Yb(t,i);return this.processSegmentGroup(e,u,o,i)}),Na((i,o)=>i&&o?(i.push(...o),i):null),function Zo(n,e=!1){return(0,Nr.e)((t,r)=>{let i=0;t.subscribe((0,cr.x)(r,o=>{const u=n(o,i++);(u||e)&&r.next(o),!u&&r.complete()}))})}(i=>null!==i),Lu(null),ka(),(0,dt.U)(i=>{if(null===i)return null;const o=uI(i);return function IA(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,hn.D)(t).pipe(mo(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,o)),as(u=>!!u),_o(u=>{if($u(u))return Qh(r,i,o)?rt([]):rt(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!sI(t,r,i,o))return rt(null);let u;if("**"===t.path){const h=i.length>0?Vh(i).parameters:{},p=dI(r)+i.length;u=rt({snapshot:new c_(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ba(t),yo(t),t.component??t._loadedComponent??null,t,cI(r),p,hI(t)),consumedSegments:[],remainingSegments:[]})}else u=nI(r,t,i,e).pipe((0,dt.U)(({matched:h,consumedSegments:p,remainingSegments:y,parameters:b})=>{if(!h)return null;const S=dI(r)+p.length;return{snapshot:new c_(p,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ba(t),yo(t),t.component??t._loadedComponent??null,t,cI(r),S,hI(t)),consumedSegments:p,remainingSegments:y}}));return u.pipe(Rn(h=>{if(null===h)return rt(null);const{snapshot:p,consumedSegments:y,remainingSegments:b}=h;e=t._injector??e;const S=t._loadedInjector??e,M=function CA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:z}=Yh(r,y,b,M.filter(ne=>void 0===ne.redirectTo));if(0===z.length&&U.hasChildren())return this.processChildren(S,M,U).pipe((0,dt.U)(ne=>null===ne?null:[new Bs(p,ne)]));if(0===M.length&&0===z.length)return rt([new Bs(p,[])]);const te=yo(t)===o;return this.processSegment(S,M,U,z,te?Rt:o).pipe((0,dt.U)(ne=>null===ne?null:[new Bs(p,ne)]))}))}}function DA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uI(n){const e=[],t=new Set;for(const r of n){if(!DA(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=uI(r.children);e.push(new Bs(r.value,i))}return e.filter(r=>!t.has(r))}function cI(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dI(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ba(n){return n.data||{}}function hI(n){return n.resolve||{}}function pw(n){return"string"==typeof n.title||null===n.title}function gw(n){return Rn(e=>{const t=n(e);return t?(0,hn.D)(t).pipe((0,dt.U)(()=>e)):rt(e)})}const Xh=new d.OlP("ROUTES");let _w=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=A(t.loadComponent()).pipe((0,dt.U)(gI),(0,Er.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Vu(()=>{this.componentLoaders.delete(t)})),i=new jp(r,()=>new os.x).pipe(Fu());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,dt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,b=!1;Array.isArray(h)?y=h:(p=h.create(t).injector,y=Lh(p.get(Xh,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(p_),injector:p}}),Vu(()=>{this.childrenLoaders.delete(r)})),u=new jp(o,()=>new os.x).pipe(Fu());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return A(t()).pipe((0,dt.U)(gI),(0,rr.z)(r=>r instanceof d.YKP||Array.isArray(r)?rt(r):(0,hn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gI(n){return function Qo(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let w_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new os.x,this.configLoader=(0,d.f3M)(_w),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(ws),this.rootContexts=(0,d.f3M)(f_),this.navigationId=0,this.afterPreactivation=()=>rt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new QS(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new zv(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new nr({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qp,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zi(r=>0!==r.id),(0,dt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Rn(r=>{let i=!1,o=!1;return rt(r).pipe((0,Er.b)(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Rn(u=>{const h=t.browserUrlTree.toString(),p=!t.navigated||u.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!p&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new sd(u.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=u.rawUrl,u.resolve(null),ki.E}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return mI(u.source)&&(t.browserUrlTree=u.extractedUrl),rt(u).pipe(Rn(b=>{const S=this.transitions?.getValue();return this.events.next(new Gv(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),S!==this.transitions?.getValue()?ki.E:Promise.resolve(b)}),function aI(n,e,t,r){return Rn(i=>function EA(n,e,t,r,i){return new oI(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,dt.U)(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Er.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},r.urlAfterRedirects=b.urlAfterRedirects}),function TA(n,e,t,r,i){return(0,rr.z)(o=>function fw(n,e,t,r,i,o,u="emptyOnly"){return new ug(n,e,t,r,i,u,o).recognize().pipe(Rn(h=>null===h?function bA(n){return new Xr.y(e=>e.error(n))}(new hw):rt(h)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe((0,dt.U)(u=>({...o,targetSnapshot:u}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Er.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const M=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(M,b)}t.browserUrlTree=b.urlAfterRedirects}const S=new Gh(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}));if(p&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:S,source:M,restoredState:U,extras:z}=u,te=new Gv(b,this.urlSerializer.serialize(S),M,U);this.events.next(te);const ne=nA(S,this.rootComponentType).snapshot;return rt(r={...u,targetSnapshot:ne,urlAfterRedirects:S,extras:{...z,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new sd(u.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=u.rawUrl,u.resolve(null),ki.E}}),(0,Er.b)(u=>{const h=new ZS(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),(0,dt.U)(u=>r={...u,guards:sg(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function m_(n,e){return(0,rr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?rt({...t,guardsResult:!0}):function pA(n,e,t,r){return(0,hn.D)(n).pipe((0,rr.z)(i=>function gA(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?rt(o.map(h=>{const p=ig(e)??i,y=od(h,p);return A(function hA(n){return n&&Zh(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(as())})).pipe(Kl()):rt(!0)}(i.component,i.route,t,e,r)),as(i=>!0!==i,!0))}(u,r,i,n).pipe((0,rr.z)(h=>h&&function Xb(n){return"boolean"==typeof n}(h)?function sw(n,e,t,r){return(0,hn.D)(e).pipe(mo(i=>Bl(function ad(n,e){return null!==n&&e&&e(new Lb(n)),rt(!0)}(i.route.parent,r),function __(n,e){return null!==n&&e&&e(new qv(n)),rt(!0)}(i.route,r),function ow(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function tw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>kh(()=>rt(u.guards.map(p=>{const y=ig(u.node)??t,b=od(p,y);return A(function rw(n){return n&&Zh(n.canActivateChild)}(b)?b.canActivateChild(r,n):y.runInContext(()=>b(r,n))).pipe(as())})).pipe(Kl())));return rt(o).pipe(Kl())}(n,i.path,t),function tI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(o=>kh(()=>{const u=ig(e)??t,h=od(o,u);return A(function V1(n){return n&&Zh(n.canActivate)}(h)?h.canActivate(e,n):u.runInContext(()=>h(e,n))).pipe(as())}));return rt(i).pipe(Kl())}(n,i.route,t))),as(i=>!0!==i,!0))}(r,o,n,e):rt(h)),(0,dt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,u=>this.events.next(u)),(0,Er.b)(u=>{if(r.guardsResult=u.guardsResult,je(u.guardsResult))throw iA(0,u.guardsResult);const h=new KS(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),Zi(u=>!!u.guardsResult||(t.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),gw(u=>{if(u.guards.canActivateChecks.length)return rt(u).pipe((0,Er.b)(h=>{const p=new N1(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),Rn(h=>{let p=!1;return rt(h).pipe(function U1(n,e){return(0,rr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);let o=0;return(0,hn.D)(i).pipe(mo(u=>function B1(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!pw(i)&&(o[wi]=i.title),function fI(n,e,t,r){const i=function j1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return rt({});const o={};return(0,hn.D)(i).pipe((0,rr.z)(u=>function pI(n,e,t,r){const i=ig(e)??r,o=od(n,i);return A(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[u],e,t,r).pipe(as(),(0,Er.b)(h=>{o[u]=h}))),$l(1),function nd(n){return(0,dt.U)(()=>n)}(o),_o(u=>$u(u)?ki.E:Pu(u)))}(o,n,e,r).pipe((0,dt.U)(u=>(n._resolvedData=u,n.data=rA(n,t).resolve,i&&pw(i)&&(n.data[wi]=i.title),null)))}(u.route,r,n,e)),(0,Er.b)(()=>o++),$l(1),(0,rr.z)(u=>o===i.length?rt(t):ki.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Er.b)({next:()=>p=!0,complete:()=>{p||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,Er.b)(h=>{const p=new YS(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),gw(u=>{const h=p=>{const y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe((0,Er.b)(b=>{p.component=b}),(0,dt.U)(()=>{})));for(const b of p.children)y.push(...h(b));return y};return Jc(h(u.targetSnapshot.root)).pipe(Lu(),Oi(1))}),gw(()=>this.afterPreactivation()),(0,dt.U)(u=>{const h=function ng(n,e,t){const r=qh(n,e._root,t?t._root:void 0);return new tA(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return r={...u,targetRouterState:h}}),(0,Er.b)(u=>{t.currentUrlTree=u.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),t.routerState=u.targetRouterState,"deferred"===t.urlUpdateStrategy&&(u.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,u),t.browserUrlTree=u.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new Qb(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u)),Oi(1),(0,Er.b)({next:u=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Zl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{i=!0}}),Vu(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),_o(u=>{if(o=!0,h_(u)){d_(u)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new Jp(r.id,this.urlSerializer.serialize(r.extractedUrl),u.message,u.cancellationCode);if(this.events.next(h),d_(u)){const p=t.urlHandlingStrategy.merge(u.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||mI(r.source)};t.scheduleNavigation(p,Qp,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new Xp(r.id,this.urlSerializer.serialize(r.extractedUrl),u,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(u))}catch(p){r.reject(p)}}return ki.E}))}))}cancelNavigationTransition(t,r,i){const o=new Jp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mI(n){return n!==Qp}let _I=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Rt);return r}getResolvedTitleForRoute(t){return t.data[wi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(SA)},providedIn:"root"}),n})(),SA=(()=>{class n extends _I{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(xA)},providedIn:"root"}),n})();class AA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let xA=(()=>{class n extends AA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qt=new d.OlP("",{providedIn:"root",factory:()=>({})});let vI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(wI)},providedIn:"root"}),n})(),wI=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MA(n){throw n}function NA(n,e,t){return e.parse("/")}const EI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(qt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||MA,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||NA,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(vI),this.routeReuseStrategy=(0,d.f3M)(yI),this.urlCreationStrategy=(0,d.f3M)(eA),this.titleStrategy=(0,d.f3M)(_I),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Lh((0,d.f3M)(Xh,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(w_),this.urlSerializer=(0,d.f3M)(ws),this.location=(0,d.f3M)(He),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Tn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=nA(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Qp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,u,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(p_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:u,queryParamsHandling:h,preserveFragment:p}=r,y=p?this.currentUrlTree.fragment:u;let b=null;switch(h){case"merge":b={...this.currentUrlTree.queryParams,...o};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=o||null}return null!==b&&(b=this.removeEmptyProps(b)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,b,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=je(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Qp,null,r)}navigate(t,r={skipLocationChange:!1}){return function OA(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...EI}:!1===r?{...kA}:r,je(t))return ae(this.currentUrlTree,t,i);const o=this.parseUrl(t);return ae(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,u){if(this.disposed)return Promise.resolve(!1);let h,p,y,b;return u?(h=u.resolve,p=u.reject,y=u.promise):y=new Promise((S,M)=>{h=S,p=M}),b="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:b,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",u)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b_=(()=>{class n{constructor(t,r,i,o,u,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=u,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new os.x;const p=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Zl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Yi),d.Y36(eg),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(ct))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class yw{}let vw=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Zi(t=>t instanceof Zl),mo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,d.MMx)(o.providers,t,`Route: ${o.path}`));const u=o._injector??t,h=o._loadedInjector??u;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(u,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,hn.D)(i).pipe((0,Ou.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const o=i.pipe((0,rr.z)(u=>null===u?rt(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,hn.D)([o,u]).pipe((0,Ou.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yi),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(yw),d.LFG(_w))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dg=new d.OlP("");let II=(()=>{class n{constructor(t,r,i,o,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Gv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wv&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wv(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var vo=(()=>((vo=vo||{})[vo.COMPLETE=0]="COMPLETE",vo[vo.FAILED=1]="FAILED",vo[vo.REDIRECTING=2]="REDIRECTING",vo))();const hg=!1;function ud(n,e){return{\u0275kind:n,\u0275providers:e}}const Ew=new d.OlP("",{providedIn:"root",factory:()=>!1});function fg(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Yi),i=n.get(CI);1===n.get(I_)&&r.initialNavigation(),n.get(DI,null,d.XFs.Optional)?.setUpPreloading(),n.get(dg,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const CI=new d.OlP(hg?"bootstrap done indicator":"",{factory:()=>new os.x}),I_=new d.OlP(hg?"initial navigation":"",{providedIn:"root",factory:()=>1});function VA(){let n=[];return n=hg?[{provide:d.Xts,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Yi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function Ub(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ud(1,n)}const DI=new d.OlP(hg?"router preloader":"");function UA(n){return ud(0,[{provide:DI,useExisting:vw},{provide:yw,useExisting:n}])}const nf=!1,$A=new d.OlP(nf?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),bw=[He,{provide:ws,useClass:Hp},Yi,f_,{provide:eg,useFactory:function ww(n){return n.routerState.root},deps:[Yi]},_w,nf?{provide:Ew,useValue:!0}:[]];function HA(){return new d.PXZ("Router",Yi)}let GA=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[bw,nf&&r?.enableTracing?VA().\u0275providers:[],{provide:Xh,multi:!0,useValue:t},{provide:$A,useFactory:AI,deps:[[Yi,new d.FiY,new d.tp0]]},{provide:qt,useValue:r||{}},r?.useHash?{provide:ct,useClass:Oe}:{provide:ct,useClass:Me},{provide:dg,useFactory:()=>{const n=(0,d.f3M)(vl),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(qt),r=(0,d.f3M)(w_),i=(0,d.f3M)(ws);return t.scrollOffset&&n.setOffset(t.scrollOffset),new II(i,r,n,e,t)}},r?.preloadingStrategy?UA(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:HA},r?.initialNavigation?qA(r):[],[{provide:xI,useFactory:fg},{provide:d.tb,multi:!0,useExisting:xI}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Xh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($A,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Qv]}),n})();function AI(n){if(nf&&n)throw new d.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function qA(n){return["disabled"===n.initialNavigation?ud(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Yi);return()=>{e.setUpLocationChangeListener()}}},{provide:I_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ud(2,[{provide:I_,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(ve,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Yi),o=e.get(CI);(function G1(n,e){n.events.pipe(Zi(t=>t instanceof Zl||t instanceof Jp||t instanceof Xp||t instanceof sd),(0,dt.U)(t=>t instanceof Zl||t instanceof sd?vo.COMPLETE:t instanceof Jp&&(0===t.code||1===t.code)?vo.REDIRECTING:vo.FAILED),Zi(t=>t!==vo.REDIRECTING),Oi(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(w_).afterPreactivation=()=>(r(!0),o.closed?rt(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const xI=new d.OlP(nf?"Router Initializer":"");var Iw=j(1389),V=j(2090),Pi=j(6881),Es=j(1877),wo=j(4859),gg=j(4986),En=j(4976);function mg(){return(0,Nr.e)((n,e)=>{let t,r=!1;n.subscribe((0,cr.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Cw(n,e=qo.y){return n=n??Dw,(0,Nr.e)((t,r)=>{let i,o=!0;t.subscribe((0,cr.x)(r,u=>{const h=e(u);(o||!n(i,h))&&(o=!1,i=h,r.next(u))}))})}function Dw(n,e){return n===e}var ut,ci=j(2011),D_=(j(9568),j(3942)),we=j(5861),RI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eo={},Tw=Tw||{},xt=RI||self;function T_(){}function S_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function A_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var x_="closure_uid_"+(1e9*Math.random()>>>0),WA=0;function ZA(n,e,t){return n.call.apply(n.bind,arguments)}function KA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Fi(n,e,t){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ZA:KA).apply(null,arguments)}function R_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function bi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function ja(){this.s=this.s,this.o=this.o}ja.prototype.s=!1,ja.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function Sw(n){Object.prototype.hasOwnProperty.call(n,x_)&&n[x_]||(n[x_]=++WA)}(this)},ja.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const MI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Aw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function NI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(S_(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let u=0;u<o;u++)n[i+u]=r[u]}else n.push(r)}}function Qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qi.prototype.h=function(){this.defaultPrevented=!0};var $a=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",T_,e),xt.removeEventListener("test",T_,e)}catch{}return n}();function sf(n){return/^[\s\xa0]*$/.test(n)}var kI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xw(n,e){return n<e?-1:n>e?1:0}function _g(){var n=xt.navigator;return n&&(n=n.userAgent)?n:""}function Ha(n){return-1!=_g().indexOf(n)}function Rw(n){return Rw[" "](n),n}function OI(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}Rw[" "]=T_;var lf,n,Mw=Ha("Opera"),af=Ha("Trident")||Ha("MSIE"),PI=Ha("Edge"),uf=PI||af,yg=Ha("Gecko")&&!(-1!=_g().toLowerCase().indexOf("webkit")&&!Ha("Edge"))&&!(Ha("Trident")||Ha("MSIE"))&&!Ha("Edge"),M_=-1!=_g().toLowerCase().indexOf("webkit")&&!Ha("Edge");function QA(){var n=xt.document;return n?n.documentMode:void 0}e:{var FI="",N_=(n=_g(),yg?/rv:([^\);]+)(\)|;)/.exec(n):PI?/Edge\/([\d\.]+)/.exec(n):af?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):M_?/WebKit\/(\S+)/.exec(n):Mw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(N_&&(FI=N_?N_[1]:""),af){var k_=QA();if(null!=k_&&k_>parseFloat(FI)){lf=String(k_);break e}}lf=FI}var LI={},O_=xt.document&&af&&(QA()||parseInt(lf,10))||void 0;function Yl(n,e){if(Qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yg){e:{try{Rw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:wg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yl.$.h.call(this)}}bi(Yl,Qi);var wg={2:"touch",3:"pen",4:"mouse"};Yl.prototype.h=function(){Yl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Eg="closure_listenable_"+(1e6*Math.random()|0),UI=0;function BI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++UI,this.fa=this.ia=!1}function P_(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Nw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function cf(n){const e={};for(const t in n)e[t]=n[t];return e}const jI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function JA(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<jI.length;o++)t=jI[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function F_(n){this.src=n,this.g={},this.h=0}function kw(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=MI(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(P_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ow(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}F_.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=Ow(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new BI(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var Pw="closure_lm_"+(1e6*Math.random()|0),Fw={};function $I(n,e,t,r,i){if(r&&r.once)return L_(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)$I(n,e[o],t,r,i);return null}return t=Uw(t),n&&n[Eg]?n.O(e,t,A_(r)?!!r.capture:!!r,i):HI(n,e,t,!1,r,i)}function HI(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var u=A_(i)?!!i.capture:!!i,h=Lw(n);if(h||(n[Pw]=h=new F_(n)),(t=h.add(e,t,r,u,o)).proxy)return t;if(r=function GI(){const e=XA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)$a||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(qI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function L_(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)L_(n,e[o],t,r,i);return null}return t=Uw(t),n&&n[Eg]?n.P(e,t,A_(r)?!!r.capture:!!r,i):HI(n,e,t,!0,r,i)}function zI(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)zI(n,e[o],t,r,i);else r=A_(r)?!!r.capture:!!r,t=Uw(t),n&&n[Eg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ow(o=n.g[e],t,r,i))&&(P_(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Lw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ow(e,t,r,i)),(t=-1<n?e[n]:null)&&bg(t))}function bg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Eg])kw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(qI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Lw(e))?(kw(t,n),0==t.h&&(t.src=null,e[Pw]=null)):P_(n)}}}function qI(n){return n in Fw?Fw[n]:Fw[n]="on"+n}function XA(n,e){if(n.fa)n=!0;else{e=new Yl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&bg(n),n=t.call(r,e)}return n}function Lw(n){return(n=n[Pw])instanceof F_?n:null}var Vw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uw(n){return"function"==typeof n?n:(n[Vw]||(n[Vw]=function(e){return n.handleEvent(e)}),n[Vw])}function Ii(){ja.call(this),this.i=new F_(this),this.S=this,this.J=null}function Li(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Qi(e,n);else if(e instanceof Qi)e.target=e.target||n;else{var i=e;JA(e=new Qi(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];i=Ig(u,r,!0,e)&&i}if(i=Ig(u=e.g=n,r,!0,e)&&i,i=Ig(u,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ig(u=e.g=t[o],r,!1,e)&&i}function Ig(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.fa&&u.capture==t){var h=u.listener,p=u.la||u.src;u.ia&&kw(n.i,u),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}bi(Ii,ja),Ii.prototype[Eg]=!0,Ii.prototype.removeEventListener=function(n,e,t,r){zI(this,n,e,t,r)},Ii.prototype.N=function(){if(Ii.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)P_(t[r]);delete n.g[e],n.h--}}this.J=null},Ii.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ii.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var V_=xt.JSON.stringify;function ex(){var n=Jo;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jw,Bw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Y1,n=>n.reset());class Y1{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function U_(n){xt.setTimeout(()=>{throw n},0)}function WI(n,e){jw||function $w(){var n=xt.Promise.resolve(void 0);jw=function(){n.then(Cg)}}(),Hw||(jw(),Hw=!0),Jo.add(n,e)}var Hw=!1,Jo=new class K1{constructor(){this.h=this.g=null}add(e,t){const r=Bw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Cg(){for(var n;n=ex();){try{n.h.call(n.g)}catch(t){U_(t)}var e=Bw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Hw=!1}function di(n,e){Ii.call(this),this.h=n||1,this.g=e||xt,this.j=Fi(this.qb,this),this.l=Date.now()}function Gu(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function df(n,e,t){if("function"==typeof n)t&&(n=Fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function js(n){n.g=df(()=>{n.g=null,n.i&&(n.i=!1,js(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}bi(di,Ii),(ut=di.prototype).ga=!1,ut.T=null,ut.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Li(this,"tick"),this.ga&&(Gu(this),this.start()))}},ut.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.N=function(){di.$.N.call(this),Gu(this),delete this.g};class Gw extends ja{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:js(this)}N(){super.N(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function za(n){ja.call(this),this.h=n,this.g={}}bi(za,ja);var ld=[];function cd(n,e,t,r){Array.isArray(t)||(t&&(ld[0]=t.toString()),t=ld);for(var i=0;i<t.length;i++){var o=$I(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function dd(n){Nw(n.g,function(e,t){this.g.hasOwnProperty(t)&&bg(e)},n),n.g={}}function zu(){this.g=!0}function Xo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ZI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return V_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}za.prototype.N=function(){za.$.N.call(this),dd(this)},za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zu.prototype.Ea=function(){this.g=!1},zu.prototype.info=function(){};var Ql={},zw=null;function Dg(){return zw=zw||new Ii}function qw(n){Qi.call(this,Ql.Ta,n)}function gf(n){const e=Dg();Li(e,new qw(e))}function Ww(n,e){Qi.call(this,Ql.STAT_EVENT,n),this.stat=e}function Ji(n){const e=Dg();Li(e,new Ww(e,n))}function Zw(n,e){Qi.call(this,Ql.Ua,n),this.size=e}function Tg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}Ql.Ta="serverreachability",bi(qw,Qi),Ql.STAT_EVENT="statevent",bi(Ww,Qi),Ql.Ua="timingevent",bi(Zw,Qi);var B_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Kw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yw(){}function j_(){}Yw.prototype.h=null;var _f,hd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jw(){Qi.call(this,"d")}function mf(){Qi.call(this,"c")}function yf(){}function Sg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new za(this),this.P=$_,this.V=new di(n=uf?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Ag}function Ag(){this.i=null,this.g="",this.h=!1}bi(Jw,Qi),bi(mf,Qi),bi(yf,Yw),yf.prototype.g=function(){return new XMLHttpRequest},yf.prototype.i=function(){return{}},_f=new yf;var $_=45e3,H_={},xg={};function Rg(n,e,t){n.L=1,n.v=Pg(qa(e)),n.s=t,n.S=!0,Xw(n,null)}function Xw(n,e){n.G=Date.now(),Mg(n),n.A=qa(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),tC(t.i,"t",r),n.C=0,t=n.l.I,n.h=new Ag,n.g=fC(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Gw(Fi(n.Pa,n,n.g),n.O)),cd(n.U,n.g,"readystatechange",n.nb),e=n.I?cf(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),gf(),function hf(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var u="",h=o.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var b=y[0];y=y[1];var S=b.split("_");u=2<=S.length&&"type"==S[1]?u+(b+"=")+y+"&":u+(b+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function e0(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function G_(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=KI(n,t),i==xg){4==e&&(n.o=4,Ji(14),r=!1),Xo(n.j,n.m,null,"[Incomplete Response]");break}if(i==H_){n.o=4,Ji(15),Xo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xo(n.j,n.m,i,null),n0(n,i)}e0(n)&&i!=xg&&i!=H_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ji(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Q_(e),e.L=!0,Ji(11))):(Xo(n.j,n.m,t,"[Invalid Chunked Response]"),Jl(n),vf(n))}function KI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xg:(t=Number(e.substring(t,r)),isNaN(t)?H_:(r+=1)+t>e.length?xg:(e=e.substr(r,t),n.C=r+t,e))}function Mg(n){n.Y=Date.now()+n.P,t0(n,n.P)}function t0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Tg(Fi(n.lb,n),e)}function Ng(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function vf(n){0==n.l.H||n.J||E0(n.l,n)}function Jl(n){Ng(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,Gu(n.V),dd(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function n0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||c0(t.h,n)))if(!n.K&&c0(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;jg(t),Z_(t)}Y_(t),Ji(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=Tg(Fi(t.ib,t),6e3));if(1>=l0(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else yd(t,11)}else if((n.K||t.g==n)&&jg(t),!sf(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.J=y[1],t.oa=y[2];const b=y[3];null!=b&&(t.qa=b,t.j.info("VER="+t.qa));const S=y[4];null!=S&&(t.Ga=S,t.j.info("SVER="+t.Ga));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(t.K=r=1.5*M,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var o=r.h;o.g||-1==z.indexOf("spdy")&&-1==z.indexOf("quic")&&-1==z.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(q_(o,o.h),o.h=null))}if(r.F){const te=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.Da=te,ir(r.G,r.F,te))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=hC(r,r.I?r.oa:null,r.Y),u.K){d0(r.h,u);var h=u,p=r.K;p&&h.setTimeout(p),h.B&&(Ng(h),Mg(h)),r.g=u}else v0(r);0<t.i.length&&Bg(t)}else"stop"!=y[0]&&"close"!=y[0]||yd(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?yd(t,7):Cf(t):"noop"!=y[0]&&t.l&&t.l.Aa(y),t.A=0)}gf()}catch{}}function r0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(S_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function QI(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(S_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function YI(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(S_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(ut=Sg.prototype).setTimeout=function(n){this.P=n},ut.nb=function(n){n=n.target;const e=this.M;e&&3==qu(n)?e.l():this.Pa(n)},ut.Pa=function(n){try{if(n==this.g)e:{const b=qu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||uf||this.g&&(this.h.h||this.g.ja()||f0(this.g)))){this.J||4!=b||7==e||gf(),Ng(this);var t=this.g.da();this.aa=t;t:if(e0(this)){var r=f0(this.g);n="";var i=r.length,o=4==qu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jl(this),vf(this);var u="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function ff(n,e,t,r,i,o,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sf(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ji(12),Jl(this),vf(this);break e}Xo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,n0(this,t)}this.S?(G_(this,b,u),uf&&this.i&&3==b&&(cd(this.U,this.V,"tick",this.mb),this.V.start())):(Xo(this.j,this.m,u,null),n0(this,u)),4==b&&Jl(this),this.i&&!this.J&&(4==b?E0(this.l,this):(this.i=!1,Mg(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ji(12)):(this.o=0,Ji(13)),Jl(this),vf(this)}}}catch{}},ut.mb=function(){if(this.g){var n=qu(this.g),e=this.g.ja();this.C<e.length&&(Ng(this),G_(this,n,e),this.i&&4!=n&&Mg(this))}},ut.cancel=function(){this.J=!0,Jl(this)},ut.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function pf(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(gf(),Ji(17)),Jl(this),this.o=2,vf(this)):t0(this,this.Y-n)};var z_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xl){this.h=void 0!==e?e:n.h,kg(this,n.j),this.s=n.s,this.g=n.g,Og(this,n.m),this.l=n.l,e=n.i;var t=new pd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),s0(this,t),this.o=n.o}else n&&(t=String(n).match(z_))?(this.h=!!e,kg(this,t[1]||"",!0),this.s=ec(t[2]||""),this.g=ec(t[3]||"",!0),Og(this,t[4]),this.l=ec(t[5]||"",!0),s0(this,t[6]||"",!0),this.o=ec(t[7]||"")):(this.h=!!e,this.i=new pd(null,this.h))}function qa(n){return new Xl(n)}function kg(n,e,t){n.j=t?ec(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Og(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function s0(n,e,t){e instanceof pd?(n.i=e,function ix(n,e){e&&!n.j&&(gd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(rx(this,r),tC(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=bo(e,a0)),n.i=new pd(e,n.h))}function ir(n,e,t){n.i.set(e,t)}function Pg(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ec(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bo(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tx),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tx(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bo(e,XI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bo(e,XI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(bo(t,"/"==t.charAt(0)?fd:o0,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bo(t,nx)),n.join("")};var XI=/[#\/\?@]/g,o0=/[#\?:]/g,fd=/[#\?]/g,a0=/[#\?@]/g,nx=/#/g;function pd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function gd(n){n.g||(n.g=new Map,n.h=0,n.i&&function JI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function rx(n,e){gd(n),e=md(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function eC(n,e){return gd(n),e=md(n,e),n.g.has(e)}function tC(n,e,t){rx(n,e),0<t.length&&(n.i=null,n.g.set(md(n,e),Aw(t)),n.h+=t.length)}function md(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function u0(n){this.l=n||sx,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ka&&xt.g.Ka()&&xt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=pd.prototype).add=function(n,e){gd(this),this.i=null,n=md(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){gd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ut.sa=function(){gd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},ut.Z=function(n){gd(this);let e=[];if("string"==typeof n)eC(this,n)&&(e=e.concat(this.g.get(md(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return gd(this),this.i=null,eC(this,n=md(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=o;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var sx=10;function nC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function l0(n){return n.h?1:n.g?n.g.size:0}function c0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function q_(n,e){n.g?n.g.add(e):n.h=e}function d0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _d(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Aw(n.i)}function h0(){}function ox(){this.g=new h0}function rC(n,e,t){const r=t||"";try{r0(n,function(i,o){let u=i;A_(i)&&(u=V_(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Fg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function W_(n){this.l=n.fc||null,this.j=n.ob||!1}function wf(n,e){Ii.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Lg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}u0.prototype.cancel=function(){if(this.i=_d(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},h0.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},h0.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},bi(W_,Yw),W_.prototype.g=function(){return new wf(this.l,this.j)},W_.prototype.i=function(n){return function(){return n}}({}),bi(wf,Ii);var Lg=0;function ea(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Vg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ug(n)}function Ug(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=wf.prototype).open=function(n,e){if(this.readyState!=Lg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ug(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||xt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vg(this)),this.readyState=Lg},ut.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ug(this)),this.g&&(this.readyState=3,Ug(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ea(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ut.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vg(this):Ug(this),3==this.readyState&&ea(this)}},ut.Za=function(n){this.g&&(this.response=this.responseText=n,Vg(this))},ut.Ya=function(n){this.g&&(this.response=n,Vg(this))},ut.ka=function(){this.g&&Vg(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(wf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Wa=xt.JSON.parse;function Cn(n){Ii.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Io,this.L=this.M=!1}bi(Cn,Ii);var Io="",iC=/^https?$/i,sC=["POST","PUT"];function oC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aC(n),Ef(n)}function aC(n){n.F||(n.F=!0,Li(n,"complete"),Li(n,"error"))}function uC(n){if(n.h&&typeof Tw<"u"&&(!n.C[1]||4!=qu(n)||2!=n.da()))if(n.v&&4==qu(n))df(n.La,0,n);else if(Li(n,"readystatechange"),4==qu(n)){n.h=!1;try{const h=n.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.I).match(z_)[1]||null;if(!i&&xt.self&&xt.self.location){var o=xt.self.location.protocol;i=o.substr(0,o.length-1)}r=!iC.test(i?i.toLowerCase():"")}t=r}if(t)Li(n,"complete"),Li(n,"success");else{n.m=6;try{var u=2<qu(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",aC(n)}}finally{Ef(n)}}}function Ef(n,e){if(n.g){bf(n);const t=n.g,r=n.C[0]?T_:null;n.g=null,n.C=null,e||Li(n,"ready");try{t.onreadystatechange=r}catch{}}}function bf(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function qu(n){return n.g?n.g.readyState:0}function f0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Io:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lC(n){let e="";return Nw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function p0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function If(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function g0(n){this.Ga=0,this.i=[],this.j=new zu,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=If("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=If("baseRetryDelayMs",5e3,n),this.hb=If("retryDelaySeedMs",1e4,n),this.eb=If("forwardChannelMaxRetries",2,n),this.xa=If("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new u0(n&&n.concurrentRequestLimit),this.Ja=new ox,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Cf(n){if(m0(n),3==n.H){var e=n.W++,t=qa(n.G);ir(t,"SID",n.J),ir(t,"RID",e),ir(t,"TYPE","terminate"),Df(n,t),(e=new Sg(n,n.j,e,void 0)).L=2,e.v=Pg(qa(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=fC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Mg(e)}dC(n)}function Z_(n){n.g&&(Q_(n),n.g.cancel(),n.g=null)}function m0(n){Z_(n),n.u&&(xt.clearTimeout(n.u),n.u=null),jg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function Bg(n){nC(n.h)||n.m||(n.m=!0,WI(n.Na,n),n.C=0)}function K_(n,e){var t;t=e?e.m:n.W++;const r=qa(n.G);ir(r,"SID",n.J),ir(r,"RID",t),ir(r,"AID",n.V),Df(n,r),n.o&&n.s&&p0(r,n.o,n.s),t=new Sg(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=y0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),q_(n.h,t),Rg(t,r,e)}function Df(n,e){n.ma&&Nw(n.ma,function(t,r){ir(e,r,t)}),n.l&&r0({},function(t,r){ir(e,r,t)})}function y0(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Fi(n.l.Va,n.l,n):null;e:{var i=n.i;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=i[0].h,u.push("ofs="+o)):o=0:u.push("ofs="+o);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const b=i[p].g;if(y-=o,0>y)o=Math.max(0,i[p].h-100),h=!1;else try{rC(b,u,"req"+y+"_")}catch{r&&r(b)}}if(h){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function v0(n){n.g||n.u||(n.ba=1,WI(n.Ma,n),n.A=0)}function Y_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Tg(Fi(n.Ma,n),cC(n,n.A)),n.A++,0))}function Q_(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function w0(n){n.g=new Sg(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=qa(n.wa);ir(e,"RID","rpc"),ir(e,"SID",n.J),ir(e,"CI",n.M?"0":"1"),ir(e,"AID",n.V),ir(e,"TYPE","xmlhttp"),Df(n,e),n.o&&n.s&&p0(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=Pg(qa(e)),t.s=null,t.S=!0,Xw(t,n)}function jg(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function E0(n,e){var t=null;if(n.g==e){jg(n),Q_(n),n.g=null;var r=2}else{if(!c0(n.h,e))return;t=e.F,d0(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Li(r=Dg(),new Zw(r,t)),Bg(n)}else v0(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function _0(n,e){return!(l0(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Tg(Fi(n.Na,n,e),cC(n,n.C)),n.C++,0)))}(n,e)||2==r&&Y_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:yd(n,5);break;case 4:yd(n,10);break;case 3:yd(n,6);break;default:yd(n,2)}}function cC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function yd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Fi(n.pb,n);t||(t=new Xl("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||kg(t,"https"),Pg(t)),function ax(n,e){const t=new zu;if(xt.Image){const r=new Image;r.onload=R_(Fg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=R_(Fg,t,r,"TestLoadImage: error",!1,e),r.onabort=R_(Fg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=R_(Fg,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ji(2);n.H=0,n.l&&n.l.za(e),dC(n),m0(n)}function dC(n){if(n.H=0,n.pa=[],n.l){const e=_d(n.h);(0!=e.length||0!=n.i.length)&&(NI(n.pa,e),NI(n.pa,n.i),n.h.i.length=0,Aw(n.i),n.i.length=0),n.l.ya()}}function hC(n,e,t){var r=t instanceof Xl?qa(t):new Xl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Og(r,r.m);else{var i=xt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Xl(null,void 0);r&&kg(o,r),e&&(o.g=e),i&&Og(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&ir(r,t,e),ir(r,"VER",n.qa),Df(n,r),r}function fC(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cn(t&&n.Ha&&!n.va?new W_({ob:!0}):n.va)).Oa(n.I),e}function pC(){}function J_(){if(af&&!(10<=Number(O_)))throw Error("Environmental error: no available transport.")}function $s(n,e){Ii.call(this),this.g=new g0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!sf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sf(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Tf(this)}function gC(n){Jw.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mC(){mf.call(this),this.status=1}function Tf(n){this.g=n}function ta(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function b0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],u=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;u=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(u<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((o=(e=t+((u=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=o+((u=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function Nn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(ut=Cn.prototype).Oa=function(n){this.M=n},ut.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_f.g(),this.C=function Qw(n){return n.h||(n.h=n.i())}(this.u?this.u:_f),this.g.onreadystatechange=Fi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void oC(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=xt.FormData&&n instanceof xt.FormData,!(0<=MI(sC,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,u]of t)this.g.setRequestHeader(o,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{bf(this),0<this.B&&((this.L=function ux(n){return af&&function VI(){return OI(LI,9,function(){let n=0;const e=kI(String(lf)).split("."),t=kI("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",o=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=xw(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||xw(0==i[2].length,0==o[2].length)||xw(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fi(this.ua,this)):this.A=df(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){oC(this,o)}},ut.ua=function(){typeof Tw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Li(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Li(this,"complete"),Li(this,"abort"),Ef(this))},ut.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ef(this,!0)),Cn.$.N.call(this)},ut.La=function(){this.s||(this.G||this.v||this.l?uC(this):this.kb())},ut.kb=function(){uC(this)},ut.da=function(){try{return 2<qu(this)?this.g.status:-1}catch{return-1}},ut.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Wa(e)}},ut.Ia=function(){return this.m},ut.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=g0.prototype).qa=8,ut.H=1,ut.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Sg(this,this.j,n,void 0);let o=this.s;if(this.U&&(o?(o=cf(o),JA(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=y0(this,i,e),ir(t=qa(this.G),"RID",n),ir(t,"CVER",22),this.F&&ir(t,"X-HTTP-Session-Id",this.F),Df(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(lC(o)))+"&"+e:this.o&&p0(t,this.o,o)),q_(this.h,i),this.bb&&ir(t,"TYPE","init"),this.P?(ir(t,"$req",e),ir(t,"SID","null"),i.ba=!0,Rg(i,t,null)):Rg(i,t,e),this.H=2}}else 3==this.H&&(n?K_(this,n):0==this.i.length||nC(this.h)||K_(this))},ut.Ma=function(){if(this.u=null,w0(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Tg(Fi(this.jb,this),n)}},ut.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Ji(10),Z_(this),w0(this))},ut.ib=function(){null!=this.v&&(this.v=null,Z_(this),Y_(this),Ji(19))},ut.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Ji(2)):(this.j.info("Failed to ping google.com"),Ji(1))},(ut=pC.prototype).Ba=function(){},ut.Aa=function(){},ut.za=function(){},ut.ya=function(){},ut.Va=function(){},J_.prototype.g=function(n,e){return new $s(n,e)},bi($s,Ii),$s.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Ji(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=hC(n,null,n.Y),Bg(n)},$s.prototype.close=function(){Cf(this.g)},$s.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=V_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&Bg(e)},$s.prototype.N=function(){this.g.l=null,delete this.j,Cf(this.g),delete this.g,$s.$.N.call(this)},bi(gC,Jw),bi(mC,mf),bi(Tf,pC),Tf.prototype.Ba=function(){Li(this.g,"a")},Tf.prototype.Aa=function(n){Li(this.g,new gC(n))},Tf.prototype.za=function(n){Li(this.g,new mC)},Tf.prototype.ya=function(){Li(this.g,"b")},bi(ta,function lx(){this.blockSize=-1}),ta.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ta.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)b0(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){b0(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){b0(this,r),i=0;break}}this.h=i,this.i+=e},ta.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var cx={};function I0(n){return-128<=n&&128>n?OI(cx,n,function(e){return new Nn([0|e],0>e?-1:0)}):new Nn([0|n],0>n?-1:0)}function Za(n){if(isNaN(n)||!isFinite(n))return vd;if(0>n)return Ci(Za(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=X_;return new Nn(e,0)}var X_=4294967296,vd=I0(0),ey=I0(1),D0=I0(16777216);function Ka(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Hs(n){return-1==n.h}function Ci(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Nn(t,~n.h).add(ey)}function $g(n,e){return n.add(Ci(e))}function Hg(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Sf(n,e){this.g=n,this.h=e}function Ya(n,e){if(Ka(e))throw Error("division by zero");if(Ka(n))return new Sf(vd,vd);if(Hs(n))return e=Ya(Ci(n),e),new Sf(Ci(e.g),Ci(e.h));if(Hs(e))return e=Ya(n,Ci(e)),new Sf(Ci(e.g),e.h);if(30<n.g.length){if(Hs(n)||Hs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ey,r=e;0>=r.X(n);)t=_C(t),r=_C(r);var i=Af(t,1),o=Af(r,1);for(r=Af(r,2),t=Af(t,2);!Ka(r);){var u=o.add(r);0>=u.X(n)&&(i=i.add(t),o=u),r=Af(r,1),t=Af(t,1)}return e=$g(n,i.R(e)),new Sf(i,e)}for(i=vd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(o=Za(t)).R(e);Hs(u)||0<u.X(n);)u=(o=Za(t-=r)).R(e);Ka(o)&&(o=ey),i=i.add(o),n=$g(n,u)}return new Sf(i,n)}function _C(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Nn(t,n.h)}function Af(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new Nn(i,n.h)}(ut=Nn.prototype).ea=function(){if(Hs(this))return-Ci(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:X_+r)*e,e*=X_}return n},ut.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ka(this))return"0";if(Hs(this))return"-"+Ci(this).toString(n);for(var e=Za(Math.pow(n,6)),t=this,r="";;){var i=Ya(t,e).g,o=((0<(t=$g(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ka(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},ut.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ut.X=function(n){return Hs(n=$g(this,n))?-1:Ka(n)?0:1},ut.abs=function(){return Hs(this)?Ci(this):this},ut.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),u=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(o&=65535)}return new Nn(t,-2147483648&t[t.length-1]?-1:0)},ut.R=function(n){if(Ka(this)||Ka(n))return vd;if(Hs(this))return Hs(n)?Ci(this).R(Ci(n)):Ci(Ci(this).R(n));if(Hs(n))return Ci(this.R(Ci(n)));if(0>this.X(D0)&&0>n.X(D0))return Za(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,u=65535&this.D(r),h=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=u*p,Hg(t,2*r+2*i),t[2*r+2*i+1]+=o*p,Hg(t,2*r+2*i+1),t[2*r+2*i+1]+=u*h,Hg(t,2*r+2*i+1),t[2*r+2*i+2]+=o*h,Hg(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Nn(t,0)},ut.gb=function(n){return Ya(this,n).h},ut.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Nn(t,this.h&n.h)},ut.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Nn(t,this.h|n.h)},ut.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Nn(t,this.h^n.h)},J_.prototype.createWebChannel=J_.prototype.g,$s.prototype.send=$s.prototype.u,$s.prototype.open=$s.prototype.m,$s.prototype.close=$s.prototype.close,B_.NO_ERROR=0,B_.TIMEOUT=8,B_.HTTP_ERROR=6,Kw.COMPLETE="complete",j_.EventType=hd,hd.OPEN="a",hd.CLOSE="b",hd.ERROR="c",hd.MESSAGE="d",Ii.prototype.listen=Ii.prototype.O,Cn.prototype.listenOnce=Cn.prototype.P,Cn.prototype.getLastError=Cn.prototype.Sa,Cn.prototype.getLastErrorCode=Cn.prototype.Ia,Cn.prototype.getStatus=Cn.prototype.da,Cn.prototype.getResponseJson=Cn.prototype.Wa,Cn.prototype.getResponseText=Cn.prototype.ja,Cn.prototype.send=Cn.prototype.ha,Cn.prototype.setWithCredentials=Cn.prototype.Oa,ta.prototype.digest=ta.prototype.l,ta.prototype.reset=ta.prototype.reset,ta.prototype.update=ta.prototype.j,Nn.prototype.add=Nn.prototype.add,Nn.prototype.multiply=Nn.prototype.R,Nn.prototype.modulo=Nn.prototype.gb,Nn.prototype.compare=Nn.prototype.X,Nn.prototype.toNumber=Nn.prototype.ea,Nn.prototype.toString=Nn.prototype.toString,Nn.prototype.getBits=Nn.prototype.D,Nn.fromNumber=Za,Nn.fromString=function C0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ci(C0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Za(Math.pow(e,8)),r=vd,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+o),e);8>o?(o=Za(Math.pow(e,o)),r=r.R(o).add(Za(u))):r=(r=r.R(t)).add(Za(u))}return r};var xf=Eo.createWebChannelTransport=function(){return new J_},Q1=Eo.getStatEventTarget=function(){return Dg()},Gg=Eo.ErrorCode=B_,J1=Eo.EventType=Kw,yC=Eo.Event=Ql,T0=Eo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},X1=Eo.FetchXmlHttpFactory=W_,kt=Eo.WebChannel=j_,dx=Eo.XhrIo=Cn,hx=Eo.Md5=ta,Rf=Eo.Integer=Nn;const wd="@firebase/firestore";class Di{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Di.UNAUTHENTICATED=new Di(null),Di.GOOGLE_CREDENTIALS=new Di("google-credentials-uid"),Di.FIRST_PARTY=new Di("first-party-uid"),Di.MOCK_USER=new Di("mock-user");let Wu="9.22.0";const na=new Es.Yd("@firebase/firestore");function dr(){return na.logLevel}function Ve(n,...e){if(na.logLevel<=Es.in.DEBUG){const t=e.map(ty);na.debug(`Firestore (${Wu}): ${n}`,...t)}}function Pr(n,...e){if(na.logLevel<=Es.in.ERROR){const t=e.map(ty);na.error(`Firestore (${Wu}): ${n}`,...t)}}function Co(n,...e){if(na.logLevel<=Es.in.WARN){const t=e.map(ty);na.warn(`Firestore (${Wu}): ${n}`,...t)}}function ty(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${Wu}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function Ct(n,e){n||ht()}function it(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends V.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Di.UNAUTHENTICATED))}shutdown(){}}class px{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ny{constructor(e){this.t=e,this.currentUser=Di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new br;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new br,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,we.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},p=y=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new br)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new wC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Di(e)}}class EC{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Di.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class bC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new EC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class S0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gx{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.T;return this.T=o.token,Ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.T=t.token,new S0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zg(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class IC{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=zg(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Qt(n,e){return n<e?-1:n>e?1:0}function Mf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function A0(n){return n+"\0"}class sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new sr(0,0))}static max(){return new Dt(new sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qg{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),u=t.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wn extends qg{construct(e,t,r){return new wn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const mx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends qg{construct(e,t,r){return new Fr(e,t,r)}static isValidIdentifier(e){return mx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new xe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new xe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new xe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(o(),i++)}if(o(),u)throw new xe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(t)}static emptyPath(){return new Fr([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(wn.fromString(e))}static fromName(e){return new tt(wn.fromString(e).popFirst(5))}static empty(){return new tt(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new wn(e.slice()))}}class x0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function CC(n){return n.fields.find(e=>2===e.kind)}function Nf(n){return n.fields.filter(e=>2!==e.kind)}x0.UNKNOWN_ID=-1;class Ed{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wg(0,Gs.min())}}function R0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new sr(t+1,0):new sr(t,r));return new Gs(i,tt.empty(),e)}function kf(n){return new Gs(n.readTime,n.key,-1)}class Gs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Gs(Dt.min(),tt.empty(),-1)}static max(){return new Gs(Dt.max(),tt.empty(),-1)}}function M0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Qt(n.largestBatchId,e.largestBatchId))}const TC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function bd(n){return N0.apply(this,arguments)}function N0(){return N0=(0,we.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==TC)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),N0.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,o=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++o,u&&o===i&&t()},p=>r(p))}),u=!0,o===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const o=e.length,u=new Array(o);let h=0;for(let p=0;p<o;p++){const y=p;t(e[y]).next(b=>{u[y]=b,++h,h===o&&r(u)},b=>i(b))}})}static doWhile(e,t){return new oe((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class iy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new br,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Kg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=sy(r.target.error);this.v.reject(new Kg(e,i))}}static open(e,t,r,i){try{return new iy(t,e.transaction(i,r))}catch(o){throw new Kg(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yx(t)}}class ra{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ra.S((0,V.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),tc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,V.hl)())return!1;if(ra.C())return!0;const e=(0,V.z$)(),t=ra.S(e),r=0<t&&t<10,i=ra.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,we.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{r(u.target.result)},o.onblocked=()=>{i(new Kg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new xe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new xe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Kg(e,h))},o.onupgradeneeded=u=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,we.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.$(e);const p=iy.open(o.db,e,u?"readonly":"readwrite",r),y=i(p).next(b=>(p.P(),b)).catch(b=>(p.abort(b),oe.reject(b))).toPromise();return y.catch(()=>{}),yield p.R,y}catch(p){const y=p,b="FirebaseError"!==y.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),o.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Zg{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return tc(this.L.delete())}}class Kg extends xe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zu(n){return"IndexedDbTransactionError"===n.name}class yx{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tc(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),tc(this.store.add(e))}get(e){return tc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),tc(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),tc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(u,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new oe((o,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,u,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=o=>{const u=sy(o.target.error);i(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const p=new Zg(h),y=t(h.primaryKey,h.value,p);if(y instanceof oe){const b=y.catch(S=>(p.done(),oe.reject(S)));r.push(b)}p.isDone?i():null===p.K?h.continue():h.continue(p.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tc(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=sy(r.target.error);t(i)}})}let AC=!1;function sy(n){const e=ra.S((0,V.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AC||(AC=!0,setTimeout(()=>{throw r},0)),r}}return n}class vx{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Zu(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield bd(r)}yield t.et(6e4)}))}}class k0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return oe.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Ve("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(h=>{i-=h,r.add(u)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,o)).next(h=>(Ve("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const u=kf(o);M0(u,r)>0&&(r=u)}),new Gs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let zs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Of(n){return null==n}function Pf(n){return 0===n&&1/n==-1/0}function xC(n){return"number"==typeof n&&Number.isInteger(n)&&!Pf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Xi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oy(e)),e=wx(n.get(t),e);return oy(e)}function wx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function oy(n){return n+"\x01\x01"}function Qa(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&ht(),n.charAt(u+1)){case"\x01":const h=n.substring(o,u);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(o,u),i+="\0";break;case"\x11":i+=n.substring(o,u+1);break;default:ht()}o=u+2}return new wn(r)}const O0=["userId","batchId"];function ay(n,e){return[n,Xi(e)]}function RC(n,e,t){return[n,Xi(e),t]}const Ex={},bx=["prefixPath","collectionGroup","readTime","documentId"],Ix=["prefixPath","collectionGroup","documentId"],Cx=["collectionGroup","readTime","prefixPath","documentId"],Dx=["canonicalId","targetId"],Tx=["targetId","path"],MC=["path","targetId"],NC=["collectionId","parent"],Sx=["indexId","uid"],Ax=["uid","sequenceNumber"],kC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xx=["indexId","uid","orderedDocumentKey"],Rx=["userId","collectionPath","documentId"],Mx=["userId","collectionPath","largestBatchId"],P0=["userId","collectionGroup","largestBatchId"],uy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OC=[...uy,"documentOverlays"],ly=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PC=ly,Nx=[...PC,"indexConfiguration","indexState","indexEntries"];class Yg extends SC{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ti(n,e){const t=it(n);return ra.M(t.ht,e)}function F0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function L0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Zn{constructor(e,t){this.comparator=e,this.root=t||Si.EMPTY}insert(e,t){return new Zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new V0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new V0(this.root,e,this.comparator,!1)}getReverseIterator(){return new V0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new V0(this.root,e,this.comparator,!0)}}class V0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Si{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Si.RED,this.left=i??Si.EMPTY,this.right=o??Si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Si(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1,Si.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FC(this.data.getIterator())}getIteratorFrom(e){return new FC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class FC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nc(n){return n.hasNext()?n.getNext():void 0}class bs{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new bs([])}unionWith(e){let t=new Hn(Fr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new bs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class U0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new U0("Invalid base64 string: "+i):i}}(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const LC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=LC.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ir(n.seconds),nanos:Ir(n.nanos)}}function Ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Yu(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function cy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dy(n){const e=n.mapValue.fields.__previous_value__;return cy(e)?dy(e):e}function Qg(n){const e=Ku(n.mapValue.fields.__local_write_time__.timestampValue);return new sr(e.seconds,e.nanos)}class VC{constructor(e,t,r,i,o,u,h,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y}}class Id{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Id("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}const Qu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hy={nullValue:"NULL_VALUE"};function rc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cy(n)?4:$0(n)?9007199254740991:10:ht()}function Ju(n,e){if(n===e)return!0;const t=rc(n);if(t!==rc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qg(n).isEqual(Qg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ku(r.timestampValue),u=Ku(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Yu(n.bytesValue).isEqual(Yu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ir(r.geoPointValue.latitude)===Ir(i.geoPointValue.latitude)&&Ir(r.geoPointValue.longitude)===Ir(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ir(r.integerValue)===Ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ir(r.doubleValue),u=Ir(i.doubleValue);return o===u?Pf(o)===Pf(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Mf(n.arrayValue.values||[],e.arrayValue.values||[],Ju);case 10:return function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(F0(o)!==F0(u))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===u[h]||!Ju(o[h],u[h])))return!1;return!0}(n,e);default:return ht()}var i}function Jg(n,e){return void 0!==(n.values||[]).find(t=>Ju(t,e))}function ic(n,e){if(n===e)return 0;const t=rc(n),r=rc(e);if(t!==r)return Qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Ir(i.integerValue||i.doubleValue),h=Ir(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return UC(n.timestampValue,e.timestampValue);case 4:return UC(Qg(n),Qg(e));case 5:return Qt(n.stringValue,e.stringValue);case 6:return function(i,o){const u=Yu(i),h=Yu(o);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),h=o.split("/");for(let p=0;p<u.length&&p<h.length;p++){const y=Qt(u[p],h[p]);if(0!==y)return y}return Qt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=Qt(Ir(i.latitude),Ir(o.latitude));return 0!==u?u:Qt(Ir(i.longitude),Ir(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const u=i.values||[],h=o.values||[];for(let p=0;p<u.length&&p<h.length;++p){const y=ic(u[p],h[p]);if(y)return y}return Qt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Qu.mapValue&&o===Qu.mapValue)return 0;if(i===Qu.mapValue)return 1;if(o===Qu.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),p=o.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let b=0;b<h.length&&b<y.length;++b){const S=Qt(h[b],y[b]);if(0!==S)return S;const M=ic(u[h[b]],p[y[b]]);if(0!==M)return M}return Qt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ht()}}function UC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Qt(n,e);const t=Ku(n),r=Ku(e),i=Qt(t.seconds,r.seconds);return 0!==i?i:Qt(t.nanos,r.nanos)}function Ff(n){return fy(n)}function fy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ku(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Yu(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const u of r.values||[])o?o=!1:i+=",",i+=fy(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${fy(r.fields[h])}`;return o+"}"}(n.mapValue):ht();var e}function Cd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function j0(n){return!!n&&"integerValue"in n}function Xg(n){return!!n&&"arrayValue"in n}function BC(n){return!!n&&"nullValue"in n}function jC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gy(n){return!!n&&"mapValue"in n}function Xu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function $C(n){return"nullValue"in n?hy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cd(Id.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function HC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cd(Id.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qu:ht()}function H0(n,e){const t=ic(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function G0(n,e){const t=ic(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(t)}setAll(e){let t=Fr.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=Xu(u):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());gy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ju(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qs(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ai(Xu(this.value))}}function GC(n){const e=[];return qs(n.fields,(t,r)=>{const i=new Fr([t]);if(gy(r)){const o=GC(r.mapValue).fields;if(0===o.length)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new bs(e)}class hr{constructor(e,t,r,i,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new hr(e,0,Dt.min(),Dt.min(),Dt.min(),Ai.empty(),0)}static newFoundDocument(e,t,r,i){return new hr(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new hr(e,2,t,Dt.min(),Dt.min(),Ai.empty(),0)}static newUnknownDocument(e,t){return new hr(e,3,t,Dt.min(),Dt.min(),Ai.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class el{constructor(e,t){this.position=e,this.inclusive=t}}function zC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(r=o.field.isKeyField()?tt.comparator(tt.fromName(u.referenceValue),t.key):ic(u,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function qC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ju(n.position[t],e.position[t]))return!1;return!0}class Lf{constructor(e,t="asc"){this.field=e,this.dir=t}}function kx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Vf{}class mn extends Vf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new my(e,t,r):"array-contains"===t?new KC(e,r):"in"===t?new _y(e,r):"not-in"===t?new YC(e,r):"array-contains-any"===t?new Z0(e,r):new mn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Ox(e,r):new Px(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ic(t,this.value)):null!==t&&rc(this.value)===rc(t)&&this.matchesComparison(ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Sn extends Vf{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Sn(e,t)}matches(e){return ls(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ls(n){return"and"===n.op}function z0(n){return"or"===n.op}function em(n){return Uf(n)&&ls(n)}function Uf(n){for(const e of n.filters)if(e instanceof Sn)return!1;return!0}function q0(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+Ff(n.value);if(em(n))return n.filters.map(e=>q0(e)).join(",");{const e=n.filters.map(t=>q0(t)).join(",");return`${n.op}(${e})`}}function WC(n,e){return n instanceof mn?(t=n,(r=e)instanceof mn&&t.op===r.op&&t.field.isEqual(r.field)&&Ju(t.value,r.value)):n instanceof Sn?function(t,r){return r instanceof Sn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,u)=>i&&WC(o,r.filters[u]),!0)}(n,e):void ht();var t,r}function ZC(n,e){const t=n.filters.concat(e);return Sn.create(t,n.op)}function tm(n){return n instanceof mn?`${(e=n).field.canonicalString()} ${e.op} ${Ff(e.value)}`:n instanceof Sn?function(e){return e.op.toString()+" {"+e.getFilters().map(tm).join(" ,")+"}"}(n):"Filter";var e}class my extends mn{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ox extends mn{constructor(e,t){super(e,"in",t),this.keys=W0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Px extends mn{constructor(e,t){super(e,"not-in",t),this.keys=W0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function W0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class KC extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xg(t)&&Jg(t.arrayValue,this.value)}}class _y extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jg(this.value.arrayValue,t)}}class YC extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jg(this.value.arrayValue,t)}}class Z0 extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jg(this.value.arrayValue,r))}}class K0{constructor(e,t=null,r=[],i=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=h,this.dt=null}}function yy(n,e=null,t=[],r=[],i=null,o=null,u=null){return new K0(n,e,t,r,i,o,u)}function tl(n){const e=it(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>q0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Of(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ff(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ff(r)).join(",")),e.dt=t}return e.dt}function Dd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!WC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qC(n.startAt,e.startAt)&&qC(n.endAt,e.endAt)}function vy(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wy(n,e){return n.filters.filter(t=>t instanceof mn&&t.field.isEqual(e))}function QC(n,e,t){let r=hy,i=!0;for(const o of wy(n,e)){let u=hy,h=!0;switch(o.op){case"<":case"<=":u=$C(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=hy}H0({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];H0({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function JC(n,e,t){let r=Qu,i=!0;for(const o of wy(n,e)){let u=Qu,h=!0;switch(o.op){case">=":case">":u=HC(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=Qu}G0({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];G0({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Ja{constructor(e,t=null,r=[],i=[],o=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=p,this.wt=null,this._t=null}}function Ey(n,e,t,r,i,o,u,h){return new Ja(n,e,t,r,i,o,u,h)}function Td(n){return new Ja(n)}function Y0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function by(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function nm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Q0(n){return null!==n.collectionGroup}function sc(n){const e=it(n);if(null===e.wt){e.wt=[];const t=nm(e),r=by(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Lf(t)),e.wt.push(new Lf(Fr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Lf(Fr.keyField(),o))}}}return e.wt}function es(n){const e=it(n);if(!e._t)if("F"===e.limitType)e._t=yy(e.path,e.collectionGroup,sc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of sc(e))t.push(new Lf(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new el(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new el(e.startAt.position,e.startAt.inclusive):null;e._t=yy(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function J0(n,e){e.getFirstInequalityField(),nm(n);const t=n.filters.concat([e]);return new Ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rm(n,e,t){return new Ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bf(n,e){return Dd(es(n),es(e))&&n.limitType===e.limitType}function ts(n){return`${tl(es(n))}|lt:${n.limitType}`}function oc(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>tm(r)).join(", ")}]`),Of(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ff(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ff(r)).join(",")),`Target(${t})`}(es(n))}; limitType=${n.limitType})`}function im(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of sc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,u){const h=zC(i,o,u);return i.inclusive?h<=0:h<0}(t.startAt,sc(t),r)||t.endAt&&!function(i,o,u){const h=zC(i,o,u);return i.inclusive?h>=0:h>0}(t.endAt,sc(t),r)));var t,r}function XC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fx(n){return(e,t)=>{let r=!1;for(const i of sc(n)){const o=tO(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function tO(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,o,u){const h=o.data.field(i),p=u.data.field(i);return null!==h&&null!==p?ic(h,p):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}class Xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return L0(this.inner)}size(){return this.innerSize}}const X0=new Zn(tt.comparator);function xi(){return X0}const eD=new Zn(tt.comparator);function Sd(...n){let e=eD;for(const t of n)e=e.insert(t.key,t);return e}function tD(n){let e=eD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ia(){return sm()}function nD(){return sm()}function sm(){return new Xa(n=>n.toString(),(n,e)=>n.isEqual(e))}const Lx=new Zn(tt.comparator),eE=new Hn(tt.comparator);function an(...n){let e=eE;for(const t of n)e=e.add(t);return e}const rD=new Hn(Qt);function jf(){return rD}function Iy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pf(e)?"-0":e}}function Vx(n){return{integerValue:""+n}}function tE(n,e){return xC(e)?Vx(e):Iy(n,e)}class Cy{constructor(){this._=void 0}}function iD(n,e,t){return n instanceof Ad?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&cy(i)&&(i=dy(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof nl?Ux(n,e):n instanceof xd?Bx(n,e):function(r,i){const o=sD(r,i),u=oD(o)+oD(r.gt);return j0(o)&&j0(r.gt)?Vx(u):Iy(r.serializer,u)}(n,e)}function $f(n,e,t){return n instanceof nl?Ux(n,e):n instanceof xd?Bx(n,e):t}function sD(n,e){return n instanceof Hf?j0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ad extends Cy{}class nl extends Cy{constructor(e){super(),this.elements=e}}function Ux(n,e){const t=aD(e);for(const r of n.elements)t.some(i=>Ju(i,r))||t.push(r);return{arrayValue:{values:t}}}class xd extends Cy{constructor(e){super(),this.elements=e}}function Bx(n,e){let t=aD(e);for(const r of n.elements)t=t.filter(i=>!Ju(i,r));return{arrayValue:{values:t}}}class Hf extends Cy{constructor(e,t){super(),this.serializer=e,this.gt=t}}function oD(n){return Ir(n.integerValue||n.doubleValue)}function aD(n){return Xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Gf{constructor(e,t){this.field=e,this.transform=t}}class jx{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function om(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Dy{}function lD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Md(n.key,or.none()):new Rd(n.key,n.data,or.none());{const t=n.data,r=Ai.empty();let i=new Hn(Fr.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?r.delete(o):r.set(o,u),i=i.add(o)}return new eu(n.key,r,new bs(i.toArray()),or.none())}}function cD(n,e,t){n instanceof Rd?function(r,i,o){const u=r.value.clone(),h=fD(r.fieldTransforms,i,o.transformResults);u.setAll(h),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof eu?function(r,i,o){if(!om(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=fD(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(hD(r)),h.setAll(u),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function am(n,e,t,r){return n instanceof Rd?function(i,o,u,h){if(!om(i.precondition,o))return u;const p=i.value.clone(),y=$x(i.fieldTransforms,h,o);return p.setAll(y),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof eu?function(i,o,u,h){if(!om(i.precondition,o))return u;const p=$x(i.fieldTransforms,h,o),y=o.data;return y.setAll(hD(i)),y.setAll(p),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(u=t,om(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function dD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=sD(r.transform,i||null);null!=o&&(null===t&&(t=Ai.empty()),t.set(r.field,o))}return t||null}function nE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Mf(t,r,(i,o)=>function uD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof nl&&r instanceof nl||t instanceof xd&&r instanceof xd?Mf(t.elements,r.elements,Ju):t instanceof Hf&&r instanceof Hf?Ju(t.gt,r.gt):t instanceof Ad&&r instanceof Ad);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Rd extends Dy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eu extends Dy{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fD(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,h=e.data.field(o.field);r.set(o.field,$f(u,h,t[i]))}return r}function $x(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,iD(o,u,e))}return r}class Md extends Dy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pD extends Dy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&cD(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=am(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=am(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nD();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(i.key)?null:h;const p=lD(u,h);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&Mf(this.mutations,e.mutations,(t,r)=>nE(t,r))&&Mf(this.baseMutations,e.baseMutations,(t,r)=>nE(t,r))}}class mD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=Lx;const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new mD(e,t,r,i)}}class _D{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rO{constructor(e,t){this.count=e,this.unchangedNames=t}}var fi,In;function um(n){switch(n){default:return ht();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function Hx(n){if(void 0===n)return Pr("GRPC error has no .code"),de.UNKNOWN;switch(n){case fi.OK:return de.OK;case fi.CANCELLED:return de.CANCELLED;case fi.UNKNOWN:return de.UNKNOWN;case fi.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case fi.INTERNAL:return de.INTERNAL;case fi.UNAVAILABLE:return de.UNAVAILABLE;case fi.UNAUTHENTICATED:return de.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case fi.NOT_FOUND:return de.NOT_FOUND;case fi.ALREADY_EXISTS:return de.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return de.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case fi.ABORTED:return de.ABORTED;case fi.OUT_OF_RANGE:return de.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return de.UNIMPLEMENTED;case fi.DATA_LOSS:return de.DATA_LOSS;default:return ht()}}(In=fi||(fi={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";class Ty{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Nd}static getOrCreateInstance(){return null===Nd&&(Nd=new Ty),Nd}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Nd=null;function rE(){return new TextEncoder}const yD=new Rf([4294967295,4294967295],0);function Gx(n){const e=rE().encode(n),t=new hx;return t.update(e),new Uint8Array(t.digest())}function Sy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rf([t,r],0),new Rf([i,o],0)]}class Ay{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lm(`Invalid padding: ${t}`);if(r<0)throw new lm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new lm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new lm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Rf.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Rf.fromNumber(r)));return 1===i.compare(yD)&&(i=new Rf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Gx(e),[r,i]=Sy(t);for(let o=0;o<this.hashCount;o++){const u=this.Et(r,i,o);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Ay(o,i,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(0===this.It)return;const t=Gx(e),[r,i]=Sy(t);for(let o=0;o<this.hashCount;o++){const u=this.Et(r,i,o);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class lm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xy{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ry.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xy(Dt.min(),i,new Zn(Qt),xi(),an())}}class Ry{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ry(r,t,an(),an(),an())}}class My{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class vD{constructor(e,t){this.targetId=e,this.Vt=t}}class cm{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class wD{constructor(){this.St=0,this.Dt=qx(),this.Ct=ei.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=an(),t=an(),r=an();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new Ry(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=qx()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class iO{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=xi(),this.zt=zx(),this.Wt=new Zn(Qt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const u=o.target;if(vy(u))if(0===i){const h=new tt(u.path);this.Yt(r,h,hr.newNoDocument(h,Dt.min()))}else Ct(1===i);else{const h=this.ie(r);if(h!==i){const p=this.re(e,h);0!==p&&(this.ee(r),this.Wt=this.Wt.insert(r,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Ty.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,b,S){var M,U,z,te,ne,Fe;const qe={localCacheCount:b,existenceFilterCount:S.count},Be=S.unchangedNames;return Be&&(qe.bloomFilter={applied:0===y,hashCount:null!==(M=Be?.hashCount)&&void 0!==M?M:0,bitmapLength:null!==(te=null===(z=null===(U=Be?.bits)||void 0===U?void 0:U.bitmap)||void 0===z?void 0:z.length)&&void 0!==te?te:0,padding:null!==(Fe=null===(ne=Be?.bits)||void 0===ne?void 0:ne.padding)&&void 0!==Fe?Fe:0}),qe}(p,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:u=0},hashCount:h=0}=r;let p,y;try{p=Yu(o).toUint8Array()}catch(b){if(b instanceof U0)return Co("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{y=new Ay(p,u,h)}catch(b){return Co(b instanceof lm?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const u=this.Gt.ue(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;t.vt(h)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,u)=>{const h=this.se(u);if(h){if(o.current&&vy(h.target)){const p=new tt(h.target.path);null!==this.jt.get(p)||this.ae(u,p)||this.Yt(u,p,hr.newNoDocument(p,e))}o.Mt&&(t.set(u,o.Ot()),o.Ft())}});let r=an();this.zt.forEach((o,u)=>{let h=!0;u.forEachWhile(p=>{const y=this.se(p);return!y||"TargetPurposeLimboResolution"===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.jt.forEach((o,u)=>u.setReadTime(e));const i=new xy(e,t,this.Wt,this.jt,r);return this.jt=xi(),this.zt=zx(),this.Wt=new Zn(Qt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new wD,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Hn(Qt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new wD),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function zx(){return new Zn(tt.comparator)}function qx(){return new Zn(tt.comparator)}const Wx={asc:"ASCENDING",desc:"DESCENDING"},Zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kx={and:"AND",or:"OR"};class sO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iE(n,e){return n.useProto3Json||Of(e)?e:{value:e}}function kd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oO(n,e){return kd(n,e.toTimestamp())}function An(n){return Ct(!!n),Dt.fromTimestamp(function(e){const t=Ku(e);return new sr(t.seconds,t.nanos)}(n))}function oE(n,e){return(t=n,new wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ny(n){const e=wn.fromString(n);return Ct(RD(e)),e}function dm(n,e){return oE(n.databaseId,e.path)}function rl(n,e){const t=Ny(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(bD(t))}function Is(n,e){return oE(n.databaseId,e)}function ED(n){const e=Ny(n);return 4===e.length?wn.emptyPath():bD(e)}function Od(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bD(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ID(n,e,t){return{name:dm(n,e),fields:t.value.mapValue.fields}}function ky(n,e,t){const r=rl(n,e.name),i=An(e.updateTime),o=e.createTime?An(e.createTime):Dt.min(),u=new Ai({mapValue:{fields:e.fields}}),h=hr.newFoundDocument(r,i,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function hm(n,e){let t;if(e instanceof Rd)t={update:ID(n,e.key,e.value)};else if(e instanceof Md)t={delete:dm(n,e.key)};else if(e instanceof eu)t={update:ID(n,e.key,e.data),updateMask:Qx(e.fieldMask)};else{if(!(e instanceof pD))return ht();t={verify:dm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ad)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof xd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Hf)return{fieldPath:o.field.canonicalString(),increment:u.gt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:oO(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function Oy(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?or.updateTime(An(i.updateTime)):void 0!==i.exists?or.exists(i.exists):or.none():or.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let h=null;"setToServerValue"in u?(Ct("REQUEST_TIME"===u.setToServerValue),h=new Ad):"appendMissingElements"in u?h=new nl(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new xd(u.removeAllFromArray.values||[]):"increment"in u?h=new Hf(o,u.increment):ht();const p=Fr.fromServerFormat(u.fieldPath);return new Gf(p,h)}(n,i)):[];var i;if(e.update){const i=rl(n,e.update.name),o=new Ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new bs((e.updateMask.fieldPaths||[]).map(y=>Fr.fromServerFormat(y)));return new eu(i,o,u,t,r)}return new Rd(i,o,t,r)}if(e.delete){const i=rl(n,e.delete);return new Md(i,t)}if(e.verify){const i=rl(n,e.verify);return new pD(i,t)}return ht()}function SD(n,e){return{documents:[Is(n,e.path)]}}function Py(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Is(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Is(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return Yx(Sn.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(p){if(0!==p.length)return p.map(y=>{return{field:il((b=y).field),direction:ac(b.dir)};var b})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=iE(n,e.limit);var h,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function AD(n){let e=ED(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let o=[];t.where&&(o=function(b){const S=tu(b);return S instanceof Sn&&em(S)?S.getFilters():[S]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new Lf(zf((S=b).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(b){let S;return S="object"==typeof b?b.value:b,Of(S)?null:S}(t.limit));let p=null;var b;t.startAt&&(p=new el((b=t.startAt).values||[],!!b.before));let y=null;return t.endAt&&(y=function(b){return new el(b.values||[],!b.before)}(t.endAt)),Ey(e,i,u,o,h,"F",p,y)}function tu(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zf(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=zf(e.unaryFilter.field);return mn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zf(e.unaryFilter.field);return mn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zf(e.unaryFilter.field);return mn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(n):void 0!==n.fieldFilter?mn.create(zf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Sn.create(e.compositeFilter.filters.map(t=>tu(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ht()}}(e.compositeFilter.op))}(n):ht();var e}function ac(n){return Wx[n]}function xD(n){return Zx[n]}function uE(n){return Kx[n]}function il(n){return{fieldPath:n.canonicalString()}}function zf(n){return Fr.fromServerFormat(n.fieldPath)}function Yx(n){return n instanceof mn?function(e){if("=="===e.op){if(jC(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NAN"}};if(BC(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jC(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NOT_NAN"}};if(BC(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(e.field),op:xD(e.op),value:e.value}}}(n):n instanceof Sn?function(e){const t=e.getFilters().map(r=>Yx(r));return 1===t.length?t[0]:{compositeFilter:{op:uE(e.op),filters:t}}}(n):ht()}function Qx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class sl{constructor(e,t,r,i,o=Dt.min(),u=Dt.min(),h=ei.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class MD{constructor(e){this.fe=e}}function Jx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:dm(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:kd(i,o.version.toTimestamp()),createTime:kd(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Pd(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Pd(e.version)}}var i,o;return r}function fm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Pd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uc(n){const e=new sr(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function qf(n,e){const t=(e.baseMutations||[]).map(o=>Oy(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>Oy(n.fe,o)),i=sr.fromMillis(e.localWriteTimeMs);return new gD(e.batchId,i,t,r)}function Fd(n){const e=uc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?uc(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=es(Td(ED(i.documents[0])))):r=es(AD(n.query)),new sl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ei.fromBase64String(n.resumeToken))}function lE(n,e){const t=Pd(e.snapshotVersion),r=Pd(e.lastLimboFreeSnapshotVersion);let i;i=vy(e.target)?SD(n.fe,e.target):Py(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tl(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fy(n){const e=AD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?rm(e,e.limit,"L"):e}function Ly(n,e){return new _D(e.largestBatchId,Oy(n.fe,e.overlayMutation))}function cE(n,e){const t=e.path.lastSegment();return[n,Xi(e.path.popLast()),t]}function dE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Pd(r.readTime),documentKey:Xi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Vy{getBundleMetadata(e,t){return pm(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:uc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return pm(e).put({bundleId:(r=t).id,createTime:Pd(An(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return hE(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Fy(i.bundledQuery),readTime:uc(i.readTime)};var i})}saveNamedQuery(e,t){return hE(e).put({name:(r=t).name,readTime:Pd(An(r.readTime)),bundledQuery:r.bundledQuery});var r}}function pm(n){return Ti(n,"bundles")}function hE(n){return Ti(n,"namedQueries")}class Uy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Uy(e,t.uid||"")}getOverlay(e,t){return gm(e).get(cE(this.userId,t)).next(r=>r?Ly(this.serializer,r):null)}getOverlays(e,t){const r=ia();return oe.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,u)=>{const h=new _D(t,u);i.push(this.we(e,h))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Xi(u.getCollectionPath())));const o=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(gm(e).J("collectionPathOverlayIndex",h))}),oe.waitFor(o)}getOverlaysForCollection(e,t,r){const i=ia(),o=Xi(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return gm(e).j("collectionPathOverlayIndex",u).next(h=>{for(const p of h){const y=Ly(this.serializer,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=ia();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gm(e).X({index:"collectionGroupOverlayIndex",range:h},(p,y,b)=>{const S=Ly(this.serializer,y);o.size()<i||S.largestBatchId===u?(o.set(S.getKey(),S),u=S.largestBatchId):b.done()}).next(()=>o)}we(e,t){return gm(e).put(function(r,i,o){const[u,h,p]=cE(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:hm(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function gm(n){return Ti(n,"documentOverlays")}class Wf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ir(e.integerValue));else if("doubleValue"in e){const r=Ir(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Pf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Yu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?$0(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ht()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),tt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function aO(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Xx(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=aO(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Wf.Ve=new Wf;class kD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=Xx(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=Xx(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class eR{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class tR{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class mm{constructor(){this.je=new kD,this.ze=new eR(this.je),this.We=new tR(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Zf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zf(this.indexId,this.documentKey,this.arrayValue,r)}}function Ld(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=nR(n.arrayValue,e.arrayValue),0!==t?t:(t=nR(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function nR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class uO{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Ct(e.collectionGroup===this.collectionId);const t=CC(e);if(void 0!==t&&!this.en(t))return!1;const r=Nf(e);let i=0,o=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const u=r[i];if(!this.nn(this.Ze,u)||!this.sn(this.Ye[o++],u))return!1;++i}for(;i<r.length;++i)if(o>=this.Ye.length||!this.sn(this.Ye[o++],r[i]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function rR(n){var e,t;if(Ct(n instanceof mn||n instanceof Sn),n instanceof mn){if(n instanceof _y){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>mn.create(n.field,"==",o)))||[];return Sn.create(i,"or")}return n}const r=n.filters.map(i=>rR(i));return Sn.create(r,n.op)}function iR(n){if(0===n.getFilters().length)return[];const e=By(rR(n));return Ct(OD(e)),Kf(e)||fE(e)?[e]:e.getFilters()}function Kf(n){return n instanceof mn}function fE(n){return n instanceof Sn&&em(n)}function OD(n){return Kf(n)||fE(n)||function(e){if(e instanceof Sn&&z0(e)){for(const t of e.getFilters())if(!Kf(t)&&!fE(t))return!1;return!0}return!1}(n)}function By(n){if(Ct(n instanceof mn||n instanceof Sn),n instanceof mn)return n;if(1===n.filters.length)return By(n.filters[0]);const e=n.filters.map(r=>By(r));let t=Sn.create(e,n.op);return t=Yf(t),OD(t)?t:(Ct(t instanceof Sn),Ct(ls(t)),Ct(t.filters.length>1),t.filters.reduce((r,i)=>ol(r,i)))}function ol(n,e){let t;return Ct(n instanceof mn||n instanceof Sn),Ct(e instanceof mn||e instanceof Sn),t=n instanceof mn?e instanceof mn?Sn.create([n,e],"and"):pE(n,e):e instanceof mn?pE(e,n):function(r,i){if(Ct(r.filters.length>0&&i.filters.length>0),ls(r)&&ls(i))return ZC(r,i.getFilters());const o=z0(r)?r:i,u=z0(r)?i:r,h=o.filters.map(p=>ol(p,u));return Sn.create(h,"or")}(n,e),Yf(t)}function pE(n,e){if(ls(e))return ZC(e,n.getFilters());{const t=e.filters.map(r=>ol(n,r));return Sn.create(t,"or")}}function Yf(n){if(Ct(n instanceof mn||n instanceof Sn),n instanceof mn)return n;const e=n.getFilters();if(1===e.length)return Yf(e[0]);if(Uf(n))return n;const t=e.map(i=>Yf(i)),r=[];return t.forEach(i=>{i instanceof mn?r.push(i):i instanceof Sn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Sn.create(r,n.op)}class gE{constructor(){this.rn=new mE}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Gs.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class mE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hn(wn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(wn.comparator)).toArray()}}const Qf=new Uint8Array(0);class _E{constructor(e,t){this.user=e,this.databaseId=t,this.on=new mE,this.un=new Xa(r=>tl(r),(r,i)=>Dd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:Xi(i)};return _m(e).put(o)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[A0(t),""],!1,!0);return _m(e).j(i).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Qa(u.parent))}return r})}addFieldIndex(e,t){const r=yE(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete i.indexId;const o=r.add(i);if(t.indexState){const u=$y(e);return o.next(h=>{u.put(dE(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=yE(e),i=$y(e),o=jy(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=jy(e);let i=!0;const o=new Map;return oe.forEach(this.cn(t),u=>this.an(e,u).next(h=>{i&&(i=!!h),o.set(u,h)})).next(()=>{if(i){let u=an();const h=[];return oe.forEach(o,(p,y)=>{var b;Ve("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Be=>`${Be.fieldPath}:${Be.kind}`).join(",")}`} to execute ${tl(t)}`);const S=function(Be,Ue){const at=CC(Ue);if(void 0===at)return null;for(const ft of wy(Be,at.fieldPath))switch(ft.op){case"array-contains-any":return ft.value.arrayValue.values||[];case"array-contains":return[ft.value]}return null}(y,p),M=function(Be,Ue){const at=new Map;for(const ft of Nf(Ue))for(const ln of wy(Be,ft.fieldPath))switch(ln.op){case"==":case"in":at.set(ft.fieldPath.canonicalString(),ln.value);break;case"not-in":case"!=":return at.set(ft.fieldPath.canonicalString(),ln.value),Array.from(at.values())}return null}(y,p),U=function(Be,Ue){const at=[];let ft=!0;for(const ln of Nf(Ue)){const kn=0===ln.kind?QC(Be,ln.fieldPath,Be.startAt):JC(Be,ln.fieldPath,Be.startAt);at.push(kn.value),ft&&(ft=kn.inclusive)}return new el(at,ft)}(y,p),z=function(Be,Ue){const at=[];let ft=!0;for(const ln of Nf(Ue)){const kn=0===ln.kind?JC(Be,ln.fieldPath,Be.endAt):QC(Be,ln.fieldPath,Be.endAt);at.push(kn.value),ft&&(ft=kn.inclusive)}return new el(at,ft)}(y,p),te=this.hn(p,y,U),ne=this.hn(p,y,z),Fe=this.ln(p,y,M),qe=this.fn(p.indexId,S,te,U.inclusive,ne,z.inclusive,Fe);return oe.forEach(qe,Be=>r.H(Be,t.limit).next(Ue=>{Ue.forEach(at=>{const ft=tt.fromSegments(at.documentKey);u.has(ft)||(u=u.add(ft),h.push(ft))})}))}).next(()=>h)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:iR(Sn.create(e.filters,"and")).map(r=>yy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,u,h){const p=(null!=t?t.length:1)*Math.max(r.length,o.length),y=p/(null!=t?t.length:1),b=[];for(let S=0;S<p;++S){const M=t?this.dn(t[S/y]):Qf,U=this.wn(e,M,r[S%y],i),z=this._n(e,M,o[S%y],u),te=h.map(ne=>this.wn(e,M,ne,!0));b.push(...this.createRange(U,z,te))}return b}wn(e,t,r,i){const o=new Zf(e,tt.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new Zf(e,tt.empty(),t,r);return i?o.Je():o}an(e,t){const r=new uO(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let u=null;for(const h of o)r.tn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,o=>this.an(e,o).next(u=>{u?0!==r&&u.fields.length<function(h){let p=new Hn(Fr.comparator),y=!1;for(const b of h.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:p=p.add(S.field));for(const b of h.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new mm;for(const i of Nf(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const u=r.He(i.kind);Wf.Ve._e(o,u)}return r.Qe()}dn(e){const t=new mm;return Wf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new mm;return Wf.Ve._e(Cd(this.databaseId,t),r.He(function(i){const o=Nf(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new mm);let o=0;for(const u of Nf(e)){const h=r[o++];for(const p of i)if(this.yn(t,u.fieldPath)&&Xg(h))i=this.pn(i,u,h);else{const y=p.He(u.kind);Wf.Ve._e(h,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of i){const p=new mm;p.seed(h.Qe()),Wf.Ve._e(u,p.He(t.kind)),o.push(p)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof mn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=yE(e),i=$y(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const u=[];return oe.forEach(o,h=>i.get([h.indexId,this.uid]).next(p=>{u.push(function(y,b){const S=b?new Wg(b.sequenceNumber,new Gs(uc(b.readTime),new tt(Qa(b.documentKey)),b.largestBatchId)):Wg.empty(),M=y.fields.map(([U,z])=>new Ed(Fr.fromServerFormat(U),z));return new x0(y.indexId,y.collectionGroup,M,S)}(h,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Qt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=yE(e),o=$y(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>oe.forEach(h,p=>o.put(dE(p.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,o)=>{const u=r.get(i.collectionGroup);return(u?oe.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),oe.forEach(h,p=>this.En(e,i,p).next(y=>{const b=this.An(o,p);return y.isEqual(b)?oe.resolve():this.vn(e,o,p,y,b)}))))})}Rn(e,t,r,i){return jy(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return jy(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=jy(e);let o=new Hn(Ld);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,h)=>{o=o.add(new Zf(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}An(e,t){let r=new Hn(Ld);const i=this.mn(t,e);if(null==i)return r;const o=CC(t);if(null!=o){const u=e.data.field(o.fieldPath);if(Xg(u))for(const h of u.arrayValue.values||[])r=r.add(new Zf(t.indexId,e.key,this.dn(h),i))}else r=r.add(new Zf(t.indexId,e.key,Qf,i));return r}vn(e,t,r,i,o){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,p,y,b,S){const M=h.getIterator(),U=p.getIterator();let z=nc(M),te=nc(U);for(;z||te;){let ne=!1,Fe=!1;if(z&&te){const qe=y(z,te);qe<0?Fe=!0:qe>0&&(ne=!0)}else null!=z?Fe=!0:ne=!0;ne?(b(te),te=nc(U)):Fe?(S(z),z=nc(M)):(z=nc(M),te=nc(U))}}(i,o,Ld,h=>{u.push(this.Rn(e,t,r,h))},h=>{u.push(this.Pn(e,t,r,h))}),oe.waitFor(u)}Tn(e){let t=1;return $y(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Ld(u,h)).filter((u,h,p)=>!h||0!==Ld(u,p[h-1]));const i=[];i.push(e);for(const u of r){const h=Ld(u,e),p=Ld(u,t);if(0===h)i[0]=e.Je();else if(h>0&&p<0)i.push(u),i.push(u.Je());else if(p>0)break}i.push(t);const o=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];o.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,Qf,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,Qf,[]]))}return o}bn(e,t){return Ld(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sR)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ht())).next(sR)}}function _m(n){return Ti(n,"collectionParents")}function jy(n){return Ti(n,"indexEntries")}function yE(n){return Ti(n,"indexConfiguration")}function $y(n){return Ti(n,"indexState")}function sR(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;M0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Gs(e.readTime,e.documentKey,t)}const vE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function PD(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const p=r.X({range:u},(b,S,M)=>(h++,M.delete()));o.push(p.next(()=>{Ct(1===h)}));const y=[];for(const b of t.mutations){const S=RC(e,b.key.path,t.batchId);o.push(i.delete(S)),y.push(b.key)}return oe.waitFor(o).next(()=>y)}function Hy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(41943040,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class Gy{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Ct(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Gy(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return al(e).X({index:"userMutationsIndex",range:r},(i,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Vd(e),u=al(e);return u.add({}).next(h=>{Ct("number"==typeof h);const p=new gD(h,t,r,i),y=function(M,U,z){const te=z.baseMutations.map(Fe=>hm(M.fe,Fe)),ne=z.mutations.map(Fe=>hm(M.fe,Fe));return{userId:U,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:te,mutations:ne}}(this.serializer,this.userId,p),b=[];let S=new Hn((M,U)=>Qt(M.canonicalString(),U.canonicalString()));for(const M of i){const U=RC(this.userId,M.key.path,h);S=S.add(M.key.path.popLast()),b.push(u.put(y)),b.push(o.put(U,Ex))}return S.forEach(M=>{b.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.Vn[h]=p.keys()}),oe.waitFor(b).next(()=>p)})}lookupMutationBatch(e,t){return al(e).get(t).next(r=>r?(Ct(r.userId===this.userId),qf(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return al(e).X({index:"userMutationsIndex",range:i},(u,h,p)=>{h.userId===this.userId&&(Ct(h.batchId>=r),o=qf(this.serializer,h)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return al(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return al(e).j("userMutationsIndex",t).next(r=>r.map(i=>qf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ay(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Vd(e).X({range:i},(u,h,p)=>{const[y,b,S]=u,M=Qa(b);if(y===this.userId&&t.path.isEqual(M))return al(e).get(S).next(U=>{if(!U)throw ht();Ct(U.userId===this.userId),o.push(qf(this.serializer,U))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Qt);const i=[];return t.forEach(o=>{const u=ay(this.userId,o.path),h=IDBKeyRange.lowerBound(u),p=Vd(e).X({range:h},(y,b,S)=>{const[M,U,z]=y,te=Qa(U);M===this.userId&&o.path.isEqual(te)?r=r.add(z):S.done()});i.push(p)}),oe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=ay(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new Hn(Qt);return Vd(e).X({range:u},(p,y,b)=>{const[S,M,U]=p,z=Qa(M);S===this.userId&&r.isPrefixOf(z)?z.length===i&&(h=h.add(U)):b.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(al(e).get(o).next(u=>{if(null===u)throw ht();Ct(u.userId===this.userId),r.push(qf(this.serializer,u))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return PD(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Vd(e).X({range:r},(o,u,h)=>{if(o[0]===this.userId){const p=Qa(o[1]);i.push(p)}else h.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return wE(e,this.userId,t)}xn(e){return FD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wE(n,e,t){const r=ay(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return Vd(n).X({range:o,Y:!0},(h,p,y)=>{const[b,S,M]=h;b===e&&S===i&&(u=!0),y.done()}).next(()=>u)}function al(n){return Ti(n,"mutations")}function Vd(n){return Ti(n,"documentMutations")}function FD(n){return Ti(n,"mutationQueues")}class Ud{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ud(0)}static Mn(){return new Ud(-1)}}class LD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Ud(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lc(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return lc(e).X((u,h)=>{const p=Fd(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,o.push(this.removeTargetData(e,p)))}).next(()=>oe.waitFor(o)).next(()=>i)}forEachTarget(e,t){return lc(e).X((r,i)=>{const o=Fd(i);t(o)})}$n(e){return oR(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}On(e,t){return oR(e).put("targetGlobalKey",t)}Fn(e,t){return lc(e).put(lE(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=tl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return lc(e).X({range:i,index:"queryTargetsIndex"},(u,h,p)=>{const y=Fd(h);Dd(t,y.target)&&(o=y,p.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=ul(e);return t.forEach(u=>{const h=Xi(u.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=ul(e);return oe.forEach(t,o=>{const u=Xi(o.path);return oe.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=ul(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ul(e);let o=an();return i.X({range:r,Y:!0},(u,h,p)=>{const y=Qa(u[1]),b=new tt(y);o=o.add(b)}).next(()=>o)}containsKey(e,t){const r=Xi(t.path),i=IDBKeyRange.bound([r],[A0(r)],!1,!0);let o=0;return ul(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,h],p,y)=>{0!==u&&(o++,y.done())}).next(()=>o>0)}le(e,t){return lc(e).get(t).next(r=>r?Fd(r):null)}}function lc(n){return Ti(n,"targets")}function oR(n){return Ti(n,"targetGlobal")}function ul(n){return Ti(n,"targetDocuments")}function zy([n,e],[t,r]){const i=Qt(n,t);return 0===i?Qt(e,r):i}class aR{constructor(e){this.Ln=e,this.buffer=new Hn(zy),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Zu(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield bd(r)}yield t.Qn(3e5)}))}}class lO{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(zs.ct);const r=new aR(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(vE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vE):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,u,h,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,u=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(o=S,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),dr()<=Es.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${o} targets in `+(p-h)+`ms\n\tRemoved ${S} documents in `+(y-p)+`ms\nTotal Duration: ${y-b}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:S})))}}class lR{constructor(e,t){this.db=e,this.garbageCollector=function uR(n,e){return new lO(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return qy(e,r)}removeReference(e,t,r){return qy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qy(e,t)}Xn(e,t){return function(r,i){let o=!1;return FD(r).Z(u=>wE(r,u,i).next(h=>(h&&(o=!0),oe.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(u,h)=>{if(h<=t){const p=this.Xn(e,u).next(y=>{if(!y)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Dt.min()),ul(e).delete([0,Xi(u.path)])))});i.push(p)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qy(e,t)}Yn(e,t){const r=ul(e);let i,o=zs.ct;return r.X({index:"documentTargetsIndex"},([u,h],{path:p,sequenceNumber:y})=>{0===u?(o!==zs.ct&&t(new tt(Qa(i)),o),o=y,i=p):o=zs.ct}).next(()=>{o!==zs.ct&&t(new tt(Qa(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qy(n,e){return ul(n).put((r=n.currentSequenceNumber,{targetId:0,path:Xi(e.path),sequenceNumber:r}));var r}class UD{constructor(){this.changes=new Xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bd(e).put(r)}removeEntry(e,t,r){return Bd(e).delete(function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],fm(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=hr.newInvalidDocument(t);return Bd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Wy(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:hr.newInvalidDocument(t)};return Bd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Wy(t))},(i,o)=>{r={document:this.ts(t,o),size:Hy(o)}}).next(()=>r)}getEntries(e,t){let r=xi();return this.ns(e,t,(i,o)=>{const u=this.ts(i,o);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=xi(),i=new Zn(tt.comparator);return this.ns(e,t,(o,u)=>{const h=this.ts(o,u);r=r.insert(o,h),i=i.insert(o,Hy(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let i=new Hn(fR);t.forEach(p=>i=i.add(p));const o=IDBKeyRange.bound(Wy(i.first()),Wy(i.last())),u=i.getIterator();let h=u.getNext();return Bd(e).X({index:"documentKeyIndex",range:o},(p,y,b)=>{const S=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&fR(h,S)<0;)r(h,null),h=u.getNext();h&&h.isEqual(S)&&(r(h,y),h=u.hasNext()?u.getNext():null),h?b.G(Wy(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,u=[o.popLast().toArray(),o.lastSegment(),fm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bd(e).j(IDBKeyRange.bound(u,h,!0)).next(p=>{let y=xi();for(const b of p){const S=this.ts(tt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(im(t,S)||i.has(S.key))&&(y=y.insert(S.key,S))}return y})}getAllFromCollectionGroup(e,t,r,i){let o=xi();const u=hR(t,r),h=hR(t,Gs.max());return Bd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(p,y,b)=>{const S=this.ts(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(S.key,S),o.size===i&&b.done()}).next(()=>o)}newChangeBuffer(e){return new dO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dR(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Zn(e,t){return dR(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function ND(n,e){let t;if(e.document)t=ky(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=uc(e.noDocument.readTime);t=hr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=tt.fromSegments(e.unknownDocument.path),i=uc(e.unknownDocument.version);t=hr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new sr(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return hr.newInvalidDocument(e)}}function cR(n){return new cO(n)}class dO extends UD{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Xa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Hn((o,u)=>Qt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.us.get(o);if(t.push(this.os.removeEntry(e,o,h.readTime)),u.isValidDocument()){const p=Jx(this.os.serializer,u);i=i.add(o.path.popLast());const y=Hy(p);r+=y-h.size,t.push(this.os.addEntry(e,o,p))}else if(r-=h.size,this.trackRemovals){const p=Jx(this.os.serializer,u.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,o,p))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,u)=>{this.us.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function dR(n){return Ti(n,"remoteDocumentGlobal")}function Bd(n){return Ti(n,"remoteDocumentsV14")}function Wy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hR(n,e){const t=e.documentKey.path.toArray();return[n,fm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fR(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Qt(t[o],r[o]),i)return i;return i=Qt(t.length,r.length),i||(i=Qt(t[t.length-2],r[r.length-2]),i||Qt(t[t.length-1],r[r.length-1]))}class hO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pR{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&am(r.mutation,i,bs.empty(),sr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,an()).next(()=>r))}getLocalViewOfDocuments(e,t,r=an()){const i=ia();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let u=Sd();return o.forEach((h,p)=>{u=u.insert(h,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=ia();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,an()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let o=xi();const u=sm(),h=sm();return t.forEach((p,y)=>{const b=r.get(y.key);i.has(y.key)&&(void 0===b||b.mutation instanceof eu)?o=o.insert(y.key,y):void 0!==b?(u.set(y.key,b.mutation.getFieldMask()),am(b.mutation,y,b.mutation.getFieldMask(),sr.now())):u.set(y.key,bs.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((y,b)=>u.set(y,b)),t.forEach((y,b)=>{var S;return h.set(y,new hO(b,null!==(S=u.get(y))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=sm();let i=new Zn((u,h)=>u-h),o=an();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let b=r.get(p)||bs.empty();b=h.applyToLocalView(y,b),r.set(p,b);const S=(i.get(h.batchId)||an()).add(p);i=i.insert(h.batchId,S)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,b=p.value,S=nD();b.forEach(M=>{if(!o.has(M)){const U=lD(t.get(M),r.get(M));null!==U&&S.set(M,U),o=o.add(M)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,S))}return oe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Q0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):oe.resolve(ia());let h=-1,p=o;return u.next(y=>oe.forEach(y,(b,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),o.get(b)?oe.resolve():this.remoteDocumentCache.getEntry(e,b).next(M=>{p=p.insert(b,M)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,p,y,an())).next(b=>({batchId:h,changes:tD(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=Sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Sd();return this.indexManager.getCollectionParents(e,i).next(u=>oe.forEach(u,h=>{const p=(y=t,b=h.child(i),new Ja(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((b,S)=>{o=o.insert(b,S)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((h,p)=>{const y=p.getKey();null===o.get(y)&&(o=o.insert(y,hr.newInvalidDocument(y)))});let u=Sd();return o.forEach((h,p)=>{const y=i.get(h);void 0!==y&&am(y.mutation,p,bs.empty(),sr.now()),im(t,p)&&(u=u.insert(h,p))}),u})}}class fO{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:An(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Fy(r.bundledQuery),readTime:An(r.readTime)}),oe.resolve();var r}}class s{constructor(){this.overlays=new Zn(tt.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ia();return oe.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=ia(),o=t.length+1,u=new tt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Zn((y,b)=>y-b);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=o.get(y.largestBatchId);null===b&&(b=ia(),o=o.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const h=ia(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,b)=>h.set(y,b)),!(h.size()>=i)););return oe.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new _D(t,r));let o=this.ls.get(t);void 0===o&&(o=an(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class a{constructor(){this.fs=new Hn(l.ds),this.ws=new Hn(l._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new l(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new l(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new tt(new wn([])),r=new l(t,e),i=new l(t,e+1),o=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),o.push(u.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new tt(new wn([])),r=new l(t,e),i=new l(t,e+1);let o=an();return this.ws.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new l(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class l{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return tt.comparator(e.key,t.key)||Qt(e.As,t.As)}static _s(e,t){return Qt(e.As,t.As)||tt.comparator(e.key,t.key)}}class c{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Hn(l.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const u=new gD(o,t,r,i);this.mutationQueue.push(u);for(const h of i)this.Rs=this.Rs.add(new l(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new l(t,0),i=new l(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],u=>{const h=this.Ps(u.As);o.push(h)}),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Qt);return t.forEach(i=>{const o=new l(i,0),u=new l(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,u],h=>{r=r.add(h.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;tt.isDocumentKey(o)||(o=o.child(""));const u=new l(new tt(o),0);let h=new Hn(Qt);return this.Rs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.As)),!0)},u),oe.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,i=>{const o=new l(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new l(t,0),i=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class f{constructor(e){this.Ds=e,this.docs=new Zn(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=xi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():hr.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=xi();const u=t.path,h=new tt(u.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||M0(kf(b),r)<=0||(i.has(b.key)||im(t,b))&&(o=o.insert(b.key,b.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ht()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new m(this)}getSize(e){return oe.resolve(this.size)}}class m extends UD{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class v{constructor(e){this.persistence=e,this.xs=new Xa(t=>tl(t),Dd),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new a,this.targetCount=0,this.Ms=Ud.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ud(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),oe.waitFor(o).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),oe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class C{constructor(e,t){this.$s={},this.overlays={},this.Os=new zs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new v(this),this.indexManager=new gE,this.remoteDocumentCache=new f(r=>this.referenceDelegate.Ls(r)),this.serializer=new MD(t),this.qs=new fO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new s,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new c(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new T(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class T extends SC{constructor(e){super(),this.currentSequenceNumber=e}}class x{constructor(e){this.persistence=e,this.Qs=new a,this.js=null}static zs(e){return new x(e)}get Ws(){if(this.js)return this.js;throw ht()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const i=tt.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ${constructor(e){this.serializer=e}O(e,t,r,i){const o=new iy("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O0,{unique:!0}),h.createObjectStore("documentMutations"),Q(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),Q(e)),u=u.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,p){return p.store("mutations").j().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O0,{unique:!0});const b=p.store("mutations"),S=y.map(M=>b.put(M));return oe.waitFor(S)})}(e,o))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(o))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(o))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,o))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(o))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:Rx});p.createIndex("collectionPathOverlayIndex",Mx,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",P0,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:bx});p.createIndex("documentKeyIndex",Ix),p.createIndex("collectionGroupIndex",Cx)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,o))),r<15&&i>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:Sx}).createIndex("sequenceNumberIndex",Ax,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:kC}).createIndex("documentKeyIndex",xx,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Hy(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>oe.forEach(i,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(h=>oe.forEach(h,p=>{Ct(p.userId===o.userId);const y=qf(this.serializer,p);return PD(e,o.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((u,h)=>{const p=new wn(u),y=[0,Xi(p)];o.push(t.get(y).next(b=>b?oe.resolve():t.put({targetId:0,path:Xi(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:NC});const r=t.store("collectionParents"),i=new mE,o=u=>{if(i.add(u)){const h=u.lastSegment(),p=u.popLast();return r.put({collectionId:h,parent:Xi(p)})}};return t.store("remoteDocuments").X({Y:!0},(u,h)=>{const p=new wn(u);return o(p.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,h,p],y)=>{const b=Qa(h);return o(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=Fd(i),u=lE(this.serializer,o);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,u)=>{const h=t.store("remoteDocumentsV14"),p=(y=u,y.document?new tt(wn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):ht()).path.toArray();var y;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(b))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=cR(this.serializer),o=new C(x.zs,this.serializer.fe);return r.j().next(u=>{const h=new Map;return u.forEach(p=>{var y;let b=null!==(y=h.get(p.userId))&&void 0!==y?y:an();qf(this.serializer,p).keys().forEach(S=>b=b.add(S)),h.set(p.userId,b)}),oe.forEach(h,(p,y)=>{const b=new Di(y),S=Uy.de(this.serializer,b),M=o.getIndexManager(b),U=Gy.de(b,this.serializer,M,o.referenceDelegate);return new pR(i,U,S,M).recalculateAndSaveOverlaysForDocumentKeys(new Yg(t,zs.ct),p).next()})})}}function Q(n){n.createObjectStore("targetDocuments",{keyPath:Tx}).createIndex("documentTargetsIndex",MC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Dx,{unique:!0}),n.createObjectStore("targetGlobal")}const re="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class be{constructor(e,t,r,i,o,u,h,p,y,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=u,this.document=h,this.ri=y,this.oi=b,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=M=>Promise.resolve(),!be.D())throw new xe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lR(this,i),this.di=t+"main",this.serializer=new MD(p),this.wi=new ra(this.di,this.ui,new $(this.serializer)),this.Bs=new LD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cR(this.serializer),this.qs=new Vy,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,re);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new zs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>et(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Zu(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return $e(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return et(e).delete(this.clientId)}bi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ti(r,"clientMetadata");return i.j().next(o=>{const u=e.Si(o,18e5),h=o.filter(p=>-1===u.indexOf(p));return oe.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):$e(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,re);return!1}}return!(!this.networkEnabled||!this.inForeground)||et(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Yg(t,zs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>et(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Gy.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _E(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Uy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(u=this.ui)?Nx:14===u?PC:13===u?ly:12===u?OC:11===u?uy:void ht();var u;let h;return this.wi.runTransaction(e,i,o,p=>(h=new Yg(p,this.Os?this.Os.next():zs.ct),"readwrite-primary"===t?this.Ti(h).next(y=>!!y||this.Ei(h)).next(y=>{if(!y)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new xe(de.FAILED_PRECONDITION,TC);return r(h)}).next(y=>this.vi(h).next(()=>y)):this.Oi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Oi(e){return $e(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(de.FAILED_PRECONDITION,re)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $e(e).put("owner",t)}static D(){return ra.D()}Ai(e){const t=$e(e);return t.get("owner").next(r=>this.Ri(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,V.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $e(n){return Ti(n,"owner")}function et(n){return Ti(n,"clientMetadata")}function _t(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ft{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=an(),i=an();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ft(e,t.fromCache,r,i)}}class ke{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(Y0(t))return oe.resolve(null);let r=es(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=rm(t,null,"F"),r=es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=an(...o);return this.Ui.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.ji(t,h);return this.zi(t,y,u,p.readTime)?this.Ki(e,rm(t,null,"F")):this.Wi(e,y,t,p)}))})))}Gi(e,t,r,i){return Y0(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const u=this.ji(t,o);return this.zi(t,u,r,i)?this.Qi(e,t):(dr()<=Es.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oc(t)),this.Wi(e,u,t,R0(i,-1)))})}ji(e,t){let r=new Hn(Fx(e));return t.forEach((i,o)=>{im(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return dr()<=Es.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",oc(t)),this.Ui.getDocumentsMatchingQuery(e,t,Gs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class nn{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Zn(Qt),this.Yi=new Xa(o=>tl(o),Dd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pR(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ar(n,e,t,r){return new nn(n,e,t,r)}function Lr(n,e){return BD.apply(this,arguments)}function BD(){return BD=(0,we.Z)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let p=an();for(const y of i){u.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of o){h.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next(y=>({er:y,removedBatchIds:u,addedBatchIds:h}))})})}),BD.apply(this,arguments)}function pO(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function gO(n,e,t){let r=an(),i=an();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=xi();return t.forEach((h,p)=>{const y=o.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(Dt.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):Ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{nr:u,sr:i}})}function hB(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zy(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,oe.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new sl(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ky(n,e,t){return gR.apply(this,arguments)}function gR(){return gR=(0,we.Z)(function*(n,e,t){const r=it(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Zu(u))throw u;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),gR.apply(this,arguments)}function jD(n,e,t){const r=it(n);let i=Dt.min(),o=an();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,p,y){const b=it(h),S=b.Yi.get(y);return void 0!==S?oe.resolve(b.Ji.get(S)):b.Bs.getTargetData(p,y)}(r,u,es(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,h.targetId).next(p=>{o=p})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:Dt.min(),t?o:an())).next(h=>(yO(r,XC(e),h),{documents:h,ir:o})))}function mO(n,e){const t=it(n),r=it(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(u=>u?u.target:null))}function _O(n,e){const t=it(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,R0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(yO(t,e,i),i))}function yO(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function mR(){return mR=(0,we.Z)(function*(n,e,t,r){const i=it(n);let o=an(),u=xi();for(const y of t){const b=e.rr(y.metadata.name);y.document&&(o=o.add(b));const S=e.ur(y);S.setReadTime(e.cr(y.metadata.readTime)),u=u.insert(b,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),p=yield Zy(i,(y=r,es(Td(wn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>gO(y,h,u).next(b=>(h.apply(y),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Bs.addMatchingKeys(y,o,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,b.nr,b.sr)).next(()=>b.nr)))}),mR.apply(this,arguments)}function pB(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,we.Z)(function*(n,e,t=an()){const r=yield Zy(n,es(Fy(e.bundledQuery))),i=it(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const u=An(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(o,e);const h=r.withResumeToken(ei.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(o,h).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),_R.apply(this,arguments)}function vO(n,e){return`firestore_clients_${n}_${e}`}function wO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yR(n,e){return`firestore_targets_${n}_${e}`}class $D{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(o=new xe(i.error.code,i.error.message))),u?new $D(e,t,i.state,o):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class EE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new xe(r.error.code,r.error.message))),o?new EE(e,r.state,i):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class HD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=jf();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=xC(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new HD(e,o):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vR{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vR(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wR{constructor(){this.activeTargetIds=jf()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ER{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Zn(Qt),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=vO(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new wR),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem(vO(e.persistenceKey,i));if(o){const u=HD.ar(i,o);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(yR(this.persistenceKey,e));if(r){const i=EE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yR(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let u=zs.ct;if(null!=o)try{const h=JSON.parse(o);Ct("number"==typeof h),u=h}catch(h){Pr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==zs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new $D(this.currentUser,e,t,r),o=wO(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=wO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=yR(this.persistenceKey,e),o=new EE(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return HD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return $D.ar(new Di(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return EE.ar(i,t)}br(e){return vR.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),u=[],h=[];return o.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{o.has(p)||h.push(p)}),this.syncEngine.Wr(u,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=jf();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class EO{constructor(){this.Hr=new wR,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new wR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gB{Yr(e){}shutdown(){}}class bO{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let GD=null;function bR(){return null===GD?GD=268435456+Math.round(2147483648*Math.random()):GD++,"0x"+GD.toString(16)}const mB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _B{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Cs="WebChannelConnection";class yB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const u=bR(),h=this.To(e,t);Ve("RestConnection",`Sending RPC '${e}' ${u}:`,h,r);const p={};return this.Eo(p,i,o),this.Ao(e,h,p,r).then(y=>(Ve("RestConnection",`Received RPC '${e}' ${u}: `,y),y),y=>{throw Co("RestConnection",`RPC '${e}' ${u} failed with error: `,y,"url: ",h,"request:",r),y})}vo(e,t,r,i,o,u){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${mB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=bR();return new Promise((u,h)=>{const p=new dx;p.setWithCredentials(!0),p.listenOnce(J1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Gg.NO_ERROR:const b=p.getResponseJson();Ve(Cs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(b)),u(b);break;case Gg.TIMEOUT:Ve(Cs,`RPC '${e}' ${o} timed out`),h(new xe(de.DEADLINE_EXCEEDED,"Request time out"));break;case Gg.HTTP_ERROR:const S=p.getStatus();if(Ve(Cs,`RPC '${e}' ${o} failed with status:`,S,"response text:",p.getResponseText()),S>0){let M=p.getResponseJson();Array.isArray(M)&&(M=M[0]);const U=M?.error;if(U&&U.status&&U.message){const z=function(te){const ne=te.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(ne)>=0?ne:de.UNKNOWN}(U.status);h(new xe(z,U.message))}else h(new xe(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new xe(de.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Ve(Cs,`RPC '${e}' ${o} completed.`)}});const y=JSON.stringify(i);Ve(Cs,`RPC '${e}' ${o} sending request:`,i),p.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=bR(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xf(),h=Q1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.xmlHttpFactory=new X1({})),this.Eo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const b=o.join("");Ve(Cs,`Creating RPC '${e}' stream ${i}: ${b}`,p);const S=u.createWebChannel(b,p);let M=!1,U=!1;const z=new _B({ro:ne=>{U?Ve(Cs,`Not sending because RPC '${e}' stream ${i} is closed:`,ne):(M||(Ve(Cs,`Opening RPC '${e}' stream ${i} transport.`),S.open(),M=!0),Ve(Cs,`RPC '${e}' stream ${i} sending:`,ne),S.send(ne))},oo:()=>S.close()}),te=(ne,Fe,qe)=>{ne.listen(Fe,Be=>{try{qe(Be)}catch(Ue){setTimeout(()=>{throw Ue},0)}})};return te(S,kt.EventType.OPEN,()=>{U||Ve(Cs,`RPC '${e}' stream ${i} transport opened.`)}),te(S,kt.EventType.CLOSE,()=>{U||(U=!0,Ve(Cs,`RPC '${e}' stream ${i} transport closed`),z.wo())}),te(S,kt.EventType.ERROR,ne=>{U||(U=!0,Co(Cs,`RPC '${e}' stream ${i} transport errored:`,ne),z.wo(new xe(de.UNAVAILABLE,"The operation could not be completed")))}),te(S,kt.EventType.MESSAGE,ne=>{var Fe;if(!U){const qe=ne.data[0];Ct(!!qe);const Ue=qe.error||(null===(Fe=qe[0])||void 0===Fe?void 0:Fe.error);if(Ue){Ve(Cs,`RPC '${e}' stream ${i} received error:`,Ue);const at=Ue.status;let ft=function(kn){const Tr=fi[kn];if(void 0!==Tr)return Hx(Tr)}(at),ln=Ue.message;void 0===ft&&(ft=de.INTERNAL,ln="Unknown error status: "+at+" with message "+Ue.message),U=!0,z.wo(new xe(ft,ln)),S.close()}else Ve(Cs,`RPC '${e}' stream ${i} received:`,qe),z._o(qe)}}),te(h,yC.STAT_EVENT,ne=>{ne.stat===T0.PROXY?Ve(Cs,`RPC '${e}' stream ${i} detected buffering proxy`):ne.stat===T0.NOPROXY&&Ve(Cs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{z.fo()},0),z}}function IO(){return typeof window<"u"?window:null}function zD(){return typeof document<"u"?document:null}function bE(n){return new sO(n,!0)}class IR{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class CO{constructor(e,t,r,i,o,u,h,p){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new IR(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,we.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,we.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new xe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,we.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vB extends CO{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function DD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ht(),i=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(Ct(void 0===y||"string"==typeof y),ei.fromBase64String(y||"")):(Ct(void 0===y||y instanceof Uint8Array),ei.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=void 0===p.code?de.UNKNOWN:Hx(p.code);return new xe(y,p.message||"")}(u);t=new cm(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=rl(n,r.document.name),o=An(r.document.updateTime),u=r.document.createTime?An(r.document.createTime):Dt.min(),h=new Ai({mapValue:{fields:r.document.fields}}),p=hr.newFoundDocument(i,o,u,h);t=new My(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=rl(n,r.document),o=r.readTime?An(r.readTime):Dt.min(),u=hr.newNoDocument(i,o);t=new My([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=rl(n,r.document);t=new My([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,{count:i=0,unchangedNames:o}=r,u=new rO(i,o);t=new vD(r.targetId,u)}}var p;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Dt.min():o.readTime?An(o.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Od(this.serializer),t.addTarget=function(i,o){let u;const h=o.target;if(u=vy(h)?{documents:SD(i,h)}:{query:Py(i,h)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=sE(i,o.resumeToken);const p=iE(i,o.expectedCount);null!==p&&(u.expectedCount=p)}else if(o.snapshotVersion.compareTo(Dt.min())>0){u.readTime=kd(i,o.snapshotVersion.toTimestamp());const p=iE(i,o.expectedCount);null!==p&&(u.expectedCount=p)}return u}(this.serializer,e);const r=function aE(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Od(this.serializer),t.removeTarget=e,this.Wo(t)}}class wB extends CO{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function TD(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let o=An(r.updateTime?r.updateTime:i);return o.isEqual(Dt.min())&&(o=An(i)),new jx(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.cu(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Od(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hm(this.serializer,r))};this.Wo(t)}}class EB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(de.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.vo(e,t,r,o,u,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(de.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class IB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Pr(t),this.mu=!1):Ve("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class CB{constructor(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(h=>{r.enqueueAndForget((0,we.Z)(function*(){var p;Jf(u)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,we.Z)(function*(y){const b=it(y);b.vu.add(4),yield Yy(b),b.bu.set("Unknown"),b.vu.delete(4),yield IE(b)}),function(y){return p.apply(this,arguments)})(u))}))}),this.bu=new IB(r,i)}}function IE(n){return DR.apply(this,arguments)}function DR(){return DR=(0,we.Z)(function*(n){if(Jf(n))for(const e of n.Ru)yield e(!0)}),DR.apply(this,arguments)}function Yy(n){return TR.apply(this,arguments)}function TR(){return TR=(0,we.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),TR.apply(this,arguments)}function qD(n,e){const t=it(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),xR(t)?AR(t):Jy(t).Ko()&&SR(t,e))}function CE(n,e){const t=it(n),r=Jy(t);t.Au.delete(e),r.Ko()&&DO(t,e),0===t.Au.size&&(r.Ko()?r.jo():Jf(t)&&t.bu.set("Unknown"))}function SR(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jy(n).su(e)}function DO(n,e){n.Vu.qt(e),Jy(n).iu(e)}function AR(n){n.Vu=new iO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Jy(n).start(),n.bu.gu()}function xR(n){return Jf(n)&&!Jy(n).Uo()&&n.Au.size>0}function Jf(n){return 0===it(n).vu.size}function TO(n){n.Vu=void 0}function DB(n){return RR.apply(this,arguments)}function RR(){return RR=(0,we.Z)(function*(n){n.Au.forEach((e,t)=>{SR(n,e)})}),RR.apply(this,arguments)}function TB(n,e){return MR.apply(this,arguments)}function MR(){return MR=(0,we.Z)(function*(n,e){TO(n),xR(n)?(n.bu.Iu(e),AR(n)):n.bu.set("Unknown")}),MR.apply(this,arguments)}function SB(n,e,t){return NR.apply(this,arguments)}function NR(){return NR=(0,we.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof cm&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,o){const u=o.cause;for(const h of o.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WD(n,r)}else if(e instanceof My?n.Vu.Ht(e):e instanceof vD?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield pO(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const u=i.Vu.ce(o);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.Au.get(p);y&&i.Au.set(p,y.withResumeToken(h.resumeToken,o))}}),u.targetMismatches.forEach((h,p)=>{const y=i.Au.get(h);if(!y)return;i.Au.set(h,y.withResumeToken(ei.EMPTY_BYTE_STRING,y.snapshotVersion)),DO(i,h);const b=new sl(y.target,h,p,y.sequenceNumber);SR(i,b)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield WD(n,r)}var r}),NR.apply(this,arguments)}function WD(n,e,t){return kR.apply(this,arguments)}function kR(){return kR=(0,we.Z)(function*(n,e,t){if(!Zu(e))throw e;n.vu.add(1),yield Yy(n),n.bu.set("Offline"),t||(t=()=>pO(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield IE(n)}))}),kR.apply(this,arguments)}function SO(n,e){return e().catch(t=>WD(n,t,e))}function Qy(n){return OR.apply(this,arguments)}function OR(){return OR=(0,we.Z)(function*(n){const e=it(n),t=Xf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;AB(e);)try{const i=yield hB(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,xB(e,i)}catch(i){yield WD(e,i)}AO(e)&&xO(e)}),OR.apply(this,arguments)}function AB(n){return Jf(n)&&n.Eu.length<10}function xB(n,e){n.Eu.push(e);const t=Xf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function AO(n){return Jf(n)&&!Xf(n).Uo()&&n.Eu.length>0}function xO(n){Xf(n).start()}function RB(n){return PR.apply(this,arguments)}function PR(){return PR=(0,we.Z)(function*(n){Xf(n).hu()}),PR.apply(this,arguments)}function MB(n){return FR.apply(this,arguments)}function FR(){return FR=(0,we.Z)(function*(n){const e=Xf(n);for(const t of n.Eu)e.uu(t.mutations)}),FR.apply(this,arguments)}function NB(n,e,t){return LR.apply(this,arguments)}function LR(){return LR=(0,we.Z)(function*(n,e,t){const r=n.Eu.shift(),i=mD.from(r,e,t);yield SO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Qy(n)}),LR.apply(this,arguments)}function kB(n,e){return VR.apply(this,arguments)}function VR(){return VR=(0,we.Z)(function*(n,e){var t;e&&Xf(n).ou&&(yield(t=(0,we.Z)(function*(r,i){if(um(o=i.code)&&o!==de.ABORTED){const u=r.Eu.shift();Xf(r).Qo(),yield SO(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Qy(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),AO(n)&&xO(n)}),VR.apply(this,arguments)}function RO(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,we.Z)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Jf(t);t.vu.add(3),yield Yy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield IE(t)}),UR.apply(this,arguments)}function BR(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,we.Z)(function*(n,e){const t=it(n);e?(t.vu.delete(2),yield IE(t)):e||(t.vu.add(2),yield Yy(t),t.bu.set("Unknown"))}),jR.apply(this,arguments)}function Jy(n){return n.Su||(n.Su=function(e,t,r){const i=it(e);return i.fu(),new vB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:DB.bind(null,n),ao:TB.bind(null,n),nu:SB.bind(null,n)}),n.Ru.push(function(){var e=(0,we.Z)(function*(t){t?(n.Su.Qo(),xR(n)?AR(n):n.bu.set("Unknown")):(yield n.Su.stop(),TO(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Xf(n){return n.Du||(n.Du=function(e,t,r){const i=it(e);return i.fu(),new wB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:RB.bind(null,n),ao:kB.bind(null,n),au:MB.bind(null,n),cu:NB.bind(null,n)}),n.Ru.push(function(){var e=(0,we.Z)(function*(t){t?(n.Du.Qo(),yield Qy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class $R{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,h=new $R(e,t,u,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xy(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),Zu(n))return new xe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class ev{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Sd(),this.sortedSet=new Zn(this.comparator)}static emptySet(e){return new ev(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ev)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ev;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class MO{constructor(){this.Cu=new Zn(tt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ht():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class tv{constructor(e,t,r,i,o,u,h,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new tv(e,t,ev.emptySet(t),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class OB{constructor(){this.Nu=void 0,this.listeners=[]}}class PB{constructor(){this.queries=new Xa(e=>ts(e),Bf),this.onlineState="Unknown",this.ku=new Set}}function HR(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,we.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new OB),i)try{o.Nu=yield t.onListen(r)}catch(u){const h=Xy(u,`Initialization of query '${oc(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&WR(t)}),GR.apply(this,arguments)}function zR(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,we.Z)(function*(n,e){const t=it(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),qR.apply(this,arguments)}function FB(n,e){const t=it(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.$u(i)&&(r=!0);u.Nu=i}}r&&WR(t)}function LB(n,e,t){const r=it(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function WR(n){n.ku.forEach(e=>{e.next()})}class ZR{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new tv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=tv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class VB{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class NO{constructor(e){this.serializer=e}rr(e){return rl(this.serializer,e)}ur(e){return e.metadata.exists?ky(this.serializer,e.document,!1):hr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return An(e)}}class UB{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kO(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=wn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new NO(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||an()).add(o);t.set(u,h)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function fB(n,e,t,r){return mR.apply(this,arguments)}(e.localStore,new NO(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield pB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function kO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OO{constructor(e){this.key=e}}class PO{constructor(e){this.key=e}}class FO{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=an(),this.mutatedKeys=an(),this.tc=Fx(e),this.ec=new ev(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new MO,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const M=i.get(b),U=im(this.query,S)?S:null,z=!!M&&this.mutatedKeys.has(M.key),te=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ne=!1;M&&U?M.data.isEqual(U.data)?z!==te&&(r.track({type:3,doc:U}),ne=!0):this.rc(M,U)||(r.track({type:2,doc:U}),ne=!0,(p&&this.tc(U,p)>0||y&&this.tc(U,y)<0)&&(h=!0)):!M&&U?(r.track({type:0,doc:U}),ne=!0):M&&!U&&(r.track({type:1,doc:M}),ne=!0,(p||y)&&(h=!0)),ne&&(U?(u=u.add(U),o=te?o.add(b):o.delete(b)):(u=u.delete(b),o=o.delete(b)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const b="F"===this.query.limitType?u.last():u.first();u=u.delete(b.key),o=o.delete(b.key),r.track({type:1,doc:b})}return{ec:u,ic:r,zi:h,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((y,b)=>function(S,M){const U=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return U(S)-U(M)}(y.type,b.type)||this.tc(y.doc,b.doc)),this.oc(r);const u=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,p=h!==this.Xu;return this.Xu=h,0!==o.length||p?{snapshot:new tv(this.query,e.ec,i,o,e.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new MO,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=an(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new PO(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new OO(r))}),t}hc(e){this.Yu=e.ir,this.Zu=an();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return tv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class BB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jB{constructor(e){this.key=e,this.fc=!1}}class $B{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new Xa(h=>ts(h),Bf),this._c=new Map,this.mc=new Set,this.gc=new Zn(tt.comparator),this.yc=new Map,this.Ic=new a,this.Tc={},this.Ec=new Map,this.Ac=Ud.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function HB(n,e){return KR.apply(this,arguments)}function KR(){return KR=(0,we.Z)(function*(n,e){const t=yM(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const u=yield Zy(t.localStore,es(e)),h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield YR(t,e,r,"current"===h,u.resumeToken),t.isPrimaryClient&&qD(t.remoteStore,u)}return i}),KR.apply(this,arguments)}function YR(n,e,t,r,i){return QR.apply(this,arguments)}function QR(){return QR=(0,we.Z)(function*(n,e,t,r,i){n.Rc=(S,M,U)=>{return(z=(0,we.Z)(function*(te,ne,Fe,qe){let Be=ne.view.sc(Fe);Be.zi&&(Be=yield jD(te.localStore,ne.query,!1).then(({documents:ft})=>ne.view.sc(ft,Be)));const Ue=qe&&qe.targetChanges.get(ne.targetId),at=ne.view.applyChanges(Be,te.isPrimaryClient,Ue);return aM(te,ne.targetId,at.cc),at.snapshot}),function(te,ne,Fe,qe){return z.apply(this,arguments)})(n,S,M,U);var z};const o=yield jD(n.localStore,e,!0),u=new FO(e,o.ir),h=u.sc(o.documents),p=Ry.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=u.applyChanges(h,n.isPrimaryClient,p);aM(n,t,y.cc);const b=new BB(e,t,u);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),QR.apply(this,arguments)}function GB(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,we.Z)(function*(n,e){const t=it(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!Bf(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ky(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),CE(t.remoteStore,r.targetId),nv(t,r.targetId)}).catch(bd))):(nv(t,r.targetId),yield Ky(t.localStore,r.targetId,!0))}),JR.apply(this,arguments)}function XR(){return XR=(0,we.Z)(function*(n,e,t){const r=vM(n);try{const i=yield function(o,u){const h=it(o),p=sr.now(),y=u.reduce((M,U)=>M.add(U.key),an());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",M=>{let U=xi(),z=an();return h.Zi.getEntries(M,y).next(te=>{U=te,U.forEach((ne,Fe)=>{Fe.isValidDocument()||(z=z.add(ne))})}).next(()=>h.localDocuments.getOverlayedDocuments(M,U)).next(te=>{b=te;const ne=[];for(const Fe of u){const qe=dD(Fe,b.get(Fe.key).overlayedDocument);null!=qe&&ne.push(new eu(Fe.key,qe,GC(qe.value.mapValue),or.exists(!0)))}return h.mutationQueue.addMutationBatch(M,p,ne,u)}).next(te=>{S=te;const ne=te.applyToLocalDocumentSet(b,z);return h.documentOverlayCache.saveOverlays(M,te.batchId,ne)})}).then(()=>({batchId:S.batchId,changes:tD(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,h){let p=o.Tc[o.currentUser.toKey()];p||(p=new Zn(Qt)),p=p.insert(u,h),o.Tc[o.currentUser.toKey()]=p}(r,i.batchId,t),yield jd(r,i.changes),yield Qy(r.remoteStore)}catch(i){const o=Xy(i,"Failed to persist write");t.reject(o)}}),XR.apply(this,arguments)}function LO(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,we.Z)(function*(n,e){const t=it(n);try{const r=yield function dB(n,e){const t=it(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;h.push(t.Bs.removeMatchingKeys(o,b.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(o,b.addedDocuments,S)));let U=M.withSequenceNumber(o.currentSequenceNumber);var z,te,ne;null!==e.targetMismatches.get(S)?U=U.withResumeToken(ei.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,r)),i=i.insert(S,U),te=U,ne=b,(0===(z=M).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(o,U))});let p=xi(),y=an();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,b))}),h.push(gO(o,u,e.documentUpdates).next(b=>{p=b.nr,y=b.sr})),!r.isEqual(Dt.min())){const b=t.Bs.getLastRemoteSnapshotVersion(o).next(S=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(b)}return oe.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,y)).next(()=>p)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t.yc.get(o);u&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?Ct(u.fc):i.removedDocuments.size>0&&(Ct(u.fc),u.fc=!1))}),yield jd(t,r,e)}catch(r){yield bd(r)}}),eM.apply(this,arguments)}function VO(n,e,t){const r=it(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,u)=>{const h=u.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(o,u){const h=it(o);h.onlineState=u;let p=!1;h.queries.forEach((y,b)=>{for(const S of b.listeners)S.Mu(u)&&(p=!0)}),p&&WR(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qB(n,e,t){return tM.apply(this,arguments)}function tM(){return tM=(0,we.Z)(function*(n,e,t){const r=it(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let u=new Zn(tt.comparator);u=u.insert(o,hr.newNoDocument(o,Dt.min()));const h=an().add(o),p=new xy(Dt.min(),new Map,new Zn(Qt),u,h);yield LO(r,p),r.gc=r.gc.remove(o),r.yc.delete(e),uM(r)}else yield Ky(r.localStore,e,!1).then(()=>nv(r,e,t)).catch(bd)}),tM.apply(this,arguments)}function WB(n,e){return nM.apply(this,arguments)}function nM(){return nM=(0,we.Z)(function*(n,e){const t=it(n),r=e.batch.batchId;try{const i=yield function cB(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,h,p,y){const b=p.batch,S=b.keys();let M=oe.resolve();return S.forEach(U=>{M=M.next(()=>y.getEntry(h,U)).next(z=>{const te=p.docVersions.get(U);Ct(null!==te),z.version.compareTo(te)<0&&(b.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),y.addEntry(z)))})}),M.next(()=>u.mutationQueue.removeMutationBatch(h,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=an();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(h=h.add(u.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);oM(t,r,null),sM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield jd(t,i)}catch(i){yield bd(i)}}),nM.apply(this,arguments)}function ZB(n,e,t){return rM.apply(this,arguments)}function rM(){return rM=(0,we.Z)(function*(n,e,t){const r=it(n);try{const i=yield function(o,u){const h=it(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,u).next(b=>(Ct(null!==b),y=b.keys(),h.mutationQueue.removeMutationBatch(p,b))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(r.localStore,e);oM(r,e,t),sM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield jd(r,i)}catch(i){yield bd(i)}}),rM.apply(this,arguments)}function iM(){return iM=(0,we.Z)(function*(n,e){const t=it(n);Jf(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const u=it(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Xy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),iM.apply(this,arguments)}function sM(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function oM(n,e,t){const r=it(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function nv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||UO(n,r)})}function UO(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(CE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),uM(n))}function aM(n,e,t){for(const r of t)r instanceof OO?(n.Ic.addReference(r.key,e),YB(n,r)):r instanceof PO?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||UO(n,r.key)):ht()}function YB(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.mc.add(r),uM(n))}function uM(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new tt(wn.fromString(e)),r=n.Ac.next();n.yc.set(r,new jB(t)),n.gc=n.gc.insert(t,r),qD(n.remoteStore,new sl(es(Td(t.path)),r,"TargetPurposeLimboResolution",zs.ct))}}function jd(n,e,t){return lM.apply(this,arguments)}function lM(){return lM=(0,we.Z)(function*(n,e,t){const r=it(n),i=[],o=[],u=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,p)=>{u.push(r.Rc(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const b=Ft.Li(p.targetId,y);o.push(b)}}))}),yield Promise.all(u),r.dc.nu(i),yield(h=(0,we.Z)(function*(p,y){const b=it(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>oe.forEach(y,M=>oe.forEach(M.Fi,U=>b.persistence.referenceDelegate.addReference(S,M.targetId,U)).next(()=>oe.forEach(M.Bi,U=>b.persistence.referenceDelegate.removeReference(S,M.targetId,U)))))}catch(S){if(!Zu(S))throw S;Ve("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const M=S.targetId;if(!S.fromCache){const U=b.Ji.get(M),te=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);b.Ji=b.Ji.insert(M,te)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,o))}),lM.apply(this,arguments)}function QB(n,e){return cM.apply(this,arguments)}function cM(){return cM=(0,we.Z)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield Lr(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(h=>{h.reject(new xe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield jd(t,r.er)}var i}),cM.apply(this,arguments)}function JB(n,e){const t=it(n),r=t.yc.get(e);if(r&&r.fc)return an().add(r.key);{let i=an();const o=t._c.get(e);if(!o)return i;for(const u of o){const h=t.wc.get(u);i=i.unionWith(h.view.nc)}return i}}function XB(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,we.Z)(function*(n,e){const t=it(n),r=yield jD(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&aM(t,e.targetId,i.cc),i}),dM.apply(this,arguments)}function ej(n,e){return hM.apply(this,arguments)}function hM(){return hM=(0,we.Z)(function*(n,e){const t=it(n);return _O(t.localStore,e).then(r=>jd(t,r))}),hM.apply(this,arguments)}function tj(n,e,t,r){return fM.apply(this,arguments)}function fM(){return fM=(0,we.Z)(function*(n,e,t,r){const i=it(n),o=yield function(u,h){const p=it(u),y=it(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Sn(b,h).next(S=>S?p.localDocuments.getDocuments(b,S):oe.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield Qy(i.remoteStore):"acknowledged"===t||"rejected"===t?(oM(i,e,r||null),sM(i,e),h=e,it(it(i.localStore).mutationQueue).Cn(h)):ht(),yield jd(i,o)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),fM.apply(this,arguments)}function pM(){return pM=(0,we.Z)(function*(n,e){const t=it(n);if(yM(t),vM(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield BO(t,r.toArray());t.vc=!0,yield BR(t.remoteStore,!0);for(const o of i)qD(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(nv(t,u),Ky(t.localStore,u,!0))),CE(t.remoteStore,u)}),yield i,yield BO(t,r),function(o){const u=it(o);u.yc.forEach((h,p)=>{CE(u.remoteStore,p)}),u.Ic.Ts(),u.yc=new Map,u.gc=new Zn(tt.comparator)}(t),t.vc=!1,yield BR(t.remoteStore,!1)}}),pM.apply(this,arguments)}function BO(n,e,t){return gM.apply(this,arguments)}function gM(){return gM=(0,we.Z)(function*(n,e,t){const r=it(n),i=[],o=[];for(const u of e){let h;const p=r._c.get(u);if(p&&0!==p.length){h=yield Zy(r.localStore,es(p[0]));for(const y of p){const b=r.wc.get(y),S=yield XB(r,b);S.snapshot&&o.push(S.snapshot)}}else{const y=yield mO(r.localStore,u);h=yield Zy(r.localStore,y),yield YR(r,jO(y),u,!1,h.resumeToken)}i.push(h)}return r.dc.nu(o),i}),gM.apply(this,arguments)}function jO(n){return Ey(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function rj(n){const e=it(n);return it(it(e.localStore).persistence).$i()}function ij(n,e,t,r){return mM.apply(this,arguments)}function mM(){return mM=(0,we.Z)(function*(n,e,t,r){const i=it(n);if(i.vc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield _O(i.localStore,XC(o[0])),h=xy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ei.EMPTY_BYTE_STRING);yield jd(i,u,h);break}case"rejected":yield Ky(i.localStore,e,!0),nv(i,e,r);break;default:ht()}}),mM.apply(this,arguments)}function sj(n,e,t){return _M.apply(this,arguments)}function _M(){return _M=(0,we.Z)(function*(n,e,t){const r=yM(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const o=yield mO(r.localStore,i),u=yield Zy(r.localStore,o);yield YR(r,jO(o),u.targetId,!1,u.resumeToken),qD(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield Ky(r.localStore,i,!1).then(()=>{CE(r.remoteStore,i),nv(r,i)}).catch(bd))}}),_M.apply(this,arguments)}function yM(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qB.bind(null,e),e.dc.nu=FB.bind(null,e.eventManager),e.dc.Pc=LB.bind(null,e.eventManager),e}function vM(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZB.bind(null,e),e}class DE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.serializer=bE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ar(this.persistence,new ke,e.initialUser,this.serializer)}createPersistence(e){return new C(x.zs,this.serializer)}createSharedClientState(e){return new EO}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wM extends DE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield vM(r.Vc.syncEngine),yield Qy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ar(this.persistence,new ke,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new VD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new k0(t,this.persistence);return new vx(e.asyncQueue,r)}createPersistence(e){const t=_t(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new be(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,IO(),zD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new EO}}class $O extends wM{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof ER&&(r.sharedClientState.syncEngine={jr:tj.bind(null,i),zr:ij.bind(null,i),Wr:sj.bind(null,i),$i:rj.bind(null,i),Qr:ej.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,we.Z)(function*(u){yield function nj(n,e){return pM.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=IO();if(!ER.D(t))throw new xe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_t(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ER(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rv{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>VO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=QB.bind(null,r.syncEngine),yield BR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new PB}createDatastore(e){const t=bE(e.databaseInfo.databaseId),r=new yB(e.databaseInfo);return new EB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>VO(this.syncEngine,h,0),u=bO.D()?new bO:new gB,new CB(t,r,i,o,u);var t,r,i,o,u}createSyncEngine(e,t){return function(r,i,o,u,h,p,y){const b=new $B(r,i,o,u,h,p);return y&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=it(t);Ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Yy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HO(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ZD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class uj{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new br,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,we.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new VB(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,we.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(o,u){const h=it(o),p=Od(h.serializer)+"/documents",y={documents:u.map(U=>dm(h.serializer,U))},b=yield h.vo("BatchGetDocuments",p,y,u.length),S=new Map;b.forEach(U=>{const z=function CD(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=rl(t,r.found.name),o=An(r.found.updateTime),u=r.found.createTime?An(r.found.createTime):Dt.min(),h=new Ai({mapValue:{fields:r.found.fields}});return hr.newFoundDocument(i,o,u,h)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=rl(t,r.missing),o=An(r.readTime);return hr.newNoDocument(i,o)}(n,e):ht()}(h.serializer,U);S.set(z.key.toString(),z)});const M=[];return u.forEach(U=>{const z=S.get(U.toString());Ct(!!z),M.push(z)}),M}),function(o,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=tt.fromPath(i);e.mutations.push(new pD(o,e.precondition(o)))}),yield(r=(0,we.Z)(function*(i,o){const u=it(i),h=Od(u.serializer)+"/documents",p={writes:o.map(y=>hm(u.serializer,y))};yield u.Io("Commit",h,p)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?or.exists(!1):or.updateTime(t):or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new xe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return or.updateTime(t)}return or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cj{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new IR(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,we.Z)(function*(){const t=new lj(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Of(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!um(t)}return!1}}class dj{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Di.UNAUTHENTICATED,this.clientId=IC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,we.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ve("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Xy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function KD(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(o){r.isEqual(o)||(yield Lr(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),EM.apply(this,arguments)}function bM(n,e){return IM.apply(this,arguments)}function IM(){return IM=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield CM(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>RO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>RO(e.remoteStore,o)),n._onlineComponents=e}),IM.apply(this,arguments)}function GO(n){return"FirebaseError"===n.name?n.code===de.FAILED_PRECONDITION||n.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function CM(n){return DM.apply(this,arguments)}function DM(){return DM=(0,we.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield KD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!GO(t))throw t;Co("Error using user provided cache. Falling back to memory cache: "+t),yield KD(n,new DE)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),yield KD(n,new DE);return n._offlineComponents}),DM.apply(this,arguments)}function YD(n){return TM.apply(this,arguments)}function TM(){return TM=(0,we.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield bM(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield bM(n,new rv))),n._onlineComponents}),TM.apply(this,arguments)}function zO(n){return CM(n).then(e=>e.persistence)}function QD(n){return CM(n).then(e=>e.localStore)}function qO(n){return YD(n).then(e=>e.remoteStore)}function SM(n){return YD(n).then(e=>e.syncEngine)}function iv(n){return AM.apply(this,arguments)}function AM(){return AM=(0,we.Z)(function*(n){const e=yield YD(n),t=e.eventManager;return t.onListen=HB.bind(null,e.syncEngine),t.onUnlisten=GB.bind(null,e.syncEngine),t}),AM.apply(this,arguments)}function ZO(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,o,u,h,p){const y=new ZD({next:S=>{o.enqueueAndForget(()=>zR(i,b));const M=S.docs.has(u);!M&&S.fromCache?p.reject(new xe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&h&&"server"===h.source?p.reject(new xe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),b=new ZR(Td(u.path),y,{includeMetadataChanges:!0,Ku:!0});return HR(i,b)}(yield iv(n),n.asyncQueue,e,t,r)})),r.promise}function KO(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,o,u,h,p){const y=new ZD({next:S=>{o.enqueueAndForget(()=>zR(i,b)),S.fromCache&&"server"===h.source?p.reject(new xe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),b=new ZR(u,y,{includeMetadataChanges:!0,Ku:!0});return HR(i,b)}(yield iv(n),n.asyncQueue,e,t,r)})),r.promise}function YO(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const QO=new Map;function xM(n,e,t){if(!t)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JO(n,e,t,r){if(!0===e&&!0===r)throw new xe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XO(n){if(!tt.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eP(n){if(tt.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function bn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JD(n);throw new xe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tP(n,e){if(e<=0)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class nP{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=YO(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new xe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class TE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fx;switch(t.type){case"firstParty":return new bC(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=QO.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),QO.delete(e),t.terminate())}(this),Promise.resolve()}}class Cr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cr(this.firestore,e,this._key)}}class cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class cc extends cs{constructor(e,t,r){super(e,t,Td(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cr(this.firestore,null,new tt(e))}withConverter(e){return new cc(this.firestore,e,this._path)}}function iP(n,e,...t){if(n=(0,V.m9)(n),xM("collection","path",e),n instanceof TE){const r=wn.fromString(e,...t);return eP(r),new cc(n,null,r)}{if(!(n instanceof Cr||n instanceof cc))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return eP(r),new cc(n.firestore,null,r)}}function XD(n,e,...t){if(n=(0,V.m9)(n),1===arguments.length&&(e=IC.A()),xM("doc","path",e),n instanceof TE){const r=wn.fromString(e,...t);return XO(r),new Cr(n,null,new tt(r))}{if(!(n instanceof Cr||n instanceof cc))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return XO(r),new Cr(n.firestore,n instanceof cc?n.converter:null,new tt(r))}}function sP(n,e){return n=(0,V.m9)(n),e=(0,V.m9)(e),(n instanceof Cr||n instanceof cc)&&(e instanceof Cr||e instanceof cc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function RM(n,e){return n=(0,V.m9)(n),e=(0,V.m9)(e),n instanceof cs&&e instanceof cs&&n.firestore===e.firestore&&Bf(n._query,e._query)&&n.converter===e.converter}class Ej{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new IR(this,"async_queue_retry"),this.Xc=()=>{const t=zD();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=zD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=zD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new br;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,we.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Zu(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=$R.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&ht()}verifyOperationInProgress(){}sa(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function MM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class bj{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Dr extends TE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ej,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||oP(this),this._firestoreClient.terminate()}}function pi(n){return n._firestoreClient||oP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function oP(n){var e,t,r;const i=n._freezeSettings(),o=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new VC(n._databaseId,h,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,YO(y.experimentalLongPollingOptions),y.useFetchStreams));var h,y;n._firestoreClient=new dj(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function aP(n,e,t){const r=new br;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield KD(n,t),yield bM(n,e),r.resolve()}catch(i){const o=i;if(!GO(o))throw o;Co("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function uP(n){if(n._initialized||n._terminated)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dc(ei.fromBase64String(e))}catch(t){throw new xe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dc(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $d{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ym{constructor(e){this._methodName=e}}class eT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}const kj=/^__.*__$/;class Oj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rd(e,this.data,t,this.fieldTransforms)}}class lP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class tT{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new tT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return iT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(cP(this.ca)&&kj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Pj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||bE(e)}ya(e,t,r,i=!1){return new tT({ca:e,methodName:t,ga:r,path:Fr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vm(n){const e=n._freezeSettings(),t=bE(n._databaseId);return new Pj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nT(n,e,t,r,i,o={}){const u=n.ya(o.merge||o.mergeFields?2:0,e,t,i);PM("Data must be an object, but it was:",u,r);const h=fP(r,u);let p,y;if(o.merge)p=new bs(u.fieldMask),y=u.fieldTransforms;else if(o.mergeFields){const b=[];for(const S of o.mergeFields){const M=xE(e,S,t);if(!u.contains(M))throw new xe(de.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);gP(b,M)||b.push(M)}p=new bs(b),y=u.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,y=u.fieldTransforms;return new Oj(new Ai(h),p,y)}class AE extends ym{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof AE}}function dP(n,e,t){return new tT({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class NM extends ym{_toFieldTransform(e){return new Gf(e.path,new Ad)}isEqual(e){return e instanceof NM}}class Fj extends ym{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=dP(this,e,!0),r=this.pa.map(o=>wm(o,t)),i=new nl(r);return new Gf(e.path,i)}isEqual(e){return this===e}}class Lj extends ym{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=dP(this,e,!0),r=this.pa.map(o=>wm(o,t)),i=new xd(r);return new Gf(e.path,i)}isEqual(e){return this===e}}class Vj extends ym{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Hf(e.serializer,tE(e.serializer,this.Ia));return new Gf(e.path,t)}isEqual(e){return this===e}}function kM(n,e,t,r){const i=n.ya(1,e,t);PM("Data must be an object, but it was:",i,r);const o=[],u=Ai.empty();qs(r,(p,y)=>{const b=rT(e,p,t);y=(0,V.m9)(y);const S=i.da(b);if(y instanceof AE)o.push(b);else{const M=wm(y,S);null!=M&&(o.push(b),u.set(b,M))}});const h=new bs(o);return new lP(u,h,i.fieldTransforms)}function OM(n,e,t,r,i,o){const u=n.ya(1,e,t),h=[xE(e,r,t)],p=[i];if(o.length%2!=0)throw new xe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<o.length;M+=2)h.push(xE(e,o[M])),p.push(o[M+1]);const y=[],b=Ai.empty();for(let M=h.length-1;M>=0;--M)if(!gP(y,h[M])){const U=h[M];let z=p[M];z=(0,V.m9)(z);const te=u.da(U);if(z instanceof AE)y.push(U);else{const ne=wm(z,te);null!=ne&&(y.push(U),b.set(U,ne))}}const S=new bs(y);return new lP(b,S,u.fieldTransforms)}function hP(n,e,t,r=!1){return wm(t,n.ya(r?4:3,e))}function wm(n,e){if(pP(n=(0,V.m9)(n)))return PM("Unsupported field value:",e,n),fP(n,e);if(n instanceof ym)return function(t,r){if(!cP(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const u of t){let h=wm(u,r.wa(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,V.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return tE(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=sr.fromDate(t);return{timestampValue:kd(r.serializer,i)}}if(t instanceof sr){const i=new sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kd(r.serializer,i)}}if(t instanceof eT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof dc)return{bytesValue:sE(r.serializer,t._byteString)};if(t instanceof Cr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:oE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${JD(t)}`)}(n,e)}function fP(n,e){const t={};return L0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(n,(r,i)=>{const o=wm(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function pP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof sr||n instanceof eT||n instanceof dc||n instanceof Cr||n instanceof ym)}function PM(n,e,t){if(!pP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=JD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function xE(n,e,t){if((e=(0,V.m9)(e))instanceof $d)return e._internalPath;if("string"==typeof e)return rT(n,e);throw iT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Uj=new RegExp("[~\\*/\\[\\]]");function rT(n,e,t){if(e.search(Uj)>=0)throw iT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $d(...e.split("."))._internalPath}catch{throw iT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iT(n,e,t,r,i){const o=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||u)&&(p+=" (found",o&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new xe(de.INVALID_ARGUMENT,h+n+p)}function gP(n,e){return n.some(t=>t.isEqual(e))}class RE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Bj extends RE{data(){return super.data()}}function sT(n,e){return"string"==typeof e?rT(n,e):e instanceof $d?e._internalPath:e._delegate._internalPath}function mP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class FM{}class ME extends FM{}function ep(n,e,...t){let r=[];e instanceof FM&&r.push(e),r=r.concat(t),function(i){const o=i.filter(h=>h instanceof sv).length,u=i.filter(h=>h instanceof NE).length;if(o>1||o>0&&u>0)throw new xe(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class NE extends ME{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new NE(e,t,r)}_apply(e){const t=this._parse(e);return wP(e._query,t),new cs(e.firestore,e.converter,J0(e._query,t))}_parse(e){const t=vm(e.firestore);return function(i,o,u,h,p,y,b){let S;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){vP(b,y);const M=[];for(const U of b)M.push(yP(h,i,U));S={arrayValue:{values:M}}}else S=yP(h,i,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||vP(b,y),S=hP(u,"where",b,"in"===y||"not-in"===y);return mn.create(p,y,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class sv extends FM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const u=i.getFlattenedFilters();for(const h of u)wP(o,h),o=J0(o,h)}(e._query,t),new cs(e.firestore,e.converter,J0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class LM extends ME{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new LM(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Lf(i,o);return function(h,p){if(null===by(h)){const y=nm(h);null!==y&&EP(0,y,p.field)}}(r,u),u}(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Ja(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class oT extends ME{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new oT(e,t,r)}_apply(e){return new cs(e.firestore,e.converter,rm(e._query,this._limit,this._limitType))}}class aT extends ME{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aT(e,t,r)}_apply(e){const t=_P(e,this.type,this._docOrFields,this._inclusive);return new cs(e.firestore,e.converter,(i=t,new Ja((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class uT extends ME{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uT(e,t,r)}_apply(e){const t=_P(e,this.type,this._docOrFields,this._inclusive);return new cs(e.firestore,e.converter,(i=t,new Ja((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function _P(n,e,t,r){if(t[0]=(0,V.m9)(t[0]),t[0]instanceof RE)return function(i,o,u,h,p){if(!h)throw new xe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const b of sc(i))if(b.field.isKeyField())y.push(Cd(o,h.key));else{const S=h.data.field(b.field);if(cy(S))throw new xe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const M=b.field.canonicalString();throw new xe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(S)}return new el(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=vm(n.firestore);return function(o,u,h,p,y,b){const S=o.explicitOrderBy;if(y.length>S.length)throw new xe(de.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let U=0;U<y.length;U++){const z=y[U];if(S[U].field.isKeyField()){if("string"!=typeof z)throw new xe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof z}`);if(!Q0(o)&&-1!==z.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${z}' contains a slash.`);const te=o.path.child(wn.fromString(z));if(!tt.isDocumentKey(te))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const ne=new tt(te);M.push(Cd(u,ne))}else{const te=hP(h,p,z);M.push(te)}}return new el(M,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function yP(n,e,t){if("string"==typeof(t=(0,V.m9)(t))){if(""===t)throw new xe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q0(e)&&-1!==t.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wn.fromString(t));if(!tt.isDocumentKey(r))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cd(n,new tt(r))}if(t instanceof Cr)return Cd(n,t._key);throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JD(t)}.`)}function vP(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wP(n,e){if(e.isInequality()){const r=nm(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new xe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=by(n);null!==o&&EP(0,i,o)}const t=function(r,i){for(const o of r)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(de.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function EP(n,e,t){if(!t.isEqual(e))throw new xe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class VM{convertValue(e,t="none"){switch(rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return qs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new eT(Ir(e.latitude),Ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qg(e));default:return null}}convertTimestamp(e){const t=Ku(e);return new sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wn.fromString(e);Ct(RD(r));const i=new Id(r.get(1),r.get(3)),o=new tt(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function lT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Kj extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new dc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}}class Em{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hd extends RE{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class kE extends Hd{data(e={}){return super.data(e)}}class tp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Em(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kE(this._firestore,this._userDataWriter,r.key,r,new Em(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new kE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Em(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new kE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Em(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),y=o.indexOf(u.doc.key)),{type:Qj(u.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function IP(n,e){return n instanceof Hd&&e instanceof Hd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof tp&&e instanceof tp&&n._firestore===e._firestore&&RM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class np extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new dc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}}function CP(n,e,t){n=bn(n,Cr);const r=bn(n.firestore,Dr),i=lT(n.converter,e,t);return ov(r,[nT(vm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,or.none())])}function DP(n,e,t,...r){n=bn(n,Cr);const i=bn(n.firestore,Dr),o=vm(i);let u;return u="string"==typeof(e=(0,V.m9)(e))||e instanceof $d?OM(o,"updateDoc",n._key,e,t,r):kM(o,"updateDoc",n._key,e),ov(i,[u.toMutation(n._key,or.exists(!0))])}function TP(n,...e){var t,r,i;n=(0,V.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||MM(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges};if(MM(e[u])){const S=e[u];e[u]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[u+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[u+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let p,y,b;if(n instanceof Cr)y=bn(n.firestore,Dr),b=Td(n._key.path),p={next:S=>{e[u]&&e[u](UM(y,n,S))},error:e[u+1],complete:e[u+2]};else{const S=bn(n,cs);y=bn(S.firestore,Dr),b=S._query;const M=new np(y);p={next:U=>{e[u]&&e[u](new tp(y,M,S,U))},error:e[u+1],complete:e[u+2]},mP(n._query)}return function(S,M,U,z){const te=new ZD(z),ne=new ZR(M,te,U);return S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return HR(yield iv(S),ne)})),()=>{te.Dc(),S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return zR(yield iv(S),ne)}))}}(pi(y),b,h,p)}function ov(n,e){return function(t,r){const i=new br;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function zB(n,e,t){return XR.apply(this,arguments)}(yield SM(t),r,i)})),i.promise}(pi(n),e)}function UM(n,e,t){const r=t.docs.get(e._key),i=new np(n);return new Hd(n,i,e._key,r,new Em(t.hasPendingWrites,t.fromCache),e.converter)}const g$={maxAttempts:5};class SP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vm(e)}set(e,t,r){this._verifyNotCommitted();const i=rp(e,this._firestore),o=lT(i.converter,t,r),u=nT(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,or.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=rp(e,this._firestore);let u;return u="string"==typeof(t=(0,V.m9)(t))||t instanceof $d?OM(this._dataReader,"WriteBatch.update",o._key,t,r,i):kM(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rp(e,this._firestore);return this._mutations=this._mutations.concat(new Md(t._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rp(n,e){if((n=(0,V.m9)(n)).firestore!==e)throw new xe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class m$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vm(e)}get(e){const t=rp(e,this._firestore),r=new Kj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const o=i[0];if(o.isFoundDocument())return new RE(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new RE(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=rp(e,this._firestore),o=lT(i.converter,t,r),u=nT(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const o=rp(e,this._firestore);let u;return u="string"==typeof(t=(0,V.m9)(t))||t instanceof $d?OM(this._dataReader,"Transaction.update",o._key,t,r,i):kM(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=rp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rp(e,this._firestore),r=new np(this._firestore);return super.get(e).then(i=>new Hd(this._firestore,r,t._key,i._document,new Em(!1,!1),t.converter))}}!function(n,e=!0){Wu=Pi.SDK_VERSION,(0,Pi._registerComponent)(new wo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),u=new Dr(new ny(t.getProvider("auth-internal")),new gx(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new xe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(h.options.projectId,p)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(wd,"3.12.0",n),(0,Pi.registerVersion)(wd,"3.12.0","esm2017")}();function BM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function xP(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function RP(){if(!function B0(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class OE{constructor(e){this._delegate=e}static fromBase64String(e){return RP(),new OE(dc.fromBase64String(e))}static fromUint8Array(e){return xP(),new OE(dc.fromUint8Array(e))}toBase64(){return RP(),this._delegate.toBase64()}toUint8Array(){return xP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jM(n){return function D$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class T${enableIndexedDbPersistence(e,t){return function Cj(n,e){uP(n=bn(n,Dr));const t=pi(n);if(t._uninitializedComponentsProvider)throw new xe(de.FAILED_PRECONDITION,"SDK cache is already specified.");Co("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new rv;return aP(t,i,new wM(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Dj(n){uP(n=bn(n,Dr));const e=pi(n);if(e._uninitializedComponentsProvider)throw new xe(de.FAILED_PRECONDITION,"SDK cache is already specified.");Co("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new rv;return aP(e,r,new $O(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Tj(n){if(n._initialized&&!n._terminated)throw new xe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!ra.D())return Promise.resolve();const i=r+"main";yield ra.delete(i)}),function(r){return t.apply(this,arguments)})(_t(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class MP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Id||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Co("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function rP(n,e,t,r={}){var i;const o=(n=bn(n,TE))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Co("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Di.MOCK_USER;else{u=(0,V.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new xe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Di(p)}n._authCredentials=new px(new wC(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function Aj(n){return function hj(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield zO(n),t=yield qO(n);return e.setNetworkEnabled(!0),function(r){const i=it(r);return i.vu.delete(0),IE(i)}(t)}))}(pi(n=bn(n,Dr)))}(this._delegate)}disableNetwork(){return function xj(n){return function fj(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield zO(n),t=yield qO(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const o=it(i);o.vu.add(0),yield Yy(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(pi(n=bn(n,Dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Sj(n){return function(e){const t=new br;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function KB(n,e){return iM.apply(this,arguments)}(yield SM(e),t)})),t.promise}(pi(n=bn(n,Dr)))}(this._delegate)}onSnapshotsInSync(e){return function o$(n,e){return function mj(n,e){const t=new ZD(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield iv(n),i=t,it(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield iv(n),i=t,void it(r).ku.delete(i);var r,i}))}}(pi(n=bn(n,Dr)),MM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new av(this,iP(this._delegate,e))}catch(t){throw Ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new nu(this,XD(this._delegate,e))}catch(t){throw Ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zs(this,function wj(n,e){if(n=bn(n,TE),xM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new cs(n,null,(t=e,new Ja(wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _$(n,e,t){n=bn(n,Dr);const r=Object.assign(Object.assign({},g$),t);return function(i){if(i.maxAttempts<1)throw new xe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,u){const h=new br;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const p=yield function WO(n){return YD(n).then(e=>e.datastore)}(i);new cj(i.asyncQueue,p,u,o,h).run()})),h.promise}(pi(n),i=>e(new m$(n,i)),r)}(this._delegate,t=>e(new NP(this,t)))}batch(){return pi(this._delegate),new kP(new SP(this._delegate,e=>ov(this._delegate,e)))}loadBundle(e){return function Rj(n,e){const t=pi(n=bn(n,Dr)),r=new bj;return function _j(n,e,t,r){const i=function(o,u){let h;return h="string"==typeof o?rE().encode(o):o,p=function(p,y){if(p instanceof Uint8Array)return HO(p,y);if(p instanceof ArrayBuffer)return HO(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new uj(p,u);var p}(t,bE(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function oj(n,e,t){const r=it(n);var i;(i=(0,we.Z)(function*(o,u,h){try{const p=yield u.getMetadata();if(yield function(M,U){const z=it(M),te=An(U.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",ne=>z.qs.getBundleMetadata(ne,U.id)).then(ne=>!!ne&&ne.createTime.compareTo(te)>=0)}(o.localStore,p))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);h._updateProgress(kO(p));const y=new UB(p,o.localStore,u.serializer);let b=yield u.bc();for(;b;){const M=yield y.zu(b);M&&h._updateProgress(M),b=yield u.bc()}const S=yield y.complete();return yield jd(o,S.Ju,void 0),yield function(M,U){const z=it(M);return z.persistence.runTransaction("Save bundle","readwrite",te=>z.qs.saveBundleMetadata(te,U))}(o.localStore,p),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(p){return Co("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var M}),function(o,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield SM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Mj(n,e){return function yj(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=it(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield QD(n),e)}))}(pi(n=bn(n,Dr)),e).then(t=>t?new cs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Zs(this,t):null)}}class cT extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new OE(new dc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return nu.forKey(t,this.firestore,null)}}class NP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}get(e){const t=Im(e);return this._delegate.get(t).then(r=>new PE(this._firestore,new Hd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Im(e);return r?(BM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Im(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Im(e);return this._delegate.delete(t),this}}class kP{constructor(e){this._delegate=e}set(e,t,r){const i=Im(e);return r?(BM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Im(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Im(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new kE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new FE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=bm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new bm(e,new cT(e),t),i.set(t,o)),o}}bm.INSTANCES=new WeakMap;class nu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new nu(t,new Cr(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new nu(t,new Cr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new av(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new av(this.firestore,iP(this._delegate,e))}catch(t){throw Ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,V.m9)(e))instanceof Cr&&sP(this._delegate,e)}set(e,t){t=BM("DocumentReference.set",t);try{return t?CP(this._delegate,e,t):CP(this._delegate,e)}catch(r){throw Ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?DP(this._delegate,e):DP(this._delegate,e,t,...r)}catch(i){throw Ws(i,"updateDoc()","DocumentReference.update()")}}delete(){return function i$(n){return ov(bn(n.firestore,Dr),[new Md(n._key,or.none())])}(this._delegate)}onSnapshot(...e){const t=OP(e),r=PP(e,i=>new PE(this.firestore,new Hd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return TP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Xj(n){n=bn(n,Cr);const e=bn(n.firestore,Dr),t=pi(e),r=new np(e);return function pj(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,o,u){try{const h=yield function(p,y){const b=it(p);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,y))}(i,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new xe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Xy(h,`Failed to get document '${o} from cache`);u.reject(p)}}),function(i,o,u){return r.apply(this,arguments)})(yield QD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Hd(e,r,n._key,i,new Em(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function e$(n){n=bn(n,Cr);const e=bn(n.firestore,Dr);return ZO(pi(e),n._key,{source:"server"}).then(t=>UM(e,n,t))}(this._delegate):function Jj(n){n=bn(n,Cr);const e=bn(n.firestore,Dr);return ZO(pi(e),n._key).then(t=>UM(e,n,t))}(this._delegate),t.then(r=>new PE(this.firestore,new Hd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new nu(this.firestore,this._delegate.withConverter(e?bm.getInstance(this.firestore,e):null))}}function Ws(n,e,t){return n.message=n.message.replace(e,t),n}function OP(n){for(const e of n)if("object"==typeof e&&!jM(e))return e;return{}}function PP(n,e){var t,r;let i;return i=jM(n[0])?n[0]:jM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class PE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new nu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IP(this._delegate,e._delegate)}}class FE extends PE{data(e){const t=this._delegate.data(e);return function vC(n,e){n||ht()}(void 0!==t),t}}class Zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}where(e,t,r){try{return new Zs(this.firestore,ep(this._delegate,function jj(n,e,t){const r=e,i=sT("where",n);return NE._create(i,r,t)}(e,t,r)))}catch(i){throw Ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Zs(this.firestore,ep(this._delegate,function $j(n,e="asc"){const t=e,r=sT("orderBy",n);return LM._create(r,t)}(e,t)))}catch(r){throw Ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zs(this.firestore,ep(this._delegate,function Hj(n){return tP("limit",n),oT._create("limit",n,"F")}(e)))}catch(t){throw Ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Zs(this.firestore,ep(this._delegate,function Gj(n){return tP("limitToLast",n),oT._create("limitToLast",n,"L")}(e)))}catch(t){throw Ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zs(this.firestore,ep(this._delegate,function zj(...n){return aT._create("startAt",n,!0)}(...e)))}catch(t){throw Ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zs(this.firestore,ep(this._delegate,function qj(...n){return aT._create("startAfter",n,!1)}(...e)))}catch(t){throw Ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zs(this.firestore,ep(this._delegate,function Wj(...n){return uT._create("endBefore",n,!1)}(...e)))}catch(t){throw Ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zs(this.firestore,ep(this._delegate,function Zj(...n){return uT._create("endAt",n,!0)}(...e)))}catch(t){throw Ws(t,"endAt()","Query.endAt()")}}isEqual(e){return RM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function n$(n){n=bn(n,cs);const e=bn(n.firestore,Dr),t=pi(e),r=new np(e);return function gj(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,o,u){try{const h=yield jD(i,o,!0),p=new FO(o,h.ir),y=p.sc(h.documents),b=p.applyChanges(y,!1);u.resolve(b.snapshot)}catch(h){const p=Xy(h,`Failed to execute query '${o} against cache`);u.reject(p)}}),function(i,o,u){return r.apply(this,arguments)})(yield QD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new tp(e,r,n,i))}(this._delegate):"server"===e?.source?function r$(n){n=bn(n,cs);const e=bn(n.firestore,Dr),t=pi(e),r=new np(e);return KO(t,n._query,{source:"server"}).then(i=>new tp(e,r,n,i))}(this._delegate):function t$(n){n=bn(n,cs);const e=bn(n.firestore,Dr),t=pi(e),r=new np(e);return mP(n._query),KO(t,n._query).then(i=>new tp(e,r,n,i))}(this._delegate),t.then(r=>new $M(this.firestore,new tp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=OP(e),r=PP(e,i=>new $M(this.firestore,new tp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return TP(this._delegate,t,r)}withConverter(e){return new Zs(this.firestore,this._delegate.withConverter(e?bm.getInstance(this.firestore,e):null))}}class A${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new FE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $M{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new FE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new A$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new FE(this._firestore,r))})}isEqual(e){return IP(this._delegate,e._delegate)}}class av extends Zs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nu(this.firestore,e):null}doc(e){try{return new nu(this.firestore,void 0===e?XD(this._delegate):XD(this._delegate,e))}catch(t){throw Ws(t,"doc()","CollectionReference.doc()")}}add(e){return function s$(n,e){const t=bn(n.firestore,Dr),r=XD(n),i=lT(n.converter,e);return ov(t,[nT(vm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new nu(this.firestore,t))}isEqual(e){return sP(this._delegate,e._delegate)}withConverter(e){return new av(this.firestore,this._delegate.withConverter(e?bm.getInstance(this.firestore,e):null))}}function Im(n){return bn(n,Cr)}class HM{constructor(...e){this._delegate=new $d(...e)}static documentId(){return new HM(Fr.keyField().canonicalString())}isEqual(e){return(e=(0,V.m9)(e))instanceof $d&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function v$(){return new NM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Cm(e)}static delete(){const e=function y$(){return new AE("deleteField")}();return e._methodName="FieldValue.delete",new Cm(e)}static arrayUnion(...e){const t=function w$(...n){return new Fj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Cm(t)}static arrayRemove(...e){const t=function E$(...n){return new Lj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Cm(t)}static increment(e){const t=function b$(n){return new Vj("increment",n)}(e);return t._methodName="FieldValue.increment",new Cm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const x$={Firestore:MP,GeoPoint:eT,Timestamp:sr,Blob:OE,Transaction:NP,WriteBatch:kP,DocumentReference:nu,DocumentSnapshot:PE,Query:Zs,QueryDocumentSnapshot:FE,QuerySnapshot:$M,CollectionReference:av,FieldPath:HM,FieldValue:Cm,setLogLevel:function S$(n){!function eO(n){na.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function M$(n){(function R$(n,e){n.INTERNAL.registerComponent(new wo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},x$)))})(n,(e,t)=>new MP(e,t,new T$)),n.registerVersion("@firebase/firestore-compat","0.3.9")}(D_.Z);var GM=j(6451),dT=j(5363),N$=j(6063);class k$ extends os.x{constructor(e=1/0,t=1/0,r=N$.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:u}=this;t||(r.push(e),!i&&r.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let u=0;u<o.length&&!e.closed;u+=r?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const u=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)h=p;h&&r.splice(0,h+1)}}}var FP=j(3099);function LP(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,FP.B)({connector:()=>new k$(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function VP(n,e){return(0,ed.m)(e)?Rn(()=>n,e):Rn(()=>n)}var zM=j(9468);j(259);const WM=new Map,BP={activated:!1,tokenObservers:[]},V$={initialized:!1,enabled:!1};function ti(n){return WM.get(n)||Object.assign({},BP)}function fT(){return V$}const ZM="https://content-firebaseappcheck.googleapis.com/v1",$$="exchangeDebugToken",jP={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class G${constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new V.BH,yield function z$(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new V.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ds=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function QM(){return QM=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const o={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,o)}catch(S){throw ds.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==u.status)throw ds.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(S){throw ds.create("fetch-parse-error",{originalErrorMessage:S?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+y,issuedAtTimeMillis:b}}),QM.apply(this,arguments)}const K$="firebase-app-check-database",Y$=1,LE="firebase-app-check-store";let _T=null;function JM(){return JM=(0,we.Z)(function*(n,e){const r=(yield function GP(){return _T||(_T=new Promise((n,e)=>{try{const t=indexedDB.open(K$,Y$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ds.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(LE,{keyPath:"compositeKey"})}}catch(t){e(ds.create("storage-open",{originalErrorMessage:t?.message}))}}),_T)}()).transaction(LE,"readwrite"),o=r.objectStore(LE).put({compositeKey:n,value:e});return new Promise((u,h)=>{o.onsuccess=p=>{u()},r.onerror=p=>{var y;h(ds.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),JM.apply(this,arguments)}const VE=new Es.Yd("@firebase/app-check");function tN(n,e){return(0,V.hl)()?function J$(n,e){return function zP(n,e){return JM.apply(this,arguments)}(function WP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{VE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sN(){return sN=(0,we.Z)(function*(){const n=fT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),sN.apply(this,arguments)}const iH={error:"UNKNOWN_ERROR"};function sH(n){return V.US.encodeString(JSON.stringify(n),!1)}function yT(n){return oN.apply(this,arguments)}function oN(){return oN=(0,we.Z)(function*(n,e=!1){const t=n.app;!function KM(n){if(!ti(n).activated)throw ds.create("use-before-activation",{appName:n.name})}(t);const r=ti(t);let o,i=r.token;if(i&&!uv(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(uv(p)?i=p:yield tN(t,void 0))}if(!e&&i&&uv(i))return{token:i.token};let h,u=!1;if(function rN(){return fT().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function mT(n,e){return QM.apply(this,arguments)}(function $P(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${ZM}/projects/${t}/apps/${r}:${$$}?key=${i}`,body:{debug_token:e}}}(t,yield function iN(){return sN.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const p=yield r.exchangeTokenPromise;return yield tN(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield ti(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?VE.warn(p.message):VE.error(p),o=p}return i?o?h=uv(i)?{token:i.token,internalError:o}:YP(o):(h={token:i.token},r.token=i,yield tN(t,i)):h=YP(o),u&&function KP(n,e){const t=ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h}),oN.apply(this,arguments)}function lN(n,e){const t=ti(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ZP(n){const{app:e}=n,t=ti(e);let r=t.tokenRefresher;r||(r=function aH(n){const{app:e}=n;return new G$((0,we.Z)(function*(){let r;if(r=ti(e).token?yield yT(n,!0):yield yT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},jP.RETRIAL_MIN_WAIT,jP.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uv(n){return n.expireTimeMillis-Date.now()>0}function YP(n){return{token:sH(iH),error:n}}class uH{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ti(this.app);for(const t of e)lN(this.app,t.next);return Promise.resolve()}}const iF="app-check-internal";!function bH(){(0,Pi._registerComponent)(new wo.wA("app-check",n=>function lH(n,e){return new uH(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iF).initialize()})),(0,Pi._registerComponent)(new wo.wA(iF,n=>function cH(n){return{getToken:e=>yT(n,e),addTokenListener:e=>function uN(n,e,t,r){const{app:i}=n,o=ti(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&uv(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),ZP(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZP(n))}(n,"INTERNAL",e),removeTokenListener:e=>lN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pi.registerVersion)("@firebase/app-check","0.7.0")}();class UE{constructor(){return(0,En.vb)("app-check")}}typeof window<"u"&&window;var wT=j(9260);const pN=new d.OlP("angularfire2.auth.use-emulator"),gN=new d.OlP("angularfire2.auth.settings"),mN=new d.OlP("angularfire2.auth.tenant-id"),_N=new d.OlP("angularfire2.auth.langugage-code"),yN=new d.OlP("angularfire2.auth.use-device-language"),vN=new d.OlP("angularfire.auth.persistence"),wN=(n,e,t,r,i,o,u,h)=>(0,ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,o&&p.useDeviceLanguage(),u)for(const[y,b]of Object.entries(u))p.settings[y]=b;return h&&p.setPersistence(h),p},[t,r,i,o,u,h]);let BE=(()=>{class n{constructor(t,r,i,o,u,h,p,y,b,S,M,U){const z=new os.x,te=rt(void 0).pipe((0,dT.Q)(u.outsideAngular),Rn(()=>o.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,dt.U)(()=>(0,ci.on)(t,o,r)),(0,dt.U)(ne=>wN(ne,o,h,y,b,S,p,M)),LP({bufferSize:1,refCount:!1}));if(pa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{te.pipe(as()).subscribe();const Fe=te.pipe(Rn(Ue=>Ue.getRedirectResult().then(at=>at,()=>null)),En.iC,LP({bufferSize:1,refCount:!1})),qe=te.pipe(Rn(Ue=>new Xr.y(at=>({unsubscribe:o.runOutsideAngular(()=>Ue.onAuthStateChanged(ft=>at.next(ft),ft=>at.error(ft),()=>at.complete()))})))),Be=te.pipe(Rn(Ue=>new Xr.y(at=>({unsubscribe:o.runOutsideAngular(()=>Ue.onIdTokenChanged(ft=>at.next(ft),ft=>at.error(ft),()=>at.complete()))}))));this.authState=Fe.pipe(VP(qe),(0,zM.R)(u.outsideAngular),(0,dT.Q)(u.insideAngular)),this.user=Fe.pipe(VP(Be),(0,zM.R)(u.outsideAngular),(0,dT.Q)(u.insideAngular)),this.idToken=this.user.pipe(Rn(Ue=>Ue?(0,hn.D)(Ue.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Rn(Ue=>Ue?(0,hn.D)(Ue.getIdTokenResult()):rt(null))),this.credential=(0,GM.T)(Fe,z,this.authState.pipe(Zi(Ue=>!Ue))).pipe((0,dt.U)(Ue=>Ue?.user?Ue:null),(0,zM.R)(u.outsideAngular),(0,dT.Q)(u.insideAngular))}return(0,ci.pX)(this,te,o,{spy:{apply:(ne,Fe,qe)=>{(ne.startsWith("signIn")||ne.startsWith("createUser"))&&qe.then(Be=>z.next(Be))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ci.Dh),d.LFG(ci.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(En.HU),d.LFG(pN,8),d.LFG(gN,8),d.LFG(mN,8),d.LFG(_N,8),d.LFG(yN,8),d.LFG(vN,8),d.LFG(UE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AH=(()=>{class n{constructor(){wT.Z.registerVersion("angularfire",En.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[BE]}),n})();function oF(n,e){return function xH(n,e=gg.z){return new Xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function EN(n,e){return oF(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function ET(n,e){return EN(n,e).pipe(Ra(void 0),mg(),(0,dt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const p=i.find(b=>b.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(b=>b.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),o}))}function aF(n,e,t){return ET(n,t).pipe(Na((r,i)=>function MH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function NH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Cw(),(0,dt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function bN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function uF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ET(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ra(void 0),mg(),Zi(([r,i])=>i.length>0||!r),(0,dt.U)(([r,i])=>i),En.iC)}auditTrail(e){return this.stateChanges(e).pipe(Na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uF(e);return aF(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return EN(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),En.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(En.iC)}add(e){return this.ref.add(e)}doc(e){return new cF(this.ref.doc(e),this.afs)}}class cF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=fF(r,t);return new lF(i,o,this.afs)}snapshotChanges(){return function RH(n,e){return oF(n,e).pipe(Ra(void 0),mg(),(0,dt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hn.D)(this.ref.get(e)).pipe(En.iC)}}class kH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ET(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zi(t=>t.length>0),En.iC):ET(this.query,this.afs.schedulers.outsideAngular).pipe(En.iC)}auditTrail(e){return this.stateChanges(e).pipe(Na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uF(e);return aF(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return EN(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),En.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(En.iC)}}const dF=new d.OlP("angularfire2.enableFirestorePersistence"),hF=new d.OlP("angularfire2.firestore.persistenceSettings"),OH=new d.OlP("angularfire2.firestore.settings"),PH=new d.OlP("angularfire2.firestore.use-emulator");function fF(n,e=(t=>t)){return{query:e(n),ref:n}}let bT=(()=>{class n{constructor(t,r,i,o,u,h,p,y,b,S,M,U,z,te,ne,Fe,qe){this.schedulers=p;const Be=(0,ci.on)(t,h,r),Ue=b;S&&wN(Be,h,M,z,te,ne,U,Fe),[this.firestore,this.persistenceEnabled$]=(0,ci.cc)(`${Be.name}.firestore`,"AngularFirestore",Be.name,()=>{const at=h.runOutsideAngular(()=>Be.firestore());if(o&&at.settings(o),Ue&&at.useEmulator(...Ue),i&&!pa(u)){const ft=()=>{try{return(0,hn.D)(at.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ln){return typeof console<"u"&&console.warn(ln),rt(!1)}};return[at,h.runOutsideAngular(ft)]}return[at,rt(!1)]},[o,Ue,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=fF(i,r),h=this.schedulers.ngZone.run(()=>o);return new lF(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),o=this.firestore.collectionGroup(t);return new kH(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new cF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ci.Dh),d.LFG(ci.xv,8),d.LFG(dF,8),d.LFG(OH,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(En.HU),d.LFG(hF,8),d.LFG(PH,8),d.LFG(BE,8),d.LFG(pN,8),d.LFG(gN,8),d.LFG(mN,8),d.LFG(_N,8),d.LFG(yN,8),d.LFG(vN,8),d.LFG(UE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FH=(()=>{class n{constructor(){wT.Z.registerVersion("angularfire",En.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:dF,useValue:!0},{provide:hF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bT]}),n})(),Dm=(()=>{class n{constructor(t,r,i,o){this.aFirestore=t,this.aFireauth=r,this.router=i,this.ngZone=o,this.userSubject=new nr({}),this.user$=this.aFireauth.authState.pipe(Rn(u=>u?this.aFirestore.doc(`users/${u.uid}`).valueChanges():rt(null))),this.aFireauth.authState.subscribe(u=>{u?(this.userSubject.next(u),localStorage.setItem("user",JSON.stringify(u))):localStorage.setItem("user","")})}getUserData(){return this.userSubject.asObservable()}signIn(t,r){return this.aFireauth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["mainView"])}),this.setUserData(i.user)}).catch(i=>{window.alert(i.message)})}signUp(t,r){return this.aFireauth.createUserWithEmailAndPassword(t,r).then(i=>{this.sendVerificationMail(),this.setUserData(i.user)}).catch(i=>{window.alert(i.message)})}signInWithGoogle(){return this.providerSignIn(new Iw.V).then(t=>{this.router.navigate(["mainView"])})}signOut(){return this.aFireauth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["signIn"])})}forgotPassword(t){return this.aFireauth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}providerSignIn(t){return this.aFireauth.signInWithPopup(t).then(r=>{this.setUserData(r.user),this.router.navigate(["mainView"])}).catch(r=>{window.alert(r)})}sendVerificationMail(){return this.aFireauth.currentUser.then(t=>t?.sendEmailVerification()).then(()=>{this.router.navigate(["emailVerification"])})}setUserData(t){const r=this.aFirestore.doc(`users/${t.uid}`);return this.user$=this.aFirestore.doc(`users/${t.uid}`).valueChanges(),r.set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bT),d.LFG(BE),d.LFG(Yi),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Tm=(()=>{class n extends pF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const hc=new d.OlP("NgValueAccessor"),UH={provide:hc,useExisting:(0,d.Gpc)(()=>lv),multi:!0},jH=new d.OlP("CompositionEventMode");let lv=(()=>{class n extends pF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function BH(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(jH,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[d._Bn([UH]),d.qOj]}),n})();const $H=!1;function ip(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function mF(n){return null!=n&&"number"==typeof n.length}const Ds=new d.OlP("NgValidators"),sp=new d.OlP("NgAsyncValidators"),HH=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ru{static min(e){return function _F(n){return e=>{if(ip(e.value)||ip(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function yF(n){return e=>{if(ip(e.value)||ip(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return vF(e)}static requiredTrue(e){return function wF(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function EF(n){return ip(n.value)||HH.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function bF(n){return e=>ip(e.value)||!mF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function IF(n){return e=>mF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function CF(n){if(!n)return IT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ip(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return RF(e)}static composeAsync(e){return MF(e)}}function vF(n){return ip(n.value)?{required:!0}:null}function IT(n){return null}function DF(n){return null!=n}function TF(n){const e=(0,d.QGY)(n)?(0,hn.D)(n):n;if($H&&!(0,d.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new d.vHH(-1101,t)}return e}function SF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function AF(n,e){return e.map(t=>t(n))}function xF(n){return n.map(e=>function GH(n){return!n.validate}(e)?e:t=>e.validate(t))}function RF(n){if(!n)return null;const e=n.filter(DF);return 0==e.length?null:function(t){return SF(AF(t,e))}}function IN(n){return null!=n?RF(xF(n)):null}function MF(n){if(!n)return null;const e=n.filter(DF);return 0==e.length?null:function(t){return function LH(...n){const e=(0,zi.jO)(n),{args:t,keys:r}=Yc(n),i=new Xr.y(o=>{const{length:u}=t;if(!u)return void o.complete();const h=new Array(u);let p=u,y=u;for(let b=0;b<u;b++){let S=!1;(0,xa.Xf)(t[b]).subscribe((0,cr.x)(o,M=>{S||(S=!0,y--),h[b]=M},()=>p--,void 0,()=>{(!p||!S)&&(y||o.next(r?Ul(r,h):h),o.complete())}))}});return e?i.pipe(Wi(e)):i}(AF(t,e).map(TF)).pipe((0,dt.U)(SF))}}function CN(n){return null!=n?MF(xF(n)):null}function NF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kF(n){return n._rawValidators}function OF(n){return n._rawAsyncValidators}function DN(n){return n?Array.isArray(n)?n:[n]:[]}function CT(n,e){return Array.isArray(n)?n.includes(e):n===e}function PF(n,e){const t=DN(e);return DN(n).forEach(i=>{CT(t,i)||t.push(i)}),t}function FF(n,e){return DN(e).filter(t=>!CT(n,t))}class LF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=IN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=CN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ks extends LF{get formDirective(){return null}get path(){return null}}class op extends LF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class VF{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let DT=(()=>{class n extends VF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(op,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Sm=(()=>{class n extends VF{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ks,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();function UF(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const AN=!1,jE="VALID",ST="INVALID",cv="PENDING",$E="DISABLED";function xN(n){return(AT(n)?n.validators:n)||null}function RN(n,e){return(AT(e)?e.asyncValidators:n)||null}function AT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $F{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===jE}get invalid(){return this.status===ST}get pending(){return this.status==cv}get disabled(){return this.status===$E}get enabled(){return this.status!==$E}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FF(e,this._rawAsyncValidators))}hasValidator(e){return CT(this._rawValidators,e)}hasAsyncValidator(e){return CT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=cv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$E,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jE||this.status===cv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$E:jE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=cv,this._hasOwnPendingAsyncValidator=!0;const t=TF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?$E:this.errors?ST:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cv)?cv:this._anyControlsHaveStatus(ST)?ST:jE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){AT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function QH(n){return Array.isArray(n)?IN(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function JH(n){return Array.isArray(n)?CN(n):n||null}(this._rawAsyncValidators)}}class dv extends $F{constructor(e,t,r){super(xN(t),RN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function jF(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,AN?function YH(n,e){return`Must supply a value for form control ${UF(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function BF(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,AN?function ZH(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new d.vHH(1001,AN?function KH(n,e){return`Cannot find form control ${UF(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Am=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>HE}),HE="always";function GE(n,e,t=HE){MN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function t3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&HF(n,e)})}(n,e),function r3(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function n3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&HF(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function e3(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function RT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),NT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function MT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MN(n,e){const t=kF(n);null!==e.validator?n.setValidators(NF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=OF(n);null!==e.asyncValidator?n.setAsyncValidators(NF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();MT(e._rawValidators,i),MT(e._rawAsyncValidators,i)}function NT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=kF(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=OF(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(u=>u!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return MT(e._rawValidators,r),MT(e._rawAsyncValidators,r),t}function HF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function GF(n,e){MN(n,e)}function zF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const u3={provide:Ks,useExisting:(0,d.Gpc)(()=>hv)},zE=(()=>Promise.resolve())();let hv=(()=>{class n extends Ks{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new dv({},IN(t),CN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){zE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),GE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){zE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){zE.then(()=>{const r=this._findContainer(t.path),i=new dv({});GF(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){zE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){zE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,zF(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ds,10),d.Y36(sp,10),d.Y36(Am,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([u3]),d.qOj]}),n})();function qF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function WF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const fc=class extends $F{constructor(e=null,t,r){super(xN(t),RN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),AT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=WF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){WF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let xm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),XF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const PN=new d.OlP("NgModelWithFormControlWarning"),_3={provide:Ks,useExisting:(0,d.Gpc)(()=>fv)};let fv=(()=>{class n extends Ks{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(NT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return GE(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){RT(t.control||null,t,!1),function a3(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,zF(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(RT(r||null,t),(n=>n instanceof fc)(i)&&(GE(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);GF(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function i3(n,e){return NT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){MN(this.form,this),this._oldForm&&NT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ds,10),d.Y36(sp,10),d.Y36(Am,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([_3]),d.qOj,d.TTD]}),n})();const w3={provide:op,useExisting:(0,d.Gpc)(()=>qE)};let qE=(()=>{class n extends op{set isDisabled(t){}constructor(t,r,i,o,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ON(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===lv?t=o:function o3(n){return Object.getPrototypeOf(n.constructor)===Tm}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function kN(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function xT(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Ks,13),d.Y36(Ds,10),d.Y36(sp,10),d.Y36(hc,10),d.Y36(PN,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([w3]),d.qOj,d.TTD]}),n})();const E3={provide:hc,useExisting:(0,d.Gpc)(()=>kT),multi:!0};function iL(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let kT=(()=>{class n extends Tm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=iL(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function b3(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([E3]),d.qOj]}),n})(),sL=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(iL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(kT,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const I3={provide:hc,useExisting:(0,d.Gpc)(()=>VN),multi:!0};function oL(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let VN=(()=>{class n extends Tm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,u)=>{o._setSelected(i.indexOf(u.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const u=o;for(let h=0;h<u.length;h++){const y=this._getOptionValue(u[h].value);i.push(y)}}else{const u=r.options;for(let h=0;h<u.length;h++){const p=u[h];if(p.selected){const y=this._getOptionValue(p.value);i.push(y)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function C3(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([I3]),d.qOj]}),n})(),aL=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(oL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(oL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(VN,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Rm=(()=>{class n{constructor(){this._validator=IT}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):IT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const S3={provide:Ds,useExisting:(0,d.Gpc)(()=>pv),multi:!0};let pv=(()=>{class n extends Rm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>vF}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([S3]),d.qOj]}),n})(),_L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[XF]}),n})(),O3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Am,useValue:t.callSetDisabledState??HE}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[_L]}),n})(),P3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:PN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Am,useValue:t.callSetDisabledState??HE}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[_L]}),n})(),F3=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Dm))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sign-in"]],decls:23,vars:0,consts:[[1,"flex","items-center","justify-center","mt-10"],[1,"w-full","max-w-xs"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","mb-4"],[1,"mb-4"],["for","email",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","username","type","text","placeholder","Enter your email","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["userEmail",""],[1,"mb-6"],["for","password",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","password","type","password","placeholder","******************","required","",1,"shadow","appearance-none","border","border-red-500","rounded","w-full","py-2","px-3","text-gray-700","mb-3","leading-tight","focus:outline-none","focus:shadow-outline"],["userPassword",""],[1,"text-red-500","text-xs","italic"],[1,"flex","items-center","justify-center","mb-3"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[1,"flex","items-center","justify-between"],["type","button",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],["href","#","routerLink","/forgotPassword",1,"inline-block","align-baseline","font-bold","text-sm","text-blue-500","hover:text-blue-800"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"label",4),d._uU(5," Email "),d.qZA(),d._UZ(6,"input",5,6),d.qZA(),d.TgZ(8,"div",7)(9,"label",8),d._uU(10," Password "),d.qZA(),d._UZ(11,"input",9,10),d.TgZ(13,"p",11),d._uU(14,"Please choose a password."),d.qZA()(),d.TgZ(15,"div",12)(16,"button",13),d.NdJ("click",function(){return r.authService.signInWithGoogle()}),d._uU(17," Sign in With Google "),d.qZA()(),d.TgZ(18,"div",14)(19,"button",15),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(7),h=d.MAs(12);return d.KtG(r.authService.signIn(u.value,h.value))}),d._uU(20," Sign In "),d.qZA(),d.TgZ(21,"a",16),d._uU(22," Forgot Password? "),d.qZA()()()()()}},dependencies:[b_,xm,Sm,hv]}),n})(),L3=(()=>{class n{constructor(t){this.authService=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Dm))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sign-up"]],decls:23,vars:0,consts:[[1,"flex","items-center","justify-center","mt-10"],[1,"w-full","max-w-xs"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","mb-4"],[1,"mb-4"],["for","email",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","username","type","text","placeholder","Enter your email","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["userEmail",""],[1,"mb-6"],["for","password",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","password","type","password","placeholder","******************","required","",1,"shadow","appearance-none","border","border-red-500","rounded","w-full","py-2","px-3","text-gray-700","mb-3","leading-tight","focus:outline-none","focus:shadow-outline"],["userPassword",""],[1,"text-red-500","text-xs","italic"],[1,"flex","items-center","justify-center","mb-3"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[1,"flex","items-center","justify-between"],["type","button",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],["href","#",1,"inline-block","align-baseline","font-bold","text-sm","text-blue-500","hover:text-blue-800"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"label",4),d._uU(5," Email "),d.qZA(),d._UZ(6,"input",5,6),d.qZA(),d.TgZ(8,"div",7)(9,"label",8),d._uU(10," Password "),d.qZA(),d._UZ(11,"input",9,10),d.TgZ(13,"p",11),d._uU(14,"Please choose a password."),d.qZA()(),d.TgZ(15,"div",12)(16,"button",13),d.NdJ("click",function(){return r.authService.signInWithGoogle()}),d._uU(17," Sign in With Google "),d.qZA()(),d.TgZ(18,"div",14)(19,"button",15),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(7),h=d.MAs(12);return d.KtG(r.authService.signUp(u.value,h.value))}),d._uU(20," Sign Up "),d.qZA(),d.TgZ(21,"a",16),d._uU(22," Forgot Password? "),d.qZA()()()()()}},dependencies:[xm,Sm,hv]}),n})(),gv=(()=>{class n{constructor(t,r){this.af=t,this.authService=r,this.userUid="",this.userSubscription=this.authService.getUserData().subscribe(i=>{this.userUid=i.uid})}updateUserRooms(t){t[0].id=this.af.createId();const r=this.af.collection("users").doc(this.userUid);r.get().pipe(Oi(1),(0,dt.U)(i=>i.data())).subscribe(i=>{const o=i?.userRooms;o&&(o.push(...t),r.update({userRooms:o}).then(()=>window.alert("Room created")).catch(u=>window.alert(`Error creating room: ${u}`)))})}updateUserContainer(t,r){r[0].id=this.af.createId();const i=this.af.collection("users").doc(this.userUid);i.get().pipe(Oi(1),(0,dt.U)(o=>o.data())).subscribe(o=>{const u=o?.userRooms;if(u)for(let h=0;h<u.length;h++)if(u[h].id===t){const p=u[h].containers||[];p&&p.push(...r),u[h].containers=p,i.update({userRooms:u}).catch(y=>window.alert(`Error creating room: ${y}`));break}})}updateUserItem(t,r,i){i.forEach(u=>u.id=this.af.createId());const o=this.af.collection("users").doc(this.userUid);o.get().pipe(Oi(1),(0,dt.U)(u=>u.data())).subscribe(u=>{const h=u?.userRooms;if(h)for(let p=0;p<h.length;p++)if(h[p].id===t){const y=h[p].containers||[];if(y)for(let b=0;b<y.length;b++)if(y[b].id===r){const S=y[b].items||[];S&&S.push(...i),y[b].items=S;break}h[p].containers=y,o.update({userRooms:h}).catch(b=>window.alert(`Error creating room: ${b}`));break}})}deleteUserRoom(t){const r=this.af.collection("users").doc(this.userUid);r.get().pipe(Oi(1),(0,dt.U)(i=>i.data())).subscribe(i=>{const o=i?.userRooms;if(o)for(let u=0;u<o.length;u++)if(o[u].id===t){o.splice(u,1),r.update({userRooms:o}).catch(h=>window.alert(`Error creating room: ${h}`));break}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bT),d.LFG(Dm))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V3=(()=>{class n{constructor(t,r){this.authService=t,this.af=r,this.userUid="",this.userDocument={},this.authService.getUserData().subscribe(i=>{this.userUid=i?.uid||"",this.userDocument=this.af.collection("users").doc(this.userUid)})}getRooms(){return this.userDocument?.valueChanges().pipe(Rn(t=>rt(t&&t.userRooms?t.userRooms:[])))||rt([])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Dm),d.LFG(bT))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U3=function(){function n(e,t){void 0===t&&(t=[]),this._eventType=e,this._eventFunctions=t}return n.prototype.init=function(){var e=this;this._eventFunctions.forEach(function(t){typeof window<"u"&&window.addEventListener(e._eventType,t)})},n}();const B3=U3;var OT=function(){return OT=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},OT.apply(this,arguments)},PT={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},yL=function(){function n(e,t){void 0===e&&(e=[]),void 0===t&&(t=PT),this._items=e,this._options=OT(OT({},PT),t),this._init()}return n.prototype._init=function(){var e=this;this._items.length&&this._items.map(function(t){t.active&&e.open(t.id),t.triggerEl.addEventListener("click",function(){e.toggle(t.id)})})},n.prototype.getItem=function(e){return this._items.filter(function(t){return t.id===e})[0]},n.prototype.open=function(e){var t,r,i=this,o=this.getItem(e);this._options.alwaysOpen||this._items.map(function(u){var h,p;u!==o&&((h=u.triggerEl.classList).remove.apply(h,i._options.activeClasses.split(" ")),(p=u.triggerEl.classList).add.apply(p,i._options.inactiveClasses.split(" ")),u.targetEl.classList.add("hidden"),u.triggerEl.setAttribute("aria-expanded","false"),u.active=!1,u.iconEl&&u.iconEl.classList.remove("rotate-180"))}),(t=o.triggerEl.classList).add.apply(t,this._options.activeClasses.split(" ")),(r=o.triggerEl.classList).remove.apply(r,this._options.inactiveClasses.split(" ")),o.triggerEl.setAttribute("aria-expanded","true"),o.targetEl.classList.remove("hidden"),o.active=!0,o.iconEl&&o.iconEl.classList.add("rotate-180"),this._options.onOpen(this,o)},n.prototype.toggle=function(e){var t=this.getItem(e);t.active?this.close(e):this.open(e),this._options.onToggle(this,t)},n.prototype.close=function(e){var t,r,i=this.getItem(e);(t=i.triggerEl.classList).remove.apply(t,this._options.activeClasses.split(" ")),(r=i.triggerEl.classList).add.apply(r,this._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-expanded","false"),i.active=!1,i.iconEl&&i.iconEl.classList.remove("rotate-180"),this._options.onClose(this,i)},n}();function UN(){document.querySelectorAll("[data-accordion]").forEach(function(n){var e=n.getAttribute("data-accordion"),t=n.getAttribute("data-active-classes"),r=n.getAttribute("data-inactive-classes"),i=[];n.querySelectorAll("[data-accordion-target]").forEach(function(o){if(o.closest("[data-accordion]")===n){var u={id:o.getAttribute("data-accordion-target"),triggerEl:o,targetEl:document.querySelector(o.getAttribute("data-accordion-target")),iconEl:o.querySelector("[data-accordion-icon]"),active:"true"===o.getAttribute("aria-expanded")};i.push(u)}}),new yL(i,{alwaysOpen:"open"===e,activeClasses:t||PT.activeClasses,inactiveClasses:r||PT.inactiveClasses})})}typeof window<"u"&&(window.Accordion=yL,window.initAccordions=UN);var FT=function(){return FT=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},FT.apply(this,arguments)},vL={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},wL=function(){function n(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=vL),this._targetEl=e,this._triggerEl=t,this._options=FT(FT({},vL),r),this._visible=!1,this._init()}return n.prototype._init=function(){var e=this;this._triggerEl&&(this._visible=this._triggerEl.hasAttribute("aria-expanded")?"true"===this._triggerEl.getAttribute("aria-expanded"):!this._targetEl.classList.contains("hidden"),this._triggerEl.addEventListener("click",function(){e.toggle()}))},n.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},n.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},n.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},n}();function BN(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(n){var e=n.getAttribute("data-collapse-toggle"),t=document.getElementById(e);t?new wL(t,n):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=wL,window.initCollapses=BN);var Mm=function(){return Mm=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Mm.apply(this,arguments)},LT={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},EL=function(){function n(e,t){void 0===e&&(e=[]),void 0===t&&(t=LT),this._items=e,this._options=Mm(Mm(Mm({},LT),t),{indicators:Mm(Mm({},LT.indicators),t.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._init()}return n.prototype._init=function(){var e=this;this._items.map(function(t){t.el.classList.add("absolute","inset-0","transition-transform","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map(function(t,r){t.el.addEventListener("click",function(){e.slideTo(r)})})},n.prototype.getItem=function(e){return this._items[e]},n.prototype.slideTo=function(e){var t=this._items[e];this._rotate({left:0===t.position?this._items[this._items.length-1]:this._items[t.position-1],middle:t,right:t.position===this._items.length-1?this._items[0]:this._items[t.position+1]}),this._setActiveItem(t),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},n.prototype.next=function(){var e=this._getActiveItem();this.slideTo((e.position===this._items.length-1?this._items[0]:this._items[e.position+1]).position),this._options.onNext(this)},n.prototype.prev=function(){var e=this._getActiveItem();this.slideTo((0===e.position?this._items[this._items.length-1]:this._items[e.position-1]).position),this._options.onPrev(this)},n.prototype._rotate=function(e){this._items.map(function(t){t.el.classList.add("hidden")}),e.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.left.el.classList.add("-translate-x-full","z-10"),e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-20"),e.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.right.el.classList.add("translate-x-full","z-10")},n.prototype.cycle=function(){var e=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){e.next()},this._intervalDuration))},n.prototype.pause=function(){clearInterval(this._intervalInstance)},n.prototype._getActiveItem=function(){return this._activeItem},n.prototype._setActiveItem=function(e){var t,r,i=this;this._activeItem=e;var o=e.position;this._indicators.length&&(this._indicators.map(function(u){var h,p;u.el.setAttribute("aria-current","false"),(h=u.el.classList).remove.apply(h,i._options.indicators.activeClasses.split(" ")),(p=u.el.classList).add.apply(p,i._options.indicators.inactiveClasses.split(" "))}),(t=this._indicators[o].el.classList).add.apply(t,this._options.indicators.activeClasses.split(" ")),(r=this._indicators[o].el.classList).remove.apply(r,this._options.indicators.inactiveClasses.split(" ")),this._indicators[o].el.setAttribute("aria-current","true"))},n}();function jN(){document.querySelectorAll("[data-carousel]").forEach(function(n){var e=n.getAttribute("data-carousel-interval"),t="slide"===n.getAttribute("data-carousel"),r=[],i=0;n.querySelectorAll("[data-carousel-item]").length&&Array.from(n.querySelectorAll("[data-carousel-item]")).map(function(y,b){r.push({position:b,el:y}),"active"===y.getAttribute("data-carousel-item")&&(i=b)});var o=[];n.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(n.querySelectorAll("[data-carousel-slide-to]")).map(function(y){o.push({position:parseInt(y.getAttribute("data-carousel-slide-to")),el:y})});var u=new EL(r,{defaultPosition:i,indicators:{items:o},interval:e||LT.interval});t&&u.cycle();var h=n.querySelector("[data-carousel-next]"),p=n.querySelector("[data-carousel-prev]");h&&h.addEventListener("click",function(){u.next()}),p&&p.addEventListener("click",function(){u.prev()})})}typeof window<"u"&&(window.Carousel=EL,window.initCarousels=jN);var VT=function(){return VT=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},VT.apply(this,arguments)},bL={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},IL=function(){function n(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=bL),this._targetEl=e,this._triggerEl=t,this._options=VT(VT({},bL),r),this._init()}return n.prototype._init=function(){var e=this;this._triggerEl&&this._triggerEl.addEventListener("click",function(){e.hide()})},n.prototype.hide=function(){var e=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){e._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},n}();function $N(){document.querySelectorAll("[data-dismiss-target]").forEach(function(n){var e=n.getAttribute("data-dismiss-target"),t=document.querySelector(e);t?new IL(t,n):console.error('The dismiss element with id "'.concat(e,'" does not exist. Please check the data-dismiss-target attribute.'))})}function sa(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Nm(n){return n instanceof sa(n).Element||n instanceof Element}function iu(n){return n instanceof sa(n).HTMLElement||n instanceof HTMLElement}function HN(n){return!(typeof ShadowRoot>"u")&&(n instanceof sa(n).ShadowRoot||n instanceof ShadowRoot)}typeof window<"u"&&(window.Dismiss=IL,window.initDismisses=$N);var km=Math.max,UT=Math.min,mv=Math.round;function GN(){var n=navigator.userAgentData;return null!=n&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function CL(){return!/^((?!chrome|android).)*safari/i.test(GN())}function _v(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=n.getBoundingClientRect(),i=1,o=1;e&&iu(n)&&(i=n.offsetWidth>0&&mv(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&mv(r.height)/n.offsetHeight||1);var h=(Nm(n)?sa(n):window).visualViewport,p=!CL()&&t,y=(r.left+(p&&h?h.offsetLeft:0))/i,b=(r.top+(p&&h?h.offsetTop:0))/o,S=r.width/i,M=r.height/o;return{width:S,height:M,top:b,right:y+S,bottom:b+M,left:y,x:y,y:b}}function zN(n){var e=sa(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function pc(n){return n?(n.nodeName||"").toLowerCase():null}function ap(n){return((Nm(n)?n.ownerDocument:n.document)||window.document).documentElement}function qN(n){return _v(ap(n)).left+zN(n).scrollLeft}function Gd(n){return sa(n).getComputedStyle(n)}function WN(n){var e=Gd(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function G3(n,e,t){void 0===t&&(t=!1);var r=iu(e),i=iu(e)&&function H3(n){var e=n.getBoundingClientRect(),t=mv(e.width)/n.offsetWidth||1,r=mv(e.height)/n.offsetHeight||1;return 1!==t||1!==r}(e),o=ap(e),u=_v(n,i,t),h={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(r||!r&&!t)&&(("body"!==pc(e)||WN(o))&&(h=function $3(n){return n!==sa(n)&&iu(n)?function j3(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):zN(n)}(e)),iu(e)?((p=_v(e,!0)).x+=e.clientLeft,p.y+=e.clientTop):o&&(p.x=qN(o))),{x:u.left+h.scrollLeft-p.x,y:u.top+h.scrollTop-p.y,width:u.width,height:u.height}}function ZN(n){var e=_v(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function BT(n){return"html"===pc(n)?n:n.assignedSlot||n.parentNode||(HN(n)?n.host:null)||ap(n)}function DL(n){return["html","body","#document"].indexOf(pc(n))>=0?n.ownerDocument.body:iu(n)&&WN(n)?n:DL(BT(n))}function WE(n,e){var t;void 0===e&&(e=[]);var r=DL(n),i=r===(null==(t=n.ownerDocument)?void 0:t.body),o=sa(r),u=i?[o].concat(o.visualViewport||[],WN(r)?r:[]):r,h=e.concat(u);return i?h:h.concat(WE(BT(u)))}function z3(n){return["table","td","th"].indexOf(pc(n))>=0}function TL(n){return iu(n)&&"fixed"!==Gd(n).position?n.offsetParent:null}function ZE(n){for(var e=sa(n),t=TL(n);t&&z3(t)&&"static"===Gd(t).position;)t=TL(t);return t&&("html"===pc(t)||"body"===pc(t)&&"static"===Gd(t).position)?e:t||function q3(n){var e=/firefox/i.test(GN());if(/Trident/i.test(GN())&&iu(n)&&"fixed"===Gd(n).position)return null;var i=BT(n);for(HN(i)&&(i=i.host);iu(i)&&["html","body"].indexOf(pc(i))<0;){var o=Gd(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}(n)||e}var Do="top",su="bottom",ou="right",To="left",KN="auto",KE=[Do,su,ou,To],yv="start",YE="end",W3="clippingParents",SL="viewport",QE="popper",Z3="reference",AL=KE.reduce(function(n,e){return n.concat([e+"-"+yv,e+"-"+YE])},[]),xL=[].concat(KE,[KN]).reduce(function(n,e){return n.concat([e,e+"-"+yv,e+"-"+YE])},[]),iG=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function sG(n){var e=new Map,t=new Set,r=[];function i(o){t.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(h){if(!t.has(h)){var p=e.get(h);p&&i(p)}}),r.push(o)}return n.forEach(function(o){e.set(o.name,o)}),n.forEach(function(o){t.has(o.name)||i(o)}),r}function aG(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var RL={placement:"bottom",modifiers:[],strategy:"absolute"};function ML(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function lG(n){void 0===n&&(n={});var t=n.defaultModifiers,r=void 0===t?[]:t,i=n.defaultOptions,o=void 0===i?RL:i;return function(h,p,y){void 0===y&&(y=o);var b={placement:"bottom",orderedModifiers:[],options:Object.assign({},RL,o),modifiersData:{},elements:{reference:h,popper:p},attributes:{},styles:{}},S=[],M=!1,U={state:b,setOptions:function(Fe){var qe="function"==typeof Fe?Fe(b.options):Fe;te(),b.options=Object.assign({},o,b.options,qe),b.scrollParents={reference:Nm(h)?WE(h):h.contextElement?WE(h.contextElement):[],popper:WE(p)};var Be=function oG(n){var e=sG(n);return iG.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}(function uG(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(r,b.options.modifiers)));return b.orderedModifiers=Be.filter(function(Ue){return Ue.enabled}),function z(){b.orderedModifiers.forEach(function(ne){var qe=ne.options,Ue=ne.effect;if("function"==typeof Ue){var at=Ue({state:b,name:ne.name,instance:U,options:void 0===qe?{}:qe});S.push(at||function(){})}})}(),U.update()},forceUpdate:function(){if(!M){var Fe=b.elements,qe=Fe.reference,Be=Fe.popper;if(ML(qe,Be)){b.rects={reference:G3(qe,ZE(Be),"fixed"===b.options.strategy),popper:ZN(Be)},b.reset=!1,b.placement=b.options.placement,b.orderedModifiers.forEach(function(Vi){return b.modifiersData[Vi.name]=Object.assign({},Vi.data)});for(var Ue=0;Ue<b.orderedModifiers.length;Ue++)if(!0!==b.reset){var at=b.orderedModifiers[Ue],ft=at.fn,ln=at.options;"function"==typeof ft&&(b=ft({state:b,options:void 0===ln?{}:ln,name:at.name,instance:U})||b)}else b.reset=!1,Ue=-1}}},update:aG(function(){return new Promise(function(ne){U.forceUpdate(),ne(b)})}),destroy:function(){te(),M=!0}};if(!ML(h,p))return U;function te(){S.forEach(function(ne){return ne()}),S=[]}return U.setOptions(y).then(function(ne){!M&&y.onFirstUpdate&&y.onFirstUpdate(ne)}),U}}var jT={passive:!0};const dG={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function cG(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=void 0===i||i,u=r.resize,h=void 0===u||u,p=sa(e.elements.popper),y=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&y.forEach(function(b){b.addEventListener("scroll",t.update,jT)}),h&&p.addEventListener("resize",t.update,jT),function(){o&&y.forEach(function(b){b.removeEventListener("scroll",t.update,jT)}),h&&p.removeEventListener("resize",t.update,jT)}},data:{}};function gc(n){return n.split("-")[0]}function vv(n){return n.split("-")[1]}function YN(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function NL(n){var p,e=n.reference,t=n.element,r=n.placement,i=r?gc(r):null,o=r?vv(r):null,u=e.x+e.width/2-t.width/2,h=e.y+e.height/2-t.height/2;switch(i){case Do:p={x:u,y:e.y-t.height};break;case su:p={x:u,y:e.y+e.height};break;case ou:p={x:e.x+e.width,y:h};break;case To:p={x:e.x-t.width,y:h};break;default:p={x:e.x,y:e.y}}var y=i?YN(i):null;if(null!=y){var b="y"===y?"height":"width";switch(o){case yv:p[y]=p[y]-(e[b]/2-t[b]/2);break;case YE:p[y]=p[y]+(e[b]/2-t[b]/2)}}return p}const fG={name:"popperOffsets",enabled:!0,phase:"read",fn:function hG(n){var e=n.state;e.modifiersData[n.name]=NL({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var pG={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kL(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,u=n.offsets,h=n.position,p=n.gpuAcceleration,y=n.adaptive,b=n.roundOffsets,S=n.isFixed,M=u.x,U=void 0===M?0:M,z=u.y,te=void 0===z?0:z,ne="function"==typeof b?b({x:U,y:te}):{x:U,y:te};U=ne.x,te=ne.y;var Fe=u.hasOwnProperty("x"),qe=u.hasOwnProperty("y"),Be=To,Ue=Do,at=window;if(y){var ft=ZE(t),ln="clientHeight",kn="clientWidth";ft===sa(t)&&"static"!==Gd(ft=ap(t)).position&&"absolute"===h&&(ln="scrollHeight",kn="scrollWidth"),(i===Do||(i===To||i===ou)&&o===YE)&&(Ue=su,te-=(S&&ft===at&&at.visualViewport?at.visualViewport.height:ft[ln])-r.height,te*=p?1:-1),i!==To&&(i!==Do&&i!==su||o!==YE)||(Be=ou,U-=(S&&ft===at&&at.visualViewport?at.visualViewport.width:ft[kn])-r.width,U*=p?1:-1)}var Xs,xs=Object.assign({position:h},y&&pG),pl=!0===b?function gG(n,e){var r=n.y,i=e.devicePixelRatio||1;return{x:mv(n.x*i)/i||0,y:mv(r*i)/i||0}}({x:U,y:te},sa(t)):{x:U,y:te};return U=pl.x,te=pl.y,Object.assign({},xs,p?((Xs={})[Ue]=qe?"0":"",Xs[Be]=Fe?"0":"",Xs.transform=(at.devicePixelRatio||1)<=1?"translate("+U+"px, "+te+"px)":"translate3d("+U+"px, "+te+"px, 0)",Xs):((e={})[Ue]=qe?te+"px":"",e[Be]=Fe?U+"px":"",e.transform="",e))}const _G={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function mG(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=void 0===r||r,o=t.adaptive,u=void 0===o||o,h=t.roundOffsets,p=void 0===h||h,y={placement:gc(e.placement),variation:vv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,kL(Object.assign({},y,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:p})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,kL(Object.assign({},y,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},wG={name:"applyStyles",enabled:!0,phase:"write",fn:function yG(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!iu(o)||!pc(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(u){var h=i[u];!1===h?o.removeAttribute(u):o.setAttribute(u,!0===h?"":h)}))})},effect:function vG(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},h=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(p,y){return p[y]="",p},{});!iu(i)||!pc(i)||(Object.assign(i.style,h),Object.keys(o).forEach(function(p){i.removeAttribute(p)}))})}},requires:["computeStyles"]},IG={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function bG(n){var e=n.state,r=n.name,i=n.options.offset,o=void 0===i?[0,0]:i,u=xL.reduce(function(b,S){return b[S]=function EG(n,e,t){var r=gc(n),i=[To,Do].indexOf(r)>=0?-1:1,o="function"==typeof t?t(Object.assign({},e,{placement:n})):t,u=o[0],h=o[1];return u=u||0,h=(h||0)*i,[To,ou].indexOf(r)>=0?{x:h,y:u}:{x:u,y:h}}(S,e.rects,o),b},{}),h=u[e.placement],y=h.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=h.x,e.modifiersData.popperOffsets.y+=y),e.modifiersData[r]=u}};var CG={left:"right",right:"left",bottom:"top",top:"bottom"};function $T(n){return n.replace(/left|right|bottom|top/g,function(e){return CG[e]})}var DG={start:"end",end:"start"};function OL(n){return n.replace(/start|end/g,function(e){return DG[e]})}function PL(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&HN(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function QN(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function FL(n,e,t){return e===SL?QN(function TG(n,e){var t=sa(n),r=ap(n),i=t.visualViewport,o=r.clientWidth,u=r.clientHeight,h=0,p=0;if(i){o=i.width,u=i.height;var y=CL();(y||!y&&"fixed"===e)&&(h=i.offsetLeft,p=i.offsetTop)}return{width:o,height:u,x:h+qN(n),y:p}}(n,t)):Nm(e)?function AG(n,e){var t=_v(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):QN(function SG(n){var e,t=ap(n),r=zN(n),i=null==(e=n.ownerDocument)?void 0:e.body,o=km(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),u=km(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),h=-r.scrollLeft+qN(n),p=-r.scrollTop;return"rtl"===Gd(i||t).direction&&(h+=km(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:u,x:h,y:p}}(ap(n)))}function VL(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function UL(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}function JE(n,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?n.placement:r,o=e.strategy,u=void 0===o?n.strategy:o,h=e.boundary,p=void 0===h?W3:h,y=e.rootBoundary,b=void 0===y?SL:y,S=e.elementContext,M=void 0===S?QE:S,U=e.altBoundary,z=void 0!==U&&U,te=e.padding,ne=void 0===te?0:te,Fe=VL("number"!=typeof ne?ne:UL(ne,KE)),Be=n.rects.popper,Ue=n.elements[z?M===QE?Z3:QE:M],at=function RG(n,e,t,r){var i="clippingParents"===e?function xG(n){var e=WE(BT(n)),r=["absolute","fixed"].indexOf(Gd(n).position)>=0&&iu(n)?ZE(n):n;return Nm(r)?e.filter(function(i){return Nm(i)&&PL(i,r)&&"body"!==pc(i)}):[]}(n):[].concat(e),o=[].concat(i,[t]),h=o.reduce(function(p,y){var b=FL(n,y,r);return p.top=km(b.top,p.top),p.right=UT(b.right,p.right),p.bottom=UT(b.bottom,p.bottom),p.left=km(b.left,p.left),p},FL(n,o[0],r));return h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h}(Nm(Ue)?Ue:Ue.contextElement||ap(n.elements.popper),p,b,u),ft=_v(n.elements.reference),ln=NL({reference:ft,element:Be,strategy:"absolute",placement:i}),kn=QN(Object.assign({},Be,ln)),Tr=M===QE?kn:ft,Vi={top:at.top-Tr.top+Fe.top,bottom:Tr.bottom-at.bottom+Fe.bottom,left:at.left-Tr.left+Fe.left,right:Tr.right-at.right+Fe.right},xs=n.modifiersData.offset;if(M===QE&&xs){var pl=xs[i];Object.keys(Vi).forEach(function(Xs){var Zm=[ou,su].indexOf(Xs)>=0?1:-1,Km=[Do,su].indexOf(Xs)>=0?"y":"x";Vi[Xs]+=pl[Km]*Zm})}return Vi}const OG={name:"flip",enabled:!0,phase:"main",fn:function kG(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=void 0===i||i,u=t.altAxis,h=void 0===u||u,p=t.fallbackPlacements,y=t.padding,b=t.boundary,S=t.rootBoundary,M=t.altBoundary,U=t.flipVariations,z=void 0===U||U,te=t.allowedAutoPlacements,ne=e.options.placement,Fe=gc(ne),Be=p||(Fe!==ne&&z?function NG(n){if(gc(n)===KN)return[];var e=$T(n);return[OL(n),e,OL(e)]}(ne):[$T(ne)]),Ue=[ne].concat(Be).reduce(function(Fv,Ip){return Fv.concat(gc(Ip)===KN?function MG(n,e){void 0===e&&(e={});var i=e.boundary,o=e.rootBoundary,u=e.padding,h=e.flipVariations,p=e.allowedAutoPlacements,y=void 0===p?xL:p,b=vv(e.placement),S=b?h?AL:AL.filter(function(z){return vv(z)===b}):KE,M=S.filter(function(z){return y.indexOf(z)>=0});0===M.length&&(M=S);var U=M.reduce(function(z,te){return z[te]=JE(n,{placement:te,boundary:i,rootBoundary:o,padding:u})[gc(te)],z},{});return Object.keys(U).sort(function(z,te){return U[z]-U[te]})}(e,{placement:Ip,boundary:b,rootBoundary:S,padding:y,flipVariations:z,allowedAutoPlacements:te}):Ip)},[]),at=e.rects.reference,ft=e.rects.popper,ln=new Map,kn=!0,Tr=Ue[0],Vi=0;Vi<Ue.length;Vi++){var xs=Ue[Vi],pl=gc(xs),Xs=vv(xs)===yv,Zm=[Do,su].indexOf(pl)>=0,Km=Zm?"width":"height",ca=JE(e,{placement:xs,boundary:b,rootBoundary:S,altBoundary:M,padding:y}),gl=Zm?Xs?ou:To:Xs?su:Do;at[Km]>ft[Km]&&(gl=$T(gl));var HS=$T(gl),Ym=[];if(o&&Ym.push(ca[pl]<=0),h&&Ym.push(ca[gl]<=0,ca[HS]<=0),Ym.every(function(Fv){return Fv})){Tr=xs,kn=!1;break}ln.set(xs,Ym)}if(kn)for(var A1=function(Ip){var Pb=Ue.find(function(qS){var Qm=ln.get(qS);if(Qm)return Qm.slice(0,Ip).every(function(x1){return x1})});if(Pb)return Tr=Pb,"break"},Ob=z?3:1;Ob>0&&"break"!==A1(Ob);Ob--);e.placement!==Tr&&(e.modifiersData[r]._skip=!0,e.placement=Tr,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function XE(n,e,t){return km(n,UT(e,t))}const VG={name:"preventOverflow",enabled:!0,phase:"main",fn:function LG(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=void 0===i||i,u=t.altAxis,h=void 0!==u&&u,M=t.tether,U=void 0===M||M,z=t.tetherOffset,te=void 0===z?0:z,ne=JE(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),Fe=gc(e.placement),qe=vv(e.placement),Be=!qe,Ue=YN(Fe),at=function PG(n){return"x"===n?"y":"x"}(Ue),ft=e.modifiersData.popperOffsets,ln=e.rects.reference,kn=e.rects.popper,Tr="function"==typeof te?te(Object.assign({},e.rects,{placement:e.placement})):te,Vi="number"==typeof Tr?{mainAxis:Tr,altAxis:Tr}:Object.assign({mainAxis:0,altAxis:0},Tr),xs=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,pl={x:0,y:0};if(ft){if(o){var Xs,Zm="y"===Ue?Do:To,Km="y"===Ue?su:ou,ca="y"===Ue?"height":"width",gl=ft[Ue],HS=gl+ne[Zm],Ym=gl-ne[Km],GS=U?-kn[ca]/2:0,A1=qe===yv?ln[ca]:kn[ca],Ob=qe===yv?-kn[ca]:-ln[ca],zS=e.elements.arrow,Fv=U&&zS?ZN(zS):{width:0,height:0},Ip=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Pb=Ip[Zm],qS=Ip[Km],Qm=XE(0,ln[ca],Fv[ca]),x1=Be?ln[ca]/2-GS-Qm-Pb-Vi.mainAxis:A1-Qm-Pb-Vi.mainAxis,n8=Be?-ln[ca]/2+GS+Qm+qS+Vi.mainAxis:Ob+Qm+qS+Vi.mainAxis,R1=e.elements.arrow&&ZE(e.elements.arrow),tB=null!=(Xs=xs?.[Ue])?Xs:0,s8=gl+n8-tB,nB=XE(U?UT(HS,gl+x1-tB-(R1?"y"===Ue?R1.clientTop||0:R1.clientLeft||0:0)):HS,gl,U?km(Ym,s8):Ym);ft[Ue]=nB,pl[Ue]=nB-gl}if(h){var rB,Jm=ft[at],WS="y"===at?"height":"width",iB=Jm+ne["x"===Ue?Do:To],sB=Jm-ne["x"===Ue?su:ou],M1=-1!==[Do,To].indexOf(Fe),oB=null!=(rB=xs?.[at])?rB:0,aB=M1?iB:Jm-ln[WS]-kn[WS]-oB+Vi.altAxis,uB=M1?Jm+ln[WS]+kn[WS]-oB-Vi.altAxis:sB,lB=U&&M1?function FG(n,e,t){var r=XE(n,e,t);return r>t?t:r}(aB,Jm,uB):XE(U?aB:iB,Jm,U?uB:sB);ft[at]=lB,pl[at]=lB-Jm}e.modifiersData[r]=pl}},requiresIfExists:["offset"]};const $G={name:"arrow",enabled:!0,phase:"main",fn:function BG(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,u=t.modifiersData.popperOffsets,h=gc(t.placement),p=YN(h),b=[To,ou].indexOf(h)>=0?"height":"width";if(o&&u){var S=function(e,t){return VL("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:UL(e,KE))}(i.padding,t),M=ZN(o),U="y"===p?Do:To,z="y"===p?su:ou,te=t.rects.reference[b]+t.rects.reference[p]-u[p]-t.rects.popper[b],ne=u[p]-t.rects.reference[p],Fe=ZE(o),qe=Fe?"y"===p?Fe.clientHeight||0:Fe.clientWidth||0:0,ft=qe/2-M[b]/2+(te/2-ne/2),ln=XE(S[U],ft,qe-M[b]-S[z]);t.modifiersData[r]=((e={})[p]=ln,e.centerOffset=ln-ft,e)}},effect:function jG(n){var e=n.state,r=n.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||PL(e.elements.popper,i)&&(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function BL(n,e,t){return void 0===t&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function jL(n){return[Do,ou,su,To].some(function(e){return n[e]>=0})}var GG=[dG,fG,_G,wG,IG,OG,VG,$G,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function HG(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,u=JE(e,{elementContext:"reference"}),h=JE(e,{altBoundary:!0}),p=BL(u,r),y=BL(h,i,o),b=jL(p),S=jL(y);e.modifiersData[t]={referenceClippingOffsets:p,popperEscapeOffsets:y,isReferenceHidden:b,hasPopperEscaped:S},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":b,"data-popper-escaped":S})}}],JN=lG({defaultModifiers:GG}),up=function(){return up=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},up.apply(this,arguments)},HT=function(n,e,t){if(t||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},Om={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,onShow:function(){},onHide:function(){},onToggle:function(){}},$L=function(){function n(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=Om),this._targetEl=e,this._triggerEl=t,this._options=up(up({},Om),r),this._popperInstance=this._createPopperInstance(),this._visible=!1,this._init()}return n.prototype._init=function(){this._triggerEl&&this._setupEventListeners()},n.prototype._setupEventListeners=function(){var e=this,t=this._getTriggerEvents();"click"===this._options.triggerType&&t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,function(){e.toggle()})}),"hover"===this._options.triggerType&&(t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,function(){"click"===r?e.toggle():setTimeout(function(){e.show()},e._options.delay)}),e._targetEl.addEventListener(r,function(){e.show()})}),t.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},e._options.delay)}),e._targetEl.addEventListener(r,function(){setTimeout(function(){e._triggerEl.matches(":hover")||e.hide()},e._options.delay)})}))},n.prototype._createPopperInstance=function(){return JN(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},n.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(t){e._handleClickOutside(t,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(e,t){var r=e.target;r!==t&&!t.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":default:return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]}}},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},n.prototype.isVisible=function(){return this._visible},n.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(e){return up(up({},e),{modifiers:HT(HT([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(e){return up(up({},e),{modifiers:HT(HT([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},n}();function XN(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(n){var e=n.getAttribute("data-dropdown-toggle"),t=document.getElementById(e);if(t){var r=n.getAttribute("data-dropdown-placement"),i=n.getAttribute("data-dropdown-offset-skidding"),o=n.getAttribute("data-dropdown-offset-distance"),u=n.getAttribute("data-dropdown-trigger"),h=n.getAttribute("data-dropdown-delay");new $L(t,n,{placement:r||Om.placement,triggerType:u||Om.triggerType,offsetSkidding:i?parseInt(i):Om.offsetSkidding,offsetDistance:o?parseInt(o):Om.offsetDistance,delay:h?parseInt(h):Om.delay})}else console.error('The dropdown element with id "'.concat(e,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=$L,window.initDropdowns=XN);var GT=function(){return GT=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},GT.apply(this,arguments)},wv={placement:"center",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},ek=function(){function n(e,t){void 0===e&&(e=null),void 0===t&&(t=wv),this._targetEl=e,this._options=GT(GT({},wv),t),this._isHidden=!0,this._backdropEl=null,this._init()}return n.prototype._init=function(){var e=this;this._targetEl&&this._getPlacementClasses().map(function(t){e._targetEl.classList.add(t)})},n.prototype._createBackdrop=function(){var e;if(this._isHidden){var t=document.createElement("div");t.setAttribute("modal-backdrop",""),(e=t.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(t),this._backdropEl=t}},n.prototype._destroyBackdropEl=function(){this._isHidden||document.querySelector("[modal-backdrop]").remove()},n.prototype._setupModalCloseEventListeners=function(){var e=this;"dynamic"===this._options.backdrop&&(this._clickOutsideEventListener=function(t){e._handleOutsideClick(t.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(t){"Escape"===t.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeModalCloseEventListeners=function(){"dynamic"===this._options.backdrop&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._handleOutsideClick=function(e){(e===this._targetEl||e===this._backdropEl&&this.isVisible())&&this.hide()},n.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":default:return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"]}},n.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},n.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,document.body.classList.add("overflow-hidden"),this._options.closable&&this._setupModalCloseEventListeners(),this._options.onShow(this))},n.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},n.prototype.isVisible=function(){return!this._isHidden},n.prototype.isHidden=function(){return this._isHidden},n}(),zT=function(n,e){return e.some(function(t){return t.id===n})?e.find(function(t){return t.id===n}):null};function qT(){var n=[];document.querySelectorAll("[data-modal-target]").forEach(function(e){var t=e.getAttribute("data-modal-target"),r=document.getElementById(t);if(r){var i=r.getAttribute("data-modal-placement"),o=r.getAttribute("data-modal-backdrop");zT(t,n)||n.push({id:t,object:new ek(r,{placement:i||wv.placement,backdrop:o||wv.backdrop})})}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(e){var t=e.getAttribute("data-modal-toggle"),r=document.getElementById(t);if(r){var i=r.getAttribute("data-modal-placement"),o=r.getAttribute("data-modal-backdrop"),u=zT(t,n);u||(u={id:t,object:new ek(r,{placement:i||wv.placement,backdrop:o||wv.backdrop})},n.push(u)),e.addEventListener("click",function(){u.object.toggle()})}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(e){var t=e.getAttribute("data-modal-show");if(document.getElementById(t)){var i=zT(t,n);i?e.addEventListener("click",function(){i.object.isHidden&&i.object.show()}):console.error("Modal with id ".concat(t," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(e){var t=e.getAttribute("data-modal-hide");if(document.getElementById(t)){var i=zT(t,n);i?e.addEventListener("click",function(){i.object.isVisible&&i.object.hide()}):console.error("Modal with id ".concat(t," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(t," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=ek,window.initModals=qT);var WT=function(){return WT=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},WT.apply(this,arguments)},Pm={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},HL=function(){function n(e,t){void 0===e&&(e=null),void 0===t&&(t=Pm),this._targetEl=e,this._options=WT(WT({},Pm),t),this._visible=!1,this._init()}return n.prototype._init=function(){var e=this;this._targetEl&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform")),this._getPlacementClasses(this._options.placement).base.map(function(t){e._targetEl.classList.add(t)}),document.addEventListener("keydown",function(t){"Escape"===t.key&&e.isVisible()&&e.hide()})},n.prototype.hide=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(t){e._targetEl.classList.remove(t)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(t){e._targetEl.classList.add(t)})):(this._getPlacementClasses(this._options.placement).active.map(function(t){e._targetEl.classList.remove(t)}),this._getPlacementClasses(this._options.placement).inactive.map(function(t){e._targetEl.classList.add(t)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},n.prototype.show=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(t){e._targetEl.classList.add(t)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(t){e._targetEl.classList.remove(t)})):(this._getPlacementClasses(this._options.placement).active.map(function(t){e._targetEl.classList.add(t)}),this._getPlacementClasses(this._options.placement).inactive.map(function(t){e._targetEl.classList.remove(t)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},n.prototype._createBackdrop=function(){var e,t=this;if(!this._visible){var r=document.createElement("div");r.setAttribute("drawer-backdrop",""),(e=r.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(r),r.addEventListener("click",function(){t.hide()})}},n.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]").remove()},n.prototype._getPlacementClasses=function(e){switch(e){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]}}},n.prototype.isHidden=function(){return!this._visible},n.prototype.isVisible=function(){return this._visible},n}(),ZT=function(n,e){if(e.some(function(t){return t.id===n}))return e.find(function(t){return t.id===n})};function tk(){var n=[];document.querySelectorAll("[data-drawer-target]").forEach(function(e){var t=e.getAttribute("data-drawer-target"),r=document.getElementById(t);if(r){var i=e.getAttribute("data-drawer-placement"),o=e.getAttribute("data-drawer-body-scrolling"),u=e.getAttribute("data-drawer-backdrop"),h=e.getAttribute("data-drawer-edge"),p=e.getAttribute("data-drawer-edge-offset");ZT(t,n)||n.push({id:t,object:new HL(r,{placement:i||Pm.placement,bodyScrolling:o?"true"===o:Pm.bodyScrolling,backdrop:u?"true"===u:Pm.backdrop,edge:h?"true"===h:Pm.edge,edgeOffset:p||Pm.edgeOffset})})}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(e){var t=e.getAttribute("data-drawer-toggle");if(document.getElementById(t)){var i=ZT(t,n);i?e.addEventListener("click",function(){i.object.toggle()}):console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(e){var t=e.getAttribute("data-drawer-dismiss")?e.getAttribute("data-drawer-dismiss"):e.getAttribute("data-drawer-hide");if(document.getElementById(t)){var i=ZT(t,n);i?e.addEventListener("click",function(){i.object.hide()}):console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(e){var t=e.getAttribute("data-drawer-show");if(document.getElementById(t)){var i=ZT(t,n);i?e.addEventListener("click",function(){i.object.show()}):console.error("Drawer with id ".concat(t," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(t," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=HL,window.initDrawers=tk);var KT=function(){return KT=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},KT.apply(this,arguments)},GL={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},zL=function(){function n(e,t){void 0===e&&(e=[]),void 0===t&&(t=GL),this._items=e,this._activeTab=t?this.getTab(t.defaultTabId):null,this._options=KT(KT({},GL),t),this._init()}return n.prototype._init=function(){var e=this;this._items.length&&(this._activeTab||this._setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(t){t.triggerEl.addEventListener("click",function(){e.show(t.id)})}))},n.prototype.getActiveTab=function(){return this._activeTab},n.prototype._setActiveTab=function(e){this._activeTab=e},n.prototype.getTab=function(e){return this._items.filter(function(t){return t.id===e})[0]},n.prototype.show=function(e,t){var r,i,o=this;void 0===t&&(t=!1);var u=this.getTab(e);u===this._activeTab&&!t||(this._items.map(function(h){var p,y;h!==u&&((p=h.triggerEl.classList).remove.apply(p,o._options.activeClasses.split(" ")),(y=h.triggerEl.classList).add.apply(y,o._options.inactiveClasses.split(" ")),h.targetEl.classList.add("hidden"),h.triggerEl.setAttribute("aria-selected","false"))}),(r=u.triggerEl.classList).add.apply(r,this._options.activeClasses.split(" ")),(i=u.triggerEl.classList).remove.apply(i,this._options.inactiveClasses.split(" ")),u.triggerEl.setAttribute("aria-selected","true"),u.targetEl.classList.remove("hidden"),this._setActiveTab(u),this._options.onShow(this,u))},n}();function nk(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(n){var e=[],t=null;n.querySelectorAll('[role="tab"]').forEach(function(r){var i="true"===r.getAttribute("aria-selected"),o={id:r.getAttribute("data-tabs-target"),triggerEl:r,targetEl:document.querySelector(r.getAttribute("data-tabs-target"))};e.push(o),i&&(t=o.id)}),new zL(e,{defaultTabId:t})})}typeof window<"u"&&(window.Tabs=zL,window.initTabs=nk);var lp=function(){return lp=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},lp.apply(this,arguments)},YT=function(n,e,t){if(t||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},QT={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},qL=function(){function n(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=QT),this._targetEl=e,this._triggerEl=t,this._options=lp(lp({},QT),r),this._popperInstance=this._createPopperInstance(),this._visible=!1,this._init()}return n.prototype._init=function(){this._triggerEl&&this._setupEventListeners()},n.prototype._setupEventListeners=function(){var e=this,t=this._getTriggerEvents();t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,function(){e.show()})}),t.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,function(){e.hide()})})},n.prototype._createPopperInstance=function(){return JN(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},n.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(t){"Escape"===t.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(t){e._handleClickOutside(t,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(e,t){var r=e.target;r!==t&&!t.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},n.prototype.isVisible=function(){return this._visible},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},n.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return lp(lp({},e),{modifiers:YT(YT([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return lp(lp({},e),{modifiers:YT(YT([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},n}();function rk(){document.querySelectorAll("[data-tooltip-target]").forEach(function(n){var e=n.getAttribute("data-tooltip-target"),t=document.getElementById(e);if(t){var r=n.getAttribute("data-tooltip-trigger"),i=n.getAttribute("data-tooltip-placement");new qL(t,n,{placement:i||QT.placement,triggerType:r||QT.triggerType})}else console.error('The tooltip element with id "'.concat(e,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=qL,window.initTooltips=rk);var cp=function(){return cp=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},cp.apply(this,arguments)},JT=function(n,e,t){if(t||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))},eb={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},WL=function(){function n(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=eb),this._targetEl=e,this._triggerEl=t,this._options=cp(cp({},eb),r),this._popperInstance=this._createPopperInstance(),this._visible=!1,this._init()}return n.prototype._init=function(){this._triggerEl&&this._setupEventListeners()},n.prototype._setupEventListeners=function(){var e=this,t=this._getTriggerEvents();t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,function(){e.show()}),e._targetEl.addEventListener(r,function(){e.show()})}),t.hideEvents.forEach(function(r){e._triggerEl.addEventListener(r,function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},100)}),e._targetEl.addEventListener(r,function(){setTimeout(function(){e._triggerEl.matches(":hover")||e.hide()},100)})})},n.prototype._createPopperInstance=function(){return JN(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},n.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},n.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(t){"Escape"===t.key&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},n.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},n.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(t){e._handleClickOutside(t,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},n.prototype._handleClickOutside=function(e,t){var r=e.target;r!==t&&!t.contains(r)&&!this._triggerEl.contains(r)&&this.isVisible()&&this.hide()},n.prototype.isVisible=function(){return this._visible},n.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},n.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return cp(cp({},e),{modifiers:JT(JT([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},n.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return cp(cp({},e),{modifiers:JT(JT([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},n}();function ik(){document.querySelectorAll("[data-popover-target]").forEach(function(n){var e=n.getAttribute("data-popover-target"),t=document.getElementById(e);if(t){var r=n.getAttribute("data-popover-trigger"),i=n.getAttribute("data-popover-placement"),o=n.getAttribute("data-popover-offset");new WL(t,n,{placement:i||eb.placement,offset:o?parseInt(o):eb.offset,triggerType:r||eb.triggerType})}else console.error('The popover element with id "'.concat(e,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=WL,window.initPopovers=ik);var XT=function(){return XT=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},XT.apply(this,arguments)},sk={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},ZL=function(){function n(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=sk),this._parentEl=e,this._triggerEl=t,this._targetEl=r,this._options=XT(XT({},sk),i),this._visible=!1,this._init()}return n.prototype._init=function(){var e=this;if(this._triggerEl){var t=this._getTriggerEventTypes(this._options.triggerType);t.showEvents.forEach(function(r){e._triggerEl.addEventListener(r,function(){e.show()}),e._targetEl.addEventListener(r,function(){e.show()})}),t.hideEvents.forEach(function(r){e._parentEl.addEventListener(r,function(){e._parentEl.matches(":hover")||e.hide()})})}},n.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},n.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},n.prototype.toggle=function(){this._visible?this.hide():this.show()},n.prototype.isHidden=function(){return!this._visible},n.prototype.isVisible=function(){return this._visible},n.prototype._getTriggerEventTypes=function(e){switch(e){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]}}},n}();function ok(){document.querySelectorAll("[data-dial-init]").forEach(function(n){var e=n.querySelector("[data-dial-toggle]");if(e){var t=e.getAttribute("data-dial-toggle"),r=document.getElementById(t);if(r){var i=e.getAttribute("data-dial-trigger");new ZL(n,e,r,{triggerType:i||sk.triggerType})}else console.error("Dial with id ".concat(t," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(n.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=ZL,window.initDials=ok),typeof window<"u"&&(window.initFlowbite=function zG(){UN(),BN(),jN(),$N(),XN(),qT(),tk(),nk(),rk(),ik(),ok()}),new B3("load",[UN,BN,jN,$N,XN,qT,tk,nk,rk,ik,ok]).init();const WG=["nsmContent"],ZG=["nsmDialog"],KG=["nsmOverlay"],YG=["dynamicContent"];function QG(n,e){}function JG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",10),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.close())}),d.O4$(),d.TgZ(1,"svg",11)(2,"g"),d._UZ(3,"path",12),d.qZA(),d.TgZ(4,"g"),d._UZ(5,"path",13),d.qZA()()()}}const XG=function(n,e){return{transparent:n,overlay:!0,"nsm-overlay-open":e}},e4=function(n,e){return["nsm-dialog",n,e]};function t4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1,2),d.NdJ("mousedown",function(i){d.CHM(t);const o=d.oxw();return d.KtG(o.dismiss(i))}),d.TgZ(2,"div",3,4)(4,"div",5,6)(6,"div",7),d.YNc(7,QG,0,0,"ng-template",null,8,d.W1O),d.Hsn(9),d.qZA(),d.YNc(10,JG,6,0,"button",9),d.qZA()()()}if(2&n){const t=d.oxw();d.Udp("z-index",t.visible?t.layerPosition-1:-1),d.Q6J("ngClass",d.WLB(11,XG,!t.backdrop,t.openedClass)),d.xp6(2),d.Udp("z-index",t.visible?t.layerPosition:-1),d.Q6J("ngClass",d.WLB(14,e4,t.customClass,t.openedClass?"nsm-dialog-open":"nsm-dialog-close")),d.uIk("aria-hidden",!t.openedClass)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-describedby",t.ariaDescribedBy),d.xp6(8),d.Q6J("ngIf",t.closable)}}const n4=["*"];let KL=(()=>{class n{constructor(t,r,i,o,u){this._renderer=t,this._changeDetectorRef=r,this.componentFactoryResolver=i,this._document=o,this._platformId=u,this.closable=!0,this.escapable=!0,this.dismissable=!0,this.identifier="",this.customClass="nsm-dialog-animation-fade",this.visible=!1,this.backdrop=!0,this.force=!0,this.hideDelay=500,this.autostart=!1,this.target="",this.ariaLabel=null,this.ariaLabelledBy=null,this.ariaDescribedBy=null,this.refocus=!0,this.visibleChange=new d.vpe,this.onClose=new d.vpe,this.onCloseFinished=new d.vpe,this.onDismiss=new d.vpe,this.onDismissFinished=new d.vpe,this.onAnyCloseEvent=new d.vpe,this.onAnyCloseEventFinished=new d.vpe,this.onOpen=new d.vpe,this.onOpenFinished=new d.vpe,this.onEscape=new d.vpe,this.onDataAdded=new d.vpe,this.onDataRemoved=new d.vpe,this.layerPosition=1041,this.overlayVisible=!1,this.openedClass=!1,this.createFrom="html"}ngOnInit(){if(!this.identifier||!this.identifier.length)throw new Error("identifier field isn\u2019t set. Please set one before calling <ngx-smart-modal> in a template.");this._sendEvent("create")}ngAfterViewInit(){if(this.contentComponent){const t=this.componentFactoryResolver.resolveComponentFactory(this.contentComponent);this.createDynamicContent(this.dynamicContentContainer,t),this.dynamicContentContainer.changes.subscribe(r=>{this.createDynamicContent(r,t)})}}ngOnDestroy(){this._sendEvent("delete")}open(t){return this._sendEvent("open",{top:t}),this}close(){return this._sendEvent("close"),this}dismiss(t){return this.dismissable&&t.target.classList.contains("overlay")?(this._sendEvent("dismiss"),this):this}toggle(t){return this._sendEvent("toggle",{top:t}),this}addCustomClass(t){return this.customClass.length?this.customClass+=" "+t:this.customClass=t,this}removeCustomClass(t){return this.customClass=t?this.customClass.replace(t,"").trim():"",this}isVisible(){return this.visible}hasData(){return void 0!==this._data}setData(t,r){return(!this.hasData()||this.hasData()&&r)&&(this._data=t,this.onDataAdded.emit(this._data),this.markForCheck()),this}getData(){return this._data}removeData(){return this._data=void 0,this.onDataRemoved.emit(!0),this.markForCheck(),this}addBodyClass(){return this._renderer.addClass(this._document.body,"dialog-open"),this}removeBodyClass(){return this._renderer.removeClass(this._document.body,"dialog-open"),this}markForCheck(){try{this._changeDetectorRef.detectChanges()}catch{}this._changeDetectorRef.markForCheck()}targetPlacement(){if(!(this.isBrowser&&this.nsmDialog.length&&this.nsmContent.length&&this.nsmOverlay.length&&this.target))return!1;const t=this._document.querySelector(this.target);if(!t)return!1;const r=t.getBoundingClientRect(),i=this.nsmOverlay.first.nativeElement.getBoundingClientRect(),o=this.nsmContent.first.nativeElement.getBoundingClientRect(),u=this.nsmDialog.first.nativeElement.getBoundingClientRect(),h=parseInt(getComputedStyle(this.nsmContent.first.nativeElement).marginLeft,10),p=parseInt(getComputedStyle(this.nsmContent.first.nativeElement).marginTop,10);let y=r.top-u.top-(o.height-r.height)/2,b=r.left-u.left-(o.width-r.width)/2;b+u.left+o.width+2*h>i.width?b=i.width-(u.left+o.width)-2*h:b+u.left<0&&(b=-u.left),y+u.top+o.height+p>i.height&&(y=i.height-(u.top+o.height)-p),this._renderer.setStyle(this.nsmContent.first.nativeElement,"top",(y<0?0:y)+"px"),this._renderer.setStyle(this.nsmContent.first.nativeElement,"left",b+"px")}_sendEvent(t,r){if(!this.isBrowser)return!1;const o=new CustomEvent("ngx-smart-modal."+t,{detail:{extraData:r,instance:{id:this.identifier,modal:this}}});return window.dispatchEvent(o)}get isBrowser(){return ks(this._platformId)}createDynamicContent(t,r){t.forEach(i=>{i.clear(),i.createComponent(r),this.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(d._Vd),d.Y36(ce),d.Y36(d.Lbi))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngx-smart-modal"]],viewQuery:function(t,r){if(1&t&&(d.Gf(WG,5),d.Gf(ZG,5),d.Gf(KG,5),d.Gf(YG,5,d.s_b)),2&t){let i;d.iGM(i=d.CRH())&&(r.nsmContent=i),d.iGM(i=d.CRH())&&(r.nsmDialog=i),d.iGM(i=d.CRH())&&(r.nsmOverlay=i),d.iGM(i=d.CRH())&&(r.dynamicContentContainer=i)}},hostBindings:function(t,r){1&t&&d.NdJ("resize",function(){return r.targetPlacement()},!1,d.Jf7)},inputs:{closable:"closable",escapable:"escapable",dismissable:"dismissable",identifier:"identifier",customClass:"customClass",visible:"visible",backdrop:"backdrop",force:"force",hideDelay:"hideDelay",autostart:"autostart",target:"target",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",refocus:"refocus"},outputs:{visibleChange:"visibleChange",onClose:"onClose",onCloseFinished:"onCloseFinished",onDismiss:"onDismiss",onDismissFinished:"onDismissFinished",onAnyCloseEvent:"onAnyCloseEvent",onAnyCloseEventFinished:"onAnyCloseEventFinished",onOpen:"onOpen",onOpenFinished:"onOpenFinished",onEscape:"onEscape",onDataAdded:"onDataAdded",onDataRemoved:"onDataRemoved"},ngContentSelectors:n4,decls:1,vars:1,consts:[[3,"z-index","ngClass","mousedown",4,"ngIf"],[3,"ngClass","mousedown"],["nsmOverlay",""],[3,"ngClass"],["nsmDialog",""],[1,"nsm-content"],["nsmContent",""],[1,"nsm-body"],["dynamicContent",""],["type","button","aria-label","Close","class","nsm-dialog-btn-close",3,"click",4,"ngIf"],["type","button","aria-label","Close",1,"nsm-dialog-btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","version","1.1","id","Layer_1","x","0px","y","0px","viewBox","0 0 512 512",0,"xml","space","preserve","width","16px","height","16px"],["d","M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249    C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306    C514.019,27.23,514.019,14.135,505.943,6.058z","fill","currentColor"],["d","M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636    c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z","fill","currentColor"]],template:function(t,r){1&t&&(d.F$t(),d.YNc(0,t4,11,17,"div",0)),2&t&&d.Q6J("ngIf",r.overlayVisible)},dependencies:[Wt,Mi],encapsulation:2}),n})(),ak=(()=>{class n{constructor(){this._modalStack=[]}addModal(t,r){if(r){const i=this._modalStack.findIndex(o=>o.id===t.id);i>-1?this._modalStack[i].modal=t.modal:this._modalStack.push(t)}else this._modalStack.push(t)}getModal(t){const r=this._modalStack.find(i=>i.id===t);if(void 0!==r)return r.modal;throw new Error(`Cannot find modal with identifier ${t}`)}getModalStack(){return this._modalStack}getOpenedModals(){return this._modalStack.filter(t=>t.modal.visible)}getTopOpenedModal(){if(!this.getOpenedModals().length)throw new Error("No modal is opened");return this.getOpenedModals().map(t=>t.modal).reduce((t,r)=>r.layerPosition>t.layerPosition?r:t,this.getOpenedModals()[0].modal)}getHigherIndex(){return Math.max(...this._modalStack.map(t=>t.modal.layerPosition),1041)+1}getModalStackCount(){return this._modalStack.length}removeModal(t){const r=this._modalStack.findIndex(i=>i.id===t);r>-1&&this._modalStack.splice(r,1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),eS=(()=>{class n{constructor(t,r,i,o,u,h,p){this._componentFactoryResolver=t,this._appRef=r,this._injector=i,this._modalStack=o,this.applicationRef=u,this._document=h,this._platformId=p,this._escapeKeyboardEvent=y=>{if("Escape"===y.key)try{const b=this.getTopOpenedModal();return!!b.escapable&&(b.onEscape.emit(b),this.closeLatestModal(),!0)}catch{return!1}return!1},this._trapFocusModal=y=>{if("Tab"===y.key)try{const b=this.getTopOpenedModal();return b.nsmDialog.first.nativeElement.contains(document.activeElement)||(y.preventDefault(),y.stopPropagation(),b.nsmDialog.first.nativeElement.focus()),!0}catch{return!1}return!1},this._addEvents()}addModal(t,r){this._modalStack.addModal(t,r)}getModal(t){return this._modalStack.getModal(t)}get(t){return this.getModal(t)}open(t,r=!1){return this._openModal(this.get(t),r)}close(t){return this._closeModal(this.get(t))}closeAll(){this.getOpenedModals().forEach(t=>{this._closeModal(t.modal)})}toggle(t,r=!1){return this._toggleModal(this.get(t),r)}getModalStack(){return this._modalStack.getModalStack()}getOpenedModals(){return this._modalStack.getOpenedModals()}getTopOpenedModal(){return this._modalStack.getTopOpenedModal()}getHigherIndex(){return this._modalStack.getHigherIndex()}getModalStackCount(){return this._modalStack.getModalStackCount()}removeModal(t){this._modalStack.removeModal(t)}setModalData(t,r,i){let o;return!!(o=this.get(r))&&(o.setData(t,i),!0)}getModalData(t){let r;return(r=this.get(t))?r.getData():null}resetModalData(t){if(this._modalStack.getModalStack().find(r=>r.id===t)){const r=this.getModal(t).getData();return this.getModal(t).removeData(),r}return!1}closeLatestModal(){this.getTopOpenedModal().close()}create(t,r,i={}){try{return this.getModal(t)}catch{const u=this._componentFactoryResolver.resolveComponentFactory(KL),h=this._resolveNgContent(r),p=u.create(this._injector,h);return r instanceof d.DyG&&(p.instance.contentComponent=r),p.instance.identifier=t,p.instance.createFrom="service","boolean"==typeof i.closable&&(p.instance.closable=i.closable),"boolean"==typeof i.escapable&&(p.instance.escapable=i.escapable),"boolean"==typeof i.dismissable&&(p.instance.dismissable=i.dismissable),"string"==typeof i.customClass&&(p.instance.customClass=i.customClass),"boolean"==typeof i.backdrop&&(p.instance.backdrop=i.backdrop),"boolean"==typeof i.force&&(p.instance.force=i.force),"number"==typeof i.hideDelay&&(p.instance.hideDelay=i.hideDelay),"boolean"==typeof i.autostart&&(p.instance.autostart=i.autostart),"string"==typeof i.target&&(p.instance.target=i.target),"string"==typeof i.ariaLabel&&(p.instance.ariaLabel=i.ariaLabel),"string"==typeof i.ariaLabelledBy&&(p.instance.ariaLabelledBy=i.ariaLabelledBy),"string"==typeof i.ariaDescribedBy&&(p.instance.ariaDescribedBy=i.ariaDescribedBy),"boolean"==typeof i.refocus&&(p.instance.refocus=i.refocus),this._appRef.attachView(p.hostView),this._document.body.appendChild(p.hostView.rootNodes[0]),p.instance}}_addEvents(){return!!this.isBrowser&&(window.addEventListener("ngx-smart-modal.create",t=>{this._initModal(t.detail.instance)}),window.addEventListener("ngx-smart-modal.delete",t=>{this._deleteModal(t.detail.instance)}),window.addEventListener("ngx-smart-modal.open",t=>{this._openModal(t.detail.instance.modal,t.detail.top)}),window.addEventListener("ngx-smart-modal.toggle",t=>{this._toggleModal(t.detail.instance.modal,t.detail.top)}),window.addEventListener("ngx-smart-modal.close",t=>{this._closeModal(t.detail.instance.modal)}),window.addEventListener("ngx-smart-modal.dismiss",t=>{this._dismissModal(t.detail.instance.modal)}),window.addEventListener("keyup",this._escapeKeyboardEvent),!0)}_initModal(t){t.modal.layerPosition+=this.getModalStackCount(),this.addModal(t,t.modal.force),t.modal.autostart&&this.open(t.id)}_openModal(t,r){return!t.visible&&(this.lastElementFocused=document.activeElement,t.escapable&&window.addEventListener("keyup",this._escapeKeyboardEvent),t.backdrop&&window.addEventListener("keydown",this._trapFocusModal),r&&(t.layerPosition=this.getHigherIndex()),t.addBodyClass(),t.overlayVisible=!0,t.visible=!0,t.onOpen.emit(t),t.markForCheck(),setTimeout(()=>{t.openedClass=!0,t.target&&t.targetPlacement(),t.nsmDialog.first.nativeElement.setAttribute("role","dialog"),t.nsmDialog.first.nativeElement.setAttribute("tabIndex","-1"),t.nsmDialog.first.nativeElement.setAttribute("aria-modal","true"),t.nsmDialog.first.nativeElement.focus(),t.markForCheck(),t.onOpenFinished.emit(t)}),!0)}_toggleModal(t,r){return t.visible?this._closeModal(t):this._openModal(t,r)}_closeModal(t){return!!t.openedClass&&(t.openedClass=!1,t.onClose.emit(t),t.onAnyCloseEvent.emit(t),this.getOpenedModals().length<2&&(t.removeBodyClass(),window.removeEventListener("keyup",this._escapeKeyboardEvent),window.removeEventListener("keydown",this._trapFocusModal)),setTimeout(()=>{t.visibleChange.emit(t.visible),t.visible=!1,t.overlayVisible=!1,t.nsmDialog.first.nativeElement.removeAttribute("tabIndex"),t.markForCheck(),t.onCloseFinished.emit(t),t.onAnyCloseEventFinished.emit(t),t.refocus&&this.lastElementFocused.focus()},t.hideDelay),!0)}_dismissModal(t){return!!t.openedClass&&(t.openedClass=!1,t.onDismiss.emit(t),t.onAnyCloseEvent.emit(t),this.getOpenedModals().length<2&&t.removeBodyClass(),setTimeout(()=>{t.visible=!1,t.visibleChange.emit(t.visible),t.overlayVisible=!1,t.markForCheck(),t.onDismissFinished.emit(t),t.onAnyCloseEventFinished.emit(t)},t.hideDelay),!0)}_deleteModal(t){this.removeModal(t.id),this.getModalStack().length||t.modal.removeBodyClass()}_resolveNgContent(t){if("string"==typeof t)return[[this._document.createTextNode(t)]];if(t instanceof d.Rgc){const r=t.createEmbeddedView(null);return this.applicationRef.attachView(r),[r.rootNodes]}return[]}get isBrowser(){return ks(this._platformId)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d._Vd),d.LFG(d.z2F),d.LFG(d.zs3),d.LFG(ak),d.LFG(d.z2F),d.LFG(ce),d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),r4=(()=>{class n{constructor(t){this.serivce=t}static forRoot(){return{ngModule:n,providers:[eS,ak]}}static forChild(){return{ngModule:n,providers:[eS,ak]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(eS))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Oo]}),n})();function i4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",19)(2,"span",20),d._uU(3,"Enter room name!!"),d.qZA(),d._uU(4," How exactly are you supposed to remember which room is that? "),d.qZA()())}function s4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",19)(2,"span",20),d._uU(3,"Name too short!!"),d.qZA(),d._uU(4," Don't be so cryptic now? "),d.qZA()())}function o4(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,i4,5,0,"div",13),d.YNc(2,s4,5,0,"div",13),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.roomName.errors?null:t.roomName.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.roomName.errors?null:t.roomName.errors.minlength)}}function a4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",19)(2,"span",20),d._uU(3,"Enter room description!!"),d.qZA(),d._uU(4," Trust me you'll thank me later "),d.qZA()())}function u4(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,a4,5,0,"div",13),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.roomDescription.errors?null:t.roomDescription.errors.required)}}function l4(n,e){1&n&&(d.TgZ(0,"button",21),d._uU(1,"Save"),d.qZA())}function c4(n,e){1&n&&(d.TgZ(0,"button",22),d._uU(1,"Save"),d.qZA())}let d4=(()=>{class n{constructor(t,r){this.fireSet=t,this.ngxM=r,this.room={containers:[],id:"",roomDescription:"",roomName:"",roomPhotoUrl:""}}ngOnInit(){qT(),this.roomForm=new dv({roomName:new fc("",[ru.required,ru.minLength(3)]),roomDescription:new fc("",[ru.required])})}onSubmit(){this.roomForm.valid&&(this.fireSet.updateUserRooms([{id:"",roomName:this.roomForm.value.roomName,roomDescription:this.roomForm.value.roomDescription,roomPhotoUrl:"",containers:[]}]),this.roomForm.reset())}get roomName(){return this.roomForm.get("roomName")}get roomDescription(){return this.roomForm.get("roomDescription")}openModal(){return this.ngxM.getModal("newRoomModal").open()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gv),d.Y36(eS))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-rooms-header"]],inputs:{room:"room"},decls:28,vars:5,consts:[[1,"flex","flex-col","items-center","justify-center"],[1,"text-[#817061]","mt-10","text-center","text-3xl","font-bold"],[1,"w-20","h-1","mx-auto","my-2","bg-[#817061]","border-0","rounded"],["type","button",1,"w-fit","bg-[#817061]","text-[#CFB9A5]","hover:bg-[#5e5247]","focus:ring-0","focus:outline-none","focus:ring-blue-300","font-bold","rounded-3xl","text-sm","px-5","text-center","h-10",3,"click"],["identifier","newRoomModal"],["newRoomModal",""],[1,"text-xl","font-medium","text-black"],[3,"formGroup","ngSubmit"],["formDir","ngForm"],[1,"mx-5","my-2"],[1,"mb-6"],["for","roomName",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","roomName","formControlName","roomName","required","",1,"mb-2","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5"],[4,"ngIf"],["for","roomDescription",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","roomDescription","formControlName","roomDescription","required","",1,"mb-2","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5"],["role","alert",1,"p-4","mb-4","text-sm","text-blue-800","rounded-lg","bg-blue-50","border"],["type","submit","class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-4 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",4,"ngIf"],["type","button","class","text-white bg-blue-400 dark:bg-blue-500 cursor-not-allowed font-medium rounded-lg text-sm px-5 py-2.5 text-center mb-4","disabled","",4,"ngIf"],["role","alert",1,"p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","border"],[1,"font-medium"],["type","submit",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","mr-2","mb-4","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800"],["type","button","disabled","",1,"text-white","bg-blue-400","dark:bg-blue-500","cursor-not-allowed","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","mb-4"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h1",1),d._uU(2,"Your Rooms"),d.qZA(),d._UZ(3,"hr",2),d.TgZ(4,"button",3),d.NdJ("click",function(){return r.openModal()}),d._uU(5,"+"),d.qZA()(),d.TgZ(6,"ngx-smart-modal",4,5)(8,"div")(9,"h3",6),d._uU(10," New Room "),d.qZA()(),d.TgZ(11,"form",7,8),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(13,"div",9)(14,"div",10)(15,"label",11),d._uU(16,"Room name: "),d.qZA(),d._UZ(17,"input",12),d.YNc(18,o4,3,2,"div",13),d.qZA(),d.TgZ(19,"div",10)(20,"label",14),d._uU(21,"Room description: "),d.qZA(),d._UZ(22,"input",15),d.YNc(23,u4,2,1,"div",13),d.qZA(),d.TgZ(24,"div",16),d._uU(25," Enter room name and its description and I'll take care of the rest "),d.qZA(),d.YNc(26,l4,2,0,"button",17),d.YNc(27,c4,2,0,"button",18),d.qZA()()()),2&t&&(d.xp6(11),d.Q6J("formGroup",r.roomForm),d.xp6(7),d.Q6J("ngIf",r.roomName.invalid&&(r.roomName.dirty||r.roomName.touched)),d.xp6(5),d.Q6J("ngIf",r.roomDescription.invalid&&(r.roomDescription.dirty||r.roomDescription.touched)),d.xp6(3),d.Q6J("ngIf",!r.roomForm.invalid),d.xp6(1),d.Q6J("ngIf",r.roomForm.invalid))},dependencies:[Mi,KL,xm,lv,DT,Sm,pv,fv,qE]}),n})();var Ts=(()=>(function(n){n.BOX="BOX",n.BAG="BAG",n.WARDROBE="WARDROBE",n.DRESSER="DRESSER",n.CUPBOARD="CUPBOARD",n.SHELF="SHELF",n.BASKET="BASKET",n.OTHER="OTHER"}(Ts||(Ts={})),Ts))(),oa=(()=>(function(n){n.ROOM_VIEW="ROOM_VIEW",n.CONTAINER_VIEW="CONTAINER_VIEW",n.CONTAINER_ADD="CONTAINER_ADD",n.ITEM_ADD="ITEM_ADD",n.ITEM_VIEW="ITEM_VIEW",n.ITEM_SPECIFIC_VIEW="ITEM_SPECIFIC_VIEW"}(oa||(oa={})),oa))();let h4=(()=>{class n{constructor(){this.showModal=!1,this.container={id:"",containerType:Ts.OTHER,containerName:"",containerDescription:"",containerPhotoUrl:""},this.containerId=new d.vpe}openContainerInView(){this.containerId.emit(this.container)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-container-box"]],inputs:{container:"container"},outputs:{containerId:"containerId"},decls:4,vars:1,consts:[[1,"bg-[#817061]","rounded-2xl","drop-shadow-2xl","hover:bg-[#5A4B3F]","hover:drop-shadow-xl","focus:drop-shadow-lg","focus:bg-blue-950",3,"click"],[1,"flex","items-center","justify-center","h-20"],[1,"text-xl","text-[#BFAA97]","font-bold","mx-2","text-center"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.NdJ("click",function(){return r.openContainerInView()}),d.TgZ(1,"div",1)(2,"h2",2),d._uU(3),d.qZA()()()),2&t&&(d.xp6(3),d.Oqu(r.container.containerName))}}),n})();function f4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",17)(2,"span",18),d._uU(3,"Enter container name!!"),d.qZA(),d._uU(4," How exactly are you supposed to know which furniture is that? "),d.qZA()())}function p4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",17)(2,"span",18),d._uU(3,"Name too short!!"),d.qZA(),d._uU(4," Don't be so cryptic now? "),d.qZA()())}function g4(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,f4,5,0,"div",5),d.YNc(2,p4,5,0,"div",5),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.containerName.errors?null:t.containerName.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.containerName.errors?null:t.containerName.errors.minlength)}}function m4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",17)(2,"span",18),d._uU(3,"Enter room description!!"),d.qZA(),d._uU(4," Trust me you'll thank me later "),d.qZA()())}function _4(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,m4,5,0,"div",5),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.containerDescription.errors?null:t.containerDescription.errors.required)}}function y4(n,e){if(1&n&&(d.TgZ(0,"option",19),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("value",t),d.xp6(1),d.Oqu(t)}}function v4(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1,"Power is required."),d.qZA())}function w4(n,e){if(1&n&&(d.TgZ(0,"div",20),d.YNc(1,v4,2,0,"div",5),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.containerType.errors?null:t.containerType.errors.required)}}function E4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",21),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onSubmit())}),d._uU(1,"Save"),d.qZA()}}function b4(n,e){1&n&&(d.TgZ(0,"button",22),d._uU(1,"Save"),d.qZA())}let I4=(()=>{class n{constructor(t){this.fireSet=t,this.roomId="",this.containerTypes=[Ts.BOX,Ts.BAG,Ts.WARDROBE,Ts.DRESSER,Ts.CUPBOARD,Ts.SHELF,Ts.BASKET,Ts.OTHER]}ngOnInit(){this.containerForm=new dv({containerName:new fc("",[ru.required,ru.minLength(3)]),containerDescription:new fc("",[ru.required]),containerType:new fc("",[ru.required])})}onSubmit(){this.containerForm.valid&&(this.fireSet.updateUserContainer(this.roomId,[{id:"",containerName:this.containerForm.value.containerName,containerDescription:this.containerForm.value.containerDescription,containerPhotoUrl:"",containerType:this.containerForm.value.containerType}]),this.containerForm.reset())}get containerName(){return this.containerForm.get("containerName")}get containerDescription(){return this.containerForm.get("containerDescription")}get containerType(){return this.containerForm.get("containerType")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gv))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-new-container"]],inputs:{roomId:"roomId"},decls:23,vars:7,consts:[[3,"formGroup","ngSubmit"],["formDir","ngForm"],[1,""],["for","containerName",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","containerName","formControlName","containerName","required","",1,"mb-2","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5"],[4,"ngIf"],[1,"mb-6"],["for","containerDescription",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","containerDescription","formControlName","containerDescription","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5"],[1,"form-group"],["for","containerType",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["id","containerType","formControlName","containerType","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5"],[3,"value",4,"ngFor","ngForOf"],["class","alert alert-danger",4,"ngIf"],["role","alert",1,"p-4","my-2","text-sm","text-blue-800","rounded-lg","bg-blue-50","border"],["type","submit","class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-4 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",3,"click",4,"ngIf"],["type","button","class","text-white bg-blue-400 dark:bg-blue-500 cursor-not-allowed font-medium rounded-lg text-sm px-5 py-2.5 text-center mb-4","disabled","",4,"ngIf"],["role","alert",1,"p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","border"],[1,"font-medium"],[3,"value"],[1,"alert","alert-danger"],["type","submit",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","mr-2","mb-4","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click"],["type","button","disabled","",1,"text-white","bg-blue-400","dark:bg-blue-500","cursor-not-allowed","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","mb-4"]],template:function(t,r){1&t&&(d.TgZ(0,"form",0,1),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(2,"div",2)(3,"div")(4,"label",3),d._uU(5,"Container name: "),d.qZA(),d._UZ(6,"input",4),d.YNc(7,g4,3,2,"div",5),d.qZA(),d.TgZ(8,"div",6)(9,"label",7),d._uU(10,"Container description: "),d.qZA(),d._UZ(11,"textarea",8),d.YNc(12,_4,2,1,"div",5),d.qZA(),d.TgZ(13,"div",9)(14,"label",10),d._uU(15,"Type of furniture"),d.qZA(),d.TgZ(16,"select",11),d.YNc(17,y4,2,2,"option",12),d.qZA(),d.YNc(18,w4,2,1,"div",13),d.qZA(),d.TgZ(19,"div",14),d._uU(20," Enter room name and its description and I'll take care of the rest "),d.qZA(),d.YNc(21,E4,2,0,"button",15),d.YNc(22,b4,2,0,"button",16),d.qZA()()),2&t&&(d.Q6J("formGroup",r.containerForm),d.xp6(7),d.Q6J("ngIf",r.containerName.invalid&&(r.containerName.dirty||r.containerName.touched)),d.xp6(5),d.Q6J("ngIf",r.containerDescription.invalid&&(r.containerDescription.dirty||r.containerDescription.touched)),d.xp6(5),d.Q6J("ngForOf",r.containerTypes),d.xp6(1),d.Q6J("ngIf",r.containerType.invalid&&r.containerType.touched),d.xp6(3),d.Q6J("ngIf",!r.containerForm.invalid),d.xp6(1),d.Q6J("ngIf",r.containerForm.invalid))},dependencies:[Ms,Mi,xm,sL,aL,lv,kT,DT,Sm,pv,fv,qE]}),n})();function C4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",16)(2,"span",17),d._uU(3,"Enter container name!!"),d.qZA(),d._uU(4," How exactly are you supposed to know which furniture is that? "),d.qZA()())}function D4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",16)(2,"span",17),d._uU(3,"Name too short!!"),d.qZA(),d._uU(4," Don't be so cryptic now? "),d.qZA()())}function T4(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,C4,5,0,"div",5),d.YNc(2,D4,5,0,"div",5),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.itemName.errors?null:t.itemName.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.itemName.errors?null:t.itemName.errors.minlength)}}function S4(n,e){1&n&&(d.TgZ(0,"div")(1,"div",16)(2,"span",17),d._uU(3,"Enter room description!!"),d.qZA(),d._uU(4," Trust me you'll thank me later "),d.qZA()())}function A4(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,S4,5,0,"div",5),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.itemDescription.errors?null:t.itemDescription.errors.required)}}function x4(n,e){1&n&&(d.TgZ(0,"div",18)(1,"div",16)(2,"span",17),d._uU(3,"Enter a value higher than 0"),d.qZA(),d._uU(4," Schrodinger's items are not supported "),d.qZA()())}function R4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onSubmit())}),d._uU(1,"Save"),d.qZA()}}function M4(n,e){1&n&&(d.TgZ(0,"button",20),d._uU(1,"Save"),d.qZA())}let N4=(()=>{class n{constructor(t){this.savedItem=new d.vpe}ngOnInit(){this.itemForm=new dv({itemName:new fc("",[ru.required,ru.minLength(3)]),itemDescription:new fc("",[ru.required]),itemQuantity:new fc(0,[ru.required,ru.min(1)])})}onSubmit(){this.itemForm.valid&&this.saveItem({id:"",itemName:this.itemForm.value.itemName,itemDescription:this.itemForm.value.itemDescription,itemQuantity:this.itemForm.value.itemQuantity,itemPhotoUrl:""})}saveItem(t){this.savedItem.emit(t)}get itemName(){return this.itemForm.get("itemName")}get itemDescription(){return this.itemForm.get("itemDescription")}get itemQuantity(){return this.itemForm.get("itemQuantity")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gv))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-item-form"]],outputs:{savedItem:"savedItem"},decls:22,vars:6,consts:[[3,"formGroup"],["formDir","ngForm"],[1,""],["for","itemName",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","itemName","formControlName","itemName","required","",1,"mb-2","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5"],[4,"ngIf"],[1,"mb-6"],["for","itemDescription",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","itemDescription","formControlName","itemDescription","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5"],[1,"form-group"],["for","itemQuantity",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","itemQuantity","formControlName","itemQuantity","required","",1,"mb-2","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5"],["class","alert alert-danger",4,"ngIf"],["role","alert",1,"p-4","my-2","text-sm","text-blue-800","rounded-lg","bg-blue-50","border"],["class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-4 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",3,"click",4,"ngIf"],["type","button","class","text-white bg-blue-400 dark:bg-blue-500 cursor-not-allowed font-medium rounded-lg text-sm px-5 py-2.5 text-center mb-4","disabled","",4,"ngIf"],["role","alert",1,"p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","border"],[1,"font-medium"],[1,"alert","alert-danger"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","mr-2","mb-4","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click"],["type","button","disabled","",1,"text-white","bg-blue-400","dark:bg-blue-500","cursor-not-allowed","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","mb-4"]],template:function(t,r){1&t&&(d.TgZ(0,"form",0,1)(2,"div",2)(3,"div")(4,"label",3),d._uU(5,"Item name: "),d.qZA(),d._UZ(6,"input",4),d.YNc(7,T4,3,2,"div",5),d.qZA(),d.TgZ(8,"div",6)(9,"label",7),d._uU(10,"Item description: "),d.qZA(),d._UZ(11,"textarea",8),d.YNc(12,A4,2,1,"div",5),d.qZA(),d.TgZ(13,"div",9)(14,"label",10),d._uU(15,"Item quantity: "),d.qZA(),d._UZ(16,"input",11),d.YNc(17,x4,5,0,"div",12),d.qZA(),d.TgZ(18,"div",13),d._uU(19," Enter room name and its description and I'll take care of the rest "),d.qZA(),d.YNc(20,R4,2,0,"button",14),d.YNc(21,M4,2,0,"button",15),d.qZA()()),2&t&&(d.Q6J("formGroup",r.itemForm),d.xp6(7),d.Q6J("ngIf",r.itemName.invalid&&(r.itemName.dirty||r.itemName.touched)),d.xp6(5),d.Q6J("ngIf",r.itemDescription.invalid&&(r.itemDescription.dirty||r.itemDescription.touched)),d.xp6(5),d.Q6J("ngIf",r.itemQuantity.invalid&&r.itemQuantity.touched),d.xp6(3),d.Q6J("ngIf",!r.itemForm.invalid),d.xp6(1),d.Q6J("ngIf",r.itemForm.invalid))},dependencies:[Mi,xm,lv,DT,Sm,pv,fv,qE]}),n})();function k4(n,e){if(1&n){const t=d.EpF();d.ynx(0),d.TgZ(1,"tr",5)(2,"td",6),d.NdJ("click",function(){const o=d.CHM(t).$implicit,u=d.oxw();return d.KtG(u.openItemInContainerView(o))}),d._uU(3),d.qZA()(),d.BQk()}if(2&n){const t=e.$implicit;d.xp6(3),d.Oqu(t.itemName)}}let YL=(()=>{class n{constructor(){this.openedItem=new d.vpe}openItemInContainerView(t){console.log(t),this.openedItem.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-item-table"]],inputs:{items:"items"},outputs:{openedItem:"openedItem"},decls:8,vars:1,consts:[[1,"relative","min-h-96","overflow-y-auto","drop-shadow-2xl","rounded-xl"],[1,"w-full","text-sm","text-left","bg-[#817061]"],[1,"text-xs","text-[#CFB9A5]","uppercase","bg-[#817061]"],["scope","col",1,"px-6","py-3"],[4,"ngFor","ngForOf"],[1,"text-[#CFB9A5]","bg-[#817061]","hover:bg-[#33261D]"],[1,"px-6","py-4",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),d._uU(5," Item Name "),d.qZA()()(),d.TgZ(6,"tbody"),d.YNc(7,k4,4,1,"ng-container",4),d.qZA()()()),2&t&&(d.xp6(7),d.Q6J("ngForOf",r.items))},dependencies:[Ms]}),n})(),O4=(()=>{class n{constructor(t){this.fireSet=t,this.savedItems=[]}saveItem(t){console.log(this.savedItems),this.savedItems.push(t),console.log(this.savedItems)}submitToFirestore(){this.roomId&&this.containerId&&this.savedItems.length&&(console.log(this.roomId),console.log(this.containerId),this.fireSet.updateUserItem(this.roomId,this.containerId,this.savedItems))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gv))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-new-item"]],inputs:{roomId:"roomId",containerId:"containerId"},decls:4,vars:1,consts:[[3,"items"],[3,"savedItem"],[3,"click"]],template:function(t,r){1&t&&(d._UZ(0,"app-item-table",0),d.TgZ(1,"app-item-form",1),d.NdJ("savedItem",function(o){return r.saveItem(o)}),d.qZA(),d.TgZ(2,"button",2),d.NdJ("click",function(){return r.submitToFirestore()}),d._uU(3," save all"),d.qZA()),2&t&&d.Q6J("items",r.savedItems)},dependencies:[N4,YL]}),n})();function P4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"h1",1),d._uU(2),d.qZA(),d._UZ(3,"hr",2),d.TgZ(4,"div",3)(5,"button",4),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.setItemAddView())}),d._uU(6,"Add Item "),d.qZA(),d.TgZ(7,"app-item-table",5),d.NdJ("openedItem",function(i){d.CHM(t);const o=d.oxw();return d.KtG(o.setOpenedItem(i))}),d.qZA()()()}if(2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.container.containerName),d.xp6(5),d.Q6J("items",t.container.items)}}function F4(n,e){if(1&n&&(d.TgZ(0,"div")(1,"h1",1),d._uU(2),d.qZA(),d._UZ(3,"hr",2)(4,"app-new-item",6),d.qZA()),2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.container.containerName),d.xp6(2),d.Q6J("roomId",t.roomId)("containerId",t.container.id)}}function L4(n,e){if(1&n&&(d.TgZ(0,"div")(1,"h1",1),d._uU(2),d.qZA(),d._UZ(3,"hr",2),d.TgZ(4,"h2",7),d._uU(5,"Item Quantity"),d.qZA(),d._UZ(6,"hr",8),d.TgZ(7,"h3",9),d._uU(8),d.qZA(),d.TgZ(9,"h2",7),d._uU(10,"Item Description"),d.qZA(),d._UZ(11,"hr",8),d.TgZ(12,"div",10)(13,"h3",11),d._uU(14),d.qZA()()()),2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.openedItem.itemName),d.xp6(6),d.Oqu(t.openedItem.itemQuantity),d.xp6(6),d.Oqu(t.openedItem.itemDescription)}}let V4=(()=>{class n{constructor(){this.container={containerDescription:"",containerName:"",containerType:Ts.OTHER,id:""},this.roomId="",this.viewStates=oa.ITEM_VIEW,this.openedItem={id:"",itemDescription:"",itemName:"",itemPhotoUrl:"",itemQuantity:0},this.ViewStates=oa}setItemAddView(){this.viewStates=oa.ITEM_ADD}setItemView(){this.viewStates=oa.ITEM_VIEW}setOpenedItem(t){console.log(t),t&&(this.openedItem=t,this.viewStates=oa.ITEM_SPECIFIC_VIEW)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-container-view"]],inputs:{container:"container",roomId:"roomId"},decls:4,vars:3,consts:[[4,"ngIf"],[1,"text-center","text-[#33261D]","font-bold","text-2xl"],[1,"w-20","h-1","mx-auto","my-2","bg-[#33261D]","border-0","rounded"],[1,"grid","grid-cols-1"],[1,"bg-[#33261D]","rounded-2xl","drop-shadow-2xl","hover:bg-[#5A4B3F]","hover:drop-shadow-xl","text-xl","text-[#BFAA97]","font-bold","mx-2","mb-2","text-center",3,"click"],[3,"items","openedItem"],[3,"roomId","containerId"],[1,"mt-2","text-center","text-[#33261D]","font-bold","text-xl"],[1,"w-14","h-1","mx-auto","my-2","bg-[#33261D]","border-0","rounded"],[1,"mx-2","my-2","text-center","font-bold","text-[#33261D]","text-l"],[1,"mx-5","mt-2","h-24","min-h-24","block","border","border-[#33261D]","rounded-l"],[1,"mx-2","my-2","text-[#33261D]","text-l"]],template:function(t,r){1&t&&(d.TgZ(0,"div"),d.YNc(1,P4,8,2,"div",0),d.YNc(2,F4,5,3,"div",0),d.YNc(3,L4,15,3,"div",0),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.viewStates===r.ViewStates.ITEM_VIEW),d.xp6(1),d.Q6J("ngIf",r.viewStates===r.ViewStates.ITEM_ADD),d.xp6(1),d.Q6J("ngIf",r.viewStates===r.ViewStates.ITEM_SPECIFIC_VIEW))},dependencies:[Mi,O4,YL]}),n})();function U4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"app-container-box",9),d.NdJ("containerId",function(i){d.CHM(t);const o=d.oxw(2);return d.KtG(o.setViewableContainer(i))}),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(1),d.Q6J("container",t)}}function B4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"div",2)(2,"h1",3),d._uU(3),d.qZA(),d._UZ(4,"hr",4),d.TgZ(5,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.fireSet.deleteUserRoom(i.room.id))}),d._uU(6,"Delete Room"),d.qZA()(),d.TgZ(7,"div",6)(8,"button",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.setAddNewFurniture())}),d._uU(9,"Add Furniture"),d.qZA(),d.YNc(10,U4,2,1,"div",8),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(3),d.Oqu(t.room.roomName),d.xp6(7),d.Q6J("ngForOf",t.room.containers)}}function j4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"button",10),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.backToRoomView())}),d._uU(2,"Go back to room view"),d.qZA(),d.TgZ(3,"div",11),d._UZ(4,"app-container-view",12),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(4),d.Q6J("roomId",t.room.id)("container",t.openedContainer)}}function $4(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"button",10),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.backToRoomView())}),d._uU(2,"Go back to room view"),d.qZA(),d.TgZ(3,"h1",3),d._uU(4,"Add new furniture"),d.qZA(),d._UZ(5,"hr",4),d.TgZ(6,"div",11),d._UZ(7,"app-new-container",13),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(7),d.Q6J("roomId",t.room.id)}}let H4=(()=>{class n{constructor(t){this.fireSet=t,this.room={containers:[],id:"",roomDescription:"",roomName:"",roomPhotoUrl:""},this.currentViewState=oa.ROOM_VIEW,this.openedContainer={containerDescription:"",containerName:"",containerType:Ts.OTHER,id:""},this.ContainerType=Ts,this.ViewStates=oa}setViewableContainer(t){this.openedContainer=t,this.currentViewState=oa.CONTAINER_VIEW}setAddNewFurniture(){this.currentViewState=oa.CONTAINER_ADD}backToRoomView(){this.openedContainer={containerDescription:"",containerName:"",containerType:Ts.OTHER,id:""},this.currentViewState=oa.ROOM_VIEW}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gv))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-new-room-view"]],inputs:{room:"room"},decls:4,vars:3,consts:[[1,"bg-[#BFAA97]","overflow-auto","h-96","rounded-2xl","shadow-2xl","p-3"],[4,"ngIf"],[1,"flex","flex-col","items-center","mb-3"],[1,"text-center","text-[#33261D]","font-bold","text-2xl"],[1,"w-20","h-1","mx-auto","my-2","bg-[#33261D]","border-0","rounded"],["type","button",1,"w-fit","bg-[#817061]","text-[#CFB9A5]","hover:bg-[#5e5247]","focus:ring-0","focus:outline-none","focus:ring-blue-300","font-bold","rounded-3xl","text-sm","px-5","text-center","h-10",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-[#33261D]","rounded-2xl","drop-shadow-2xl","hover:bg-[#5A4B3F]","hover:drop-shadow-xl","text-xl","text-[#BFAA97]","font-bold","mx-2","text-center",3,"click"],[4,"ngFor","ngForOf"],[3,"container","containerId"],["type","button",1,"bg-[#817061]","text-[#CFB9A5]","hover:bg-[#5e5247]","focus:ring-0","focus:outline-none","focus:ring-blue-300","font-bold","rounded-3xl","text-sm","px-5","text-center","h-10",3,"click"],[1,"grid","grid-cols-1"],[3,"roomId","container"],[3,"roomId"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,B4,11,2,"div",1),d.YNc(2,j4,5,2,"div",1),d.YNc(3,$4,8,1,"div",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",r.currentViewState===r.ViewStates.ROOM_VIEW),d.xp6(1),d.Q6J("ngIf",r.currentViewState===r.ViewStates.CONTAINER_VIEW),d.xp6(1),d.Q6J("ngIf",r.currentViewState===r.ViewStates.CONTAINER_ADD))},dependencies:[Ms,Mi,h4,I4,V4]}),n})();function G4(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"app-new-room-view",2),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("room",t)}}let z4=(()=>{class n{constructor(t,r){this.fireSet=t,this.fireGet=r,this.rooms=rt(void 0)}ngOnInit(){this.fireGet.getRooms().pipe((0,dt.U)(t=>{if(t)return t})).subscribe(t=>{this.rooms=rt(t)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gv),d.Y36(V3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-main-view"]],decls:4,vars:3,consts:[[1,"mx-10","my-3","grid","grid-cols-1","md:grid-cols-3","gap-4"],[4,"ngFor","ngForOf"],[3,"room"]],template:function(t,r){1&t&&(d._UZ(0,"app-rooms-header"),d.TgZ(1,"div",0),d.YNc(2,G4,2,1,"div",1),d.ALo(3,"async"),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngForOf",d.lcZ(3,1,r.rooms)))},dependencies:[Ms,d4,H4,Ns]}),n})(),q4=(()=>{class n{constructor(t){this.authService=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Dm))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-forgot-password"]],decls:13,vars:0,consts:[[1,"flex","items-center","justify-center","mt-10"],[1,"w-full","max-w-xs"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","mb-4"],[1,"mb-4"],["for","email",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","username","type","text","placeholder","Enter your email","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["userEmail",""],[1,"flex","items-center","justify-between"],["type","button",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"p"),d._uU(4,"Please enter your email to send to request a password reset. It will be sent to your email inbox"),d.qZA(),d.TgZ(5,"div",3)(6,"label",4),d._uU(7," Email "),d.qZA(),d._UZ(8,"input",5,6),d.qZA(),d.TgZ(10,"div",7)(11,"button",8),d.NdJ("click",function(){d.CHM(i);const u=d.MAs(9);return d.KtG(r.authService.forgotPassword(u.value))}),d._uU(12," Reset Password "),d.qZA()()()()()}},dependencies:[xm,Sm,hv]}),n})();function W4(n,e){if(1&n&&(d.TgZ(0,"div",5)(1,"p"),d._uU(2,"An email has been sent to "),d.TgZ(3,"strong"),d._uU(4),d.qZA()(),d.TgZ(5,"p"),d._uU(6,"Please click on the link in the email to verify your account"),d.qZA()()),2&n){const t=e.ngIf;d.xp6(4),d.Oqu(t.email)}}const Z4=[{path:"",redirectTo:"/signIn",pathMatch:"full"},{path:"mainView",component:z4,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.user$.pipe(Oi(1),(0,dt.U)(i=>!!i),(0,Er.b)(i=>{i||this.router.navigate(["/signIn"])}))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Dm),d.LFG(Yi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"signIn",component:F3},{path:"signUp",component:L3},{path:"forgotPassword",component:q4},{path:"emailVerification",component:(()=>{class n{constructor(t){this.authService=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Dm))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-email-verification"]],decls:11,vars:3,consts:[[1,"container","flex","items-center","justify-center","mt-10","text-center"],[1,"bg-white","shadow-md","rounded","px-8","pt-6","pb-8","mb-4"],["class","container",4,"ngIf"],[1,"mt-2"],["type","button",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[1,"container"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h3"),d._uU(3,"Thank You for signing up to majster"),d.qZA(),d.YNc(4,W4,7,1,"div",2),d.ALo(5,"async"),d.TgZ(6,"div",3)(7,"p"),d._uU(8,"Didn't receive an email?"),d.qZA(),d.TgZ(9,"button",4),d.NdJ("click",function(){return r.authService.sendVerificationMail()}),d._uU(10," Resend Email "),d.qZA()()()()),2&t&&(d.xp6(4),d.Q6J("ngIf",d.lcZ(5,1,r.authService.getUserData())))},dependencies:[Mi,Ns]}),n})()}];let K4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[GA.forRoot(Z4),GA]}),n})(),Y4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-top-bar"]],decls:3,vars:0,consts:[[1,"bg-[#817061]","rounded-3xl","py-2","mt-5","mx-10","shadow-2xl","shadow-[#33261D]"],[1,"mx-5","text-4xl","text-[#CFB9A5]","font-bold",2,"font-family","'DM Serif Display'"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h1",1),d._uU(2,"Majster"),d.qZA()())}}),n})(),Q4=(()=>{class n{constructor(){this.title="majster-angular-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-top-bar")(1,"router-outlet")},dependencies:[Yv,Y4]}),n})();const J4_firebaseConfig={apiKey:"AIzaSyBAXyLxndA5gbowqxiMIpJ34sFZKiI0870",authDomain:"majster-a17e0.firebaseapp.com",projectId:"majster-a17e0",storageBucket:"majster-a17e0.appspot.com",messagingSenderId:"229111853683",appId:"1:229111853683:web:f71e1ae1577ba88a277006",measurementId:"G-WYGZS50KLJ"},QL="firebasestorage.googleapis.com",JL="storageBucket";class zr extends V.ZR{constructor(e,t,r=0){super(uk(e),`Firebase Storage: ${t} (${uk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var fr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(fr||(fr={})),fr))();function uk(n){return"storage/"+n}function lk(){return new zr(fr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function XL(){return new zr(fr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e2(){return new zr(fr.CANCELED,"User canceled the upload/download.")}function t2(){return new zr(fr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ev(n){return new zr(fr.INVALID_ARGUMENT,n)}function n2(){return new zr(fr.APP_DELETED,"The Firebase app was deleted.")}function r2(n){return new zr(fr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tb(n,e){return new zr(fr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function nb(n){throw new zr(fr.INTERNAL_ERROR,"Internal error: "+n)}class Ss{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ss.makeFromUrl(e,t)}catch{return new Ss(e,"")}if(""===r.path)return r;throw function l6(n){return new zr(fr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ue){Ue.path_=decodeURIComponent(Ue.path)}const S=t.replace(/[.]/g,"\\."),Be=[{regex:h,indices:{bucket:1,path:3},postModify:function o(Ue){"/"===Ue.path.charAt(Ue.path.length-1)&&(Ue.path_=Ue.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===QL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ue=0;Ue<Be.length;Ue++){const at=Be[Ue],ft=at.regex.exec(e);if(ft){let kn=ft[at.indices.path];kn||(kn=""),r=new Ss(ft[at.indices.bucket],kn),at.postModify(r);break}}if(null==r)throw function u6(n){return new zr(fr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class p6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tS(n){return"string"==typeof n||n instanceof String}function i2(n){return ck()&&n instanceof Blob}function ck(){return typeof Blob<"u"&&!(0,V.UG)()}function dk(n,e,t,r){if(r<e)throw Ev(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ev(`Invalid value for '${n}'. Expected ${t} or less.`)}function qd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function s2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var dp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(dp||(dp={})),dp))();function o2(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class w6{constructor(e,t,r,i,o,u,h,p,y,b,S,M=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=S,this.retry=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,z)=>{this.resolve_=U,this.reject_=z,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function _6(n){return void 0!==n}(p)?o():o(p)}catch(p){u(p)}else if(null!==h){const p=lk();p.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,p):p)}else u(i.canceled?this.appDelete_?n2():e2():XL())};this.canceled_?t(0,new nS(!1,null,!0)):this.backoffId_=function g6(n,e,t){let r=1,i=null,o=null,u=!1,h=0;function p(){return 2===h}let y=!1;function b(...ne){y||(y=!0,e.apply(null,ne))}function S(ne){i=setTimeout(()=>{i=null,n(U,p())},ne)}function M(){o&&clearTimeout(o)}function U(ne,...Fe){if(y)return void M();if(ne)return M(),void b.call(null,ne,...Fe);if(p()||u)return M(),void b.call(null,ne,...Fe);let Be;r<64&&(r*=2),1===h?(h=2,Be=0):Be=1e3*(r+Math.random()),S(Be)}let z=!1;function te(ne){z||(z=!0,M(),!y&&(null!==i?(ne||(h=2),clearTimeout(i),S(0)):ne||(h=1)))}return S(0),o=setTimeout(()=>{u=!0,te(!0)},t),te}((r,i)=>{if(i)return void r(!1,new nS(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const h=o.getErrorCode()===dp.NO_ERROR,p=o.getStatus();if(!h||o2(p,this.additionalRetryCodes_)&&this.retry){const b=o.getErrorCode()===dp.ABORT;return void r(!1,new nS(!1,null,b))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new nS(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function m6(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class nS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function S6(...n){const e=function T6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(ck())return new Blob(n);throw new zr(fr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const aa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hk{constructor(e,t){this.data=e,this.contentType=t||null}}function fk(n,e){switch(n){case aa.RAW:return new hk(a2(e));case aa.BASE64:case aa.BASE64URL:return new hk(u2(n,e));case aa.DATA_URL:return new hk(function M6(n){const e=new l2(n);return e.base64?u2(aa.BASE64,e.rest):function R6(n){let e;try{e=decodeURIComponent(n)}catch{throw tb(aa.DATA_URL,"Malformed data URL.")}return a2(e)}(e.rest)}(e),function N6(n){return new l2(n).contentType}(e))}throw lk()}function a2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function u2(n,e){switch(n){case aa.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw tb(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case aa.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw tb(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function x6(n){if(typeof atob>"u")throw function f6(n){return new zr(fr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:tb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class l2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw tb(aa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function k6(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class mc{constructor(e,t){let r=0,i="";i2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(i2(this.data_)){const i=function A6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new mc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new mc(r,!0)}}static getBlob(...e){if(ck()){const t=e.map(r=>r instanceof mc?r.data_:r);return new mc(S6.apply(null,t))}{const t=e.map(u=>tS(u)?fk(aa.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[o++]=u[h]}),new mc(i,!0)}}uploadData(){return this.data_}}function pk(n){let e;try{e=JSON.parse(n)}catch{return null}return function v6(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function c2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function F6(n,e){return e}class Ys{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||F6}}let rS=null;function rb(){if(rS)return rS;const n=[];n.push(new Ys("bucket")),n.push(new Ys("generation")),n.push(new Ys("metageneration")),n.push(new Ys("name","fullPath",!0));const t=new Ys("name");t.xform=function e(o,u){return function L6(n){return!tS(n)||n.length<2?n:c2(n)}(u)},n.push(t);const i=new Ys("size");return i.xform=function r(o,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Ys("timeCreated")),n.push(new Ys("updated")),n.push(new Ys("md5Hash",null,!0)),n.push(new Ys("cacheControl",null,!0)),n.push(new Ys("contentDisposition",null,!0)),n.push(new Ys("contentEncoding",null,!0)),n.push(new Ys("contentLanguage",null,!0)),n.push(new Ys("contentType",null,!0)),n.push(new Ys("metadata","customMetadata",!0)),rS=n,rS}function d2(n,e,t){const r=pk(e);return null===r?null:function U6(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const u=t[o];r[u.local]=u.xform(r,e[u.server])}return function V6(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new Ss(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function gk(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const h2="prefixes",f2="items";class _c{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function yc(n){if(!n)throw lk()}function iS(n,e){return function t(r,i){const o=d2(n,i,e);return yc(null!==o),o}}function bv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function o6(){return new zr(fr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function s6(){return new zr(fr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function i6(n){return new zr(fr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function a6(n){return new zr(fr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function ib(n){const e=bv(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function r6(n){return new zr(fr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function p2(n,e,t){const i=qd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new _c(i,"GET",iS(n,t),u);return h.errorHandler=ib(e),h}function z6(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=qd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,b=new _c(h,"GET",function H6(n,e){return function t(r,i){const o=function $6(n,e,t){const r=pk(t);return null===r?null:function j6(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[h2])for(const i of t[h2]){const o=i.replace(/\/$/,""),u=n._makeStorageReference(new Ss(e,o));r.prefixes.push(u)}if(t[f2])for(const i of t[f2]){const o=n._makeStorageReference(new Ss(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return yc(null!==o),o}}(n,e.bucket),y);return b.urlParams=o,b.errorHandler=bv(e),b}function m2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function K6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class sS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function mk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{yc(!1)}return yc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const X6={STATE_CHANGED:"state_changed"},Qs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _k(n){switch(n){case"running":case"pausing":case"canceling":return Qs.RUNNING;case"paused":return Qs.PAUSED;case"success":return Qs.SUCCESS;case"canceled":return Qs.CANCELED;default:return Qs.ERROR}}class ez{constructor(e,t,r){if(function y6(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Iv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let v2=null;class tz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw nb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class nz extends tz{initXhr(){this.xhr_.responseType="text"}}function ll(){return v2?v2():new nz}class w2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=rb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(fr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(o2(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=XL()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(fr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Y6(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u=m2(e,r,i),h={name:u.fullPath},p=qd(o,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},S=gk(u,t),z=new _c(p,"POST",function U(te){let ne;mk(te);try{ne=te.getResponseHeader("X-Goog-Upload-URL")}catch{yc(!1)}return yc(tS(ne)),ne},n.maxUploadRetryTime);return z.urlParams=h,z.headers=b,z.body=S,z.errorHandler=bv(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ll,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Q6(n,e,t,r){const p=new _c(t,"POST",function o(y){const b=mk(y,["active","final"]);let S=null;try{S=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{yc(!1)}S||yc(!1);const M=Number(S);return yc(!isNaN(M)),new sS(M,r.size(),"final"===b)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=bv(e),p}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,ll,t,r);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new sS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let u;try{u=function J6(n,e,t,r,i,o,u,h){const p=new sS(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function d6(){return new zr(fr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let b=y;i>0&&(b=Math.min(b,i));const S=p.current;let U="";U=0===b?"finalize":y===b?"upload, finalize":"upload";const z={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${p.current}`},te=r.slice(S,S+b);if(null===te)throw t2();const Be=new _c(t,"POST",function ne(Ue,at){const ft=mk(Ue,["active","final"]),ln=p.current+b,kn=r.size();let Tr;return Tr="final"===ft?iS(e,o)(Ue,at):null,new sS(ln,kn,"final"===ft,Tr)},e.maxUploadRetryTime);return Be.headers=z,Be.body=te.uploadData(),Be.progressCallback=h||null,Be.errorHandler=bv(n),Be}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(u,ll,i,o,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=p2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ll,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function _2(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let Be="";for(let Ue=0;Ue<2;Ue++)Be+=Math.random().toString().slice(2);return Be}();u["Content-Type"]="multipart/related; boundary="+p;const y=m2(e,r,i),b=gk(y,t),U=mc.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===U)throw t2();const z={name:y.fullPath},te=qd(o,n.host,n._protocol),Fe=n.maxUploadRetryTime,qe=new _c(te,"POST",iS(n,t),Fe);return qe.urlParams=z,qe.headers=u,qe.body=U.uploadData(),qe.errorHandler=bv(e),qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ll,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=e2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=_k(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new ez(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(_k(this._state)){case Qs.SUCCESS:Iv(this._resolve.bind(null,this.snapshot))();break;case Qs.CANCELED:case Qs.ERROR:Iv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_k(this._state)){case Qs.RUNNING:case Qs.PAUSED:e.next&&Iv(e.next.bind(e,this.snapshot))();break;case Qs.SUCCESS:e.complete&&Iv(e.complete.bind(e))();break;default:e.error&&Iv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Fm{constructor(e,t){this._service=e,this._location=t instanceof Ss?t:Ss.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fm(e,t)}get root(){const e=new Ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return c2(this._location.path)}get storage(){return this._service}get parent(){const e=function O6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ss(this._location.bucket,e);return new Fm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw r2(e)}}function b2(n,e,t){return yk.apply(this,arguments)}function yk(){return yk=(0,we.Z)(function*(n,e,t){const i=yield I2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield b2(n,e,i.nextPageToken))}),yk.apply(this,arguments)}function I2(n,e){null!=e&&"number"==typeof e.maxResults&&dk("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=z6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ll)}function pz(n){n._throwIfRoot("getDownloadURL");const e=function q6(n,e,t){const i=qd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new _c(i,"GET",function G6(n,e){return function t(r,i){const o=d2(n,i,e);return yc(null!==o),function B6(n,e,t,r){const i=pk(e);if(null===i||!tS(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const u=encodeURIComponent;return o.split(",").map(y=>{const S=n.fullPath;return qd("/b/"+u(n.bucket)+"/o/"+u(S),t,r)+s2({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=ib(e),h}(n.storage,n._location,rb());return n.storage.makeRequestWithTokens(e,ll).then(t=>{if(null===t)throw function h6(){return new zr(fr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function C2(n,e){const t=function P6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ss(n._location.bucket,t);return new Fm(n.storage,r)}function D2(n,e){if(n instanceof vk){const t=n;if(null==t._bucket)throw function c6(){return new zr(fr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JL+"' property when initializing the app?")}();const r=new Fm(t,t._bucket);return null!=e?D2(r,e):r}return void 0!==e?C2(n,e):n}function yz(n,e){if(e&&function mz(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof vk)return function _z(n,e){return new Fm(n,e)}(n,e);throw Ev("To use ref(service, url), the first argument must be a Storage instance.")}return D2(n,e)}function T2(n,e){const t=e?.[JL];return null==t?null:Ss.makeFromBucketSpec(t,n)}class vk{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=QL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ss.makeFromBucketSpec(i,this._host):T2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ss.makeFromBucketSpec(this._url,e):T2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fm(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new p6(n2());{const u=function D6(n,e,t,r,i,o,u=!0){const h=s2(n.urlParams),p=n.url+h,y=Object.assign({},n.headers);return function I6(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function E6(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function b6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,o),function C6(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new w6(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const S2="@firebase/storage";function R2(n,e){return yz(n=(0,V.m9)(n),e)}function Az(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new vk(t,r,i,e,Pi.SDK_VERSION)}!function xz(){(0,Pi._registerComponent)(new wo.wA("storage",Az,"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(S2,"0.11.2",""),(0,Pi.registerVersion)(S2,"0.11.2","esm2017")}();class oS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class N2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new oS(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?u=>t(new oS(u,this,this._ref)):{next:t.next?u=>t.next(new oS(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class k2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Wd(e,this._service))}get items(){return this._delegate.items.map(e=>new Wd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Wd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Sz(n,e){return C2(n,e)}(this._delegate,e);return new Wd(t,this.storage)}get root(){return new Wd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Wd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new N2(function wz(n,e,t){return function lz(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new w2(n,new mc(e),t)}(n=(0,V.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=aa.RAW,r){this._throwIfRoot("putString");const i=fk(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new N2(new w2(this._delegate,new mc(i.data,!0),o),this)}listAll(){return function Cz(n){return function dz(n){const e={prefixes:[],items:[]};return b2(n,e).then(()=>e)}(n=(0,V.m9)(n))}(this._delegate).then(e=>new k2(e,this.storage))}list(e){return function Iz(n,e){return I2(n=(0,V.m9)(n),e)}(this._delegate,e||void 0).then(t=>new k2(t,this.storage))}getMetadata(){return function Ez(n){return function hz(n){n._throwIfRoot("getMetadata");const e=p2(n.storage,n._location,rb());return n.storage.makeRequestWithTokens(e,ll)}(n=(0,V.m9)(n))}(this._delegate)}updateMetadata(e){return function bz(n,e){return function fz(n,e){n._throwIfRoot("updateMetadata");const t=function W6(n,e,t,r){const o=qd(e.fullServerUrl(),n.host,n._protocol),h=gk(t,r),y=n.maxOperationRetryTime,b=new _c(o,"PATCH",iS(n,r),y);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=ib(e),b}(n.storage,n._location,e,rb());return n.storage.makeRequestWithTokens(t,ll)}(n=(0,V.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Dz(n){return pz(n=(0,V.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Tz(n){return function gz(n){n._throwIfRoot("deleteObject");const e=function Z6(n,e){const r=qd(e.fullServerUrl(),n.host,n._protocol),h=new _c(r,"DELETE",function u(p,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=ib(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ll)}(n=(0,V.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw r2(e)}}class O2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(P2(e))throw Ev("ref() expected a child path but got a URL, use refFromURL instead.");return new Wd(R2(this._delegate,e),this)}refFromURL(e){if(!P2(e))throw Ev("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ss.makeFromUrl(e,this._delegate.host)}catch{throw Ev("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wd(R2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function M2(n,e,t,r={}){!function vz(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,V.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function P2(n){return/^[A-Za-z]+:\/\//.test(n)}function kz(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new O2(t,r)}function F2(n){const e=function Pz(n){return new Xr.y(e=>{const t=u=>e.next(u);t(n.snapshot);const o=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){o()}}).pipe(function X4(n,e=gg.z){return(0,Nr.e)((t,r)=>{let i=null,o=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function p(){const y=u+n,b=e.now();if(b<y)return i=this.schedule(void 0,y-b),void r.add(i);h()}t.subscribe((0,cr.x)(r,y=>{o=y,u=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,dt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function aS(n){return{getDownloadURL:()=>rt(void 0).pipe(En.fc,Rn(()=>n.getDownloadURL()),En.iC),getMetadata:()=>rt(void 0).pipe(En.fc,Rn(()=>n.getMetadata()),En.iC),delete:()=>(0,hn.D)(n.delete()),child:e=>aS(n.child(e)),updateMetadata:e=>(0,hn.D)(n.updateMetadata(e)),put:(e,t)=>F2(n.put(e,t)),putString:(e,t,r)=>F2(n.putString(e,t,r)),list:e=>(0,hn.D)(n.list(e)),listAll:()=>(0,hn.D)(n.listAll())}}!function Oz(n){const e={TaskState:Qs,TaskEvent:X6,StringFormat:aa,Storage:O2,Reference:Wd};n.INTERNAL.registerComponent(new wo.wA("storage-compat",kz,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(D_.Z);const Fz=new d.OlP("angularfire2.storageBucket"),Lz=new d.OlP("angularfire2.storage.maxUploadRetryTime"),Vz=new d.OlP("angularfire2.storage.maxOperationRetryTime"),Uz=new d.OlP("angularfire2.storage.use-emulator");let Bz=(()=>{class n{constructor(t,r,i,o,u,h,p,y,b,S){const M=(0,ci.on)(t,u,r);this.storage=(0,ci.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const U=u.runOutsideAngular(()=>M.storage(i||void 0)),z=b;return z&&U.useEmulator(...z),p&&U.setMaxUploadRetryTime(p),y&&U.setMaxOperationRetryTime(y),U},[p,y])}ref(t){return aS(this.storage.ref(t))}refFromURL(t){return aS(this.storage.refFromURL(t))}upload(t,r,i){return aS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ci.Dh),d.LFG(ci.xv,8),d.LFG(Fz,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(En.HU),d.LFG(Lz,8),d.LFG(Vz,8),d.LFG(Uz,8),d.LFG(UE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),$z=(()=>{class n{constructor(){wT.Z.registerVersion("angularfire",En.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Bz],imports:[jz]}),n})();var Hz=j(5032);const L2="@firebase/database";let wk="";function U2(n){wk=n}class qz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,V.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,V.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Wz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,V.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const B2=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new qz(e)}}catch{}return new Wz},Lm=B2("localStorage"),Ek=B2("sessionStorage"),Cv=new Es.Yd("@firebase/database"),j2=function(){let n=1;return function(){return n++}}(),$2=function(n){const e=(0,V.dS)(n),t=new V.gQ;t.update(e);const r=t.digest();return V.US.encodeByteArray(r)},sb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=sb.apply(null,r):e+="object"==typeof r?(0,V.Wl)(r):r,e+=" "}return e};let Vm=null,H2=!0;const G2=function(n,e){(0,V.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Cv.logLevel=Es.in.VERBOSE,Vm=Cv.log.bind(Cv),e&&Ek.set("logging_enabled",!0)):"function"==typeof n?Vm=n:(Vm=null,Ek.remove("logging_enabled"))},rs=function(...n){if(!0===H2&&(H2=!1,null===Vm&&!0===Ek.get("logging_enabled")&&G2(!0)),Vm){const e=sb.apply(null,n);Vm(e)}},ob=function(n){return function(...e){rs(n,...e)}},bk=function(...n){const e="FIREBASE INTERNAL ERROR: "+sb(...n);Cv.error(e)},vc=function(...n){const e=`FIREBASE FATAL ERROR: ${sb(...n)}`;throw Cv.error(e),new Error(e)},As=function(...n){const e="FIREBASE WARNING: "+sb(...n);Cv.warn(e)},uS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},hp="[MIN_NAME]",Zd="[MAX_NAME]",Um=function(n,e){if(n===e)return 0;if(n===hp||e===Zd)return-1;if(e===hp||n===Zd)return 1;{const t=W2(n),r=W2(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Yz=function(n,e){return n===e?0:n<e?-1:1},ab=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Wl)(e))},Ik=function(n){if("object"!=typeof n||null===n)return(0,V.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,V.Wl)(e[r]),t+=":",t+=Ik(n[e[r]]);return t+="}",t},z2=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function is(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const q2=function(n){(0,V.hu)(!uS(n),"Invalid JSON number");const r=1023;let i,o,u,h,p;0===n?(o=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const b=y.join("");let S="";for(p=0;p<64;p+=8){let M=parseInt(b.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),S+=M}return S.toLowerCase()},eq=new RegExp("^-?(0*)\\d{1,10}$"),W2=function(n){if(eq.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Dv=function(n){try{n()}catch(e){setTimeout(()=>{throw As("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},rq=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ub=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class iq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){As(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class sq{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(rs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',As(e)}}let lb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const J2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tV="websocket",nV="long_polling";class Dk{constructor(e,t,r,i,o=!1,u="",h=!1,p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rV(n,e,t){let r;if((0,V.hu)("string"==typeof e,"typeof type must == string"),(0,V.hu)("object"==typeof t,"typeof params must == object"),e===tV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==nV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function oq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return is(t,(o,u)=>{i.push(o+"="+u)}),r+i.join("&")}class aq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,V.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,V.p$)(this.counters_)}}const Tk={},Sk={};function Ak(n){const e=n.toString();return Tk[e]||(Tk[e]=new aq),Tk[e]}class lq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Dv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fp{constructor(e,t,r,i,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ob(e),this.stats_=Ak(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),rV(t,nV,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new lq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xk((...o)=>{const[u,h,p,y,b]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&J2.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fp.forceAllow_=!0}static forceDisallow(){fp.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!fp.forceAllow_&&(fp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,V.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,V.h$)(t),i=z2(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,V.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class xk{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=j2(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=xk.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){rs("frame writing exception"),h.stack&&rs(h.stack),rs(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||rs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,V.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{rs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let cS=null;typeof MozWebSocket<"u"?cS=MozWebSocket:typeof WebSocket<"u"&&(cS=WebSocket);let Tv=(()=>{class n{constructor(t,r,i,o,u,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ob(this.connId),this.stats_=Ak(r),this.connURL=n.connectionURL_(r,h,p,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,u){const h={v:"5"};return!(0,V.Yr)()&&typeof location<"u"&&location.hostname&&J2.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),u&&(h.p=u),rV(t,tV,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lm.set("previous_websocket_failure",!0);try{let i;if((0,V.Yr)()){i={headers:{"User-Agent":`Firebase/5/${wk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new cS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==cS&&!n.forceDisallow_}static previouslyFailed(){return Lm.isInMemoryStorage||!0===Lm.get("previous_websocket_failure")}markConnectionHealthy(){Lm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,V.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,V.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=z2(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[fp,Tv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Tv&&Tv.isAvailable();let i=r&&!Tv.previouslyFailed();if(t.webSocketOnly&&(r||As("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Tv];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _V{constructor(e,t,r,i,o,u,h,p,y,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ob("c:"+this.id+":"),this.transportManager_=new cV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ub(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ab("t",e),r=ab("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ab("t",e),r=ab("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ab("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?bk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&As("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ub(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ub(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yV{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class vV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,V.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,V.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class dS extends vV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dS}getInitialEvent(e){return(0,V.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const wV=32,EV=768;class Ln{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new Ln("")}function pn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function pp(n){return n.pieces_.length-n.pieceNum_}function ur(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ln(n.pieces_,e)}function Mk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function cb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ln(e,0)}function Vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ln)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ln(t,0)}function gn(n){return n.pieceNum_>=n.pieces_.length}function Js(n,e){const t=pn(n),r=pn(e);if(null===t)return e;if(t===r)return Js(ur(n),ur(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Mq(n,e){const t=cb(n,0),r=cb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Um(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function Nk(n,e){if(pp(n)!==pp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function au(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(pp(n)>pp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Nq{constructor(e,t){this.errorPrefix_=t,this.parts_=cb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,V.ug)(this.parts_[r]);IV(this)}}function IV(n){if(n.byteLength_>EV)throw new Error(n.errorPrefix_+"has a key path longer than "+EV+" bytes ("+n.byteLength_+").");if(n.parts_.length>wV)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wV+") or object contains a cycle "+Bm(n))}function Bm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class kk extends vV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new kk}getInitialEvent(e){return(0,V.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const db=1e3;let fS,jm=(()=>{class n extends yV{constructor(t,r,i,o,u,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=ob("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=db,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&dS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,u={r:o,a:t,b:r};this.log_((0,V.Wl)(u)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new V.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,V.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,b=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(i,o),t.onComplete&&t.onComplete(b,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,V.r3)(t,"w")){const i=(0,V.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();As(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,V.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,V.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const u=o.s,h=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,V.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const u={p:t};o&&(u.q=i,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,V.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):bk("Unrecognized action received from server: "+(0,V.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=db,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=db,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=db),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const b=function(){y?y.close():(p=!0,o())};t.realtime_={close:b,sendRequest:function(U){(0,V.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(U)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,z]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);p?rs("getToken() completed but was canceled"):(rs("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=z&&z.token,y=new _V(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,te=>{As(te+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),p||(t.repoInfo_.nodeAdmin&&As(U),b())}}})()}interrupt(t){rs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){rs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=db,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>Ik(u)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Ln(t).toString();let o;if(this.listens.has(i)){const u=this.listens.get(i);o=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){rs("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){rs("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,V.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+wk.replace(/\./g,"-")]=1,(0,V.uI)()?t["framework.cordova"]=1:(0,V.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=dS.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class _n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new _n(e,t)}}class hS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new _n(hp,e),i=new _n(hp,t);return 0!==this.compare(r,i)}minPost(){return _n.MIN}}class TV extends hS{static get __EMPTY_NODE(){return fS}static set __EMPTY_NODE(e){fS=e}compare(e,t){return Um(e.name,t.name)}isDefinedOn(e){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return _n.MIN}maxPost(){return new _n(Zd,fS)}makePost(e,t){return(0,V.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new _n(e,fS)}toString(){return".key"}}const wc=new TV;class pS{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Pk,cl=(()=>{class n{constructor(t,r,i,o,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??So.EMPTY_NODE,this.right=u??So.EMPTY_NODE}copy(t,r,i,o,u){return new n(t??this.key,r??this.value,i??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return So.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return So.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class So{constructor(e,t=So.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new So(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cl.BLACK,null,null))}remove(e){return new So(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new pS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new pS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new pS(this.root_,null,this.comparator_,!0,e)}}function Bq(n,e){return Um(n.name,e.name)}function Ok(n,e){return Um(n,e)}So.EMPTY_NODE=new class Uq{copy(e,t,r,i,o){return this}insert(e,t,r){return new cl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const SV=function(n){return"number"==typeof n?"number:"+q2(n):"string:"+n},AV=function(n){if(n.isLeafNode()){const e=n.val();(0,V.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,V.r3)(e,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===Pk||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===Pk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xV,RV,MV,Sv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AV(this.priorityNode_)}static set __childrenNodeConstructor(t){xV=t}static get __childrenNodeConstructor(){return xV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return gn(t)?this:".priority"===pn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=pn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,V.hu)(".priority"!==i||1===pp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ur(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+SV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?q2(this.value_):this.value_,this.lazyHash_=$2(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,V.hu)(o>=0,"Unknown leaf type: "+r),(0,V.hu)(u>=0,"Unknown leaf type: "+i),o===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const pr=new class Gq extends hS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Um(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return _n.MIN}maxPost(){return new _n(Zd,new Sv("[PRIORITY-POST]",MV))}makePost(e,t){const r=RV(e);return new _n(t,new Sv("[PRIORITY-POST]",r))}toString(){return".priority"}},zq=Math.log(2);class qq{constructor(e){this.count=parseInt(Math.log(e+1)/zq,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gS=function(n,e,t,r){n.sort(e);const i=function(p,y){const b=y-p;let S,M;if(0===b)return null;if(1===b)return S=n[p],M=t?t(S):S,new cl(M,S.node,cl.BLACK,null,null);{const U=parseInt(b/2,10)+p,z=i(p,U),te=i(U+1,y);return S=n[U],M=t?t(S):S,new cl(M,S.node,cl.BLACK,z,te)}},h=function(p){let y=null,b=null,S=n.length;const M=function(z,te){const ne=S-z,Fe=S;S-=z;const qe=i(ne+1,Fe),Be=n[ne],Ue=t?t(Be):Be;U(new cl(Ue,Be.node,te,null,qe))},U=function(z){y?(y.left=z,y=z):(b=z,y=z)};for(let z=0;z<p.count;++z){const te=p.nextBitIsOne(),ne=Math.pow(2,p.count-(z+1));te?M(ne,cl.BLACK):(M(ne,cl.BLACK),M(ne,cl.RED))}return b}(new qq(n.length));return new So(r||e,h)};let Fk;const Av={};class Kd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,V.hu)(Av&&pr,"ChildrenNode.ts has not been loaded"),Fk=Fk||new Kd({".priority":Av},{".priority":pr}),Fk}get(e){const t=(0,V.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof So?t:null}hasIndex(e){return(0,V.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,V.hu)(e!==wc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(_n.Wrap);let h,u=o.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();h=i?gS(r,e.getCompare()):Av;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const b=Object.assign({},this.indexes_);return b[p]=h,new Kd(b,y)}addToIndexes(e,t){const r=(0,V.UI)(this.indexes_,(i,o)=>{const u=(0,V.DV)(this.indexSet_,o);if((0,V.hu)(u,"Missing index implementation for "+o),i===Av){if(u.isDefinedOn(e.node)){const h=[],p=t.getIterator(_n.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),gS(h,u.getCompare())}return Av}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new _n(e.name,h))),p.insert(e,e.node)}});return new Kd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,V.UI)(this.indexes_,i=>{if(i===Av)return i;{const o=t.get(e.name);return o?i.remove(new _n(e.name,o)):i}});return new Kd(r,this.indexSet_)}}let hb,un=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&AV(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hb||(hb=new n(new So(Ok),null,Kd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?hb:r}}getChild(t){const r=pn(t);return null===r?this:this.getImmediateChild(r).getChild(ur(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,V.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new _n(t,r);let o,u;r.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?hb:this.priorityNode_;return new n(o,h,u)}}updateChild(t,r){const i=pn(t);if(null===i)return r;{(0,V.hu)(".priority"!==pn(t)||1===pp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(ur(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,u=!0;if(this.forEachChild(pr,(h,p)=>{r[h]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):u=!1}),!t&&u&&o<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+SV(this.getPriority().val())+":"),this.forEachChild(pr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":$2(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const u=o.getPredecessorKey(new _n(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new _n(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new _n(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,_n.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,_n.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fb?-1:0}withIndex(t){if(t===wc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===wc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(pr),o=r.getIterator(pr);let u=i.getNext(),h=o.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=o.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===wc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const fb=new class Wq extends un{constructor(){super(new So(Ok),un.EMPTY_NODE,Kd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return un.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(_n,{MIN:{value:new _n(hp,un.EMPTY_NODE)},MAX:{value:new _n(Zd,fb)}}),TV.__EMPTY_NODE=un.EMPTY_NODE,Sv.__childrenNodeConstructor=un,function jq(n){Pk=n}(fb),function Hq(n){MV=n}(fb);const Zq=!0;function qr(n,e=null){if(null===n)return un.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,V.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Sv(n,qr(e));if(n instanceof Array||!Zq){let t=un.EMPTY_NODE;return is(n,(r,i)=>{if((0,V.r3)(n,r)&&"."!==r.substring(0,1)){const o=qr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(qr(e))}{const t=[];let r=!1;if(is(n,(u,h)=>{if("."!==u.substring(0,1)){const p=qr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new _n(u,p)))}}),0===t.length)return un.EMPTY_NODE;const o=gS(t,Bq,u=>u.name,Ok);if(r){const u=gS(t,pr.getCompare());return new un(o,qr(e),new Kd({".priority":u},{".priority":pr}))}return new un(o,qr(e),Kd.Default)}}!function $q(n){RV=n}(qr);class Lk extends hS{constructor(e){super(),this.indexPath_=e,(0,V.hu)(!gn(e)&&".priority"!==pn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Um(e.name,t.name):o}makePost(e,t){const r=qr(e),i=un.EMPTY_NODE.updateChild(this.indexPath_,r);return new _n(t,i)}maxPost(){const e=un.EMPTY_NODE.updateChild(this.indexPath_,fb);return new _n(Zd,e)}toString(){return cb(this.indexPath_,0).join("/")}}const Vk=new class Kq extends hS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Um(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return _n.MIN}maxPost(){return _n.MAX}makePost(e,t){const r=qr(e);return new _n(t,r)}toString(){return".value"}};function NV(n){return{type:"value",snapshotNode:n}}function xv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function pb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function gb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Uk{constructor(e){this.index_=e}updateChild(e,t,r,i,o,u){(0,V.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(pb(t,h)):(0,V.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(xv(t,r)):u.trackChildChange(gb(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(pr,(i,o)=>{t.hasChild(i)||r.trackChildChange(pb(i,o))}),t.isLeafNode()||t.forEachChild(pr,(i,o)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(o)||r.trackChildChange(gb(i,o,u))}else r.trackChildChange(xv(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?un.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class mb{constructor(e){this.indexedFilter_=new Uk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mb.getStartPost_(e),this.endPost_=mb.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,u){return this.matches(new _n(t,r))||(r=un.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=un.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(un.EMPTY_NODE);const o=this;return t.forEachChild(pr,(u,h)=>{o.matches(new _n(u,h))||(i=i.updateImmediateChild(u,un.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Qq{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new mb(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,u){return this.rangedFilter_.matches(new _n(t,r))||(r=un.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,u):this.fullLimitUpdateChild_(e,t,r,o,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=un.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=un.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),u++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(un.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let u=0;for(;o.hasNext();){const h=o.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:i=i.updateImmediateChild(h.name,un.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let u;if(this.reverse_){const S=this.index_.getCompare();u=(M,U)=>S(U,M)}else u=this.index_.getCompare();const h=e;(0,V.hu)(h.numChildren()===this.limit_,"");const p=new _n(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(p);if(h.hasChild(t)){const S=h.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===t||h.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const U=null==M?1:u(M,p);if(b&&!r.isEmpty()&&U>=0)return o?.trackChildChange(gb(t,r,S)),h.updateImmediateChild(t,r);{o?.trackChildChange(pb(t,S));const te=h.updateImmediateChild(t,un.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(o?.trackChildChange(xv(M.name,M.node)),te.updateImmediateChild(M.name,M.node)):te}}return r.isEmpty()?e:b&&u(y,p)>=0?(null!=o&&(o.trackChildChange(pb(y.name,y.node)),o.trackChildChange(xv(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,un.EMPTY_NODE)):e}}class mS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pr}copy(){const e=new mS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Bk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function jk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function _S(n,e){const t=n.copy();return t.index_=e,t}function kV(n){const e={};if(n.isDefault())return e;let t;if(n.index_===pr?t="$priority":n.index_===Vk?t="$value":n.index_===wc?t="$key":((0,V.hu)(n.index_ instanceof Lk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,V.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,V.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,V.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,V.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,V.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function OV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==pr&&(e.i=n.index_.toString()),e}class yS extends yV{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ob("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,V.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=yS.getListenId_(e,r),h={};this.listens_[u]=h;const p=kV(e._queryParams);this.restRequest_(o+".json",p,(y,b)=>{let S=b;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(o,S,!1,r),(0,V.DV)(this.listens_,u)===h){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(M,null)}})}unlisten(e,t){const r=yS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=kV(e._queryParams),r=e._path.toString(),i=new V.BH;return this.restRequest_(r+".json",t,(o,u)=>{let h=u;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,V.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,V.cI)(h.responseText)}catch{As("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&As("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class rW{constructor(){this.rootNode_=un.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function vS(){return{value:null,children:new Map}}function Rv(n,e,t){if(gn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=pn(e);n.children.has(r)||n.children.set(r,vS()),Rv(n.children.get(r),e=ur(e),t)}}function $k(n,e){if(gn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(pr,(r,i)=>{Rv(n,new Ln(r),i)}),$k(n,e)}}if(n.children.size>0){const t=pn(e);return e=ur(e),n.children.has(t)&&$k(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Hk(n,e,t){null!==n.value?t(e,n.value):function iW(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Hk(i,new Ln(e.toString()+"/"+r),t)})}class sW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&is(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class uW{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new sW(e);const r=1e4+2e4*Math.random();ub(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;is(e,(i,o)=>{o>0&&(0,V.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),ub(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var uu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(uu||(uu={})),uu))();function qk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class wS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=uu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(gn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ln(e));return new wS(Mn(),t,this.revert)}}return(0,V.hu)(pn(this.path)===e,"operationForChild called for unrelated child."),new wS(ur(this.path),this.affectedTree,this.revert)}}class _b{constructor(e,t){this.source=e,this.path=t,this.type=uu.LISTEN_COMPLETE}operationForChild(e){return gn(this.path)?new _b(this.source,Mn()):new _b(this.source,ur(this.path))}}class $m{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=uu.OVERWRITE}operationForChild(e){return gn(this.path)?new $m(this.source,Mn(),this.snap.getImmediateChild(e)):new $m(this.source,ur(this.path),this.snap)}}class Mv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=uu.MERGE}operationForChild(e){if(gn(this.path)){const t=this.children.subtree(new Ln(e));return t.isEmpty()?null:t.value?new $m(this.source,Mn(),t.value):new Mv(this.source,Mn(),t)}return(0,V.hu)(pn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Mv(this.source,ur(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(gn(e))return this.isFullyInitialized()&&!this.filtered_;const t=pn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class lW{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yb(n,e,t,r,i,o){const u=r.filter(h=>h.type===t);u.sort((h,p)=>function hW(n,e,t){if(null==e.childName||null==t.childName)throw(0,V.g5)("Should only compare child_ events.");const r=new _n(e.childName,e.snapshotNode),i=new _n(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),u.forEach(h=>{const p=function dW(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function ES(n,e){return{eventCache:n,serverCache:e}}function vb(n,e,t,r){return ES(new gp(e,t,r),n.serverCache)}function FV(n,e,t,r){return ES(n.eventCache,new gp(e,t,r))}function bS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Hm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Wk;class gr{constructor(e,t=(()=>(Wk||(Wk=new So(Yz)),Wk))()){this.value=e,this.children=t}static fromObject(e){let t=new gr(null);return is(e,(r,i)=>{t=t.set(new Ln(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(gn(e))return null;{const r=pn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(ur(e),t);return null!=o?{path:Vr(new Ln(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(gn(e))return this;{const t=pn(e),r=this.children.get(t);return null!==r?r.subtree(ur(e)):new gr(null)}}set(e,t){if(gn(e))return new gr(t,this.children);{const r=pn(e),o=(this.children.get(r)||new gr(null)).set(ur(e),t),u=this.children.insert(r,o);return new gr(this.value,u)}}remove(e){if(gn(e))return this.children.isEmpty()?new gr(null):new gr(null,this.children);{const t=pn(e),r=this.children.get(t);if(r){const i=r.remove(ur(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new gr(null):new gr(this.value,o)}return this}}get(e){if(gn(e))return this.value;{const t=pn(e),r=this.children.get(t);return r?r.get(ur(e)):null}}setTree(e,t){if(gn(e))return t;{const r=pn(e),o=(this.children.get(r)||new gr(null)).setTree(ur(e),t);let u;return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new gr(this.value,u)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(gn(e))return null;{const o=pn(e),u=this.children.get(o);return u?u.findOnPath_(ur(e),Vr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,r){if(gn(e))return this;{this.value&&r(t,this.value);const i=pn(e),o=this.children.get(i);return o?o.foreachOnPath_(ur(e),Vr(t,i),r):new gr(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class dl{constructor(e){this.writeTree_=e}static empty(){return new dl(new gr(null))}}function wb(n,e,t){if(gn(e))return new dl(new gr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const u=Js(i,e);return o=o.updateChild(u,t),new dl(n.writeTree_.set(i,o))}{const i=new gr(t),o=n.writeTree_.setTree(e,i);return new dl(o)}}}function Zk(n,e,t){let r=n;return is(t,(i,o)=>{r=wb(r,Vr(e,i),o)}),r}function LV(n,e){if(gn(e))return dl.empty();{const t=n.writeTree_.setTree(e,new gr(null));return new dl(t)}}function Kk(n,e){return null!=Gm(n,e)}function Gm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Js(t.path,e)):null}function VV(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(pr,(r,i)=>{e.push(new _n(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new _n(r,i.value))}),e}function mp(n,e){if(gn(e))return n;{const t=Gm(n,e);return new dl(null!=t?new gr(t):n.writeTree_.subtree(e))}}function Yk(n){return n.writeTree_.isEmpty()}function Nv(n,e){return UV(Mn(),n.writeTree_,e)}function UV(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,V.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=UV(Vr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Vr(n,".priority"),r)),t}}function IS(n,e){return GV(e,n)}function yW(n,e){if(n.snap)return au(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&au(Vr(n.path,t),e))return!0;return!1}function wW(n){return n.visible}function BV(n,e,t){let r=dl.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const u=o.path;let h;if(o.snap)au(t,u)?(h=Js(t,u),r=wb(r,h,o.snap)):au(u,t)&&(h=Js(u,t),r=wb(r,Mn(),o.snap.getChild(h)));else{if(!o.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(au(t,u))h=Js(t,u),r=Zk(r,h,o.children);else if(au(u,t))if(h=Js(u,t),gn(h))r=Zk(r,Mn(),o.children);else{const p=(0,V.DV)(o.children,pn(h));if(p){const y=p.getChild(ur(h));r=wb(r,Mn(),y)}}}}}return r}function jV(n,e,t,r,i){if(r||i){const o=mp(n.visibleWrites,e);return!i&&Yk(o)?t:i||null!=t||Kk(o,Mn())?Nv(BV(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(au(y.path,e)||au(e,y.path))},e),t||un.EMPTY_NODE):null}{const o=Gm(n.visibleWrites,e);if(null!=o)return o;{const u=mp(n.visibleWrites,e);return Yk(u)?t:null!=t||Kk(u,Mn())?Nv(u,t||un.EMPTY_NODE):null}}}function CS(n,e,t,r){return jV(n.writeTree,n.treePath,e,t,r)}function Qk(n,e){return function EW(n,e,t){let r=un.EMPTY_NODE;const i=Gm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pr,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=mp(n.visibleWrites,e);return t.forEachChild(pr,(u,h)=>{const p=Nv(mp(o,new Ln(u)),h);r=r.updateImmediateChild(u,p)}),VV(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return VV(mp(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function $V(n,e,t,r){return function bW(n,e,t,r,i){(0,V.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Vr(e,t);if(Kk(n.visibleWrites,o))return null;{const u=mp(n.visibleWrites,o);return Yk(u)?i.getChild(t):Nv(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function DS(n,e){return function CW(n,e){return Gm(n.visibleWrites,e)}(n.writeTree,Vr(n.treePath,e))}function Jk(n,e,t){return function IW(n,e,t,r){const i=Vr(e,t),o=Gm(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?Nv(mp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function HV(n,e){return GV(Vr(n.treePath,e),n.writeTree)}function GV(n,e){return{treePath:n,writeTree:e}}class AW{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,V.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,gb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,pb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,xv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,V.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,gb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const zV=new class xW{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Xk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Jk(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hm(this.viewCache_),o=function SW(n,e,t,r,i,o){return function DW(n,e,t,r,i,o,u){let h;const p=mp(n.visibleWrites,e),y=Gm(p,Mn());if(null!=y)h=y;else{if(null==t)return[];h=Nv(p,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const b=[],S=u.getCompare(),M=o?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let U=M.getNext();for(;U&&b.length<i;)0!==S(U,r)&&b.push(U),U=M.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function qV(n,e,t,r,i,o){const u=e.eventCache;if(null!=DS(r,t))return e;{let h,p;if(gn(t))if((0,V.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Hm(e),S=Qk(r,y instanceof un?y:un.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,o)}else{const y=CS(r,Hm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=pn(t);if(".priority"===y){(0,V.hu)(1===pp(t),"Can't have a priority with additional path components");const b=u.getNode();p=e.serverCache.getNode();const S=$V(r,t,b,p);h=null!=S?n.filter.updatePriority(b,S):u.getNode()}else{const b=ur(t);let S;if(u.isCompleteForChild(y)){p=e.serverCache.getNode();const M=$V(r,t,u.getNode(),p);S=null!=M?u.getNode().getImmediateChild(y).updateChild(b,M):u.getNode().getImmediateChild(y)}else S=Jk(r,y,e.serverCache);h=null!=S?n.filter.updateChild(u.getNode(),y,S,b,i,o):u.getNode()}}return vb(e,h,u.isFullyInitialized()||gn(t),n.filter.filtersNodes())}}function TS(n,e,t,r,i,o,u,h){const p=e.serverCache;let y;const b=u?n.filter:n.filter.getIndexedFilter();if(gn(t))y=b.updateFullNode(p.getNode(),r,null);else if(b.filtersNodes()&&!p.isFiltered()){const U=p.getNode().updateChild(t,r);y=b.updateFullNode(p.getNode(),U,null)}else{const U=pn(t);if(!p.isCompleteForPath(t)&&pp(t)>1)return e;const z=ur(t),ne=p.getNode().getImmediateChild(U).updateChild(z,r);y=".priority"===U?b.updatePriority(p.getNode(),ne):b.updateChild(p.getNode(),U,ne,z,zV,null)}const S=FV(e,y,p.isFullyInitialized()||gn(t),b.filtersNodes());return qV(n,S,t,i,new Xk(i,S,o),h)}function e1(n,e,t,r,i,o,u){const h=e.eventCache;let p,y;const b=new Xk(i,e,o);if(gn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=vb(e,y,!0,n.filter.filtersNodes());else{const S=pn(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=vb(e,y,h.isFullyInitialized(),h.isFiltered());else{const M=ur(t),U=h.getNode().getImmediateChild(S);let z;if(gn(M))z=r;else{const te=b.getCompleteChild(S);z=null!=te?".priority"===Mk(M)&&te.getChild(bV(M)).isEmpty()?te:te.updateChild(M,r):un.EMPTY_NODE}p=U.equals(z)?e:vb(e,n.filter.updateChild(h.getNode(),S,z,M,b,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function WV(n,e){return n.eventCache.isCompleteForChild(e)}function ZV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function t1(n,e,t,r,i,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=gn(t)?r:new gr(null).setTree(t,r);const b=e.serverCache.getNode();return y.children.inorderTraversal((S,M)=>{if(b.hasChild(S)){const z=ZV(0,e.serverCache.getNode().getImmediateChild(S),M);p=TS(n,p,new Ln(S),z,i,o,u,h)}}),y.children.inorderTraversal((S,M)=>{const U=!e.serverCache.isCompleteForChild(S)&&null===M.value;if(!b.hasChild(S)&&!U){const te=ZV(0,e.serverCache.getNode().getImmediateChild(S),M);p=TS(n,p,new Ln(S),te,i,o,u,h)}}),p}class VW{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Uk(r.getIndex()),o=function Jq(n){return n.loadsAllData()?new Uk(n.getIndex()):n.hasLimit()?new Qq(n):new mb(n)}(r);this.processor_=function RW(n){return{filter:n}}(o);const u=t.serverCache,h=t.eventCache,p=i.updateFullNode(un.EMPTY_NODE,u.getNode(),null),y=o.updateFullNode(un.EMPTY_NODE,h.getNode(),null),b=new gp(p,u.isFullyInitialized(),i.filtersNodes()),S=new gp(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=ES(S,b),this.eventGenerator_=new lW(this.query_)}get query(){return this.query_}}function jW(n,e){const t=Hm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!gn(e)&&!t.getImmediateChild(pn(e)).isEmpty())?t.getChild(e):null}function KV(n){return 0===n.eventRegistrations_.length}function YV(n,e,t){const r=[];if(t){(0,V.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function QV(n,e,t,r){e.type===uu.MERGE&&null!==e.source.queryId&&((0,V.hu)(Hm(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(bS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function NW(n,e,t,r,i){const o=new AW;let u,h;if(t.type===uu.OVERWRITE){const y=t;y.source.fromUser?u=e1(n,e,y.path,y.snap,r,i,o):((0,V.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!gn(y.path),u=TS(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===uu.MERGE){const y=t;y.source.fromUser?u=function OW(n,e,t,r,i,o,u){let h=e;return r.foreach((p,y)=>{const b=Vr(t,p);WV(e,pn(b))&&(h=e1(n,h,b,y,i,o,u))}),r.foreach((p,y)=>{const b=Vr(t,p);WV(e,pn(b))||(h=e1(n,h,b,y,i,o,u))}),h}(n,e,y.path,y.children,r,i,o):((0,V.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=t1(n,e,y.path,y.children,r,i,h,o))}else if(t.type===uu.ACK_USER_WRITE){const y=t;u=y.revert?function LW(n,e,t,r,i,o){let u;if(null!=DS(r,t))return e;{const h=new Xk(r,e,i),p=e.eventCache.getNode();let y;if(gn(t)||".priority"===pn(t)){let b;if(e.serverCache.isFullyInitialized())b=CS(r,Hm(e));else{const S=e.serverCache.getNode();(0,V.hu)(S instanceof un,"serverChildren would be complete if leaf node"),b=Qk(r,S)}y=n.filter.updateFullNode(p,b,o)}else{const b=pn(t);let S=Jk(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=p.getImmediateChild(b)),y=null!=S?n.filter.updateChild(p,b,S,ur(t),h,o):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,un.EMPTY_NODE,ur(t),h,o):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=CS(r,Hm(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=DS(r,Mn()),vb(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function PW(n,e,t,r,i,o,u){if(null!=DS(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(gn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return TS(n,e,t,p.getNode().getChild(t),i,o,h,u);if(gn(t)){let y=new gr(null);return p.getNode().forEachChild(wc,(b,S)=>{y=y.set(new Ln(b),S)}),t1(n,e,t,y,i,o,h,u)}return e}{let y=new gr(null);return r.foreach((b,S)=>{const M=Vr(t,b);p.isCompleteForPath(M)&&(y=y.set(b,p.getNode().getChild(M)))}),t1(n,e,t,y,i,o,h,u)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==uu.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+t.type);u=function FW(n,e,t,r,i){const o=e.serverCache;return qV(n,FV(e,o.getNode(),o.isFullyInitialized()||gn(t),o.isFiltered()),t,r,zV,i)}(n,e,t.path,r,o)}const p=o.getChanges();return function kW(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=bS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(NV(bS(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function MW(n,e){(0,V.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,V.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,JV(n,o.changes,o.viewCache.eventCache.getNode(),null)}function JV(n,e,t,r){return function cW(n,e,t,r){const i=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function Yq(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),yb(n,i,"child_removed",e,r,t),yb(n,i,"child_added",e,r,t),yb(n,i,"child_moved",o,r,t),yb(n,i,"child_changed",e,r,t),yb(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let SS,xS;class XV{constructor(){this.views=new Map}}function n1(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,V.hu)(null!=o,"SyncTree gave us an op for an invalid query."),QV(o,e,t,r)}{let o=[];for(const u of n.views.values())o=o.concat(QV(u,e,t,r));return o}}function eU(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=CS(t,i?r:null),p=!1;h?p=!0:r instanceof un?(h=Qk(t,r),p=!1):(h=un.EMPTY_NODE,p=!1);const y=ES(new gp(h,p,!1),new gp(r,i,!1));return new VW(e,y)}return u}function tU(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function _p(n,e){let t=null;for(const r of n.views.values())t=t||jW(r,e);return t}function nU(n,e){return e._queryParams.loadsAllData()?AS(n):n.views.get(e._queryIdentifier)}function rU(n,e){return null!=nU(n,e)}function yp(n){return null!=AS(n)}function AS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let QW=1;class iU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gr(null),this.pendingWriteTree_=function TW(){return{visibleWrites:dl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function r1(n,e,t,r,i){return function pW(n,e,t,r,i){(0,V.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=wb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?kv(n,new $m({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function vp(n,e,t=!1){const r=function mW(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function _W(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,V.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&yW(h,r.path)?i=!1:au(r.path,h.path)&&(o=!0)),u--}return!!i&&(o?(function vW(n){n.visibleWrites=BV(n.allWrites,wW,Mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=LV(n.visibleWrites,r.path):is(r.children,p=>{n.visibleWrites=LV(n.visibleWrites,Vr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let o=new gr(null);return null!=r.snap?o=o.set(Mn(),!0):is(r.children,u=>{o=o.set(new Ln(u),!0)}),kv(n,new wS(r.path,o,t))}return[]}function Eb(n,e,t){return kv(n,new $m({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function RS(n,e,t,r,i=!1){const o=e._path,u=n.syncPointTree_.get(o);let h=[];if(u&&("default"===e._queryIdentifier||rU(u,e))){const p=function ZW(n,e,t,r){const i=e._queryIdentifier,o=[];let u=[];const h=yp(n);if("default"===i)for(const[p,y]of n.views.entries())u=u.concat(YV(y,t,r)),KV(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||o.push(y.query));else{const p=n.views.get(i);p&&(u=u.concat(YV(p,t,r)),KV(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||o.push(p.query)))}return h&&!yp(n)&&o.push(new(function zW(){return(0,V.hu)(SS,"Reference.ts has not been loaded"),SS}())(e._repo,e._path)),{removed:o,events:u}}(u,e,t,r);(function qW(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;if(h=p.events,!i){const b=-1!==y.findIndex(M=>M._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(M,U)=>yp(U));if(b&&!S){const M=n.syncPointTree_.subtree(o);if(!M.isEmpty()){const U=function i5(n){return n.fold((e,t,r)=>{if(t&&yp(t))return[AS(t)];{let i=[];return t&&(i=tU(t)),is(r,(o,u)=>{i=i.concat(u)}),i}})}(M);for(let z=0;z<U.length;++z){const te=U[z],ne=te.query,Fe=uU(n,te);n.listenProvider_.startListening(Ib(ne),bb(n,ne),Fe.hashFn,Fe.onComplete)}}}!S&&y.length>0&&!r&&(b?n.listenProvider_.stopListening(Ib(e),null):y.forEach(M=>{const U=n.queryToTagMap.get(NS(M));n.listenProvider_.stopListening(Ib(M),U)}))}!function s5(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=NS(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function sU(n,e,t,r){const i=s1(n,r);if(null!=i){const o=o1(i),u=o.path,h=o.queryId,p=Js(u,e);return a1(n,u,new $m(qk(h),p,t))}return[]}function i1(n,e,t,r=!1){const i=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(i,(M,U)=>{const z=Js(M,i);o=o||_p(U,z),u=u||yp(U)});let p,h=n.syncPointTree_.get(i);h?(u=u||yp(h),o=o||_p(h,Mn())):(h=new XV,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=o?p=!0:(p=!1,o=un.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,z)=>{const te=_p(z,Mn());te&&(o=o.updateImmediateChild(U,te))}));const y=rU(h,e);if(!y&&!e._queryParams.loadsAllData()){const M=NS(e);(0,V.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const U=function o5(){return QW++}();n.queryToTagMap.set(M,U),n.tagToQueryMap.set(U,M)}let S=function WW(n,e,t,r,i,o){const u=eU(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function $W(n,e){n.eventRegistrations_.push(e)}(u,t),function HW(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(pr,(o,u)=>{r.push(xv(o,u))}),t.isFullyInitialized()&&r.push(NV(t.getNode())),JV(n,r,t.getNode(),e)}(u,t)}(h,e,t,IS(n.pendingWriteTree_,i),o,p);if(!y&&!u&&!r){const M=nU(h,e);S=S.concat(function a5(n,e,t){const r=e._path,i=bb(n,e),o=uU(n,t),u=n.listenProvider_.startListening(Ib(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,V.hu)(!yp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,b,S)=>{if(!gn(y)&&b&&yp(b))return[AS(b).query];{let M=[];return b&&(M=M.concat(tU(b).map(U=>U.query))),is(S,(U,z)=>{M=M.concat(z)}),M}});for(let y=0;y<p.length;++y){const b=p[y];n.listenProvider_.stopListening(Ib(b),bb(n,b))}}return u}(n,e,M))}return S}function MS(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=_p(h,Js(u,e));if(y)return y});return jV(i,e,o,t,!0)}function kv(n,e){return oU(e,n.syncPointTree_,null,IS(n.pendingWriteTree_,Mn()))}function oU(n,e,t,r){if(gn(n.path))return aU(n,e,t,r);{const i=e.get(Mn());null==t&&null!=i&&(t=_p(i,Mn()));let o=[];const u=pn(n.path),h=n.operationForChild(u),p=e.children.get(u);if(p&&h){const y=t?t.getImmediateChild(u):null,b=HV(r,u);o=o.concat(oU(h,p,y,b))}return i&&(o=o.concat(n1(i,n,r,t))),o}}function aU(n,e,t,r){const i=e.get(Mn());null==t&&null!=i&&(t=_p(i,Mn()));let o=[];return e.children.inorderTraversal((u,h)=>{const p=t?t.getImmediateChild(u):null,y=HV(r,u),b=n.operationForChild(u);b&&(o=o.concat(aU(b,h,p,y)))}),i&&(o=o.concat(n1(i,n,r,t))),o}function uU(n,e){const t=e.query,r=bb(n,t);return{hashFn:()=>(function UW(n){return n.viewCache_.serverCache.getNode()}(e)||un.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function t5(n,e,t){const r=s1(n,t);if(r){const i=o1(r),o=i.path,u=i.queryId,h=Js(o,e);return a1(n,o,new _b(qk(u),h))}return[]}(n,t._path,r):function e5(n,e){return kv(n,new _b({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function Xz(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return RS(n,t,null,o)}}}}function bb(n,e){const t=NS(e);return n.queryToTagMap.get(t)}function NS(n){return n._path.toString()+"$"+n._queryIdentifier}function s1(n,e){return n.tagToQueryMap.get(e)}function o1(n){const e=n.indexOf("$");return(0,V.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ln(n.substr(0,e))}}function a1(n,e,t){const r=n.syncPointTree_.get(e);return(0,V.hu)(r,"Missing sync point for query tag that we're tracking"),n1(r,t,IS(n.pendingWriteTree_,e),null)}function Ib(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function YW(){return(0,V.hu)(xS,"Reference.ts has not been loaded"),xS}())(n._repo,n._path):n}class u1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new u1(t)}node(){return this.node_}}class l1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vr(this.path_,e);return new l1(this.syncTree_,t)}node(){return MS(this.syncTree_,this.path_)}}const u5=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},lU=function(n,e,t){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?l5(n[".sv"],e,t):"object"==typeof n[".sv"]?c5(n[".sv"],e):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},l5=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,V.hu)(!1,"Unexpected server value: "+n)},c5=function(n,e,t){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,V.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,V.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},cU=function(n,e,t,r){return d1(e,new l1(t,n),r)},c1=function(n,e,t){return d1(n,new u1(e),t)};function d1(n,e,t){const r=n.getPriority().val(),i=lU(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=lU(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new Sv(h,qr(i)):n}{const u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new Sv(i))),u.forEachChild(pr,(h,p)=>{const y=d1(p,e.getImmediateChild(h),t);y!==p&&(o=o.updateImmediateChild(h,y))}),o}}class h1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function kS(n,e){let t=e instanceof Ln?e:new Ln(e),r=n,i=pn(t);for(;null!==i;){const o=(0,V.DV)(r.node.children,i)||{children:{},childCount:0};r=new h1(i,r,o),t=ur(t),i=pn(t)}return r}function zm(n){return n.node.value}function f1(n,e){n.node.value=e,p1(n)}function dU(n){return n.node.childCount>0}function OS(n,e){is(n.node.children,(t,r)=>{e(new h1(t,n,r))})}function hU(n,e,t,r){t&&!r&&e(n),OS(n,i=>{hU(i,e,!0,r)}),t&&r&&e(n)}function Cb(n){return new Ln(null===n.parent?n.name:Cb(n.parent)+"/"+n.name)}function p1(n){null!==n.parent&&function f5(n,e,t){const r=function d5(n){return void 0===zm(n)&&!dU(n)}(t),i=(0,V.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,p1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,p1(n))}(n.parent,n.name,n)}const p5=/[\[\].#$\/\u0000-\u001F\u007F]/,g5=/[\[\].#$\u0000-\u001F\u007F]/,g1=10485760,PS=function(n){return"string"==typeof n&&0!==n.length&&!p5.test(n)},fU=function(n){return"string"==typeof n&&0!==n.length&&!g5.test(n)},Db=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!uS(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},Ec=function(n,e,t,r){r&&void 0===e||Tb((0,V.gK)(n,"value"),e,t)},Tb=function(n,e,t){const r=t instanceof Ln?new Nq(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Bm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Bm(r)+" with contents = "+e.toString());if(uS(e))throw new Error(n+"contains "+e.toString()+" "+Bm(r));if("string"==typeof e&&e.length>g1/3&&(0,V.ug)(e)>g1)throw new Error(n+"contains a string greater than "+g1+" utf8 bytes "+Bm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(is(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!PS(u)))throw new Error(n+" contains an invalid key ("+u+") "+Bm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function kq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,V.ug)(e),IV(n)})(r,u),Tb(n,h,r),function Oq(n){const e=n.parts_.pop();n.byteLength_-=(0,V.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Bm(r)+" in addition to actual children.")}},pU=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,V.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];is(e,(u,h)=>{const p=new Ln(u);if(Tb(i,h,Vr(t,p)),".priority"===Mk(p)&&!Db(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=cb(r);for(let u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!PS(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Mq);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&au(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},m1=function(n,e,t){if(!t||void 0!==e){if(uS(e))throw new Error((0,V.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Db(e))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Sb=function(n,e,t,r){if(!(r&&void 0===t||PS(t)))throw new Error((0,V.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ab=function(n,e,t,r){if(!(r&&void 0===t||fU(t)))throw new Error((0,V.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},y5=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ab(n,e,t,r)},lu=function(n,e){if(".info"===pn(e))throw new Error(n+" failed = Can't modify data under /.info/")},gU=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!PS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fU(n)}(t))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class v5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function FS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!Nk(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function mU(n,e,t){FS(n,t),_U(n,r=>Nk(r,e))}function ua(n,e,t){FS(n,t),_U(n,r=>au(r,e)||au(e,r))}function _U(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(w5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function w5(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Vm&&rs("event: "+t.toString()),Dv(r)}}}const yU="repo_interrupt",E5=25;class b5{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new v5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vS(),this.transactionQueueTree_=new h1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vU(n){const t=n.infoData_.getNode(new Ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function xb(n){return u5({timestamp:vU(n)})}function wU(n,e,t,r,i){n.dataUpdateCount++;const o=new Ln(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,V.UI)(t,y=>qr(y));u=function n5(n,e,t,r){const i=s1(n,r);if(i){const o=o1(i),u=o.path,h=o.queryId,p=Js(u,e),y=gr.fromObject(t);return a1(n,u,new Mv(qk(h),p,y))}return[]}(n.serverSyncTree_,o,p,i)}else{const p=qr(t);u=sU(n.serverSyncTree_,o,p,i)}else if(r){const p=(0,V.UI)(t,y=>qr(y));u=function XW(n,e,t){const r=gr.fromObject(t);return kv(n,new Mv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,p)}else{const p=qr(t);u=Eb(n.serverSyncTree_,o,p)}let h=o;u.length>0&&(h=Pv(n,o)),ua(n.eventQueue_,h,u)}function EU(n,e){_1(n,"connected",e),!1===e&&function S5(n){Ov(n,"onDisconnectEvents");const e=xb(n),t=vS();Hk(n.onDisconnect_,Mn(),(i,o)=>{const u=cU(i,o,n.serverSyncTree_,e);Rv(t,i,u)});let r=[];Hk(t,Mn(),(i,o)=>{r=r.concat(Eb(n.serverSyncTree_,i,o));const u=E1(n,i);Pv(n,u)}),n.onDisconnect_=vS(),ua(n.eventQueue_,Mn(),r)}(n)}function _1(n,e,t){const r=new Ln("/.info/"+e),i=qr(t);n.infoData_.updateSnapshot(r,i);const o=Eb(n.infoSyncTree_,r,i);ua(n.eventQueue_,r,o)}function LS(n){return n.nextWriteId_++}function y1(n,e,t,r,i){Ov(n,"set",{path:e.toString(),value:t,priority:r});const o=xb(n),u=qr(t,r),h=MS(n.serverSyncTree_,e),p=c1(u,h,o),y=LS(n),b=r1(n.serverSyncTree_,e,p,y,!0);FS(n.eventQueue_,b),n.server_.put(e.toString(),u.val(!0),(M,U)=>{const z="ok"===M;z||As("set at "+e+" failed: "+M);const te=vp(n.serverSyncTree_,y,!z);ua(n.eventQueue_,e,te),wp(0,i,M,U)});const S=E1(n,e);Pv(n,S),ua(n.eventQueue_,S,[])}function A5(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&$k(n.onDisconnect_,e),wp(0,t,r,i)})}function bU(n,e,t,r){const i=qr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,u)=>{"ok"===o&&Rv(n.onDisconnect_,e,i),wp(0,r,o,u)})}function v1(n,e,t){let r;r=".info"===pn(e._path)?RS(n.infoSyncTree_,e,t):RS(n.serverSyncTree_,e,t),mU(n.eventQueue_,e._path,r)}function IU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(yU)}function Ov(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),rs(t,...e)}function wp(n,e,t,r){e&&Dv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const u=new Error(o);u.code=i,e(u)}})}function w1(n,e,t){return MS(n.serverSyncTree_,e,t)||un.EMPTY_NODE}function VS(n,e=n.transactionQueueTree_){if(e||US(n,e),zm(e)){const t=DU(n,e);(0,V.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function O5(n,e,t){const r=t.map(y=>y.currentWriteId),i=w1(n,e,r);let o=i;const u=i.hash();for(let y=0;y<t.length;y++){const b=t[y];(0,V.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=Js(e,b.path);o=o.updateChild(S,b.currentOutputSnapshotRaw)}const h=o.val(!0),p=e;n.server_.put(p.toString(),h,y=>{Ov(n,"transaction put response",{path:p.toString(),status:y});let b=[];if("ok"===y){const S=[];for(let M=0;M<t.length;M++)t[M].status=2,b=b.concat(vp(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&S.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();US(n,kS(n.transactionQueueTree_,e)),VS(n,n.transactionQueueTree_),ua(n.eventQueue_,e,b);for(let M=0;M<S.length;M++)Dv(S[M])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{As("transaction at "+p.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}Pv(n,e)}},u)}(n,Cb(e),t)}else dU(e)&&OS(e,t=>{VS(n,t)})}function Pv(n,e){const t=CU(n,e),r=Cb(t);return function P5(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=Js(t,p.path);let S,b=!1;if((0,V.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,S=p.abortReason,i=i.concat(vp(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=E5)b=!0,S="maxretry",i=i.concat(vp(n.serverSyncTree_,p.currentWriteId,!0));else{const M=w1(n,p.path,u);p.currentInputSnapshot=M;const U=e[h].update(M.val());if(void 0!==U){Tb("transaction failed: Data returned ",U,p.path);let z=qr(U);"object"==typeof U&&null!=U&&(0,V.r3)(U,".priority")||(z=z.updatePriority(M.getPriority()));const ne=p.currentWriteId,Fe=xb(n),qe=c1(z,M,Fe);p.currentOutputSnapshotRaw=z,p.currentOutputSnapshotResolved=qe,p.currentWriteId=LS(n),u.splice(u.indexOf(ne),1),i=i.concat(r1(n.serverSyncTree_,p.path,qe,p.currentWriteId,p.applyLocally)),i=i.concat(vp(n.serverSyncTree_,ne,!0))}else b=!0,S="nodata",i=i.concat(vp(n.serverSyncTree_,p.currentWriteId,!0))}ua(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}US(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Dv(r[h]);VS(n,n.transactionQueueTree_)}(n,DU(n,t),r),r}function CU(n,e){let t,r=n.transactionQueueTree_;for(t=pn(e);null!==t&&void 0===zm(r);)r=kS(r,t),t=pn(e=ur(e));return r}function DU(n,e){const t=[];return TU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function TU(n,e,t){const r=zm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);OS(e,i=>{TU(n,i,t)})}function US(n,e){const t=zm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,f1(e,t.length>0?t:void 0)}OS(e,r=>{US(n,r)})}function E1(n,e){const t=Cb(CU(n,e)),r=kS(n.transactionQueueTree_,e);return function h5(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{b1(n,i)}),b1(n,r),hU(r,i=>{b1(n,i)}),t}function b1(n,e){const t=zm(e);if(t){const r=[];let i=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,V.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,V.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(vp(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?f1(e,void 0):t.length=o+1,ua(n.eventQueue_,Cb(e),i);for(let u=0;u<r.length;u++)Dv(r[u])}}const I1=function(n,e){const t=V5(n),r=t.namespace;return"firebase.com"===t.domain&&vc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&vc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&As("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Dk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ln(t.pathString)}},V5=function(n){let e="",t="",r="",i="",o="",u=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function F5(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const M=function L5(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):As(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const U=e.slice(0,y);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),o=r}"ns"in M&&(o=M.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:o}},SU="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",U5=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=SU.charAt(t%64),t=Math.floor(t/64);(0,V.hu)(0===t,"Cannot push at time == 0");let u=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=SU.charAt(e[i]);return(0,V.hu)(20===u.length,"nextPushId: Length should be 20."),u}}();class AU{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class xU{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class C1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class RU{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new V.BH;return A5(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){lu("OnDisconnect.remove",this._path);const e=new V.BH;return bU(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){lu("OnDisconnect.set",this._path),Ec("OnDisconnect.set",e,this._path,!1);const t=new V.BH;return bU(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){lu("OnDisconnect.setWithPriority",this._path),Ec("OnDisconnect.setWithPriority",e,this._path,!1),m1("OnDisconnect.setWithPriority",t,!1);const r=new V.BH;return function x5(n,e,t,r,i){const o=qr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,h)=>{"ok"===u&&Rv(n.onDisconnect_,e,o),wp(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){lu("OnDisconnect.update",this._path),pU("OnDisconnect.update",e,this._path,!1);const t=new V.BH;return function R5(n,e,t,r){if((0,V.xb)(t))return rs("onDisconnect().update() called with empty data.  Don't do anything."),void wp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&is(t,(u,h)=>{const p=qr(h);Rv(n.onDisconnect_,Vr(e,u),p)}),wp(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ao{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return gn(this._path)?null:Mk(this._path)}get ref(){return new cu(this._repo,this._path)}get _queryIdentifier(){const e=OV(this._queryParams),t=Ik(e);return"{}"===t?"default":t}get _queryObject(){return OV(this._queryParams)}isEqual(e){if(!((e=(0,V.m9)(e))instanceof Ao))return!1;const t=this._repo===e._repo,r=Nk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Rq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function BS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ep(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===wc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==hp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Zd)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===pr){if(null!=e&&!Db(e)||null!=t&&!Db(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof Lk||n.getIndex()===Vk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class cu extends Ao{constructor(e,t){super(e,t,new mS,!1)}get parent(){const e=bV(this._path);return null===e?null:new cu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class qm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ln(e),r=Wm(this.ref,e);return new qm(this._node.getChild(t),r,pr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new qm(i,Wm(this.ref,r),pr)))}hasChild(e){const t=new Ln(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function MU(n,e){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==e?Wm(n._root,e):n._root}function NU(n,e){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const t=I1(e,n._repo.repoInfo_.nodeAdmin);gU("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&vc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),MU(n,t.path.toString())}function Wm(n,e){return null===pn((n=(0,V.m9)(n))._path)?y5("child","path",e,!1):Ab("child","path",e,!1),new cu(n._repo,Vr(n._path,e))}function D1(n,e){n=(0,V.m9)(n),lu("set",n._path),Ec("set",e,n._path,!1);const t=new V.BH;return y1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function G5(n,e){pU("update",e,n._path,!1);const t=new V.BH;return function T5(n,e,t,r){Ov(n,"update",{path:e.toString(),value:t});let i=!0;const o=xb(n),u={};if(is(t,(h,p)=>{i=!1,u[h]=cU(Vr(e,h),qr(p),n.serverSyncTree_,o)}),i)rs("update() called with empty data.  Don't do anything."),wp(0,r,"ok",void 0);else{const h=LS(n),p=function JW(n,e,t,r){!function gW(n,e,t,r){(0,V.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Zk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=gr.fromObject(t);return kv(n,new Mv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);FS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,b)=>{const S="ok"===y;S||As("update at "+e+" failed: "+y);const M=vp(n.serverSyncTree_,h,!S),U=M.length>0?Pv(n,e):e;ua(n.eventQueue_,U,M),wp(0,r,y,b)}),is(t,y=>{const b=E1(n,Vr(e,y));Pv(n,b)}),ua(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function z5(n){n=(0,V.m9)(n);const e=new C1(()=>{}),t=new Rb(e);return function D5(n,e,t){const r=function r5(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,b)=>{const S=Js(y,t);r=r||_p(b,S)});let i=n.syncPointTree_.get(t);i?r=r||_p(i,Mn()):(i=new XV,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,u=o?new gp(r,!0,!1):null;return function BW(n){return bS(n.viewCache_)}(eU(i,e,IS(n.pendingWriteTree_,e._path),o?u.getNode():un.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=qr(i).withIndex(e._queryParams.getIndex());let u;if(i1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=Eb(n.serverSyncTree_,e._path,o);else{const h=bb(n.serverSyncTree_,e);u=sU(n.serverSyncTree_,e._path,o,h)}return ua(n.eventQueue_,e._path,u),RS(n.serverSyncTree_,e,t,null,!0),o},i=>(Ov(n,"get for query "+(0,V.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new qm(r,new cu(n._repo,n._path),n._queryParams.getIndex()))}class Rb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new AU("value",this,new qm(e.snapshotNode,new cu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xU(this,e,t):null}matches(e){return e instanceof Rb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class $S{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xU(this,e,t):null}createEvent(e,t){(0,V.hu)(null!=e.childName,"Child events should have a childName.");const r=Wm(new cu(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new AU(e.type,this,new qm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof $S&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Mb(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const p=t,y=(b,S)=>{v1(n._repo,n,h),p(b,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new C1(t,o||void 0),h="value"===e?new Rb(u):new $S(e,u);return function M5(n,e,t){let r;r=".info"===pn(e._path)?i1(n.infoSyncTree_,e,t):i1(n.serverSyncTree_,e,t),mU(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>v1(n._repo,n,h)}function T1(n,e,t,r){return Mb(n,"value",e,t,r)}function kU(n,e,t,r){return Mb(n,"child_added",e,t,r)}function OU(n,e,t,r){return Mb(n,"child_changed",e,t,r)}function PU(n,e,t,r){return Mb(n,"child_moved",e,t,r)}function FU(n,e,t,r){return Mb(n,"child_removed",e,t,r)}function LU(n,e,t){let r=null;const i=t?new C1(t):null;"value"===e?r=new Rb(i):e&&(r=new $S(e,i)),v1(n._repo,n,r)}class hl{}class VU extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ec("endAt",this._value,e._path,!0);const t=jk(e._queryParams,this._value,this._key);if(jS(t),Ep(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class W5 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ec("endBefore",this._value,e._path,!1);const t=function nW(n,e,t){let r;return r=jk(n,e,n.index_===wc||t?t:hp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(jS(t),Ep(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class UU extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ec("startAt",this._value,e._path,!0);const t=Bk(e._queryParams,this._value,this._key);if(jS(t),Ep(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class Y5 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ec("startAfter",this._value,e._path,!1);const t=function tW(n,e,t){let r;return r=Bk(n,e,n.index_===wc||t?t:Zd),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jS(t),Ep(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class J5 extends hl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function Xq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class e9 extends hl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function eW(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class n9 extends hl{constructor(e){super(),this._path=e}_apply(e){BS(e,"orderByChild");const t=new Ln(this._path);if(gn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Lk(t),i=_S(e._queryParams,r);return Ep(i),new Ao(e._repo,e._path,i,!0)}}class i9 extends hl{_apply(e){BS(e,"orderByKey");const t=_S(e._queryParams,wc);return Ep(t),new Ao(e._repo,e._path,t,!0)}}class o9 extends hl{_apply(e){BS(e,"orderByPriority");const t=_S(e._queryParams,pr);return Ep(t),new Ao(e._repo,e._path,t,!0)}}class u9 extends hl{_apply(e){BS(e,"orderByValue");const t=_S(e._queryParams,Vk);return Ep(t),new Ao(e._repo,e._path,t,!0)}}class c9 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ec("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new VU(this._value,this._key)._apply(new UU(this._value,this._key)._apply(e))}}function fl(n,...e){let t=(0,V.m9)(n);for(const r of e)t=r._apply(t);return t}(function GW(n){(0,V.hu)(!SS,"__referenceConstructor has already been defined"),SS=n})(cu),function KW(n){(0,V.hu)(!xS,"__referenceConstructor has already been defined"),xS=n}(cu);const h9="FIREBASE_DATABASE_EMULATOR_HOST",S1={};let BU=!1;function jU(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||vc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rs("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=I1(o,i),h=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env[h9]),y?(p=!0,o=`http://${y}?ns=${h.namespace}`,u=I1(o,i),h=u.repoInfo):p=!u.repoInfo.secure;const b=i&&p?new lb(lb.OWNER):new sq(n.name,n.options,e);gU("Invalid Firebase Database URL",u),gn(u.path)||vc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function g9(n,e,t,r){let i=S1[e.name];i||(i={},S1[e.name]=i);let o=i[n.toURLString()];return o&&vc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new b5(n,BU,t,r),i[n.toURLString()]=o,o}(h,n,b,new iq(n.name,t));return new _9(S,n)}class _9{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function I5(n,e,t){if(n.stats_=Ak(n.repoInfo_),n.forceRestClient_||rq())n.server_=new yS(n.repoInfo_,(r,i,o,u)=>{wU(n,r,i,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>EU(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new jm(n.repoInfo_,e,(r,i,o,u)=>{wU(n,r,i,o,u)},r=>{EU(n,r)},r=>{!function C5(n,e){is(e,(t,r)=>{_1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function uq(n,e){const t=n.toString();return Sk[t]||(Sk[t]=e()),Sk[t]}(n.repoInfo_,()=>new uW(n.stats_,n.server_)),n.infoData_=new rW,n.infoSyncTree_=new iU({startListening:(r,i,o,u)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=Eb(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),_1(n,"connected",!1),n.serverSyncTree_=new iU({startListening:(r,i,o,u)=>(n.server_.listen(r,o,i,(h,p)=>{const y=u(h,p);ua(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cu(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function p9(n,e){const t=S1[e];(!t||t[n.key]!==n)&&vc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),IU(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&vc("Cannot call "+e+" on a deleted database.")}}function $U(){cV.IS_TRANSPORT_INITIALIZED&&As("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function y9(){$U(),fp.forceDisallow()}function v9(){$U(),Tv.forceDisallow(),fp.forceAllow()}function b9(n,e){G2(n,e)}const C9={".sv":"timestamp"};class S9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}jm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},jm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function I9(n){U2(Pi.SDK_VERSION),(0,Pi._registerComponent)(new wo.wA("database",(e,{instanceIdentifier:t})=>jU(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(L2,"0.14.4",n),(0,Pi.registerVersion)(L2,"0.14.4","esm2017")}();const M9=new Es.Yd("@firebase/database-compat"),GU=function(n){M9.warn("FIREBASE WARNING: "+n)};class O9{constructor(e){this._delegate=e}cancel(e){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,GU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class P9{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class bp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Ab("DataSnapshot.child","path",e,!1),new bp(this._database,this._delegate.child(e))}hasChild(e){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ab("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new bp(this._database,t)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new la(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class hs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",t,!1);const u=hs.getCancelAndContextArgs_("Query.on",r,i),h=(y,b)=>{t.call(u.context,new bp(this.database,y),b)};h.userCallback=t,h.context=u.context;const p=null===(o=u.cancel)||void 0===o?void 0:o.bind(u.context);switch(e){case"value":return T1(this._delegate,h,p),t;case"child_added":return kU(this._delegate,h,p),t;case"child_removed":return FU(this._delegate,h,p),t;case"child_changed":return OU(this._delegate,h,p),t;case"child_moved":return PU(this._delegate,h,p),t;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,V.Wj)("Query.off","callback",t,!0),(0,V.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,LU(this._delegate,e,i)}else LU(this._delegate,e)}get(){return z5(this._delegate).then(e=>new bp(this.database,e))}once(e,t,r,i){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",t,!0);const o=hs.getCancelAndContextArgs_("Query.once",r,i),u=new V.BH,h=(y,b)=>{const S=new bp(this.database,y);t&&t.call(o.context,S,b),u.resolve(S)};h.userCallback=t,h.context=o.context;const p=y=>{o.cancel&&o.cancel.call(o.context,y),u.reject(y)};switch(e){case"value":T1(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":kU(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":FU(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":OU(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":PU(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new hs(this.database,fl(this._delegate,function X5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new J5(n)}(e)))}limitToLast(e){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new hs(this.database,fl(this._delegate,function t9(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new e9(n)}(e)))}orderByChild(e){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new hs(this.database,fl(this._delegate,function r9(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ab("orderByChild","path",n,!1),new n9(n)}(e)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new hs(this.database,fl(this._delegate,function s9(){return new i9}()))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new hs(this.database,fl(this._delegate,function a9(){return new o9}()))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new hs(this.database,fl(this._delegate,function l9(){return new u9}()))}startAt(e=null,t){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new hs(this.database,fl(this._delegate,function K5(n=null,e){return Sb("startAt","key",e,!0),new UU(n,e)}(e,t)))}startAfter(e=null,t){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new hs(this.database,fl(this._delegate,function Q5(n,e){return Sb("startAfter","key",e,!0),new Y5(n,e)}(e,t)))}endAt(e=null,t){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new hs(this.database,fl(this._delegate,function q5(n,e){return Sb("endAt","key",e,!0),new VU(n,e)}(e,t)))}endBefore(e=null,t){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new hs(this.database,fl(this._delegate,function Z5(n,e){return Sb("endBefore","key",e,!0),new W5(n,e)}(e,t)))}equalTo(e,t){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new hs(this.database,fl(this._delegate,function d9(n,e){return Sb("equalTo","key",e,!0),new c9(n,e)}(e,t)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof hs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,V.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,V.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,V.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new la(this.database,new cu(this._delegate._repo,this._delegate._path))}}class la extends hs{constructor(e,t){super(e,new Ao(t._repo,t._path,new mS,!1)),this.database=e,this._delegate=t}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new la(this.database,Wm(this._delegate,e))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new la(this.database,e):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new la(this.database,this._delegate.root)}set(e,t){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",t,!0);const r=D1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,GU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lu("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",t,!0);const r=G5(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function H5(n,e,t){if(lu("setWithPriority",n._path),Ec("setWithPriority",e,n._path,!1),m1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new V.BH;return y1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",e,!0);const t=function j5(n){return lu("remove",n._path),D1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,V.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function A9(n,e,t){var r;if(n=(0,V.m9)(n),lu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new V.BH,h=T1(n,()=>{});return function k5(n,e,t,r,i,o){Ov(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:j2(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=w1(n,e,void 0);u.currentInputSnapshot=h;const p=u.update(h.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Tb("transaction failed: Data returned ",p,u.path),u.status=0;const y=kS(n.transactionQueueTree_,e),b=zm(y)||[];let S;b.push(u),f1(y,b),"object"==typeof p&&null!==p&&(0,V.r3)(p,".priority")?(S=(0,V.DV)(p,".priority"),(0,V.hu)(Db(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(MS(n.serverSyncTree_,e)||un.EMPTY_NODE).getPriority().val();const M=xb(n),U=qr(p,S),z=c1(U,h,M);u.currentOutputSnapshotRaw=U,u.currentOutputSnapshotResolved=z,u.currentWriteId=LS(n);const te=r1(n.serverSyncTree_,e,z,u.currentWriteId,u.applyLocally);ua(n.eventQueue_,e,te),VS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,b)=>{let S=null;p?o.reject(p):(S=new qm(b,new cu(n._repo,n._path),pr),o.resolve(new S9(y,S)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new P9(o.committed,new bp(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",t,!0);const r=function $5(n,e){n=(0,V.m9)(n),lu("setPriority",n._path),m1("setPriority",e,!1);const t=new V.BH;return y1(n._repo,Vr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",t,!0);const r=function B5(n,e){n=(0,V.m9)(n),lu("push",n._path),Ec("push",e,n._path,!0);const t=vU(n._repo),r=U5(t),i=Wm(n,r),o=Wm(n,r);let u;return u=null!=e?D1(o,e).then(()=>o):Promise.resolve(o),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new la(this.database,u));t&&i.then(()=>t(null),u=>t(u));const o=new la(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return lu("Reference.onDisconnect",this._delegate._path),new O9(new RU(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Nb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:y9,forceLongPolling:v9}}useEmulator(e,t,r={}){!function HU(n,e,t,r={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&vc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new lb(lb.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,V.Sg)(r.mockUserToken,n.app.options.projectId);o=new lb(u)}!function f9(n,e,t,r){n.repoInfo_=new Dk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,V.Dv)("database.ref",0,1,arguments.length),e instanceof la){const t=NU(this._delegate,e.toString());return new la(this,t)}{const t=MU(this._delegate,e);return new la(this,t)}}refFromURL(e){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const r=NU(this._delegate,e);return new la(this,r)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function w9(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),IU(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function E9(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function N5(n){n.persistentConnection_&&n.persistentConnection_.resume(yU)}(n._repo)}(this._delegate)}}Nb.ServerValue={TIMESTAMP:function D9(){return C9}(),increment:n=>function T9(n){return{".sv":{increment:n}}}(n)};var L9=Object.freeze({__proto__:null,initStandalone:function F9({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){U2(t);const u=new wo.zt("auth-internal",new wo.H0("database-standalone"));return u.setComponent(new wo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Nb(jU(n,u,void 0,e,o),n),namespace:i}}});const V9=Nb.ServerValue;function zU(n){return null==n}function qU(n){return"function"==typeof n.set}function WU(n,e){return qU(e)?e:n.ref(e)}function ZU(n,e){if(function B9(n){return"string"==typeof n}(n))return e.stringCase();if(qU(n))return e.firebaseCase();if(function j9(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function kb(n,e,t="on",r=gg.z){return new Xr.y(i=>{let o=null;return o=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,dt.U)(i=>{const{snapshot:o,prevKey:u}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:u,key:h}}),(0,FP.B)())}function KU(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function G9(n,e){const{payload:t,prevKey:r,key:i}=e,o=KU(n,i),u=function H9(n,e){if(zU(e))return 0;{const t=KU(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function YU(n){return(zU(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function QU(n,e,t){return function $9(n,e,t){return kb(n,"value","once",t).pipe(Rn(r=>{const i=[rt(r)];return e.forEach(o=>i.push(kb(n,o,"on",t))),(0,GM.T)(...i).pipe(Na(G9,[]))}),Cw())}(n,e=YU(e),t)}function JU(n,e,t){const r=(e=YU(e)).map(i=>kb(n,i,"on",t));return(0,GM.T)(...r)}function XU(n,e){return function(r,i){return ZU(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Z9(n){return function(t){return t?ZU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function eB(n,e){return function(){return kb(n,"value","on",e)}}!function U9(n){n.INTERNAL.registerComponent(new wo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Nb(i,r)},"PUBLIC").setServiceProps({Reference:la,Query:hs,Database:Nb,DataSnapshot:bp,enableLogging:b9,INTERNAL:L9,ServerValue:V9}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(D_.Z);const Q9=new d.OlP("angularfire2.realtimeDatabaseURL"),J9=new d.OlP("angularfire2.database.use-emulator");let X9=(()=>{class n{constructor(t,r,i,o,u,h,p,y,b,S,M,U,z,te,ne){this.schedulers=h;const Fe=p,qe=(0,ci.on)(t,u,r);y&&wN(qe,u,b,M,U,z,S,te),this.database=(0,ci.cc)(`${qe.name}.database.${i}`,"AngularFireDatabase",qe.name,()=>{const Be=u.runOutsideAngular(()=>qe.database(i||void 0));return Fe&&Be.useEmulator(...Fe),Be},[Fe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>WU(this.database,t));let o=i;return r&&(o=r(i)),function K9(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:XU(r,"update"),set:XU(r,"set"),push:i=>r.push(i),remove:Z9(r),snapshotChanges:i=>QU(n,i,t).pipe(En.iC),stateChanges:i=>JU(n,i,t).pipe(En.iC),auditTrail:i=>function z9(n,e,t){return function W9(n,e,t){return function q9(n,e){return kb(n,"value","on",e).pipe((0,dt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Gz(...n){const e=(0,zi.jO)(n);return(0,Nr.e)((t,r)=>{const i=n.length,o=new Array(i);let u=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,xa.Xf)(n[p]).subscribe((0,cr.x)(r,y=>{o[p]=y,!h&&!u[p]&&(u[p]=!0,(h=u.every(qo.y))&&(u=null))},Hz.Z));t.subscribe((0,cr.x)(r,p=>{if(h){const y=[p,...o];r.next(e?e(...y):y)}}))})}(e),(0,dt.U)(([i,o])=>{const u=i.lastKeyToLoad,h=o.map(p=>p.key);return{actions:o,lastKeyToLoad:u,loadedKeys:h}}),function zz(n){return(0,Nr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,cr.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,dt.U)(i=>i.actions))}(n,JU(n,e).pipe(Na((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(En.iC),valueChanges:(i,o)=>QU(n,i,t).pipe((0,dt.U)(h=>h.map(p=>o&&o.idField?Object.assign(Object.assign({},p.payload.val()),{[o.idField]:p.key}):p.payload.val())),En.iC)}}(o,this)}object(t){return function Y9(n,e){return{query:n,snapshotChanges:()=>eB(n,e.schedulers.outsideAngular)().pipe(En.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>eB(n,e.schedulers.outsideAngular)().pipe(En.iC,(0,dt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>WU(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ci.Dh),d.LFG(ci.xv,8),d.LFG(Q9,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(En.HU),d.LFG(J9,8),d.LFG(BE,8),d.LFG(pN,8),d.LFG(gN,8),d.LFG(mN,8),d.LFG(_N,8),d.LFG(yN,8),d.LFG(vN,8),d.LFG(UE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),e8=(()=>{class n{constructor(){wT.Z.registerVersion("angularfire",En.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[X9]}),n})(),t8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[Q4]}),n.\u0275inj=d.cJS({imports:[Sa,r4.forRoot(),K4,ci.hO.initializeApp(J4_firebaseConfig),AH,FH,$z,e8,O3,P3]}),n})();Fp().bootstrapModule(t8).catch(n=>console.error(n))},9751:(bt,Se,j)=>{j.d(Se,{y:()=>_e});var d=j(930),G=j(727),F=j(8822),se=j(9635),le=j(2416),ce=j(576),Ee=j(2806);let _e=(()=>{class X{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Je=new X;return Je.source=this,Je.operator=Ae,Je}subscribe(Ae,Je,ct){const ye=function W(X){return X&&X instanceof d.Lv||function Z(X){return X&&(0,ce.m)(X.next)&&(0,ce.m)(X.error)&&(0,ce.m)(X.complete)}(X)&&(0,G.Nn)(X)}(Ae)?Ae:new d.Hp(Ae,Je,ct);return(0,Ee.x)(()=>{const{operator:Me,source:Oe}=this;ye.add(Me?Me.call(ye,Oe):Oe?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Je){Ae.error(Je)}}forEach(Ae,Je){return new(Je=ve(Je))((ct,ye)=>{const Me=new d.Hp({next:Oe=>{try{Ae(Oe)}catch(He){ye(He),Me.unsubscribe()}},error:ye,complete:ct});this.subscribe(Me)})}_subscribe(Ae){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Ae)}[F.L](){return this}pipe(...Ae){return(0,se.U)(Ae)(this)}toPromise(Ae){return new(Ae=ve(Ae))((Je,ct)=>{let ye;this.subscribe(Me=>ye=Me,Me=>ct(Me),()=>Je(ye))})}}return X.create=Ge=>new X(Ge),X})();function ve(X){var Ge;return null!==(Ge=X??le.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(bt,Se,j)=>{j.d(Se,{x:()=>Ee});var d=j(9751),G=j(727);const se=(0,j(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=j(8737),ce=j(2806);let Ee=(()=>{class ve extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const X=new _e(this,this);return X.operator=W,X}_throwIfClosed(){if(this.closed)throw new se}next(W){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(W)}})}error(W){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:X}=this;for(;X.length;)X.shift().error(W)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:X,isStopped:Ge,observers:Ae}=this;return X||Ge?G.Lc:(this.currentObservers=null,Ae.push(W),new G.w0(()=>{this.currentObservers=null,(0,le.P)(Ae,W)}))}_checkFinalizedStatuses(W){const{hasError:X,thrownError:Ge,isStopped:Ae}=this;X?W.error(Ge):Ae&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return ve.create=(Z,W)=>new _e(Z,W),ve})();class _e extends Ee{constructor(Z,W){super(),this.destination=Z,this.source=W}next(Z){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===X||X.call(W,Z)}error(Z){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===X||X.call(W,Z)}complete(){var Z,W;null===(W=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===W||W.call(Z)}_subscribe(Z){var W,X;return null!==(X=null===(W=this.source)||void 0===W?void 0:W.subscribe(Z))&&void 0!==X?X:G.Lc}}},930:(bt,Se,j)=>{j.d(Se,{Hp:()=>ct,Lv:()=>X});var d=j(576),G=j(727),F=j(2416),se=j(7849),le=j(5032);const ce=ve("C",void 0,void 0);function ve(Te,De,Ne){return{kind:Te,value:De,error:Ne}}var Z=j(3410),W=j(2806);class X extends G.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,G.Nn)(De)&&De.add(this)):this.destination=He}static create(De,Ne,ze){return new ct(De,Ne,ze)}next(De){this.isStopped?Oe(function _e(Te){return ve("N",Te,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Oe(function Ee(Te){return ve("E",void 0,Te)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Oe(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ae(Te,De){return Ge.call(Te,De)}class Je{constructor(De){this.partialObserver=De}next(De){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(De)}catch(ze){ye(ze)}}error(De){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(De)}catch(ze){ye(ze)}else ye(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(Ne){ye(Ne)}}}class ct extends X{constructor(De,Ne,ze){let Le;if(super(),(0,d.m)(De)||!De)Le={next:De??void 0,error:Ne??void 0,complete:ze??void 0};else{let ue;this&&F.v.useDeprecatedNextContext?(ue=Object.create(De),ue.unsubscribe=()=>this.unsubscribe(),Le={next:De.next&&Ae(De.next,ue),error:De.error&&Ae(De.error,ue),complete:De.complete&&Ae(De.complete,ue)}):Le=De}this.destination=new Je(Le)}}function ye(Te){F.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Te):(0,se.h)(Te)}function Oe(Te,De){const{onStoppedNotification:Ne}=F.v;Ne&&Z.z.setTimeout(()=>Ne(Te,De))}const He={closed:!0,next:le.Z,error:function Me(Te){throw Te},complete:le.Z}},727:(bt,Se,j)=>{j.d(Se,{Lc:()=>ce,w0:()=>le,Nn:()=>Ee});var d=j(576);const F=(0,j(3888).d)(ve=>function(W){ve(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((X,Ge)=>`${Ge+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var se=j(8737);class le{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Ae of W)Ae.remove(this);else W.remove(this);const{initialTeardown:X}=this;if((0,d.m)(X))try{X()}catch(Ae){Z=Ae instanceof F?Ae.errors:[Ae]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ae of Ge)try{_e(Ae)}catch(Je){Z=Z??[],Je instanceof F?Z=[...Z,...Je.errors]:Z.push(Je)}}if(Z)throw new F(Z)}}add(Z){var W;if(Z&&Z!==this)if(this.closed)_e(Z);else{if(Z instanceof le){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(Z)}}_hasParent(Z){const{_parentage:W}=this;return W===Z||Array.isArray(W)&&W.includes(Z)}_addParent(Z){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(Z),W):W?[W,Z]:Z}_removeParent(Z){const{_parentage:W}=this;W===Z?this._parentage=null:Array.isArray(W)&&(0,se.P)(W,Z)}remove(Z){const{_finalizers:W}=this;W&&(0,se.P)(W,Z),Z instanceof le&&Z._removeParent(this)}}le.EMPTY=(()=>{const ve=new le;return ve.closed=!0,ve})();const ce=le.EMPTY;function Ee(ve){return ve instanceof le||ve&&"closed"in ve&&(0,d.m)(ve.remove)&&(0,d.m)(ve.add)&&(0,d.m)(ve.unsubscribe)}function _e(ve){(0,d.m)(ve)?ve():ve.unsubscribe()}},2416:(bt,Se,j)=>{j.d(Se,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Se,j)=>{j.d(Se,{E:()=>G});const G=new(j(9751).y)(le=>le.complete())},8996:(bt,Se,j)=>{j.d(Se,{D:()=>De});var d=j(8421),G=j(5363),F=j(9468),ce=j(9751),_e=j(2202),ve=j(576),Z=j(9672);function X(Ne,ze){if(!Ne)throw new Error("Iterable cannot be null");return new ce.y(Le=>{(0,Z.f)(Le,ze,()=>{const ue=Ne[Symbol.asyncIterator]();(0,Z.f)(Le,ze,()=>{ue.next().then(ot=>{ot.done?Le.complete():Le.next(ot.value)})},0,!0)})})}var Ge=j(3670),Ae=j(8239),Je=j(1144),ct=j(6495),ye=j(2206),Me=j(4532),Oe=j(3260);function De(Ne,ze){return ze?function Te(Ne,ze){if(null!=Ne){if((0,Ge.c)(Ne))return function se(Ne,ze){return(0,d.Xf)(Ne).pipe((0,F.R)(ze),(0,G.Q)(ze))}(Ne,ze);if((0,Je.z)(Ne))return function Ee(Ne,ze){return new ce.y(Le=>{let ue=0;return ze.schedule(function(){ue===Ne.length?Le.complete():(Le.next(Ne[ue++]),Le.closed||this.schedule())})})}(Ne,ze);if((0,Ae.t)(Ne))return function le(Ne,ze){return(0,d.Xf)(Ne).pipe((0,F.R)(ze),(0,G.Q)(ze))}(Ne,ze);if((0,ye.D)(Ne))return X(Ne,ze);if((0,ct.T)(Ne))return function W(Ne,ze){return new ce.y(Le=>{let ue;return(0,Z.f)(Le,ze,()=>{ue=Ne[_e.h](),(0,Z.f)(Le,ze,()=>{let ot,Mt;try{({value:ot,done:Mt}=ue.next())}catch(lt){return void Le.error(lt)}Mt?Le.complete():Le.next(ot)},0,!0)}),()=>(0,ve.m)(ue?.return)&&ue.return()})}(Ne,ze);if((0,Oe.L)(Ne))return function He(Ne,ze){return X((0,Oe.Q)(Ne),ze)}(Ne,ze)}throw(0,Me.z)(Ne)}(Ne,ze):(0,d.Xf)(Ne)}},8421:(bt,Se,j)=>{j.d(Se,{Xf:()=>Ge});var d=j(655),G=j(1144),F=j(8239),se=j(9751),le=j(3670),ce=j(2206),Ee=j(4532),_e=j(6495),ve=j(3260),Z=j(576),W=j(7849),X=j(8822);function Ge(Te){if(Te instanceof se.y)return Te;if(null!=Te){if((0,le.c)(Te))return function Ae(Te){return new se.y(De=>{const Ne=Te[X.L]();if((0,Z.m)(Ne.subscribe))return Ne.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,G.z)(Te))return function Je(Te){return new se.y(De=>{for(let Ne=0;Ne<Te.length&&!De.closed;Ne++)De.next(Te[Ne]);De.complete()})}(Te);if((0,F.t)(Te))return function ct(Te){return new se.y(De=>{Te.then(Ne=>{De.closed||(De.next(Ne),De.complete())},Ne=>De.error(Ne)).then(null,W.h)})}(Te);if((0,ce.D)(Te))return Me(Te);if((0,_e.T)(Te))return function ye(Te){return new se.y(De=>{for(const Ne of Te)if(De.next(Ne),De.closed)return;De.complete()})}(Te);if((0,ve.L)(Te))return function Oe(Te){return Me((0,ve.Q)(Te))}(Te)}throw(0,Ee.z)(Te)}function Me(Te){return new se.y(De=>{(function He(Te,De){var Ne,ze,Le,ue;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,d.KL)(Te);!(ze=yield Ne.next()).done;)if(De.next(ze.value),De.closed)return}catch(ot){Le={error:ot}}finally{try{ze&&!ze.done&&(ue=Ne.return)&&(yield ue.call(Ne))}finally{if(Le)throw Le.error}}De.complete()})})(Te,De).catch(Ne=>De.error(Ne))})}},6451:(bt,Se,j)=>{j.d(Se,{T:()=>ce});var d=j(8189),G=j(8421),F=j(515),se=j(7669),le=j(8996);function ce(...Ee){const _e=(0,se.yG)(Ee),ve=(0,se._6)(Ee,1/0),Z=Ee;return Z.length?1===Z.length?(0,G.Xf)(Z[0]):(0,d.J)(ve)((0,le.D)(Z,_e)):F.E}},5403:(bt,Se,j)=>{j.d(Se,{x:()=>G});var d=j(930);function G(se,le,ce,Ee,_e){return new F(se,le,ce,Ee,_e)}class F extends d.Lv{constructor(le,ce,Ee,_e,ve,Z){super(le),this.onFinalize=ve,this.shouldUnsubscribe=Z,this._next=ce?function(W){try{ce(W)}catch(X){le.error(X)}}:super._next,this._error=_e?function(W){try{_e(W)}catch(X){le.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(W){le.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(bt,Se,j)=>{j.d(Se,{U:()=>F});var d=j(4482),G=j(5403);function F(se,le){return(0,d.e)((ce,Ee)=>{let _e=0;ce.subscribe((0,G.x)(Ee,ve=>{Ee.next(se.call(le,ve,_e++))}))})}},8189:(bt,Se,j)=>{j.d(Se,{J:()=>F});var d=j(5577),G=j(4671);function F(se=1/0){return(0,d.z)(G.y,se)}},5577:(bt,Se,j)=>{j.d(Se,{z:()=>_e});var d=j(4004),G=j(8421),F=j(4482),se=j(9672),le=j(5403),Ee=j(576);function _e(ve,Z,W=1/0){return(0,Ee.m)(Z)?_e((X,Ge)=>(0,d.U)((Ae,Je)=>Z(X,Ae,Ge,Je))((0,G.Xf)(ve(X,Ge))),W):("number"==typeof Z&&(W=Z),(0,F.e)((X,Ge)=>function ce(ve,Z,W,X,Ge,Ae,Je,ct){const ye=[];let Me=0,Oe=0,He=!1;const Te=()=>{He&&!ye.length&&!Me&&Z.complete()},De=ze=>Me<X?Ne(ze):ye.push(ze),Ne=ze=>{Ae&&Z.next(ze),Me++;let Le=!1;(0,G.Xf)(W(ze,Oe++)).subscribe((0,le.x)(Z,ue=>{Ge?.(ue),Ae?De(ue):Z.next(ue)},()=>{Le=!0},void 0,()=>{if(Le)try{for(Me--;ye.length&&Me<X;){const ue=ye.shift();Je?(0,se.f)(Z,Je,()=>Ne(ue)):Ne(ue)}Te()}catch(ue){Z.error(ue)}}))};return ve.subscribe((0,le.x)(Z,De,()=>{He=!0,Te()})),()=>{ct?.()}}(X,Ge,ve,W)))}},5363:(bt,Se,j)=>{j.d(Se,{Q:()=>se});var d=j(9672),G=j(4482),F=j(5403);function se(le,ce=0){return(0,G.e)((Ee,_e)=>{Ee.subscribe((0,F.x)(_e,ve=>(0,d.f)(_e,le,()=>_e.next(ve),ce),()=>(0,d.f)(_e,le,()=>_e.complete(),ce),ve=>(0,d.f)(_e,le,()=>_e.error(ve),ce)))})}},3099:(bt,Se,j)=>{j.d(Se,{B:()=>le});var d=j(8421),G=j(7579),F=j(930),se=j(4482);function le(Ee={}){const{connector:_e=(()=>new G.x),resetOnError:ve=!0,resetOnComplete:Z=!0,resetOnRefCountZero:W=!0}=Ee;return X=>{let Ge,Ae,Je,ct=0,ye=!1,Me=!1;const Oe=()=>{Ae?.unsubscribe(),Ae=void 0},He=()=>{Oe(),Ge=Je=void 0,ye=Me=!1},Te=()=>{const De=Ge;He(),De?.unsubscribe()};return(0,se.e)((De,Ne)=>{ct++,!Me&&!ye&&Oe();const ze=Je=Je??_e();Ne.add(()=>{ct--,0===ct&&!Me&&!ye&&(Ae=ce(Te,W))}),ze.subscribe(Ne),!Ge&&ct>0&&(Ge=new F.Hp({next:Le=>ze.next(Le),error:Le=>{Me=!0,Oe(),Ae=ce(He,ve,Le),ze.error(Le)},complete:()=>{ye=!0,Oe(),Ae=ce(He,Z),ze.complete()}}),(0,d.Xf)(De).subscribe(Ge))})(X)}}function ce(Ee,_e,...ve){if(!0===_e)return void Ee();if(!1===_e)return;const Z=new F.Hp({next:()=>{Z.unsubscribe(),Ee()}});return(0,d.Xf)(_e(...ve)).subscribe(Z)}},9468:(bt,Se,j)=>{j.d(Se,{R:()=>G});var d=j(4482);function G(F,se=0){return(0,d.e)((le,ce)=>{ce.add(F.schedule(()=>le.subscribe(ce),se))})}},8505:(bt,Se,j)=>{j.d(Se,{b:()=>le});var d=j(576),G=j(4482),F=j(5403),se=j(4671);function le(ce,Ee,_e){const ve=(0,d.m)(ce)||Ee||_e?{next:ce,error:Ee,complete:_e}:ce;return ve?(0,G.e)((Z,W)=>{var X;null===(X=ve.subscribe)||void 0===X||X.call(ve);let Ge=!0;Z.subscribe((0,F.x)(W,Ae=>{var Je;null===(Je=ve.next)||void 0===Je||Je.call(ve,Ae),W.next(Ae)},()=>{var Ae;Ge=!1,null===(Ae=ve.complete)||void 0===Ae||Ae.call(ve),W.complete()},Ae=>{var Je;Ge=!1,null===(Je=ve.error)||void 0===Je||Je.call(ve,Ae),W.error(Ae)},()=>{var Ae,Je;Ge&&(null===(Ae=ve.unsubscribe)||void 0===Ae||Ae.call(ve)),null===(Je=ve.finalize)||void 0===Je||Je.call(ve)}))}):se.y}},4408:(bt,Se,j)=>{j.d(Se,{o:()=>le});var d=j(727);class G extends d.w0{constructor(Ee,_e){super()}schedule(Ee,_e=0){return this}}const F={setInterval(ce,Ee,..._e){const{delegate:ve}=F;return ve?.setInterval?ve.setInterval(ce,Ee,..._e):setInterval(ce,Ee,..._e)},clearInterval(ce){const{delegate:Ee}=F;return(Ee?.clearInterval||clearInterval)(ce)},delegate:void 0};var se=j(8737);class le extends G{constructor(Ee,_e){super(Ee,_e),this.scheduler=Ee,this.work=_e,this.pending=!1}schedule(Ee,_e=0){var ve;if(this.closed)return this;this.state=Ee;const Z=this.id,W=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(W,Z,_e)),this.pending=!0,this.delay=_e,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(W,this.id,_e),this}requestAsyncId(Ee,_e,ve=0){return F.setInterval(Ee.flush.bind(Ee,this),ve)}recycleAsyncId(Ee,_e,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return _e;null!=_e&&F.clearInterval(_e)}execute(Ee,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(Ee,_e);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,_e){let Z,ve=!1;try{this.work(Ee)}catch(W){ve=!0,Z=W||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:_e}=this,{actions:ve}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ve,this),null!=Ee&&(this.id=this.recycleAsyncId(_e,Ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Se,j)=>{j.d(Se,{v:()=>F});var d=j(6063);class G{constructor(le,ce=G.now){this.schedulerActionCtor=le,this.now=ce}schedule(le,ce=0,Ee){return new this.schedulerActionCtor(this,le).schedule(Ee,ce)}}G.now=d.l.now;class F extends G{constructor(le,ce=G.now){super(le,ce),this.actions=[],this._active=!1}flush(le){const{actions:ce}=this;if(this._active)return void ce.push(le);let Ee;this._active=!0;do{if(Ee=le.execute(le.state,le.delay))break}while(le=ce.shift());if(this._active=!1,Ee){for(;le=ce.shift();)le.unsubscribe();throw Ee}}}},4986:(bt,Se,j)=>{j.d(Se,{z:()=>F});var d=j(4408);const F=new(j(7565).v)(d.o)},6063:(bt,Se,j)=>{j.d(Se,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(bt,Se,j)=>{j.d(Se,{z:()=>d});const d={setTimeout(G,F,...se){const{delegate:le}=d;return le?.setTimeout?le.setTimeout(G,F,...se):setTimeout(G,F,...se)},clearTimeout(G){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(G)},delegate:void 0}},2202:(bt,Se,j)=>{j.d(Se,{h:()=>G});const G=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Se,j)=>{j.d(Se,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(bt,Se,j)=>{j.d(Se,{_6:()=>ce,jO:()=>se,yG:()=>le});var d=j(576);function F(Ee){return Ee[Ee.length-1]}function se(Ee){return(0,d.m)(F(Ee))?Ee.pop():void 0}function le(Ee){return function G(Ee){return Ee&&(0,d.m)(Ee.schedule)}(F(Ee))?Ee.pop():void 0}function ce(Ee,_e){return"number"==typeof F(Ee)?Ee.pop():_e}},8737:(bt,Se,j)=>{function d(G,F){if(G){const se=G.indexOf(F);0<=se&&G.splice(se,1)}}j.d(Se,{P:()=>d})},3888:(bt,Se,j)=>{function d(G){const se=G(le=>{Error.call(le),le.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}j.d(Se,{d:()=>d})},2806:(bt,Se,j)=>{j.d(Se,{O:()=>se,x:()=>F});var d=j(2416);let G=null;function F(le){if(d.v.useDeprecatedSynchronousErrorHandling){const ce=!G;if(ce&&(G={errorThrown:!1,error:null}),le(),ce){const{errorThrown:Ee,error:_e}=G;if(G=null,Ee)throw _e}}else le()}function se(le){d.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=le)}},9672:(bt,Se,j)=>{function d(G,F,se,le=0,ce=!1){const Ee=F.schedule(function(){se(),ce?G.add(this.schedule(null,le)):this.unsubscribe()},le);if(G.add(Ee),!ce)return Ee}j.d(Se,{f:()=>d})},4671:(bt,Se,j)=>{function d(G){return G}j.d(Se,{y:()=>d})},1144:(bt,Se,j)=>{j.d(Se,{z:()=>d});const d=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(bt,Se,j)=>{j.d(Se,{D:()=>G});var d=j(576);function G(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},576:(bt,Se,j)=>{function d(G){return"function"==typeof G}j.d(Se,{m:()=>d})},3670:(bt,Se,j)=>{j.d(Se,{c:()=>F});var d=j(8822),G=j(576);function F(se){return(0,G.m)(se[d.L])}},6495:(bt,Se,j)=>{j.d(Se,{T:()=>F});var d=j(2202),G=j(576);function F(se){return(0,G.m)(se?.[d.h])}},8239:(bt,Se,j)=>{j.d(Se,{t:()=>G});var d=j(576);function G(F){return(0,d.m)(F?.then)}},3260:(bt,Se,j)=>{j.d(Se,{L:()=>se,Q:()=>F});var d=j(655),G=j(576);function F(le){return(0,d.FC)(this,arguments,function*(){const Ee=le.getReader();try{for(;;){const{value:_e,done:ve}=yield(0,d.qq)(Ee.read());if(ve)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(_e)}}finally{Ee.releaseLock()}})}function se(le){return(0,G.m)(le?.getReader)}},4482:(bt,Se,j)=>{j.d(Se,{A:()=>G,e:()=>F});var d=j(576);function G(se){return(0,d.m)(se?.lift)}function F(se){return le=>{if(G(le))return le.lift(function(ce){try{return se(ce,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(bt,Se,j)=>{function d(){}j.d(Se,{Z:()=>d})},9635:(bt,Se,j)=>{j.d(Se,{U:()=>F,z:()=>G});var d=j(4671);function G(...se){return F(se)}function F(se){return 0===se.length?d.y:1===se.length?se[0]:function(ce){return se.reduce((Ee,_e)=>_e(Ee),ce)}}},7849:(bt,Se,j)=>{j.d(Se,{h:()=>F});var d=j(2416),G=j(3410);function F(se){G.z.setTimeout(()=>{const{onUnhandledError:le}=d.v;if(!le)throw se;le(se)})}},4532:(bt,Se,j)=>{function d(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Se,{z:()=>d})},655:(bt,Se,j)=>{function se(me,ge){var Ce={};for(var Re in me)Object.prototype.hasOwnProperty.call(me,Re)&&ge.indexOf(Re)<0&&(Ce[Re]=me[Re]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var Ye=0;for(Re=Object.getOwnPropertySymbols(me);Ye<Re.length;Ye++)ge.indexOf(Re[Ye])<0&&Object.prototype.propertyIsEnumerable.call(me,Re[Ye])&&(Ce[Re[Ye]]=me[Re[Ye]])}return Ce}function X(me,ge,Ce,Re){return new(Ce||(Ce=Promise))(function(We,yt){function Ze(Ht){try{Tt(Re.next(Ht))}catch(St){yt(St)}}function Bt(Ht){try{Tt(Re.throw(Ht))}catch(St){yt(St)}}function Tt(Ht){Ht.done?We(Ht.value):function Ye(We){return We instanceof Ce?We:new Ce(function(yt){yt(We)})}(Ht.value).then(Ze,Bt)}Tt((Re=Re.apply(me,ge||[])).next())})}function Te(me){return this instanceof Te?(this.v=me,this):new Te(me)}function De(me,ge,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ye,Re=Ce.apply(me,ge||[]),We=[];return Ye={},yt("next"),yt("throw"),yt("return"),Ye[Symbol.asyncIterator]=function(){return this},Ye;function yt(Jt){Re[Jt]&&(Ye[Jt]=function(Vn){return new Promise(function(On,Wr){We.push([Jt,Vn,On,Wr])>1||Ze(Jt,Vn)})})}function Ze(Jt,Vn){try{!function Bt(Jt){Jt.value instanceof Te?Promise.resolve(Jt.value.v).then(Tt,Ht):St(We[0][2],Jt)}(Re[Jt](Vn))}catch(On){St(We[0][3],On)}}function Tt(Jt){Ze("next",Jt)}function Ht(Jt){Ze("throw",Jt)}function St(Jt,Vn){Jt(Vn),We.shift(),We.length&&Ze(We[0][0],We[0][1])}}function ze(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,ge=me[Symbol.asyncIterator];return ge?ge.call(me):(me=function ct(me){var ge="function"==typeof Symbol&&Symbol.iterator,Ce=ge&&me[ge],Re=0;if(Ce)return Ce.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&Re>=me.length&&(me=void 0),{value:me&&me[Re++],done:!me}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),Ce={},Re("next"),Re("throw"),Re("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Re(We){Ce[We]=me[We]&&function(yt){return new Promise(function(Ze,Bt){!function Ye(We,yt,Ze,Bt){Promise.resolve(Bt).then(function(Tt){We({value:Tt,done:Ze})},yt)}(Ze,Bt,(yt=me[We](yt)).done,yt.value)})}}}j.d(Se,{FC:()=>De,KL:()=>ze,_T:()=>se,mG:()=>X,qq:()=>Te})},4650:(bt,Se,j)=>{j.d(Se,{$8M:()=>Au,$WT:()=>Yr,$Z:()=>SI,AFp:()=>rE,ALo:()=>Ai,AaK:()=>_e,BQk:()=>$_,CHM:()=>Sc,CRH:()=>nm,CZH:()=>Nd,CqO:()=>e0,D6c:()=>UD,DyG:()=>xu,EJc:()=>wD,EpF:()=>xg,F$t:()=>YI,F4k:()=>Xw,FYo:()=>dw,FiY:()=>zo,Gf:()=>Y0,GfV:()=>oI,Gpc:()=>W,Hsn:()=>QI,JOm:()=>Rt,Jf7:()=>lI,KtG:()=>vu,LFG:()=>Gt,Lbi:()=>lm,Lck:()=>Zn,MAs:()=>Qw,MMx:()=>nc,NdJ:()=>G_,O4$:()=>Mc,OlP:()=>dn,Oqu:()=>_0,P3R:()=>Qb,PXZ:()=>RD,Q6J:()=>j_,QGY:()=>Rg,Qsj:()=>vA,R0b:()=>Is,RDi:()=>QS,Rgc:()=>Uf,SBq:()=>Jh,Sil:()=>Zx,Suo:()=>by,TTD:()=>ih,TgZ:()=>mf,Udp:()=>wf,W1O:()=>Bf,WLB:()=>fy,X6Q:()=>gm,XFs:()=>vt,Xpm:()=>zt,Xts:()=>tw,Y36:()=>rf,YKP:()=>L0,YNc:()=>Kw,Yjl:()=>on,Yz7:()=>St,Z0I:()=>Wr,ZZ4:()=>lc,_Bn:()=>F0,_UZ:()=>yf,_Vd:()=>Qh,_c5:()=>lR,_uU:()=>Bg,aQg:()=>zy,c2e:()=>My,cJS:()=>Vn,cg1:()=>Gg,dDg:()=>SD,dqk:()=>fn,eFA:()=>fm,eJc:()=>X0,ekj:()=>Lg,eoX:()=>Py,f3M:()=>Bn,g9A:()=>Ay,h0i:()=>qs,hGG:()=>qy,iGM:()=>Td,ifc:()=>L,ip1:()=>Ty,jDz:()=>U0,kL8:()=>yC,kYT:()=>Pe,lG2:()=>Ot,lcZ:()=>el,lqb:()=>ad,lri:()=>Oy,n5z:()=>Bc,oAB:()=>ie,oxw:()=>Jl,q4F:()=>aI,qLn:()=>ug,qOj:()=>L_,qZA:()=>_f,rWj:()=>TD,sBO:()=>eR,s_b:()=>my,soG:()=>cm,tb:()=>il,tp0:()=>dt,uIk:()=>Gw,vHH:()=>ye,vpe:()=>ls,wAp:()=>kt,xp6:()=>vI,ynx:()=>Ag,z2F:()=>Vy,zSh:()=>Kl,zs3:()=>ef});var d=j(7579),G=j(727),F=j(9751),se=j(6451),le=j(3099);function ce(s){for(let a in s)if(s[a]===ce)return a;throw Error("Could not find renamed property on target object.")}function Ee(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function _e(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(_e).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ve(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Z=ce({__forward_ref__:ce});function W(s){return s.__forward_ref__=W,s.toString=function(){return _e(this())},s}function X(s){return Ge(s)?s():s}function Ge(s){return"function"==typeof s&&s.hasOwnProperty(Z)&&s.__forward_ref__===W}function Ae(s){return s&&!!s.\u0275providers}const ct="https://g.co/ng/security#xss";class ye extends Error{constructor(a,l){super(Me(a,l)),this.code=a}}function Me(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function Oe(s){return"string"==typeof s?s:null==s?"":String(s)}function ze(s,a){throw new ye(-201,!1)}function yt(s,a){null==s&&function Ze(s,a,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function St(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Vn(s){return{providers:s.providers||[],imports:s.imports||[]}}function On(s){return lr(s,gi)||lr(s,xo)}function Wr(s){return null!==On(s)}function lr(s,a){return s.hasOwnProperty(a)?s[a]:null}function ri(s){return s&&(s.hasOwnProperty(Ui)||s.hasOwnProperty(Gn))?s[Ui]:null}const gi=ce({\u0275prov:ce}),Ui=ce({\u0275inj:ce}),xo=ce({ngInjectableDef:ce}),Gn=ce({ngInjectorDef:ce});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let zn;function Kn(s){const a=zn;return zn=s,a}function Zr(s,a,l){const c=On(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&vt.Optional?null:void 0!==a?a:void ze(_e(s))}const fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yn={},Ur="__NG_DI_FLAG__",Un="ngTempTokenPath",si="ngTokenPath",qn=/\n/gm,mr="\u0275",en="__source";let Ri;function sn(s){const a=Ri;return Ri=s,a}function mi(s,a=vt.Default){if(void 0===Ri)throw new ye(-203,!1);return null===Ri?Zr(s,void 0,a):Ri.get(s,a&vt.Optional?null:void 0,a)}function Gt(s,a=vt.Default){return(function fs(){return zn}()||mi)(X(s),a)}function Bn(s,a=vt.Default){return Gt(s,Br(a))}function Br(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Jn(s){const a=[];for(let l=0;l<s.length;l++){const c=X(s[l]);if(Array.isArray(c)){if(0===c.length)throw new ye(900,!1);let f,m=vt.Default;for(let v=0;v<c.length;v++){const C=c[v],T=Kr(C);"number"==typeof T?-1===T?f=C.token:m|=T:f=C}a.push(Gt(f,m))}else a.push(Gt(c))}return a}function oi(s,a){return s[Ur]=a,s.prototype[Ur]=a,s}function Kr(s){return s[Ur]}function H(s){return{toString:s}.toString()}var P=(()=>((P=P||{})[P.OnPush=0]="OnPush",P[P.Default=1]="Default",P))(),L=(()=>{return(s=L||(L={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",L;var s})();const k={},Y=[],Ie=ce({\u0275cmp:ce}),st=ce({\u0275dir:ce}),Nt=ce({\u0275pipe:ce}),At=ce({\u0275mod:ce}),tn=ce({\u0275fac:ce}),Pt=ce({__NG_ELEMENT_ID__:ce});let xn=0;function zt(s){return H(()=>{const a=ml(s),l={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||L.Emulated,id:"c"+xn++,styles:s.styles||Y,_:null,schemas:s.schemas||null,tView:null};Cp(l);const c=s.dependencies;return l.directiveDefs=Ro(c,!1),l.pipeDefs=Ro(c,!0),l})}function Rs(s){return Et(s)||yn(s)}function fe(s){return null!==s}function ie(s){return H(()=>({type:s.type,bootstrap:s.bootstrap||Y,declarations:s.declarations||Y,imports:s.imports||Y,exports:s.exports||Y,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Pe(s,a){return H(()=>{const l=Ar(s,!0);l.declarations=a.declarations||Y,l.imports=a.imports||Y,l.exports=a.exports||Y})}function wt(s,a){if(null==s)return k;const l={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),l[f]=c,a&&(a[f]=m)}return l}function Ot(s){return H(()=>{const a=ml(s);return Cp(a),a})}function on(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Et(s){return s[Ie]||null}function yn(s){return s[st]||null}function cn(s){return s[Nt]||null}function Yr(s){const a=Et(s)||yn(s)||cn(s);return null!==a&&a.standalone}function Ar(s,a){const l=s[At]||null;if(!l&&!0===a)throw new Error(`Type ${_e(s)} does not have '\u0275mod' property.`);return l}function ml(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Y,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wt(s.inputs,a),outputs:wt(s.outputs)}}function Cp(s){s.features?.forEach(a=>a(s))}function Ro(s,a){if(!s)return null;const l=a?cn:Rs;return()=>("function"==typeof s?s():s).map(c=>l(c)).filter(fe)}const xr=0,nt=1,Wt=2,Pn=3,vn=4,eo=5,Rr=6,Ms=7,Wn=8,du=9,Mi=10,Zt=11,_l=12,Bi=13,hu=14,to=15,_r=16,Mo=17,No=18,ji=19,da=20,Qr=21,Dn=22,bc=1,fu=2,ha=7,no=8,Ns=9,jr=10;function ui(s){return Array.isArray(s)&&"object"==typeof s[bc]}function ss(s){return Array.isArray(s)&&!0===s[bc]}function ko(s){return 0!=(4&s.flags)}function yl(s){return s.componentOffset>-1}function pu(s){return 1==(1&s.flags)}function _i(s){return!!s.template}function ro(s){return 0!=(256&s[Wt])}function Os(s,a){return s.hasOwnProperty(tn)?s[tn]:null}class rh{constructor(a,l,c){this.previousValue=a,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function ih(){return vl}function vl(s){return s.type.prototype.ngOnChanges&&(s.setInput=so),xp}function xp(){const s=wl(this),a=s?.current;if(a){const l=s.previous;if(l===k)s.previous=a;else for(let c in a)l[c]=a[c];s.current=null,this.ngOnChanges(a)}}function so(s,a,l,c){const f=this.declaredInputs[l],m=wl(s)||function Rp(s,a){return s[Ic]=a}(s,{previous:k,current:null}),v=m.current||(m.current={}),C=m.previous,T=C[f];v[f]=new rh(T&&T.currentValue,a,C===k),s[c]=a}ih.ngInherit=!0;const Ic="__ngSimpleChanges__";function wl(s){return s[Ic]||null}const jn=function(s,a,l){},mu="svg";function yr(s){for(;Array.isArray(s);)s=s[xr];return s}function Lo(s,a){return yr(a[s])}function $r(s,a){return yr(a[s.index])}function bl(s,a){return s.data[a]}function li(s,a){return s[a]}function Mr(s,a){const l=a[s];return ui(l)?l:l[xr]}function oo(s){return 64==(64&s[Wt])}function Ps(s,a){return null==a?null:s[a]}function yu(s){s[No]=0}function ma(s,a){s[eo]+=a;let l=s,c=s[Pn];for(;null!==c&&(1===a&&1===l[eo]||-1===a&&0===l[eo]);)c[eo]+=a,l=c,c=c[Pn]}const Lt={lFrame:Eu(null),bindingsEnabled:!0};function oh(){return Lt.bindingsEnabled}function pe(){return Lt.lFrame.lView}function $t(){return Lt.lFrame.tView}function Sc(s){return Lt.lFrame.contextLView=s,s[Wn]}function vu(s){return Lt.lFrame.contextLView=null,s}function Xn(){let s=uh();for(;null!==s&&64===s.type;)s=s.parent;return s}function uh(){return Lt.lFrame.currentTNode}function Hi(s,a){const l=Lt.lFrame;l.currentTNode=s,l.isParent=a}function Cl(){return Lt.lFrame.isParent}function lh(){Lt.lFrame.isParent=!1}function Hr(){const s=Lt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Fs(){return Lt.lFrame.bindingIndex++}function hh(s,a){const l=Lt.lFrame;l.bindingIndex=l.bindingRootIndex=s,er(a)}function er(s){Lt.lFrame.currentDirectiveIndex=s}function wu(){return Lt.lFrame.currentQueryIndex}function fh(s){Lt.lFrame.currentQueryIndex=s}function Tl(s){const a=s[nt];return 2===a.type?a.declTNode:1===a.type?s[Rr]:null}function ph(s,a,l){if(l&vt.SkipSelf){let f=a,m=s;for(;!(f=f.parent,null!==f||l&vt.Host||(f=Tl(m),null===f||(m=m[to],10&f.type))););if(null===f)return!1;a=f,s=m}const c=Lt.lFrame=Ac();return c.currentTNode=a,c.lView=s,!0}function va(s){const a=Ac(),l=s[nt];Lt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Ac(){const s=Lt.lFrame,a=null===s?null:s.child;return null===a?Eu(s):a}function Eu(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function xc(){const s=Lt.lFrame;return Lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Sl=xc;function gh(){const s=xc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Jr(){return Lt.lFrame.selectedIndex}function ms(s){Lt.lFrame.selectedIndex=s}function Fn(){const s=Lt.lFrame;return bl(s.tView,s.selectedIndex)}function Mc(){Lt.lFrame.currentNamespace=mu}function Al(s,a){for(let l=a.directiveStart,c=a.directiveEnd;l<c;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:x,ngOnDestroy:N}=m;v&&(s.contentHooks??(s.contentHooks=[])).push(-l,v),C&&((s.contentHooks??(s.contentHooks=[])).push(l,C),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(l,C)),T&&(s.viewHooks??(s.viewHooks=[])).push(-l,T),x&&((s.viewHooks??(s.viewHooks=[])).push(l,x),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(l,x)),null!=N&&(s.destroyHooks??(s.destroyHooks=[])).push(l,N)}}function kc(s,a,l){xl(s,a,3,l)}function yh(s,a,l,c){(3&s[Wt])===l&&xl(s,a,l,c)}function vh(s,a){let l=s[Wt];(3&l)===a&&(l&=2047,l+=1,s[Wt]=l)}function xl(s,a,l,c){const m=c??-1,v=a.length-1;let C=0;for(let T=void 0!==c?65535&s[No]:0;T<v;T++)if("number"==typeof a[T+1]){if(C=a[T],null!=c&&C>=c)break}else a[T]<0&&(s[No]+=65536),(C<m||-1==m)&&(Ea(s,l,a,T),s[No]=(4294901760&s[No])+T+2),T++}function Ea(s,a,l,c){const f=l[c]<0,m=l[c+1],C=s[f?-l[c]:l[c]];if(f){if(s[Wt]>>11<s[No]>>16&&(3&s[Wt])===a){s[Wt]+=2048,jn(4,C,m);try{m.call(C)}finally{jn(5,C,m)}}}else{jn(4,C,m);try{m.call(C)}finally{jn(5,C,m)}}}const bu=-1;class Ls{constructor(a,l,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function ba(s,a,l){let c=0;for(;c<l.length;){const f=l[c];if("number"==typeof f){if(0!==f)break;c++;const m=l[c++],v=l[c++],C=l[c++];s.setAttribute(a,v,C,m)}else{const m=f,v=l[++c];lo(m)?s.setProperty(a,m,v):s.setAttribute(a,m,v),c++}}return c}function Eh(s){return 3===s||4===s||6===s}function lo(s){return 64===s.charCodeAt(0)}function Uo(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?l=f:0===l||Ia(s,l,f,null,-1===l||2===l?a[++c]:null)}}return s}function Ia(s,a,l,c,f){let m=0,v=s.length;if(-1===a)v=-1;else for(;m<s.length;){const C=s[m++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=m-1;break}}}for(;m<s.length;){const C=s[m];if("number"==typeof C)break;if(C===l){if(null===c)return void(null!==f&&(s[m+1]=f));if(c===s[m+1])return void(s[m+2]=f)}m++,null!==c&&m++,null!==f&&m++}-1!==v&&(s.splice(v,0,a),m=v+1),s.splice(m++,0,l),null!==c&&s.splice(m++,0,c),null!==f&&s.splice(m++,0,f)}function Bo(s){return s!==bu}function Ca(s){return 32767&s}function Du(s,a){let l=function Cu(s){return s>>16}(s),c=a;for(;l>0;)c=c[to],l--;return c}let Pc=!0;function Tu(s){const a=Pc;return Pc=s,a}const Fc=255,Nl=5;let Lc=0;const vi={};function Vc(s,a){const l=Ih(s,a);if(-1!==l)return l;const c=a[nt];c.firstCreatePass&&(s.injectorIndex=a.length,_s(c.data,s),_s(a,null),_s(c.blueprint,null));const f=tr(s,a),m=s.injectorIndex;if(Bo(f)){const v=Ca(f),C=Du(f,a),T=C[nt].data;for(let x=0;x<8;x++)a[m+x]=C[v+x]|T[v+x]}return a[m+8]=f,m}function _s(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Ih(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function tr(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,f=a;for(;null!==f;){if(c=jo(f),null===c)return bu;if(l++,f=f[to],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return bu}function co(s,a,l){!function bh(s,a,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Pt)&&(c=l[Pt]),null==c&&(c=l[Pt]=Lc++);const f=c&Fc;a.data[s+(f>>Nl)]|=1<<f}(s,a,l)}function Ch(s,a,l){if(l&vt.Optional||void 0!==s)return s;ze()}function Su(s,a,l,c){if(l&vt.Optional&&void 0===c&&(c=null),!(l&(vt.Self|vt.Host))){const f=s[du],m=Kn(void 0);try{return f?f.get(a,c,l&vt.Optional):Zr(a,c,l&vt.Optional)}finally{Kn(m)}}return Ch(c,0,l)}function Dh(s,a,l,c=vt.Default,f){if(null!==s){if(1024&a[Wt]){const v=function Fp(s,a,l,c,f){let m=s,v=a;for(;null!==m&&null!==v&&1024&v[Wt]&&!(256&v[Wt]);){const C=Ol(m,v,l,c|vt.Self,vi);if(C!==vi)return C;let T=m.parent;if(!T){const x=v[Qr];if(x){const N=x.get(l,vi,c);if(N!==vi)return N}T=jo(v),v=v[to]}m=T}return f}(s,a,l,c,vi);if(v!==vi)return v}const m=Ol(s,a,l,c,vi);if(m!==vi)return m}return Su(a,l,c,f)}function Ol(s,a,l,c,f){const m=function Pp(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Pt)?s[Pt]:void 0;return"number"==typeof a?a>=0?a&Fc:Uc:a}(l);if("function"==typeof m){if(!ph(a,s,c))return c&vt.Host?Ch(f,0,c):Su(a,l,c,f);try{const v=m(c);if(null!=v||c&vt.Optional)return v;ze()}finally{Sl()}}else if("number"==typeof m){let v=null,C=Ih(s,a),T=bu,x=c&vt.Host?a[_r][Rr]:null;for((-1===C||c&vt.SkipSelf)&&(T=-1===C?tr(s,a):a[C+8],T!==bu&&Pl(c,!1)?(v=a[nt],C=Ca(T),a=Du(T,a)):C=-1);-1!==C;){const N=a[nt];if(ho(m,C,N.data)){const $=vr(C,a,l,v,c,x);if($!==vi)return $}T=a[C+8],T!==bu&&Pl(c,a[nt].data[C+8]===x)&&ho(m,C,a)?(v=N,C=Ca(T),a=Du(T,a)):C=-1}}return f}function vr(s,a,l,c,f,m){const v=a[nt],C=v.data[s+8],N=Da(C,v,l,null==c?yl(C)&&Pc:c!=v&&0!=(3&C.type),f&vt.Host&&m===C);return null!==N?$n(a,v,N,C):vi}function Da(s,a,l,c,f){const m=s.providerIndexes,v=a.data,C=1048575&m,T=s.directiveStart,N=m>>20,Q=f?C+N:s.directiveEnd;for(let re=c?C:C+N;re<Q;re++){const be=v[re];if(re<T&&l===be||re>=T&&be.type===l)return re}if(f){const re=v[T];if(re&&_i(re)&&re.type===l)return T}return null}function $n(s,a,l,c){let f=s[l];const m=a.data;if(function o_(s){return s instanceof Ls}(f)){const v=f;v.resolving&&function Te(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ye(-200,`Circular dependency in DI detected for ${s}${l}`)}(function He(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Oe(s)}(m[l]));const C=Tu(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?Kn(v.injectImpl):null;ph(s,c,vt.Default);try{f=s[l]=v.factory(void 0,m,s,c),a.firstCreatePass&&l>=c.directiveStart&&function s_(s,a,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(c){const v=vl(a);(l.preOrderHooks??(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(s,v)}f&&(l.preOrderHooks??(l.preOrderHooks=[])).push(0-s,f),m&&((l.preOrderHooks??(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks??(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],a)}finally{null!==T&&Kn(T),Tu(C),v.resolving=!1,Sl()}}return f}function ho(s,a,l){return!!(l[a+(s>>Nl)]&1<<s)}function Pl(s,a){return!(s&vt.Self||s&vt.Host&&a)}class Ta{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,c){return Dh(this._tNode,this._lView,a,Br(c),l)}}function Uc(){return new Ta(Xn(),pe())}function Bc(s){return H(()=>{const a=s.prototype.constructor,l=a[tn]||fo(a),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const m=f[tn]||fo(f);if(m&&m!==l)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function fo(s){return Ge(s)?()=>{const a=fo(X(s));return a&&a()}:Os(s)}function jo(s){const a=s[nt],l=a.type;return 2===l?a.declTNode:1===l?s[Rr]:null}function Au(s){return function kl(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const m=l[f];if(Eh(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(m===a)return l[f+1];f+=2}}}return null}(Xn(),s)}const Sa="__parameters__";function Ho(s,a,l){return H(()=>{const c=function Th(s){return function(...l){if(s){const c=s(...l);for(const f in c)this[f]=c[f]}}}(a);function f(...m){if(this instanceof f)return c.apply(this,m),this;const v=new f(...m);return C.annotation=v,C;function C(T,x,N){const $=T.hasOwnProperty(Sa)?T[Sa]:Object.defineProperty(T,Sa,{value:[]})[Sa];for(;$.length<=N;)$.push(null);return($[N]=$[N]||[]).push(v),T}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class dn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=St({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const xu=Function;function po(s,a){s.forEach(l=>Array.isArray(l)?po(l,a):a(l))}function qc(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function Ru(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Aa(s,a){const l=[];for(let c=0;c<s;c++)l.push(a);return l}function Gi(s,a,l){let c=zi(s,a);return c>=0?s[1|c]=l:(c=~c,function Vl(s,a,l,c){let f=s.length;if(f==a)s.push(l,c);else if(1===f)s.push(c,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=c}}(s,c,a,l)),c}function hn(s,a){const l=zi(s,a);if(l>=0)return s[1|l]}function zi(s,a){return function os(s,a,l){let c=0,f=s.length>>l;for(;f!==c;){const m=c+(f-c>>1),v=s[m<<l];if(a===v)return m<<l;v>a?f=m:c=m+1}return~(f<<l)}(s,a,1)}const zo=oi(Ho("Optional"),8),dt=oi(Ho("SkipSelf"),4);var Rt=(()=>((Rt=Rt||{})[Rt.Important=1]="Important",Rt[Rt.DashCase=2]="DashCase",Rt))();const Ph=new Map;let us=0;const ee="__ngContext__";function ae(s,a){ui(a)?(s[ee]=a[da],function Lh(s){Ph.set(s[da],s)}(a)):s[ee]=a}let vs;function ws(s,a){return vs(s,a)}function Uh(s){const a=s[Pn];return ss(a)?a[Pn]:a}function Bu(s){return Gp(s[Bi])}function ju(s){return Gp(s[vn])}function Gp(s){for(;null!==s&&!ss(s);)s=s[vn];return s}function Oa(s,a,l,c,f){if(null!=c){let m,v=!1;ss(c)?m=c:ui(c)&&(v=!0,c=c[xr]);const C=yr(c);0===s&&null!==l?null==f?Ei(a,l,C):Yt(a,l,C,f||null,!0):1===s&&null!==l?Yt(a,l,C,f||null,!0):2===s?function $v(s,a,l){const c=Us(s,a);c&&function Pa(s,a,l,c){s.removeChild(a,l,c)}(s,c,a,l)}(a,C,v):3===s&&a.destroyNode(C),null!=m&&function Qp(s,a,l,c,f){const m=l[ha];m!==yr(l)&&Oa(a,s,c,m,f);for(let C=jr;C<l.length;C++){const T=l[C];Yp(T[nt],T,s,a,c,m)}}(a,s,m,l,f)}}function qp(s,a,l){return s.createElement(a,l)}function I(s,a){const l=s[Ns],c=l.indexOf(a),f=a[Pn];512&a[Wt]&&(a[Wt]&=-513,ma(f,-1)),l.splice(c,1)}function R(s,a){if(s.length<=jr)return;const l=jr+a,c=s[l];if(c){const f=c[Mo];null!==f&&f!==s&&I(f,c),a>0&&(s[l-1][vn]=c[vn]);const m=Ru(s,jr+a);!function u_(s,a){Yp(s,a,a[Zt],2,null,null),a[xr]=null,a[Rr]=null}(c[nt],c);const v=m[ji];null!==v&&v.detachView(m[nt]),c[Pn]=null,c[vn]=null,c[Wt]&=-65}return c}function O(s,a){if(!(128&a[Wt])){const l=a[Zt];l.destroyNode&&Yp(s,a,l,3,null,null),function w(s){let a=s[Bi];if(!a)return J(s[nt],s);for(;a;){let l=null;if(ui(a))l=a[Bi];else{const c=a[jr];c&&(l=c)}if(!l){for(;a&&!a[vn]&&a!==s;)ui(a)&&J(a[nt],a),a=a[Pn];null===a&&(a=s),ui(a)&&J(a[nt],a),l=a&&a[vn]}a=l}}(a)}}function J(s,a){if(!(128&a[Wt])){a[Wt]&=-65,a[Wt]|=128,function je(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const f=a[l[c]];if(!(f instanceof Ls)){const m=l[c+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=f[m[v]],T=m[v+1];jn(4,C,T);try{T.call(C)}finally{jn(5,C,T)}}else{jn(4,f,m);try{m.call(f)}finally{jn(5,f,m)}}}}}(s,a),function he(s,a){const l=s.cleanup,c=a[Ms];let f=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+3];v>=0?c[f=v]():c[f=-v].unsubscribe(),m+=2}else{const v=c[f=l[m+1]];l[m].call(v)}if(null!==c){for(let m=f+1;m<c.length;m++)(0,c[m])();a[Ms]=null}}(s,a),1===a[nt].type&&a[Zt].destroy();const l=a[Mo];if(null!==l&&ss(a[Pn])){l!==a[Pn]&&I(l,a);const c=a[ji];null!==c&&c.detachView(s)}!function E(s){Ph.delete(s[da])}(a)}}function Xe(s,a,l){return function It(s,a,l){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return l[xr];{const{componentOffset:f}=c;if(f>-1){const{encapsulation:m}=s.data[c.directiveStart+f];if(m===L.None||m===L.Emulated)return null}return $r(c,l)}}(s,a.parent,l)}function Yt(s,a,l,c,f){s.insertBefore(a,l,c,f)}function Ei(s,a,l){s.appendChild(a,l)}function Ko(s,a,l,c,f){null!==c?Yt(s,a,l,c,f):Ei(s,a,l)}function Us(s,a){return s.parentNode(a)}function Bh(s,a,l){return Fa(s,a,l)}let jh,zv,l_,Fa=function id(s,a,l){return 40&s.type?$r(s,l):null};function ql(s,a,l,c){const f=Xe(s,c,a),m=a[Zt],C=Bh(c.parent||a[Rr],c,a);if(null!=f)if(Array.isArray(l))for(let T=0;T<l.length;T++)Ko(m,f,l[T],C,!1);else Ko(m,f,l,C,!1);void 0!==jh&&jh(m,c,a,l,f)}function Hh(s,a){if(null!==a){const l=a.type;if(3&l)return $r(a,s);if(4&l)return La(-1,s[a.index]);if(8&l){const c=a.child;if(null!==c)return Hh(s,c);{const f=s[a.index];return ss(f)?La(-1,f):yr(f)}}if(32&l)return ws(a,s)()||yr(s[a.index]);{const c=Wl(s,a);return null!==c?Array.isArray(c)?c[0]:Hh(Uh(s[_r]),c):Hh(s,a.next)}}return null}function Wl(s,a){return null!==a?s[_r][Rr].projection[a.projection]:null}function La(s,a){const l=jr+s+1;if(l<a.length){const c=a[l],f=c[nt].firstChild;if(null!==f)return Hh(c,f)}return a[ha]}function Kp(s,a,l,c,f,m,v){for(;null!=l;){const C=c[l.index],T=l.type;if(v&&0===a&&(C&&ae(yr(C),c),l.flags|=2),32!=(32&l.flags))if(8&T)Kp(s,a,l.child,c,f,m,!1),Oa(a,s,f,C,m);else if(32&T){const x=ws(l,c);let N;for(;N=x();)Oa(a,s,f,N,m);Oa(a,s,f,C,m)}else 16&T?Hv(s,a,c,l,f,m):Oa(a,s,f,C,m);l=v?l.projectionNext:l.next}}function Yp(s,a,l,c,f,m){Kp(l,c,s.firstChild,a,f,m,!1)}function Hv(s,a,l,c,f,m){const v=l[_r],T=v[Rr].projection[c.projection];if(Array.isArray(T))for(let x=0;x<T.length;x++)Oa(a,s,f,T[x],m);else Kp(s,a,T,v[Pn],f,m,!0)}function Zl(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function Jp(s,a,l){const{mergedAttrs:c,classes:f,styles:m}=l;null!==c&&ba(s,a,c),null!==f&&Zl(s,a,f),null!==m&&function Gv(s,a,l){s.setAttribute(a,"style",l)}(s,a,m)}function QS(s){zv=s}function Ub(s){return function qv(){if(void 0===l_&&(l_=null,fn.trustedTypes))try{l_=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return l_}()?.createScriptURL(s)||s}class Bb{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}function Ua(s){return s instanceof Bb?s.changingThisBreaksApplicationSecurity:s}function Bs(s,a){const l=function zh(s){return s instanceof Bb&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${ct})`)}return l===a}const Gb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Or=(()=>((Or=Or||{})[Or.NONE=0]="NONE",Or[Or.HTML=1]="HTML",Or[Or.STYLE=2]="STYLE",Or[Or.SCRIPT=3]="SCRIPT",Or[Or.URL=4]="URL",Or[Or.RESOURCE_URL=5]="RESOURCE_URL",Or))();function Kb(s){const a=sg();return a?a.sanitize(Or.URL,s)||"":Bs(s,"URL")?Ua(s):function tg(s){return(s=String(s)).match(Gb)?s:"unsafe:"+s}(Oe(s))}function p_(s){const a=sg();if(a)return Ub(a.sanitize(Or.RESOURCE_URL,s)||"");if(Bs(s,"ResourceURL"))return Ub(Ua(s));throw new ye(904,!1)}function Qb(s,a,l){return function cA(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?p_:Kb}(a,l)(s)}function sg(){const s=pe();return s&&s[_l]}const tw=new dn("ENVIRONMENT_INITIALIZER"),od=new dn("INJECTOR",-1),Wh=new dn("INJECTOR_DEF_TYPES");class Jb{get(a,l=Yn){if(l===Yn){const c=new Error(`NullInjectorError: No provider for ${_e(a)}!`);throw c.name="NullInjectorError",c}return l}}function og(...s){return{\u0275providers:Zh(0,s),\u0275fromNgModule:!0}}function Zh(s,...a){const l=[],c=new Set;let f;return po(a,m=>{const v=m;nw(v,l,[],c)&&(f||(f=[]),f.push(v))}),void 0!==f&&Xb(f,l),l}function Xb(s,a){for(let l=0;l<s.length;l++){const{providers:f}=s[l];rw(f,m=>{a.push(m)})}}function nw(s,a,l,c){if(!(s=X(s)))return!1;let f=null,m=ri(s);const v=!m&&Et(s);if(m||v){if(v&&!v.standalone)return!1;f=s}else{const T=s.ngModule;if(m=ri(T),!m)return!1;f=T}const C=c.has(f);if(v){if(C)return!1;if(c.add(f),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of T)nw(x,a,l,c)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let x;c.add(f);try{po(m.imports,N=>{nw(N,a,l,c)&&(x||(x=[]),x.push(N))})}finally{}void 0!==x&&Xb(x,a)}if(!C){const x=Os(f)||(()=>new f);a.push({provide:f,useFactory:x,deps:Y},{provide:Wh,useValue:f,multi:!0},{provide:tw,useValue:()=>Gt(f),multi:!0})}const T=m.providers;null==T||C||rw(T,N=>{a.push(N)})}}return f!==s&&void 0!==s.providers}function rw(s,a){for(let l of s)Ae(l)&&(l=l.\u0275providers),Array.isArray(l)?rw(l,a):a(l)}const hA=ce({provide:String,useValue:ce});function iw(s){return null!==s&&"object"==typeof s&&hA in s}function $u(s){return"function"==typeof s}const Kl=new dn("Set Injector scope."),m_={},pA={};let sw;function __(){return void 0===sw&&(sw=new Jb),sw}class ad{}class tI extends ad{get destroyed(){return this._destroyed}constructor(a,l,c,f){super(),this.parent=l,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yh(a,v=>this.processProvider(v)),this.records.set(od,Kh(void 0,this)),f.has("environment")&&this.records.set(ad,Kh(void 0,this));const m=this.records.get(Kl);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Wh.multi,Y,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=sn(this),c=Kn(void 0);try{return a()}finally{sn(l),Kn(c)}}get(a,l=Yn,c=vt.Default){this.assertNotDestroyed(),c=Br(c);const f=sn(this),m=Kn(void 0);try{if(!(c&vt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const T=function lw(s){return"function"==typeof s||"object"==typeof s&&s instanceof dn}(a)&&On(a);C=T&&this.injectableDefInScope(T)?Kh(ow(a),m_):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(c&vt.Self?__():this.parent).get(a,l=c&vt.Optional&&l===Yn?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Un]=v[Un]||[]).unshift(_e(a)),f)throw v;return function ai(s,a,l,c){const f=s[Un];throw a[en]&&f.unshift(a[en]),s.message=function q(s,a,l,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==mr?s.slice(2):s;let f=_e(a);if(Array.isArray(a))f=a.map(_e).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):_e(C)))}f=`{${m.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${s.replace(qn,"\n  ")}`}("\n"+s.message,f,l,c),s[si]=f,s[Un]=null,s}(v,a,"R3InjectorError",this.source)}throw v}finally{Kn(m),sn(f)}}resolveInjectorInitializers(){const a=sn(this),l=Kn(void 0);try{const c=this.get(tw.multi,Y,vt.Self);for(const f of c)f()}finally{sn(a),Kn(l)}}toString(){const a=[],l=this.records;for(const c of l.keys())a.push(_e(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(a){let l=$u(a=X(a))?a:X(a&&a.provide);const c=function mA(s){return iw(s)?Kh(void 0,s.useValue):Kh(aw(s),m_)}(a);if($u(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=Kh(void 0,m_,!0),f.factory=()=>Jn(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,c)}hydrate(a,l){return l.value===m_&&(l.value=pA,l.value=l.factory()),"object"==typeof l.value&&l.value&&function nI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=X(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function ow(s){const a=On(s),l=null!==a?a.factory:Os(s);if(null!==l)return l;if(s instanceof dn)throw new ye(204,!1);if(s instanceof Function)return function gA(s){const a=s.length;if(a>0)throw Aa(a,"?"),new ye(204,!1);const l=function ni(s){return s&&(s[gi]||s[xo])||null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new ye(204,!1)}function aw(s,a,l){let c;if($u(s)){const f=X(s);return Os(f)||ow(f)}if(iw(s))c=()=>X(s.useValue);else if(function eI(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Jn(s.deps||[]));else if(function fA(s){return!(!s||!s.useExisting)}(s))c=()=>Gt(X(s.useExisting));else{const f=X(s&&(s.useClass||s.provide));if(!function uw(s){return!!s.deps}(s))return Os(f)||ow(f);c=()=>new f(...Jn(s.deps))}return c}function Kh(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function Yh(s,a){for(const l of s)Array.isArray(l)?Yh(l,a):l&&Ae(l)?Yh(l.\u0275providers,a):a(l)}class _A{}class rI{}class sI{resolveComponentFactory(a){throw function yA(s){const a=Error(`No component factory found for ${_e(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let Qh=(()=>{class s{}return s.NULL=new sI,s})();function y_(){return Hu(Xn(),pe())}function Hu(s,a){return new Jh($r(s,a))}let Jh=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=y_,s})();function ag(s){return s instanceof Jh?s.nativeElement:s}class dw{}let vA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function wA(){const s=pe(),l=Mr(Xn().index,s);return(ui(l)?l:s)[Zt]}(),s})(),EA=(()=>{class s{}return s.\u0275prov=St({token:s,providedIn:"root",factory:()=>null}),s})();class oI{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const aI=new oI("15.2.8"),v_={},hw="ngOriginalError";function fw(s){return s[hw]}class ug{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&fw(a);for(;l&&fw(l);)l=fw(l);return l||null}}function lI(s){return s.ownerDocument.defaultView}function Ba(s){return s instanceof Function?s():s}function pI(s,a,l){let c=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=a.length;if(f+m===c||s.charCodeAt(f+m)<=32)return f}l=f+1}}const pw="ng-template";function gw(s,a,l){let c=0,f=!0;for(;c<s.length;){let m=s[c++];if("string"==typeof m&&f){const v=s[c++];if(l&&"class"===m&&-1!==pI(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;c<s.length&&"string"==typeof(m=s[c++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(f=!1)}}return!1}function mw(s){return 4===s.type&&s.value!==pw}function Xh(s,a,l){return a===(4!==s.type||l?s.value:pw)}function _w(s,a,l){let c=4;const f=s.attrs||[],m=function mI(s){for(let a=0;a<s.length;a++)if(Eh(s[a]))return a;return s.length}(f);let v=!1;for(let C=0;C<a.length;C++){const T=a[C];if("number"!=typeof T){if(!v)if(4&c){if(c=2|1&c,""!==T&&!Xh(s,T,l)||""===T&&1===a.length){if(Qo(c))return!1;v=!0}}else{const x=8&c?T:a[++C];if(8&c&&null!==s.attrs){if(!gw(s.attrs,x,l)){if(Qo(c))return!1;v=!0}continue}const $=gI(8&c?"class":T,f,mw(s),l);if(-1===$){if(Qo(c))return!1;v=!0;continue}if(""!==x){let Q;Q=$>m?"":f[$+1].toLowerCase();const re=8&c?Q:null;if(re&&-1!==pI(re,x,0)||2&c&&x!==Q){if(Qo(c))return!1;v=!0}}}}else{if(!v&&!Qo(c)&&!Qo(T))return!1;if(v&&Qo(T))continue;v=!1,c=T|1&c}}return Qo(c)||v}function Qo(s){return 0==(1&s)}function gI(s,a,l,c){if(null===a)return-1;let f=0;if(c||!l){let m=!1;for(;f<a.length;){const v=a[f];if(v===s)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function _I(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===a)return l;l++}return-1}(a,s)}function cg(s,a,l=!1){for(let c=0;c<a.length;c++)if(_w(s,a[c],l))return!0;return!1}function SA(s,a){e:for(let l=0;l<a.length;l++){const c=a[l];if(s.length===c.length){for(let f=0;f<s.length;f++)if(s[f]!==c[f])continue e;return!0}}return!1}function yI(s,a){return s?":not("+a.trim()+")":a}function AA(s){let a=s[0],l=1,c=2,f="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const C=s[++l];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?f+="."+v:4&c&&(f+=" "+v);else""!==f&&!Qo(v)&&(a+=yI(m,f),f=""),c=v,m=m||!Qo(c);l++}return""!==f&&(a+=yI(m,f)),a}const qt={};function vI(s){wI($t(),pe(),Jr()+s,!1)}function wI(s,a,l,c){if(!c)if(3==(3&a[Wt])){const m=s.preOrderCheckHooks;null!==m&&kc(a,m,l)}else{const m=s.preOrderHooks;null!==m&&yh(a,m,0,l)}ms(l)}function bI(s,a=null,l=null,c){const f=yw(s,a,l,c);return f.resolveInjectorInitializers(),f}function yw(s,a=null,l=null,c,f=new Set){const m=[l||Y,og(s)];return c=c||("object"==typeof s?void 0:_e(s)),new tI(m,a||__(),c||null,f)}let ef=(()=>{class s{static create(l,c){if(Array.isArray(l))return bI({name:""},c,l,"");{const f=l.name??"";return bI({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=Yn,s.NULL=new Jb,s.\u0275prov=St({token:s,providedIn:"any",factory:()=>Gt(od)}),s.__NG_ELEMENT_ID__=-1,s})();function rf(s,a=vt.Default){const l=pe();return null===l?Gt(s,a):Dh(Xn(),l,X(s),a)}function SI(){throw new Error("invalid")}function AI(s,a){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const m=l[c+1];if(-1!==m){const v=s.data[m];fh(l[c]),v.contentQueries(2,a[m],m)}}}function C_(s,a,l,c,f,m,v,C,T,x,N){const $=a.blueprint.slice();return $[xr]=f,$[Wt]=76|c,(null!==N||s&&1024&s[Wt])&&($[Wt]|=1024),yu($),$[Pn]=$[to]=s,$[Wn]=l,$[Mi]=v||s&&s[Mi],$[Zt]=C||s&&s[Zt],$[_l]=T||s&&s[_l]||null,$[du]=x||s&&s[du]||null,$[Rr]=m,$[da]=function Fh(){return us++}(),$[Qr]=N,$[_r]=2==a.type?s[_r]:$,$}function pg(s,a,l,c,f){let m=s.data[a];if(null===m)m=function Iw(s,a,l,c,f){const m=uh(),v=Cl(),T=s.data[a]=function we(s,a,l,c,f,m){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,a,c,f);return null===s.firstChild&&(s.firstChild=T),null!==m&&(v?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T,T.prev=m)),T}(s,a,l,c,f),function dh(){return Lt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=l,m.value=c,m.attrs=f;const v=function _a(){const s=Lt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Hi(m,!0),m}function V(s,a,l,c){if(0===l)return-1;const f=a.length;for(let m=0;m<l;m++)a.push(c),s.blueprint.push(c),s.data.push(null);return f}function Pi(s,a,l){va(a);try{const c=s.viewQuery;null!==c&&lf(1,c,l);const f=s.template;null!==f&&wo(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&AI(s,a),s.staticViewQueries&&lf(2,s.viewQuery,l);const m=s.components;null!==m&&function xI(s,a){for(let l=0;l<a.length;l++)af(s,a[l])}(a,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[Wt]&=-5,gh()}}function Es(s,a,l,c){const f=a[Wt];if(128!=(128&f)){va(a);try{yu(a),function uo(s){return Lt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&wo(s,a,l,2,c);const v=3==(3&f);if(v){const x=s.preOrderCheckHooks;null!==x&&kc(a,x,null)}else{const x=s.preOrderHooks;null!==x&&yh(a,x,0,null),vh(a,0)}if(function Rw(s){for(let a=Bu(s);null!==a;a=ju(a)){if(!a[fu])continue;const l=a[Ns];for(let c=0;c<l.length;c++){const f=l[c];512&f[Wt]||ma(f[Pn],1),f[Wt]|=512}}}(a),function Ha(s){for(let a=Bu(s);null!==a;a=ju(a))for(let l=jr;l<a.length;l++){const c=a[l],f=c[nt];oo(c)&&Es(f,c,f.template,c[Wn])}}(a),null!==s.contentQueries&&AI(s,a),v){const x=s.contentCheckHooks;null!==x&&kc(a,x)}else{const x=s.contentHooks;null!==x&&yh(a,x,1),vh(a,1)}!function zA(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)ms(~f);else{const m=f,v=l[++c],C=l[++c];hh(v,m),C(2,a[m])}}}finally{ms(-1)}}(s,a);const C=s.components;null!==C&&function qA(s,a){for(let l=0;l<a.length;l++)OI(s,a[l])}(a,C);const T=s.viewQuery;if(null!==T&&lf(2,T,c),v){const x=s.viewCheckHooks;null!==x&&kc(a,x)}else{const x=s.viewHooks;null!==x&&yh(a,x,2),vh(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Wt]&=-41,512&a[Wt]&&(a[Wt]&=-513,ma(a[Pn],-1))}finally{gh()}}}function wo(s,a,l,c,f){const m=Jr(),v=2&c;try{ms(-1),v&&a.length>Dn&&wI(s,a,Dn,!1),jn(v?2:0,f),l(c,f)}finally{ms(m),jn(v?3:1,f)}}function gg(s,a,l){if(ko(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}function En(s,a,l){oh()&&(function KA(s,a,l,c){const f=l.directiveStart,m=l.directiveEnd;yl(l)&&function Qi(s,a,l){const c=$r(a,s),f=Cw(l),m=s[Mi],v=uf(s,C_(s,f,null,l.onPush?32:16,c,a,m,m.createRenderer(c,l),null,null,null));s[a.index]=v}(a,l,s.data[f+l.componentOffset]),s.firstCreatePass||Vc(l,a),ae(c,a);const v=l.initialInputs;for(let C=f;C<m;C++){const T=s.data[C],x=$n(a,s,C,l);ae(x,a),null!==v&&kI(0,C-f,x,T,0,v),_i(T)&&(Mr(l.index,a)[Wn]=$n(a,s,C,l))}}(s,a,l,$r(l,a)),64==(64&l.flags)&&Fi(s,a,l))}function mg(s,a,l=$r){const c=a.localNames;if(null!==c){let f=a.index+1;for(let m=0;m<c.length;m+=2){const v=c[m+1],C=-1===v?l(a,s):s[v];s[f++]=C}}}function Cw(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Dw(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Dw(s,a,l,c,f,m,v,C,T,x){const N=Dn+c,$=N+f,Q=function ci(s,a){const l=[];for(let c=0;c<a;c++)l.push(c<s?null:qt);return l}(N,$),re="function"==typeof x?x():x;return Q[nt]={type:s,blueprint:Q,template:l,queries:null,viewQuery:C,declTNode:a,data:Q.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:re,incompleteFirstPass:!1}}function D_(s,a,l,c){const f=N_(a);null===l?f.push(c):(f.push(l),s.firstCreatePass&&k_(s).push(c,f.length-1))}function RI(s,a,l,c){for(let f in s)if(s.hasOwnProperty(f)){l=null===l?{}:l;const m=s[f];null===c?Eo(l,a,f,m):c.hasOwnProperty(f)&&Eo(l,a,c[f],m)}return l}function Eo(s,a,l,c){s.hasOwnProperty(l)?s[l].push(a,c):s[l]=[a,c]}function Sw(s,a,l,c){if(oh()){const f=null===c?null:{"":-1},m=function bi(s,a){const l=s.directiveRegistry;let c=null,f=null;if(l)for(let m=0;m<l.length;m++){const v=l[m];if(cg(a,v.selectors,!1))if(c||(c=[]),_i(v))if(null!==v.findHostDirectiveDefs){const C=[];f=f||new Map,v.findHostDirectiveDefs(v,C,f),c.unshift(...C,v),ja(s,a,C.length)}else c.unshift(v),ja(s,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,c,f),c.push(v)}return null===c?null:[c,f]}(s,l);let v,C;null===m?v=C=null:[v,C]=m,null!==v&&x_(s,a,l,v,f,C),f&&function YA(s,a,l){if(a){const c=s.localNames=[];for(let f=0;f<a.length;f+=2){const m=l[a[f+1]];if(null==m)throw new ye(-301,!1);c.push(a[f],m)}}}(l,c,f)}l.mergedAttrs=Uo(l.mergedAttrs,l.attrs)}function x_(s,a,l,c,f,m){for(let x=0;x<c.length;x++)co(Vc(l,a),s,c[x].type);!function Aw(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}(l,s.data.length,c.length);for(let x=0;x<c.length;x++){const N=c[x];N.providersResolver&&N.providersResolver(N)}let v=!1,C=!1,T=V(s,a,c.length,null);for(let x=0;x<c.length;x++){const N=c[x];l.mergedAttrs=Uo(l.mergedAttrs,N.hostAttrs),NI(s,l,a,T,N),MI(T,N,f),null!==N.contentQueries&&(l.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(l.flags|=64);const $=N.type.prototype;!v&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(l.index),v=!0),!C&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(l.index),C=!0),T++}!function ut(s,a,l){const f=a.directiveEnd,m=s.data,v=a.attrs,C=[];let T=null,x=null;for(let N=a.directiveStart;N<f;N++){const $=m[N],Q=l?l.get($):null,be=Q?Q.outputs:null;T=RI($.inputs,N,T,Q?Q.inputs:null),x=RI($.outputs,N,x,be);const $e=null===T||null===v||mw(a)?null:xw(T,N,v);C.push($e)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=8),T.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=T,a.outputs=x}(s,l,m)}function Fi(s,a,l){const c=l.directiveStart,f=l.directiveEnd,m=l.index,v=function r_(){return Lt.lFrame.currentDirectiveIndex}();try{ms(m);for(let C=c;C<f;C++){const T=s.data[C],x=a[C];er(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&R_(T,x)}}finally{ms(-1),er(v)}}function R_(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function ja(s,a,l){a.componentOffset=l,(s.components??(s.components=[])).push(a.index)}function MI(s,a,l){if(l){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)l[a.exportAs[c]]=s;_i(a)&&(l[""]=s)}}function NI(s,a,l,c,f){s.data[c]=f;const m=f.factory||(f.factory=Os(f.type)),v=new Ls(m,_i(f),rf);s.blueprint[c]=v,l[c]=v,function WA(s,a,l,c,f){const m=f.hostBindings;if(m){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~a.index;(function ZA(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(v)!=C&&v.push(C),v.push(l,c,m)}}(s,a,c,V(s,l,f.hostVars,qt),f)}function $a(s,a,l,c,f,m){const v=$r(s,a);!function sf(s,a,l,c,f,m,v){if(null==m)s.removeAttribute(a,f,l);else{const C=null==v?Oe(m):v(m,c||"",f);s.setAttribute(a,f,C,l)}}(a[Zt],v,m,s.value,l,c,f)}function kI(s,a,l,c,f,m){const v=m[a];if(null!==v){const C=c.setInput;for(let T=0;T<v.length;){const x=v[T++],N=v[T++],$=v[T++];null!==C?c.setInput(l,$,x,N):l[N]=$}}}function xw(s,a,l){let c=null,f=0;for(;f<l.length;){const m=l[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(s.hasOwnProperty(m)){null===c&&(c=[]);const v=s[m];for(let C=0;C<v.length;C+=2)if(v[C]===a){c.push(m,v[C+1],l[f+1]);break}}f+=2}else f+=2;else f+=4}return c}function _g(s,a,l,c){return[s,!0,!1,a,null,0,c,l,null,null]}function OI(s,a){const l=Mr(a,s);if(oo(l)){const c=l[nt];48&l[Wt]?Es(c,l,c.template,l[Wn]):l[eo]>0&&Mw(l)}}function Mw(s){for(let c=Bu(s);null!==c;c=ju(c))for(let f=jr;f<c.length;f++){const m=c[f];if(oo(m))if(512&m[Wt]){const v=m[nt];Es(v,m,v.template,m[Wn])}else m[eo]>0&&Mw(m)}const l=s[nt].components;if(null!==l)for(let c=0;c<l.length;c++){const f=Mr(l[c],s);oo(f)&&f[eo]>0&&Mw(f)}}function af(s,a){const l=Mr(a,s),c=l[nt];(function PI(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(c,l),Pi(c,l,l[Wn])}function uf(s,a){return s[Bi]?s[hu][vn]=a:s[Bi]=a,s[hu]=a,a}function yg(s){for(;s;){s[Wt]|=32;const a=Uh(s);if(ro(s)&&!a)return s;s=a}return null}function M_(s,a,l,c=!0){const f=a[Mi];f.begin&&f.begin();try{Es(s,a,s.template,l)}catch(v){throw c&&VI(a,v),v}finally{f.end&&f.end()}}function lf(s,a,l){fh(0),a(s,l)}function N_(s){return s[Ms]||(s[Ms]=[])}function k_(s){return s.cleanup||(s.cleanup=[])}function VI(s,a){const l=s[du],c=l?l.get(ug,null):null;c&&c.handleError(a)}function vg(s,a,l,c,f){for(let m=0;m<l.length;){const v=l[m++],C=l[m++],T=a[v],x=s.data[v];null!==x.setInput?x.setInput(T,f,c,C):T[C]=f}}function O_(s,a,l){let c=l?s.styles:null,f=l?s.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?m=C:1==m?f=ve(f,C):2==m&&(c=ve(c,C+": "+a[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=f:s.classesWithoutHost=f}function Yl(s,a,l,c,f=!1){for(;null!==l;){const m=a[l.index];if(null!==m&&c.push(yr(m)),ss(m))for(let C=jr;C<m.length;C++){const T=m[C],x=T[nt].firstChild;null!==x&&Yl(T[nt],T,x,c)}const v=l.type;if(8&v)Yl(s,a,l.child,c);else if(32&v){const C=ws(l,a);let T;for(;T=C();)c.push(T)}else if(16&v){const C=Wl(a,l);if(Array.isArray(C))c.push(...C);else{const T=Uh(a[_r]);Yl(T[nt],T,C,c,!0)}}l=f?l.projectionNext:l.next}return c}class wg{get rootNodes(){const a=this._lView,l=a[nt];return Yl(l,a,l.firstChild,[])}constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(a){this._lView[Wn]=a}get destroyed(){return 128==(128&this._lView[Wt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Pn];if(ss(a)){const l=a[no],c=l?l.indexOf(this):-1;c>-1&&(R(a,c),Ru(l,c))}this._attachedToViewContainer=!1}O(this._lView[nt],this._lView)}onDestroy(a){D_(this._lView[nt],this._lView,null,a)}markForCheck(){yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Wt]&=-65}reattach(){this._lView[Wt]|=64}detectChanges(){M_(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wp(s,a){Yp(s,a,a[Zt],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=a}}class Eg extends wg{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;M_(a[nt],a,a[Wn],!1)}checkNoChanges(){}get context(){return null}}class UI extends Qh{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Et(a);return new cf(l,this.ngModule)}}function BI(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class Nw{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,c){c=Br(c);const f=this.injector.get(a,v_,c);return f!==v_||l===v_?f:this.parentInjector.get(a,l,c)}}class cf extends rI{get inputs(){return BI(this.componentDef.inputs)}get outputs(){return BI(this.componentDef.outputs)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function xA(s){return s.map(AA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,c,f){let m=(f=f||this.ngModule)instanceof ad?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new Nw(a,m):a,C=v.get(dw,null);if(null===C)throw new ye(407,!1);const T=v.get(EA,null),x=C.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",$=c?function Z1(s,a,l){return s.selectRootElement(a,l===L.ShadowDom)}(x,c,this.componentDef.encapsulation):qp(x,N,function P_(s){const a=s.toLowerCase();return"svg"===a?mu:"math"===a?"math":null}(N)),Q=this.componentDef.onPush?288:272,re=Dw(0,null,null,1,0,null,null,null,null,null),be=C_(null,re,null,Q,null,null,C,x,T,v,null);let $e,et;va(be);try{const _t=this.componentDef;let Ft,ke=null;_t.findHostDirectiveDefs?(Ft=[],ke=new Map,_t.findHostDirectiveDefs(_t,Ft,ke),Ft.push(_t)):Ft=[_t];const nn=function F_(s,a){const l=s[nt],c=Dn;return s[c]=a,pg(l,c,2,"#host",null)}(be,$),ar=function kw(s,a,l,c,f,m,v,C){const T=f[nt];!function Ow(s,a,l,c){for(const f of s)a.mergedAttrs=Uo(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(O_(a,a.mergedAttrs,!0),null!==l&&Jp(c,l,a))}(c,s,a,v);const x=m.createRenderer(a,l),N=C_(f,Cw(l),null,l.onPush?32:16,f[s.index],s,m,x,C||null,null,null);return T.firstCreatePass&&ja(T,s,c.length-1),uf(f,N),f[s.index]=N}(nn,$,_t,Ft,be,C,x);et=bl(re,Dn),$&&function Fw(s,a,l,c){if(c)ba(s,l,["ng-version",aI.full]);else{const{attrs:f,classes:m}=function RA(s){const a=[],l=[];let c=1,f=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===f?""!==m&&a.push(m,s[++c]):8===f&&l.push(m);else{if(!Qo(f))break;f=m}c++}return{attrs:a,classes:l}}(a.selectors[0]);f&&ba(s,l,f),m&&m.length>0&&Zl(s,l,m.join(" "))}}(x,_t,$,c),void 0!==l&&function $I(s,a,l){const c=s.projection=[];for(let f=0;f<a.length;f++){const m=l[f];c.push(null!=m?Array.from(m):null)}}(et,this.ngContentSelectors,l),$e=function Pw(s,a,l,c,f,m){const v=Xn(),C=f[nt],T=$r(v,f);x_(C,f,v,l,null,c);for(let N=0;N<l.length;N++)ae($n(f,C,v.directiveStart+N,v),f);Fi(C,f,v),T&&ae(T,f);const x=$n(f,C,v.directiveStart+v.componentOffset,v);if(s[Wn]=f[Wn]=x,null!==m)for(const N of m)N(x,a);return gg(C,v,s),x}(ar,_t,Ft,ke,be,[HI]),Pi(re,be,null)}finally{gh()}return new jI(this.componentType,$e,Hu(et,be),be,et)}}class jI extends _A{constructor(a,l,c,f,m){super(),this.location=c,this._rootLView=f,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new Eg(f),this.componentType=a}setInput(a,l){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[a])){const m=this._rootLView;vg(m[nt],m,f,a,l),yg(Mr(this._tNode.index,m))}}get injector(){return new Ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function HI(){const s=Xn();Al(pe()[nt],s)}function L_(s){let a=function GI(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;a;){let f;if(_i(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ye(903,!1);f=a.\u0275dir}if(f){if(l){c.push(f);const v=s;v.inputs=bg(s.inputs),v.declaredInputs=bg(s.declaredInputs),v.outputs=bg(s.outputs);const C=f.hostBindings;C&&Lw(s,C);const T=f.viewQuery,x=f.contentQueries;if(T&&qI(s,T),x&&XA(s,x),Ee(s.inputs,f.inputs),Ee(s.declaredInputs,f.declaredInputs),Ee(s.outputs,f.outputs),_i(f)&&f.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(s),C===L_&&(l=!1)}}a=Object.getPrototypeOf(a)}!function zI(s){let a=0,l=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=a+=f.hostVars,f.hostAttrs=Uo(f.hostAttrs,l=Uo(l,f.hostAttrs))}}(c)}function bg(s){return s===k?{}:s===Y?[]:s}function qI(s,a){const l=s.viewQuery;s.viewQuery=l?(c,f)=>{a(c,f),l(c,f)}:a}function XA(s,a){const l=s.contentQueries;s.contentQueries=l?(c,f,m)=>{a(c,f,m),l(c,f,m)}:a}function Lw(s,a){const l=s.hostBindings;s.hostBindings=l?(c,f)=>{a(c,f),l(c,f)}:a}function U_(s){return!!$w(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function $w(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Jo(s,a,l){return s[a]=l}function di(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function Gw(s,a,l,c){const f=pe();return di(f,Fs(),a)&&($t(),$a(Fn(),f,s,a,l,c)),Gw}function Kw(s,a,l,c,f,m,v,C){const T=pe(),x=$t(),N=s+Dn,$=x.firstCreatePass?function B_(s,a,l,c,f,m,v,C,T){const x=a.consts,N=pg(a,s,4,v||null,Ps(x,C));Sw(a,l,N,Ps(x,T)),Al(a,N);const $=N.tView=Dw(2,N,c,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x);return null!==a.queries&&(a.queries.template(a,N),$.queries=a.queries.embeddedTView(N)),N}(N,x,T,a,l,c,f,m,v):x.data[N];Hi($,!1);const Q=T[Zt].createComment("");ql(x,T,Q,$),ae(Q,T),uf(T,T[N]=_g(Q,T,Q,$)),pu($)&&En(x,T,$),null!=v&&mg(T,$,C)}function Qw(s){return li(function ch(){return Lt.lFrame.contextLView}(),Dn+s)}function j_(s,a,l){const c=pe();return di(c,Fs(),a)&&function xt(s,a,l,c,f,m,v,C){const T=$r(a,l);let N,x=a.inputs;!C&&null!=x&&(N=x[c])?(vg(s,l,N,c,f),yl(a)&&function T_(s,a){const l=Mr(a,s);16&l[Wt]||(l[Wt]|=32)}(l,a.index)):3&a.type&&(c=function Tw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=v?v(f,a.value||"",c):f,m.setProperty(T,c,f))}($t(),Fn(),c,s,a,c[Zt],l,!1),j_}function hd(s,a,l,c,f){const v=f?"class":"style";vg(s,l,a.inputs[v],v,c)}function mf(s,a,l,c){const f=pe(),m=$t(),v=Dn+s,C=f[Zt],T=m.firstCreatePass?function Jw(s,a,l,c,f,m){const v=a.consts,T=pg(a,s,2,c,Ps(v,f));return Sw(a,l,T,Ps(v,m)),null!==T.attrs&&O_(T,T.attrs,!1),null!==T.mergedAttrs&&O_(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(v,m,f,a,l,c):m.data[v],x=f[v]=qp(C,a,function _h(){return Lt.lFrame.currentNamespace}()),N=pu(T);return Hi(T,!0),Jp(C,x,T),32!=(32&T.flags)&&ql(m,f,x,T),0===function Cc(){return Lt.lFrame.elementDepthCount}()&&ae(x,f),function Dc(){Lt.lFrame.elementDepthCount++}(),N&&(En(m,f,T),gg(m,T,f)),null!==c&&mg(f,T),mf}function _f(){let s=Xn();Cl()?lh():(s=s.parent,Hi(s,!1));const a=s;!function Tc(){Lt.lFrame.elementDepthCount--}();const l=$t();return l.firstCreatePass&&(Al(l,s),ko(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Vs(s){return 0!=(8&s.flags)}(a)&&hd(l,a,pe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Oc(s){return 0!=(16&s.flags)}(a)&&hd(l,a,pe(),a.stylesWithoutHost,!1),_f}function yf(s,a,l,c){return mf(s,a,l,c),_f(),yf}function Ag(s,a,l){const c=pe(),f=$t(),m=s+Dn,v=f.firstCreatePass?function Sg(s,a,l,c,f){const m=a.consts,v=Ps(m,c),C=pg(a,s,8,"ng-container",v);return null!==v&&O_(C,v,!0),Sw(a,l,C,Ps(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,c,a,l):f.data[m];Hi(v,!0);const C=c[m]=c[Zt].createComment("");return ql(f,c,C,v),ae(C,c),pu(v)&&(En(f,c,v),gg(f,v,c)),null!=l&&mg(c,v),Ag}function $_(){let s=Xn();const a=$t();return Cl()?lh():(s=s.parent,Hi(s,!1)),a.firstCreatePass&&(Al(a,s),ko(s)&&a.queries.elementEnd(s)),$_}function xg(){return pe()}function Rg(s){return!!s&&"function"==typeof s.then}function Xw(s){return!!s&&"function"==typeof s.subscribe}const e0=Xw;function G_(s,a,l,c){const f=pe(),m=$t(),v=Xn();return function t0(s,a,l,c,f,m,v){const C=pu(c),x=s.firstCreatePass&&k_(s),N=a[Wn],$=N_(a);let Q=!0;if(3&c.type||v){const $e=$r(c,a),et=v?v($e):$e,_t=$.length,Ft=v?nn=>v(yr(nn[c.index])):c.index;let ke=null;if(!v&&C&&(ke=function Mg(s,a,l,c){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===l&&f[m+1]===c){const C=a[Ms],T=f[m+2];return C.length>T?C[T]:null}"string"==typeof v&&(m+=2)}return null}(s,a,f,c.index)),null!==ke)(ke.__ngLastListenerFn__||ke).__ngNextListenerFn__=m,ke.__ngLastListenerFn__=m,Q=!1;else{m=vf(c,a,N,m,!1);const nn=l.listen(et,f,m);$.push(m,nn),x&&x.push(f,Ft,_t,_t+1)}}else m=vf(c,a,N,m,!1);const re=c.outputs;let be;if(Q&&null!==re&&(be=re[f])){const $e=be.length;if($e)for(let et=0;et<$e;et+=2){const ar=a[be[et]][be[et+1]].subscribe(m),Lr=$.length;$.push(m,ar),x&&x.push(f,c.index,Lr,-(Lr+1))}}}(m,f,f[Zt],v,s,a,c),G_}function Ng(s,a,l,c){try{return jn(6,a,l),!1!==l(c)}catch(f){return VI(s,f),!1}finally{jn(7,a,l)}}function vf(s,a,l,c,f){return function m(v){if(v===Function)return c;yg(s.componentOffset>-1?Mr(s.index,a):a);let T=Ng(a,l,c,v),x=m.__ngNextListenerFn__;for(;x;)T=Ng(a,l,x,v)&&T,x=x.__ngNextListenerFn__;return f&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function Jl(s=1){return function Rc(s){return(Lt.lFrame.contextLView=function mh(s,a){for(;s>0;)a=a[to],s--;return a}(s,Lt.lFrame.contextLView))[Wn]}(s)}function n0(s,a){let l=null;const c=function w_(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(!(1&l))return a[l+1]}return null}(s);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===c?cg(s,m,!0):SA(c,m))return f}else l=f}return l}function YI(s){const a=pe()[_r][Rr];if(!a.projection){const c=a.projection=Aa(s?s.length:1,null),f=c.slice();let m=a.child;for(;null!==m;){const v=s?n0(m,s):0;null!==v&&(f[v]?f[v].projectionNext=m:c[v]=m,f[v]=m),m=m.next}}}function QI(s,a=0,l){const c=pe(),f=$t(),m=pg(f,Dn+s,16,null,l||null);null===m.projection&&(m.projection=a),lh(),32!=(32&m.flags)&&function Fb(s,a,l){Hv(a[Zt],0,a,l,Xe(s,l,a),Bh(l.parent||a[Rr],l,a))}(f,c,m)}function ec(s,a){return s<<17|a<<2}function bo(s){return s>>17&32767}function o0(s){return 2|s}function fd(s){return(131068&s)>>2}function a0(s,a){return-131069&s|a<<2}function pd(s){return 1|s}function md(s,a,l,c,f){const m=s[l+1],v=null===a;let C=c?bo(m):fd(m),T=!1;for(;0!==C&&(!1===T||v);){const N=s[C+1];ix(s[C],a)&&(T=!0,s[C+1]=c?pd(N):o0(N)),C=c?bo(N):fd(N)}T&&(s[l+1]=c?o0(m):pd(m))}function ix(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&zi(s,a)>=0}function wf(s,a,l){return Cn(s,a,l,!1),wf}function Lg(s,a){return Cn(s,a,null,!0),Lg}function Cn(s,a,l,c){const f=pe(),m=$t(),v=function gs(s){const a=Lt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}(2);m.firstUpdatePass&&function sC(s,a,l,c){const f=s.data;if(null===f[l+1]){const m=f[Jr()],v=function iC(s,a){return a>=s.expandoStartIndex}(s,l);(function m0(s,a){return 0!=(s.flags&(a?8:16))})(m,c)&&null===a&&!v&&(a=!1),a=function ux(s,a,l,c){const f=function Dl(s){const a=Lt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let m=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(l=bf(l=Ef(null,s,a,l,c),a.attrs,c),m=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==f)if(l=Ef(f,s,a,l,c),null===m){let T=function oC(s,a,l){const c=l?a.classBindings:a.styleBindings;if(0!==fd(c))return s[bo(c)]}(s,a,c);void 0!==T&&Array.isArray(T)&&(T=Ef(null,s,a,T[1],c),T=bf(T,a.attrs,c),function aC(s,a,l,c){s[bo(l?a.classBindings:a.styleBindings)]=c}(s,a,c,T))}else m=function uC(s,a,l){let c;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)c=bf(c,s[m].hostAttrs,l);return bf(c,a.attrs,l)}(s,a,c)}return void 0!==m&&(c?a.residualClasses=m:a.residualStyles=m),l}(f,m,a,c),function eC(s,a,l,c,f,m){let v=m?a.classBindings:a.styleBindings,C=bo(v),T=fd(v);s[c]=l;let N,x=!1;if(Array.isArray(l)?(N=l[1],(null===N||zi(l,N)>0)&&(x=!0)):N=l,f)if(0!==T){const Q=bo(s[C+1]);s[c+1]=ec(Q,C),0!==Q&&(s[Q+1]=a0(s[Q+1],c)),s[C+1]=function XI(s,a){return 131071&s|a<<17}(s[C+1],c)}else s[c+1]=ec(C,0),0!==C&&(s[C+1]=a0(s[C+1],c)),C=c;else s[c+1]=ec(T,0),0===C?C=c:s[T+1]=a0(s[T+1],c),T=c;x&&(s[c+1]=o0(s[c+1])),md(s,N,c,!0),md(s,N,c,!1),function tC(s,a,l,c,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof a&&zi(m,a)>=0&&(l[c+1]=pd(l[c+1]))}(a,N,s,c,m),v=ec(C,T),m?a.classBindings=v:a.styleBindings=v}(f,m,a,l,v,c)}}(m,s,v,c),a!==qt&&di(f,v,a)&&function If(s,a,l,c,f,m,v,C){if(!(3&a.type))return;const T=s.data,x=T[C+1],N=function nx(s){return 1==(1&s)}(x)?g0(T,a,l,f,fd(x),v):void 0;Cf(N)||(Cf(m)||function tx(s){return 2==(2&s)}(x)&&(m=g0(T,null,l,f,C,v)),function Va(s,a,l,c,f){if(a)f?s.addClass(l,c):s.removeClass(l,c);else{let m=-1===c.indexOf("-")?void 0:Rt.DashCase;null==f?s.removeStyle(l,c,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Rt.Important),s.setStyle(l,c,f,m))}}(c,v,Lo(Jr(),l),f,m))}(m,m.data[Jr()],f,f[Zt],s,f[v+1]=function Z_(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=_e(Ua(s)))),s}(a,l),c,v)}function Ef(s,a,l,c,f){let m=null;const v=l.directiveEnd;let C=l.directiveStylingLast;for(-1===C?C=l.directiveStart:C++;C<v&&(m=a[C],c=bf(c,m.hostAttrs,f),m!==s);)C++;return null!==s&&(l.directiveStylingLast=C),c}function bf(s,a,l){const c=l?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Gi(s,v,!!l||a[++m]))}return void 0===s?null:s}function g0(s,a,l,c,f,m){const v=null===a;let C;for(;f>0;){const T=s[f],x=Array.isArray(T),N=x?T[1]:T,$=null===N;let Q=l[f+1];Q===qt&&(Q=$?Y:void 0);let re=$?hn(Q,c):N===c?Q:void 0;if(x&&!Cf(re)&&(re=hn(T,c)),Cf(re)&&(C=re,v))return C;const be=s[f+1];f=v?bo(be):fd(be)}if(null!==a){let T=m?a.residualClasses:a.residualStyles;null!=T&&(C=hn(T,c))}return C}function Cf(s){return void 0!==s}function Bg(s,a=""){const l=pe(),c=$t(),f=s+Dn,m=c.firstCreatePass?pg(c,f,1,a,null):c.data[f],v=l[f]=function zl(s,a){return s.createText(a)}(l[Zt],a);ql(c,l,v,m),Hi(m,!1)}function _0(s){return K_("",s,""),_0}function K_(s,a,l){const c=pe(),f=function ld(s,a,l,c){return di(s,Fs(),l)?a+Oe(l)+c:qt}(c,s,a,l);return f!==qt&&function Ga(s,a,l){const c=Lo(a,s);!function zp(s,a,l){s.setValue(a,l)}(s[Zt],c,l)}(c,Jr(),f),K_}const Ya=void 0;var Af=["en",[["a","p"],["AM","PM"],Ya],[["AM","PM"],Ya,Ya],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ya,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ya,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ya,"{1} 'at' {0}",Ya],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _C(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let xf={};function Gg(s){const a=function dx(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=T0(a);if(l)return l;const c=a.split("-")[0];if(l=T0(c),l)return l;if("en"===c)return Af;throw new ye(701,!1)}function yC(s){return Gg(s)[kt.PluralCase]}function T0(s){return s in xf||(xf[s]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[s]),xf[s]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const wd="en-US";let Ve=wd;function P0(s,a,l,c,f){if(s=X(s),Array.isArray(s))for(let m=0;m<s.length;m++)P0(s[m],a,l,c,f);else{const m=$t(),v=pe();let C=$u(s)?s:X(s.provide),T=aw(s);const x=Xn(),N=1048575&x.providerIndexes,$=x.directiveStart,Q=x.providerIndexes>>20;if($u(s)||!s.multi){const re=new Ls(T,f,rf),be=ly(C,a,f?N:N+Q,$);-1===be?(co(Vc(x,v),m,C),uy(m,s,a.length),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),l.push(re),v.push(re)):(l[be]=re,v[be]=re)}else{const re=ly(C,a,N+Q,$),be=ly(C,a,N,N+Q),et=be>=0&&l[be];if(f&&!et||!f&&!(re>=0&&l[re])){co(Vc(x,v),m,C);const _t=function Ti(s,a,l,c,f){const m=new Ls(s,l,rf);return m.multi=[],m.index=a,m.componentProviders=0,OC(m,f,c&&!l),m}(f?Nx:PC,l.length,f,c,T);!f&&et&&(l[be].providerFactory=_t),uy(m,s,a.length,0),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),l.push(_t),v.push(_t)}else uy(m,s,re>-1?re:be,OC(l[f?be:re],T,!f&&c));!f&&c&&et&&l[be].componentProviders++}}}function uy(s,a,l,c){const f=$u(a),m=function g_(s){return!!s.useClass}(a);if(f||m){const T=(m?X(a.useClass):a).prototype.ngOnDestroy;if(T){const x=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const N=x.indexOf(l);-1===N?x.push(l,[c,T]):x[N+1].push(c,T)}else x.push(l,T)}}}function OC(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function ly(s,a,l,c){for(let f=l;f<c;f++)if(a[f]===s)return f;return-1}function PC(s,a,l,c){return Yg(this.multi,[])}function Nx(s,a,l,c){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=$n(l,l[nt],this.providerFactory.index,c);m=C.slice(0,v),Yg(f,m);for(let T=v;T<C.length;T++)m.push(C[T])}else m=[],Yg(f,m);return m}function Yg(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function F0(s,a=[]){return l=>{l.providersResolver=(c,f)=>function Mx(s,a,l){const c=$t();if(c.firstCreatePass){const f=_i(s);P0(l,c.data,c.blueprint,f,!0),P0(a,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,a)}}class qs{}class L0{}function Zn(s,a){return new Si(s,a??null)}class Si extends qs{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UI(this);const c=Ar(a);this._bootstrapComponents=Ba(c.bootstrap),this._r3Injector=yw(a,l,[{provide:qs,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],_e(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Hn extends L0{constructor(a){super(),this.moduleType=a}create(a){return new Si(this.moduleType,a)}}class FC extends qs{constructor(a,l,c){super(),this.componentFactoryResolver=new UI(this),this.instance=null;const f=new tI([...a,{provide:qs,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],l||__(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function nc(s,a,l=null){return new FC(s,a,l).injector}let bs=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=Zh(0,l.type),f=c.length>0?nc([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=St({token:s,providedIn:"environment",factory:()=>new s(Gt(ad))}),s})();function U0(s){s.getStandaloneInjector=a=>a.get(bs).getOrCreateStandaloneInjector(s)}function fy(s,a,l,c,f){return function $C(s,a,l,c,f,m,v){const C=a+l;return function Gu(s,a,l,c){const f=di(s,a,l);return di(s,a+1,c)||f}(s,C,f,m)?Jo(s,C+2,v?c.call(v,f,m):c(f,m)):Xu(s,C+2)}(pe(),Hr(),s,a,l,c,f)}function Xu(s,a){const l=s[a];return l===qt?void 0:l}function Ai(s,a){const l=$t();let c;const f=s+Dn;l.firstCreatePass?(c=function GC(s,a){if(a)for(let l=a.length-1;l>=0;l--){const c=a[l];if(s===c.name)return c}}(a,l.pipeRegistry),l.data[f]=c,c.onDestroy&&(l.destroyHooks??(l.destroyHooks=[])).push(f,c.onDestroy)):c=l.data[f];const m=c.factory||(c.factory=Os(c.type)),v=Kn(rf);try{const C=Tu(!1),T=m();return Tu(C),function Yw(s,a,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),a[l]=c}(l,pe(),f,T),T}finally{Kn(v)}}function el(s,a,l){const c=s+Dn,f=pe(),m=li(f,c);return function Vf(s,a){return s[nt].data[a].pure}(f,c)?function $0(s,a,l,c,f,m){const v=a+l;return di(s,v,f)?Jo(s,v+1,m?c.call(m,f):c(f)):Xu(s,v+1)}(f,Hr(),a,m.transform,l,m):m.transform(l)}function Sn(s){return a=>{setTimeout(s,void 0,a)}}const ls=class mn extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,c){let f=a,m=l||(()=>null),v=c;if(a&&"object"==typeof a){const T=a;f=T.next?.bind(T),m=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(m=Sn(m),f&&(f=Sn(f)),v&&(v=Sn(v)));const C=super.subscribe({next:f,error:m,complete:v});return a instanceof G.w0&&a.add(C),C}};function z0(){return this._results[Symbol.iterator]()}class em{get changes(){return this._changes||(this._changes=new ls)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=em.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=z0)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const c=this;c.dirty=!1;const f=function Ni(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function zc(s,a,l){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],m=a[c];if(l&&(f=l(f),m=l(m)),m!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Uf=(()=>{class s{}return s.__NG_ELEMENT_ID__=ZC,s})();const q0=Uf,WC=class extends q0{constructor(a,l,c){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(a,l){const c=this._declarationTContainer.tView,f=C_(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,l||null);f[Mo]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[ji];return null!==v&&(f[ji]=v.createEmbeddedView(c)),Pi(c,f,a),new wg(f)}};function ZC(){return tm(Xn(),pe())}function tm(s,a){return 4&s.type?new WC(a,s,Hu(s,a)):null}let my=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ox,s})();function Ox(){return YC(Xn(),pe())}const Px=my,W0=class extends Px{constructor(a,l,c){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=c}get element(){return Hu(this._hostTNode,this._hostLView)}get injector(){return new Ta(this._hostTNode,this._hostLView)}get parentInjector(){const a=tr(this._hostTNode,this._hostLView);if(Bo(a)){const l=Du(a,this._hostLView),c=Ca(a);return new Ta(l[nt].data[c+8],l)}return new Ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=KC(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-jr}createEmbeddedView(a,l,c){let f,m;"number"==typeof c?f=c:null!=c&&(f=c.index,m=c.injector);const v=a.createEmbeddedView(l||{},m);return this.insert(v,f),v}createComponent(a,l,c,f,m){const v=a&&!function Ll(s){return"function"==typeof s}(a);let C;if(v)C=l;else{const $=l||{};C=$.index,c=$.injector,f=$.projectableNodes,m=$.environmentInjector||$.ngModuleRef}const T=v?a:new cf(Et(a)),x=c||this.parentInjector;if(!m&&null==T.ngModule){const Q=(v?x:this.parentInjector).get(ad,null);Q&&(m=Q)}const N=T.create(x,f,void 0,m);return this.insert(N.hostView,C),N}insert(a,l){const c=a._lView,f=c[nt];if(function sh(s){return ss(s[Pn])}(c)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const $=c[Pn],Q=new W0($,$[Rr],$[Pn]);Q.detach(Q.indexOf(a))}}const m=this._adjustIndex(l),v=this._lContainer;!function g(s,a,l,c){const f=jr+c,m=l.length;c>0&&(l[f-1][vn]=a),c<m-jr?(a[vn]=l[f],qc(l,jr+c,a)):(l.push(a),a[vn]=null),a[Pn]=l;const v=a[Mo];null!==v&&l!==v&&function _(s,a){const l=s[Ns];a[_r]!==a[Pn][Pn][_r]&&(s[fu]=!0),null===l?s[Ns]=[a]:l.push(a)}(v,a);const C=a[ji];null!==C&&C.insertView(s),a[Wt]|=64}(f,c,v,m);const C=La(m,v),T=c[Zt],x=Us(T,v[ha]);return null!==x&&function jv(s,a,l,c,f,m){c[xr]=f,c[Rr]=a,Yp(s,c,l,1,f,m)}(f,v[Rr],T,c,x,C),a.attachToViewContainerRef(),qc(_y(v),m,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=KC(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),c=R(this._lContainer,l);c&&(Ru(_y(this._lContainer),l),O(c[nt],c))}detach(a){const l=this._adjustIndex(a,-1),c=R(this._lContainer,l);return c&&null!=Ru(_y(this._lContainer),l)?new wg(c):null}_adjustIndex(a,l=0){return a??this.length+l}};function KC(s){return s[no]}function _y(s){return s[no]||(s[no]=[])}function YC(s,a){let l;const c=a[s.index];if(ss(c))l=c;else{let f;if(8&s.type)f=yr(c);else{const m=a[Zt];f=m.createComment("");const v=$r(s,a);Yt(m,Us(m,v),f,function Zp(s,a){return s.nextSibling(a)}(m,v),!1)}a[s.index]=l=_g(c,a,f,s),uf(a,l)}return new W0(l,s,a)}class Z0{constructor(a){this.queryList=a,this.matches=null}clone(){return new Z0(this.queryList)}setDirty(){this.queryList.setDirty()}}class K0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const c=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let m=0;m<c;m++){const v=l.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new K0(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==rm(a,l).matches&&this.queries[l].setDirty()}}class yy{constructor(a,l,c=null){this.predicate=a,this.flags=l,this.read=c}}class tl{constructor(a=[]){this.queries=a}elementStart(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,m=this.getByIndex(c).embeddedTView(a,f);m&&(m.indexInDeclarationView=c,null!==l?l.push(m):l=[m])}return null!==l?new tl(l):null}template(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Dd{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Dd(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const m=c[f];this.matchTNodeWithReadOption(a,l,vy(l,m)),this.matchTNodeWithReadOption(a,l,Da(l,a,m,!1,!1))}else c===Uf?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Da(l,a,c,!1,!1))}matchTNodeWithReadOption(a,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Jh||f===my||f===Uf&&4&l.type)this.addMatch(l.index,-2);else{const m=Da(l,a,f,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,c)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function vy(s,a){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===a)return l[c+1];return null}function QC(s,a,l,c){return-1===l?function wy(s,a){return 11&s.type?Hu(s,a):4&s.type?tm(s,a):null}(a,s):-2===l?function JC(s,a,l){return l===Jh?Hu(a,s):l===Uf?tm(a,s):l===my?YC(a,s):void 0}(s,a,c):$n(s,s[nt],l,a)}function Ja(s,a,l,c){const f=a[ji].queries[c];if(null===f.matches){const m=s.data,v=l.matches,C=[];for(let T=0;T<v.length;T+=2){const x=v[T];C.push(x<0?null:QC(a,m[x],v[T+1],l.metadata.read))}f.matches=C}return f.matches}function Ey(s,a,l,c){const f=s.queries.getByIndex(l),m=f.matches;if(null!==m){const v=Ja(s,a,f,l);for(let C=0;C<m.length;C+=2){const T=m[C];if(T>0)c.push(v[C/2]);else{const x=m[C+1],N=a[-T];for(let $=jr;$<N.length;$++){const Q=N[$];Q[Mo]===Q[Pn]&&Ey(Q[nt],Q,x,c)}if(null!==N[Ns]){const $=N[Ns];for(let Q=0;Q<$.length;Q++){const re=$[Q];Ey(re[nt],re,x,c)}}}}}return c}function Td(s){const a=pe(),l=$t(),c=wu();fh(c+1);const f=rm(l,c);if(s.dirty&&function _u(s){return 4==(4&s[Wt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?Ey(l,a,c,[]):Ja(l,a,f,c);s.reset(m,ag),s.notifyOnChanges()}return!0}return!1}function Y0(s,a,l){const c=$t();c.firstCreatePass&&(es(c,new yy(s,a,l),-1),2==(2&a)&&(c.staticViewQueries=!0)),sc(c,pe(),a)}function by(s,a,l,c){const f=$t();if(f.firstCreatePass){const m=Xn();es(f,new yy(a,l,c),m.index),function J0(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}sc(f,pe(),l)}function nm(){return function Q0(s,a){return s[ji].queries[a].queryList}(pe(),wu())}function sc(s,a,l){const c=new em(4==(4&l));D_(s,a,c,c.destroy),null===a[ji]&&(a[ji]=new K0),a[ji].queries.push(new Z0(c))}function es(s,a,l){null===s.queries&&(s.queries=new tl),s.queries.track(new Dd(a,l))}function rm(s,a){return s.queries.getByIndex(a)}function Bf(s,a){return tm(s,a)}function X0(s){return!!Ar(s)}function um(...s){}const Ty=new dn("Application Initializer");let Nd=(()=>{class s{constructor(l){this.appInits=l,this.resolve=um,this.reject=um,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Rg(m))l.push(m);else if(e0(m)){const v=new Promise((C,T)=>{m.subscribe({complete:C,error:T})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Gt(Ty,8))},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const rE=new dn("AppId",{providedIn:"root",factory:function yD(){return`${Sy()}${Sy()}${Sy()}`}});function Sy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ay=new dn("Platform Initializer"),lm=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let My=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const cm=new dn("LocaleId",{providedIn:"root",factory:()=>Bn(cm,vt.Optional|vt.SkipSelf)||function vD(){return typeof $localize<"u"&&$localize.locale||wd}()}),wD=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Wx{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Zx=(()=>{class s{compileModuleSync(l){return new Hn(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),m=Ba(Ar(l).declarations).reduce((v,C)=>{const T=Et(C);return T&&v.push(new cf(T)),v},[]);return new Wx(c,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const oE=(()=>Promise.resolve(0))();function Ny(s){typeof Zone>"u"?oE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Is{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ls(!1),this.onMicrotaskEmpty=new ls(!1),this.onStable=new ls(!1),this.onError=new ls(!1),typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function dm(){let s=fn.requestAnimationFrame,a=fn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function ID(s){const a=()=>{!function bD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(fn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ky(s),s.isCheckStableRunning=!0,Od(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ky(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,m,v,C)=>{try{return CD(s),l.invokeTask(f,m,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&a(),DD(s)}},onInvoke:(l,c,f,m,v,C,T)=>{try{return CD(s),l.invoke(f,m,v,C,T)}finally{s.shouldCoalesceRunChangeDetection&&a(),DD(s)}},onHasTask:(l,c,f,m)=>{l.hasTask(f,m),c===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,ky(s),Od(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,c,f,m)=>(l.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Is.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(Is.isInAngularZone())throw new ye(909,!1)}run(a,l,c){return this._inner.run(a,l,c)}runTask(a,l,c,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,ED,um,um);try{return m.runTask(v,l,c)}finally{m.cancelTask(v)}}runGuarded(a,l,c){return this._inner.runGuarded(a,l,c)}runOutsideAngular(a){return this._outer.run(a)}}const ED={};function Od(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ky(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function CD(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function DD(s){s._nesting--,Od(s)}class hm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ls,this.onMicrotaskEmpty=new ls,this.onStable=new ls,this.onError=new ls}run(a,l,c){return a.apply(l,c)}runGuarded(a,l,c){return a.apply(l,c)}runOutsideAngular(a){return a()}runTask(a,l,c,f){return a.apply(l,c)}}const Oy=new dn(""),TD=new dn("");let aE,SD=(()=>{class s{constructor(l,c,f){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,aE||(function AD(s){aE=s}(f),f.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Is.assertNotInAngularZone(),Ny(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ny(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(Gt(Is),Gt(Py),Gt(TD))},s.\u0275prov=St({token:s,factory:s.\u0275fac}),s})(),Py=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return aE?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const tu=!1;let ac=null;const xD=new dn("AllowMultipleToken"),uE=new dn("PlatformDestroyListeners"),il=new dn("appBootstrapListener");class RD{constructor(a,l){this.name=a,this.token=l}}function fm(s,a,l=[]){const c=`Platform: ${a}`,f=new dn(c);return(m=[])=>{let v=Fd();if(!v||v.injector.get(xD,!1)){const C=[...l,...m,{provide:f,useValue:!0}];s?s(C):function sl(s){if(ac&&!ac.get(xD,!1))throw new ye(400,!1);ac=s;const a=s.get(lE);(function ND(s){const a=s.get(Ay,null);a&&a.forEach(l=>l())})(s)}(function uc(s=[],a){return ef.create({name:a,providers:[{provide:Kl,useValue:"platform"},{provide:uE,useValue:new Set([()=>ac=null])},...s]})}(C,c))}return function Pd(s){const a=Fd();if(!a)throw new ye(401,!1);return a}()}}function Fd(){return ac?.get(lE)??null}let lE=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const f=function Ly(s,a){let l;return l="noop"===s?new hm:("zone.js"===s?void 0:s)||new Is(a),l}(c?.ngZone,function Fy(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),m=[{provide:Is,useValue:f}];return f.run(()=>{const v=ef.create({providers:m,parent:this.injector,name:l.moduleType.name}),C=l.create(v),T=C.injector.get(ug,null);if(!T)throw new ye(402,!1);return f.runOutsideAngular(()=>{const x=f.onError.subscribe({next:N=>{T.handleError(N)}});C.onDestroy(()=>{pm(this._modules,C),x.unsubscribe()})}),function cE(s,a,l){try{const c=l();return Rg(c)?c.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(T,f,()=>{const x=C.injector.get(Nd);return x.runInitializers(),x.donePromise.then(()=>(function Pr(s){yt(s,"Expected localeId to be defined"),"string"==typeof s&&(Ve=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(cm,wd)||wd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(l,c=[]){const f=dE({},c);return function zf(s,a,l){const c=new Hn(l);return Promise.resolve(c)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(l){const c=l.injector.get(Vy);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new ye(-403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ye(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(uE,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Gt(ef))},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function dE(s,a){return Array.isArray(a)?a.reduce(dE,s):{...s,...a}}let Vy=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,c,f){this._zone=l,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new F.y(C=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Is.assertNotInAngularZone(),Ny(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Is.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{T.unsubscribe(),x.unsubscribe()}});this.isStable=(0,se.T)(m,v.pipe((0,le.B)()))}bootstrap(l,c){const f=l instanceof rI;if(!this._injector.get(Nd).done){!f&&Yr(l);throw new ye(405,tu)}let v;v=f?l:this._injector.get(Qh).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const C=function Qx(s){return s.isBoundToModule}(v)?void 0:this._injector.get(qs),x=v.create(ef.NULL,[],c||v.selector,C),N=x.location.nativeElement,$=x.injector.get(Oy,null);return $?.registerApplication(N),x.onDestroy(()=>{this.detachView(x.hostView),pm(this.components,x),$?.unregisterApplication(N)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ye(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;pm(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const c=this._injector.get(il,[]);c.push(...this._bootstrapListeners),c.forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>pm(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ye(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(Gt(Is),Gt(ad),Gt(ug))},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function pm(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}function gm(){return!1}let eR=(()=>{class s{}return s.__NG_ELEMENT_ID__=tR,s})();function tR(s){return function mm(s,a,l){if(yl(s)&&!l){const c=Mr(s.index,a);return new wg(c,c)}return 47&s.type?new wg(a[_r],a):null}(Xn(),pe(),16==(16&s))}class vE{constructor(){}supports(a){return U_(a)}create(a){return new PD(a)}}const ns=(s,a)=>a;class PD{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||ns}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,c=this._removalsHead,f=0,m=null;for(;l||c;){const v=!c||l&&l.currentIndex<al(c,f,m)?l:c,C=al(v,f,m),T=v.currentIndex;if(v===c)f--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{m||(m=[]);const x=C-f,N=T-f;if(x!=N){for(let Q=0;Q<x;Q++){const re=Q<m.length?m[Q]:m[Q]=0,be=re+Q;N<=be&&be<x&&(m[Q]=re+1)}m[v.previousIndex]=N-x}}C!==T&&a(v,C,T)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!U_(a))throw new ye(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,l=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],v=this._trackByFn(C,m),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,m,v,C)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,C),c=!0),l=l._next}else f=0,function jw(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Symbol.iterator]();let c;for(;!(c=l.next()).done;)a(c.value)}}(a,C=>{v=this._trackByFn(f,C),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,C,v,f)),Object.is(l.item,C)||this._addIdentityChange(l,C)):(l=this._mismatch(l,C,v,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,c,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,m,f)):a=this._addAfter(new Hy(l,c),m,f),a}_verifyReinsertion(a,l,c,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,l,c),this._addToMoves(a,c),a}_moveAfter(a,l,c){return this._unlink(a),this._insertAfter(a,l,c),this._addToMoves(a,c),a}_addAfter(a,l,c){return this._insertAfter(a,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,c){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new wE),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,c=a._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wE),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Hy{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Gy{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const l=a._prevDup,c=a._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class wE{constructor(){this.map=new Map}put(a){const l=a.trackById;let c=this.map.get(l);c||(c=new Gy,this.map.set(l,c)),c.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function al(s,a,l){const c=s.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+a+f}class Vd{constructor(){}supports(a){return a instanceof Map||$w(a)}create(){return new FD}}class FD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||$w(a)))throw new ye(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const c=a._prev;return l._next=a,l._prev=c,a._prev=l,c&&(c._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const c=new Ud(a);return this._records.set(a,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(c=>l(a[c],c))}}class Ud{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LD(){return new lc([new vE])}let lc=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||LD()),deps:[[s,new dt,new zo]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new ye(901,!1)}}return s.\u0275prov=St({token:s,providedIn:"root",factory:LD}),s})();function ul(){return new zy([new Vd])}let zy=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||ul()),deps:[[s,new dt,new zo]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new ye(901,!1)}}return s.\u0275prov=St({token:s,providedIn:"root",factory:ul}),s})();const lR=fm(null,"core",[]);let qy=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Gt(Vy))},s.\u0275mod=ie({type:s}),s.\u0275inj=Vn({}),s})();function UD(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(bt,Se,j)=>{j.d(Se,{Z:()=>Je});var d=j(2090),G=j(4859),F=j(6881),se=j(1877);class le{constructor(ye,Me){this._delegate=ye,this.firebase=Me,(0,F._addComponent)(ye,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ye,Me=F._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const He=this._delegate.container.getProvider(ye);return!He.isInitialized()&&"EXPLICIT"===(null===(Oe=He.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&He.initialize(),He.getImmediate({identifier:Me})}_removeServiceInstance(ye,Me=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(Me)}_addComponent(ye){(0,F._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,F._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ve(){const ct=function _e(ct){const ye={},Me={__esModule:!0,initializeApp:function Te(Le,ue={}){const ot=F.initializeApp(Le,ue);if((0,d.r3)(ye,ot.name))return ye[ot.name];const Mt=new ct(ot,Me);return ye[ot.name]=Mt,Mt},app:He,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ne(Le){const ue=Le.name,ot=ue.replace("-compat","");if(F._registerComponent(Le)&&"PUBLIC"===Le.type){const Mt=(lt=He())=>{if("function"!=typeof lt[ot])throw Ee.create("invalid-app-argument",{appName:ue});return lt[ot]()};void 0!==Le.serviceProps&&(0,d.ZB)(Mt,Le.serviceProps),Me[ot]=Mt,ct.prototype[ot]=function(...lt){return this._getService.bind(this,ue).apply(this,Le.multipleInstances?lt:[])}}return"PUBLIC"===Le.type?Me[ot]:null},removeApp:function Oe(Le){delete ye[Le]},useAsService:function ze(Le,ue){return"serverAuth"===ue?null:ue},modularAPIs:F}};function He(Le){if(!(0,d.r3)(ye,Le=Le||F._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Le});return ye[Le]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function De(){return Object.keys(ye).map(Le=>ye[Le])}}),He.App=ct,Me}(le);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function ye(Me){(0,d.ZB)(ct,Me)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ct}(),W=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=Z;!function Ae(ct){(0,F.registerVersion)("@firebase/app-compat","0.2.10",ct)}()},6881:(bt,Se,j)=>{j.r(Se),j.d(Se,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Ri,_DEFAULT_ENTRY_NAME:()=>Zr,_addComponent:()=>gt,_addOrOverwriteComponent:()=>jt,_apps:()=>fn,_clearComponents:()=>si,_components:()=>Xt,_getProvider:()=>Ur,_registerComponent:()=>Yn,_removeServiceInstance:()=>Un,deleteApp:()=>Qn,getApp:()=>mi,getApps:()=>Gt,initializeApp:()=>sn,onLog:()=>Jn,registerVersion:()=>Br,setLogLevel:()=>oi});var d=j(5861),G=j(4859),F=j(1877),se=j(2090);const le=(fe,ie)=>ie.some(Pe=>fe instanceof Pe);let ce,Ee;const Z=new WeakMap,W=new WeakMap,X=new WeakMap,Ge=new WeakMap,Ae=new WeakMap;let ye={get(fe,ie,Pe){if(fe instanceof IDBTransaction){if("done"===ie)return W.get(fe);if("objectStoreNames"===ie)return fe.objectStoreNames||X.get(fe);if("store"===ie)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return Te(fe[ie])},set:(fe,ie,Pe)=>(fe[ie]=Pe,!0),has:(fe,ie)=>fe instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in fe};function He(fe){return"function"==typeof fe?function Oe(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...ie){return fe.apply(De(this),ie),Te(Z.get(this))}:function(...ie){return Te(fe.apply(De(this),ie))}:function(ie,...Pe){const wt=fe.call(De(this),ie,...Pe);return X.set(wt,ie.sort?ie.sort():[ie]),Te(wt)}}(fe):(fe instanceof IDBTransaction&&function ct(fe){if(W.has(fe))return;const ie=new Promise((Pe,wt)=>{const Ot=()=>{fe.removeEventListener("complete",on),fe.removeEventListener("error",Et),fe.removeEventListener("abort",Et)},on=()=>{Pe(),Ot()},Et=()=>{wt(fe.error||new DOMException("AbortError","AbortError")),Ot()};fe.addEventListener("complete",on),fe.addEventListener("error",Et),fe.addEventListener("abort",Et)});W.set(fe,ie)}(fe),le(fe,function _e(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,ye):fe)}function Te(fe){if(fe instanceof IDBRequest)return function Je(fe){const ie=new Promise((Pe,wt)=>{const Ot=()=>{fe.removeEventListener("success",on),fe.removeEventListener("error",Et)},on=()=>{Pe(Te(fe.result)),Ot()},Et=()=>{wt(fe.error),Ot()};fe.addEventListener("success",on),fe.addEventListener("error",Et)});return ie.then(Pe=>{Pe instanceof IDBCursor&&Z.set(Pe,fe)}).catch(()=>{}),Ae.set(ie,fe),ie}(fe);if(Ge.has(fe))return Ge.get(fe);const ie=He(fe);return ie!==fe&&(Ge.set(fe,ie),Ae.set(ie,fe)),ie}const De=fe=>Ae.get(fe),Le=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],ot=new Map;function Mt(fe,ie){if(!(fe instanceof IDBDatabase)||ie in fe||"string"!=typeof ie)return;if(ot.get(ie))return ot.get(ie);const Pe=ie.replace(/FromIndex$/,""),wt=ie!==Pe,Ot=ue.includes(Pe);if(!(Pe in(wt?IDBIndex:IDBObjectStore).prototype)||!Ot&&!Le.includes(Pe))return;const on=function(){var Et=(0,d.Z)(function*(yn,...cn){const Yr=this.transaction(yn,Ot?"readwrite":"readonly");let Ar=Yr.store;return wt&&(Ar=Ar.index(cn.shift())),(yield Promise.all([Ar[Pe](...cn),Ot&&Yr.done]))[0]});return function(cn){return Et.apply(this,arguments)}}();return ot.set(ie,on),on}!function Me(fe){ye=fe(ye)}(fe=>({...fe,get:(ie,Pe,wt)=>Mt(ie,Pe)||fe.get(ie,Pe,wt),has:(ie,Pe)=>!!Mt(ie,Pe)||fe.has(ie,Pe)}));class lt{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function rn(fe){return"VERSION"===fe.getComponent()?.type}(Pe)){const wt=Pe.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(Pe=>Pe).join(" ")}}const pt="@firebase/app",ge=new F.Yd("@firebase/app"),Zr="[DEFAULT]",ii={[pt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fn=new Map,Xt=new Map;function gt(fe,ie){try{fe.container.addComponent(ie)}catch(Pe){ge.debug(`Component ${ie.name} failed to register with FirebaseApp ${fe.name}`,Pe)}}function jt(fe,ie){fe.container.addOrOverwriteComponent(ie)}function Yn(fe){const ie=fe.name;if(Xt.has(ie))return ge.debug(`There were multiple attempts to register component ${ie}.`),!1;Xt.set(ie,fe);for(const Pe of fn.values())gt(Pe,fe);return!0}function Ur(fe,ie){const Pe=fe.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),fe.container.getProvider(ie)}function Un(fe,ie,Pe=Zr){Ur(fe,ie).clearInstance(Pe)}function si(){Xt.clear()}const mr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class en{constructor(ie,Pe,wt){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const Ri="9.22.0";function sn(fe,ie={}){let Pe=fe;"object"!=typeof ie&&(ie={name:ie});const wt=Object.assign({name:Zr,automaticDataCollectionEnabled:!1},ie),Ot=wt.name;if("string"!=typeof Ot||!Ot)throw mr.create("bad-app-name",{appName:String(Ot)});if(Pe||(Pe=(0,se.aH)()),!Pe)throw mr.create("no-options");const on=fn.get(Ot);if(on){if((0,se.vZ)(Pe,on.options)&&(0,se.vZ)(wt,on.config))return on;throw mr.create("duplicate-app",{appName:Ot})}const Et=new G.H0(Ot);for(const cn of Xt.values())Et.addComponent(cn);const yn=new en(Pe,wt,Et);return fn.set(Ot,yn),yn}function mi(fe=Zr){const ie=fn.get(fe);if(!ie&&fe===Zr&&(0,se.aH)())return sn();if(!ie)throw mr.create("no-app",{appName:fe});return ie}function Gt(){return Array.from(fn.values())}function Qn(fe){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(fe){const ie=fe.name;fn.has(ie)&&(fn.delete(ie),yield Promise.all(fe.container.getProviders().map(Pe=>Pe.delete())),fe.isDeleted=!0)})).apply(this,arguments)}function Br(fe,ie,Pe){var wt;let Ot=null!==(wt=ii[fe])&&void 0!==wt?wt:fe;Pe&&(Ot+=`-${Pe}`);const on=Ot.match(/\s|\//),Et=ie.match(/\s|\//);if(on||Et){const yn=[`Unable to register library "${Ot}" with version "${ie}":`];return on&&yn.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),on&&Et&&yn.push("and"),Et&&yn.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void ge.warn(yn.join(" "))}Yn(new G.wA(`${Ot}-version`,()=>({library:Ot,version:ie}),"VERSION"))}function Jn(fe,ie){if(null!==fe&&"function"!=typeof fe)throw mr.create("invalid-log-argument");(0,F.Am)(fe,ie)}function oi(fe){(0,F.Ub)(fe)}const Kr="firebase-heartbeat-database",ai=1,q="firebase-heartbeat-store";let H=null;function P(){return H||(H=function Ne(fe,ie,{blocked:Pe,upgrade:wt,blocking:Ot,terminated:on}={}){const Et=indexedDB.open(fe,ie),yn=Te(Et);return wt&&Et.addEventListener("upgradeneeded",cn=>{wt(Te(Et.result),cn.oldVersion,cn.newVersion,Te(Et.transaction),cn)}),Pe&&Et.addEventListener("blocked",cn=>Pe(cn.oldVersion,cn.newVersion,cn)),yn.then(cn=>{on&&cn.addEventListener("close",()=>on()),Ot&&cn.addEventListener("versionchange",Yr=>Ot(Yr.oldVersion,Yr.newVersion,Yr))}).catch(()=>{}),yn}(Kr,ai,{upgrade:(fe,ie)=>{0===ie&&fe.createObjectStore(q)}}).catch(fe=>{throw mr.create("idb-open",{originalErrorMessage:fe.message})})),H}function k(){return(k=(0,d.Z)(function*(fe){try{return yield(yield P()).transaction(q).objectStore(q).get(st(fe))}catch(ie){if(ie instanceof se.ZR)ge.warn(ie.message);else{const Pe=mr.create("idb-get",{originalErrorMessage:ie?.message});ge.warn(Pe.message)}}})).apply(this,arguments)}function Y(fe,ie){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,d.Z)(function*(fe,ie){try{const wt=(yield P()).transaction(q,"readwrite");yield wt.objectStore(q).put(ie,st(fe)),yield wt.done}catch(Pe){if(Pe instanceof se.ZR)ge.warn(Pe.message);else{const wt=mr.create("idb-set",{originalErrorMessage:Pe?.message});ge.warn(wt.message)}}})).apply(this,arguments)}function st(fe){return`${fe.name}!${fe.options.appId}`}class tn{constructor(ie){this.container=ie,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new zt(Pe),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var ie=this;return(0,d.Z)(function*(){const wt=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ot=Pt();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==Ot&&!ie._heartbeatsCache.heartbeats.some(on=>on.date===Ot))return ie._heartbeatsCache.heartbeats.push({date:Ot,agent:wt}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(on=>{const Et=new Date(on.date).valueOf();return Date.now()-Et<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,d.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const Pe=Pt(),{heartbeatsToSend:wt,unsentEntries:Ot}=function xn(fe,ie=1024){const Pe=[];let wt=fe.slice();for(const Ot of fe){const on=Pe.find(Et=>Et.agent===Ot.agent);if(on){if(on.dates.push(Ot.date),Sr(Pe)>ie){on.dates.pop();break}}else if(Pe.push({agent:Ot.agent,dates:[Ot.date]}),Sr(Pe)>ie){Pe.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:wt}}(ie._heartbeatsCache.heartbeats),on=(0,se.L)(JSON.stringify({version:2,heartbeats:wt}));return ie._heartbeatsCache.lastSentHeartbeatDate=Pe,Ot.length>0?(ie._heartbeatsCache.heartbeats=Ot,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),on})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class zt{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,d.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function L(fe){return k.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var Pe=this;return(0,d.Z)(function*(){var wt;if(yield Pe._canUseIndexedDBPromise){const on=yield Pe.read();return Y(Pe.app,{lastSentHeartbeatDate:null!==(wt=ie.lastSentHeartbeatDate)&&void 0!==wt?wt:on.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var Pe=this;return(0,d.Z)(function*(){var wt;if(yield Pe._canUseIndexedDBPromise){const on=yield Pe.read();return Y(Pe.app,{lastSentHeartbeatDate:null!==(wt=ie.lastSentHeartbeatDate)&&void 0!==wt?wt:on.lastSentHeartbeatDate,heartbeats:[...on.heartbeats,...ie.heartbeats]})}})()}}function Sr(fe){return(0,se.L)(JSON.stringify({version:2,heartbeats:fe})).length}!function Rs(fe){Yn(new G.wA("platform-logger",ie=>new lt(ie),"PRIVATE")),Yn(new G.wA("heartbeat",ie=>new tn(ie),"PRIVATE")),Br(pt,"0.9.10",fe),Br(pt,"0.9.10","esm2017"),Br("fire-js","")}("")},4859:(bt,Se,j)=>{j.d(Se,{H0:()=>_e,wA:()=>F,zt:()=>le});var d=j(5861),G=j(2090);class F{constructor(Z,W,X){this.name=Z,this.instanceFactory=W,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const se="[DEFAULT]";class le{constructor(Z,W){this.name=Z,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const W=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(W)){const X=new G.BH;if(this.instancesDeferred.set(W,X),this.isInitialized(W)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:W});Ge&&X.resolve(Ge)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(Z){var W;const X=this.normalizeInstanceIdentifier(Z?.identifier),Ge=null!==(W=Z?.optional)&&void 0!==W&&W;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ae){if(Ge)return null;throw Ae}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function Ee(ve){return"EAGER"===ve.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[W,X]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(W);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ge});X.resolve(Ae)}catch{}}}}clearInstance(Z=se){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,d.Z)(function*(){const W=Array.from(Z.instances.values());yield Promise.all([...W.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...W.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=se){return this.instances.has(Z)}getOptions(Z=se){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:W={}}=Z,X=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:X,options:W});for(const[Ae,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ae)&&Je.resolve(Ge);return Ge}onInit(Z,W){var X;const Ge=this.normalizeInstanceIdentifier(W),Ae=null!==(X=this.onInitCallbacks.get(Ge))&&void 0!==X?X:new Set;Ae.add(Z),this.onInitCallbacks.set(Ge,Ae);const Je=this.instances.get(Ge);return Je&&Z(Je,Ge),()=>{Ae.delete(Z)}}invokeOnInitCallbacks(Z,W){const X=this.onInitCallbacks.get(W);if(X)for(const Ge of X)try{Ge(Z,W)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:W={}}){let X=this.instances.get(Z);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=Z,ve===se?void 0:ve),options:W}),this.instances.set(Z,X),this.instancesOptions.set(Z,W),this.invokeOnInitCallbacks(X,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,X)}catch{}var ve;return X||null}normalizeInstanceIdentifier(Z=se){return this.component?this.component.multipleInstances?Z:se:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const W=this.getProvider(Z.name);if(W.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);W.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const W=new le(Z,this);return this.providers.set(Z,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Se,j)=>{j.d(Se,{Am:()=>ve,Ub:()=>_e,Yd:()=>Ee,in:()=>G});const d=[];var G=(()=>{return(Z=G||(G={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",G;var Z})();const F={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},se=G.INFO,le={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ce=(Z,W,...X)=>{if(W<Z.logLevel)return;const Ge=(new Date).toISOString(),Ae=le[W];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Ae](`[${Ge}]  ${Z.name}:`,...X)};class Ee{constructor(W){this.name=W,this._logLevel=se,this._logHandler=ce,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in G))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...W),this._logHandler(this,G.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...W),this._logHandler(this,G.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,G.INFO,...W),this._logHandler(this,G.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,G.WARN,...W),this._logHandler(this,G.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...W),this._logHandler(this,G.ERROR,...W)}}function _e(Z){d.forEach(W=>{W.setLogLevel(Z)})}function ve(Z,W){for(const X of d){let Ge=null;W&&W.level&&(Ge=F[W.level]),X.userLogHandler=null===Z?null:(Ae,Je,...ct)=>{const ye=ct.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");Je>=(Ge??Ae.logLevel)&&Z({level:G[Je].toLowerCase(),message:ye,args:ct,type:Ae.name})}}}},259:(bt,Se,j)=>{j.d(Se,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=j(6881);(0,d.registerVersion)("firebase","9.22.0","app")},9260:(bt,Se,j)=>{j.d(Se,{Z:()=>d.Z});var d=j(3942);d.Z.registerVersion("firebase","9.22.0","app-compat")},9568:(bt,Se,j)=>{j.r(Se);var d=j(5861),G=j(3942),F=j(1389),se=j(2090),Ee=(j(6881),j(1877),j(4859));function _e(){return window}const ve=2e3;function W(){return W=(0,d.Z)(function*(P,L,k){var Y;const{BuildInfo:Ie}=_e();(0,F.as)(L.sessionId,"AuthEvent did not contain a session ID");const st=yield function Me(P){return Oe.apply(this,arguments)}(L.sessionId),Nt={};return(0,F.at)()?Nt.ibi=Ie.packageName:(0,F.au)()?Nt.apn=Ie.packageName:(0,F.av)(P,"operation-not-supported-in-this-environment"),Ie.displayName&&(Nt.appDisplayName=Ie.displayName),Nt.sessionId=st,(0,F.aw)(P,k,L.type,void 0,null!==(Y=L.eventId)&&void 0!==Y?Y:void 0,Nt)}),W.apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(P){const{BuildInfo:L}=_e(),k={};(0,F.at)()?k.iosBundleId=L.packageName:(0,F.au)()?k.androidPackageName=L.packageName:(0,F.av)(P,"operation-not-supported-in-this-environment"),yield(0,F.ax)(P,k)})).apply(this,arguments)}function ct(){return(ct=(0,d.Z)(function*(P,L,k){const{cordova:Y}=_e();let Ie=()=>{};try{yield new Promise((st,Nt)=>{let At=null;function tn(){var zt;st();const Sr=null===(zt=Y.plugins.browsertab)||void 0===zt?void 0:zt.close;"function"==typeof Sr&&Sr(),"function"==typeof k?.close&&k.close()}function Pt(){At||(At=window.setTimeout(()=>{Nt((0,F.az)(P,"redirect-cancelled-by-user"))},ve))}function xn(){"visible"===document?.visibilityState&&Pt()}L.addPassiveListener(tn),document.addEventListener("resume",Pt,!1),(0,F.au)()&&document.addEventListener("visibilitychange",xn,!1),Ie=()=>{L.removePassiveListener(tn),document.removeEventListener("resume",Pt,!1),document.removeEventListener("visibilitychange",xn,!1),At&&window.clearTimeout(At)}})}finally{Ie()}})).apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(P){const L=function He(P){if((0,F.as)(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(P);const L=new ArrayBuffer(P.length),k=new Uint8Array(L);for(let Y=0;Y<P.length;Y++)k[Y]=P.charCodeAt(Y);return k}(P),k=yield crypto.subtle.digest("SHA-256",L);return Array.from(new Uint8Array(k)).map(Ie=>Ie.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Te=20;class De extends F.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(L=>{this.resolveInialized=L})}addPassiveListener(L){this.passiveListeners.add(L)}removePassiveListener(L){this.passiveListeners.delete(L)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(L){return this.resolveInialized(),this.passiveListeners.forEach(k=>k(L)),super.onEvent(L)}initialized(){var L=this;return(0,d.Z)(function*(){yield L.initPromise})()}}function Le(P){return ue.apply(this,arguments)}function ue(){return(ue=(0,d.Z)(function*(P){const L=yield lt()._get(rn(P));return L&&(yield lt()._remove(rn(P))),L})).apply(this,arguments)}function Mt(){const P=[],L="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<Te;k++){const Y=Math.floor(Math.random()*L.length);P.push(L.charAt(Y))}return P.join("")}function lt(){return(0,F.aC)(F.b)}function rn(P){return(0,F.aD)("authEvent",P.config.apiKey,P.name)}function ge(P){if(!P?.includes("?"))return{};const[L,...k]=P.split("?");return(0,se.zd)(k.join("?"))}const Ye=class Re{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(L){var k=this;return(0,d.Z)(function*(){const Y=L._key();let Ie=k.eventManagers.get(Y);return Ie||(Ie=new De(L),k.eventManagers.set(Y,Ie),k.attachCallbackListeners(L,Ie)),Ie})()}_openPopup(L){(0,F.av)(L,"operation-not-supported-in-this-environment")}_openRedirect(L,k,Y,Ie){var st=this;return(0,d.Z)(function*(){!function ye(P){var L,k,Y,Ie,st,Nt,At,tn,Pt,xn;const zt=_e();(0,F.aA)("function"==typeof(null===(L=zt?.universalLinks)||void 0===L?void 0:L.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aA)(typeof(null===(k=zt?.BuildInfo)||void 0===k?void 0:k.packageName)<"u",P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aA)("function"==typeof(null===(st=null===(Ie=null===(Y=zt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===st?void 0:st.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(tn=null===(At=null===(Nt=zt?.cordova)||void 0===Nt?void 0:Nt.plugins)||void 0===At?void 0:At.browsertab)||void 0===tn?void 0:tn.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(xn=null===(Pt=zt?.cordova)||void 0===Pt?void 0:Pt.InAppBrowser)||void 0===xn?void 0:xn.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(L);const Nt=yield st._initialize(L);yield Nt.initialized(),Nt.resetRedirect(),(0,F.aG)(),yield st._originValidation(L);const At=function Ne(P,L,k=null){return{type:L,eventId:k,urlResponse:null,sessionId:Mt(),postBody:null,tenantId:P.tenantId,error:(0,F.az)(P,"no-auth-event")}}(L,Y,Ie);yield function ze(P,L){return lt()._set(rn(P),L)}(L,At);const tn=yield function Z(P,L,k){return W.apply(this,arguments)}(L,At,k),Pt=yield function Ae(P){const{cordova:L}=_e();return new Promise(k=>{L.plugins.browsertab.isAvailable(Y=>{let Ie=null;Y?L.plugins.browsertab.openUrl(P):Ie=L.InAppBrowser.open(P,(0,F.ay)()?"_blank":"_system","location=yes"),k(Ie)})})}(tn);return function Je(P,L,k){return ct.apply(this,arguments)}(L,Nt,Pt)})()}_isIframeWebStorageSupported(L,k){throw new Error("Method not implemented.")}_originValidation(L){const k=L._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function X(P){return Ge.apply(this,arguments)}(L)),this.originValidationPromises[k]}attachCallbackListeners(L,k){const{universalLinks:Y,handleOpenURL:Ie,BuildInfo:st}=_e(),Nt=setTimeout((0,d.Z)(function*(){yield Le(L),k.onEvent(We())}),500),At=function(){var xn=(0,d.Z)(function*(zt){clearTimeout(Nt);const Sr=yield Le(L);let Rs=null;Sr&&zt?.url&&(Rs=function ot(P,L){var k,Y;const Ie=function me(P){const L=ge(P),k=L.link?decodeURIComponent(L.link):void 0,Y=ge(k).link,Ie=L.deep_link_id?decodeURIComponent(L.deep_link_id):void 0;return ge(Ie).link||Ie||Y||k||P}(L);if(Ie.includes("/__/auth/callback")){const st=ge(Ie),Nt=st.firebaseError?function pt(P){try{return JSON.parse(P)}catch{return null}}(decodeURIComponent(st.firebaseError)):null,At=null===(Y=null===(k=Nt?.code)||void 0===k?void 0:k.split("auth/"))||void 0===Y?void 0:Y[1],tn=At?(0,F.az)(At):null;return tn?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:tn,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:Ie,postBody:null}}return null}(Sr,zt.url)),k.onEvent(Rs||We())});return function(Sr){return xn.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,At);const tn=Ie,Pt=`${st.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var xn=(0,d.Z)(function*(zt){if(zt.toLowerCase().startsWith(Pt)&&At({url:zt}),"function"==typeof tn)try{tn(zt)}catch(Sr){console.error(Sr)}});return function(zt){return xn.apply(this,arguments)}}()}};function We(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.az)("no-auth-event")}}const Tt=1e3;function Ht(){var P;return(null===(P=self?.location)||void 0===P?void 0:P.protocol)||null}function Jt(P=(0,se.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()&&"capacitor:"!==Ht()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function ni(){try{const P=self.localStorage,L=F.aL();if(P)return P.setItem(L,"1"),P.removeItem(L),!function lr(P=(0,se.z$)()){return function On(){return(0,se.w1)()&&11===document?.documentMode}()||function Wr(P=(0,se.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,se.hl)()}catch{return ri()&&(0,se.hl)()}return!1}function ri(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gi(){return(function St(){return"http:"===Ht()||"https:"===Ht()}()||(0,se.ru)()||Jt())&&!function Vn(){return(0,se.b$)()||(0,se.UG)()}()&&ni()&&!ri()}function Ui(){return Jt()&&typeof document<"u"}function Gn(){return(Gn=(0,d.Z)(function*(){return!!Ui()&&new Promise(P=>{const L=setTimeout(()=>{P(!1)},Tt);document.addEventListener("deviceready",()=>{clearTimeout(L),P(!0)})})})).apply(this,arguments)}const zn={LOCAL:"local",NONE:"none",SESSION:"session"},fs=F.aA,Kn="persistence";function ii(P){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(P){yield P._initializationPromise;const L=gt(),k=F.aD(Kn,P.config.apiKey,P.name);L&&L.setItem(k,P._getPersistence())})).apply(this,arguments)}function gt(){var P;try{return(null===(P=function vt(){return typeof window<"u"?window:null}())||void 0===P?void 0:P.sessionStorage)||null}catch{return null}}const jt=F.aA;class Yn{constructor(){this.browserResolver=F.aC(F.k),this.cordovaResolver=F.aC(Ye),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(L){var k=this;return(0,d.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._initialize(L)})()}_openPopup(L,k,Y,Ie){var st=this;return(0,d.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(L,k,Y,Ie)})()}_openRedirect(L,k,Y,Ie){var st=this;return(0,d.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(L,k,Y,Ie)})()}_isIframeWebStorageSupported(L,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported(L,k)}_originValidation(L){return this.assertedUnderlyingResolver._originValidation(L)}get _shouldInitProactively(){return Ui()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var L=this;return(0,d.Z)(function*(){if(L.underlyingResolver)return;const k=yield function xo(){return Gn.apply(this,arguments)}();L.underlyingResolver=k?L.cordovaResolver:L.browserResolver})()}}function Ur(P){return P.unwrap()}function si(P){return mr(P)}function mr(P){const{_tokenResponse:L}=P instanceof se.ZR?P.customData:P;if(!L)return null;if(!(P instanceof se.ZR)&&"temporaryProof"in L&&"phoneNumber"in L)return F.P.credentialFromResult(P);const k=L.providerId;if(!k||k===F.p.PASSWORD)return null;let Y;switch(k){case F.p.GOOGLE:Y=F.V;break;case F.p.FACEBOOK:Y=F.U;break;case F.p.GITHUB:Y=F.W;break;case F.p.TWITTER:Y=F.Z;break;default:const{oauthIdToken:Ie,oauthAccessToken:st,oauthTokenSecret:Nt,pendingToken:At,nonce:tn}=L;return st||Nt||Ie||At?At?k.startsWith("saml.")?F.aO._create(k,At):F.L._fromParams({providerId:k,signInMethod:k,pendingToken:At,idToken:Ie,accessToken:st}):new F.X(k).credential({idToken:Ie,accessToken:st,rawNonce:tn}):null}return P instanceof se.ZR?Y.credentialFromError(P):Y.credentialFromResult(P)}function en(P,L){return L.catch(k=>{throw k instanceof se.ZR&&function qn(P,L){var k;const Y=null===(k=L.customData)||void 0===k?void 0:k._tokenResponse;if("auth/multi-factor-auth-required"===L?.code)L.resolver=new mi(P,F.aq(P,L));else if(Y){const Ie=mr(L),st=L;Ie&&(st.credential=Ie,st.tenantId=Y.tenantId||void 0,st.email=Y.email||void 0,st.phoneNumber=Y.phoneNumber||void 0)}}(P,k),k}).then(k=>{const Ie=k.user;return{operationType:k.operationType,credential:si(k),additionalUserInfo:F.ao(k),user:Gt.getOrCreate(Ie)}})}function Ri(P,L){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(P,L){const k=yield L;return{verificationId:k.verificationId,confirm:Y=>en(P,k.confirm(Y))}})).apply(this,arguments)}class mi{constructor(L,k){this.resolver=k,this.auth=function Un(P){return P.wrapped()}(L)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(L){return en(Ur(this.auth),this.resolver.resolveSignIn(L))}}class Gt{constructor(L){this._delegate=L,this.multiFactor=F.ar(L)}static getOrCreate(L){return Gt.USER_MAP.has(L)||Gt.USER_MAP.set(L,new Gt(L)),Gt.USER_MAP.get(L)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(L){return this._delegate.getIdTokenResult(L)}getIdToken(L){return this._delegate.getIdToken(L)}linkAndRetrieveDataWithCredential(L){return this.linkWithCredential(L)}linkWithCredential(L){var k=this;return(0,d.Z)(function*(){return en(k.auth,F.a0(k._delegate,L))})()}linkWithPhoneNumber(L,k){var Y=this;return(0,d.Z)(function*(){return Ri(Y.auth,F.l(Y._delegate,L,k))})()}linkWithPopup(L){var k=this;return(0,d.Z)(function*(){return en(k.auth,F.d(k._delegate,L,Yn))})()}linkWithRedirect(L){var k=this;return(0,d.Z)(function*(){return yield ii(F.aH(k.auth)),F.g(k._delegate,L,Yn)})()}reauthenticateAndRetrieveDataWithCredential(L){return this.reauthenticateWithCredential(L)}reauthenticateWithCredential(L){var k=this;return(0,d.Z)(function*(){return en(k.auth,F.a1(k._delegate,L))})()}reauthenticateWithPhoneNumber(L,k){return Ri(this.auth,F.r(this._delegate,L,k))}reauthenticateWithPopup(L){return en(this.auth,F.e(this._delegate,L,Yn))}reauthenticateWithRedirect(L){var k=this;return(0,d.Z)(function*(){return yield ii(F.aH(k.auth)),F.h(k._delegate,L,Yn)})()}sendEmailVerification(L){return F.ae(this._delegate,L)}unlink(L){var k=this;return(0,d.Z)(function*(){return yield F.an(k._delegate,L),k})()}updateEmail(L){return F.aj(this._delegate,L)}updatePassword(L){return F.ak(this._delegate,L)}updatePhoneNumber(L){return F.u(this._delegate,L)}updateProfile(L){return F.ai(this._delegate,L)}verifyBeforeUpdateEmail(L,k){return F.af(this._delegate,L,k)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Gt.USER_MAP=new WeakMap;const Qn=F.aA;let Bn=(()=>{class P{constructor(k,Y){if(this.app=k,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ie}=k.options;Qn(Ie,"invalid-api-key",{appName:k.name}),Qn(Ie,"invalid-api-key",{appName:k.name});const st=typeof window<"u"?Yn:void 0;this._delegate=Y.initialize({options:{persistence:Jn(Ie,k.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(F.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Gt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(k){this._delegate.languageCode=k}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(k){this._delegate.tenantId=k}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(k,Y){F.I(this._delegate,k,Y)}applyActionCode(k){return F.a5(this._delegate,k)}checkActionCode(k){return F.a6(this._delegate,k)}confirmPasswordReset(k,Y){return F.a4(this._delegate,k,Y)}createUserWithEmailAndPassword(k,Y){var Ie=this;return(0,d.Z)(function*(){return en(Ie._delegate,F.a8(Ie._delegate,k,Y))})()}fetchProvidersForEmail(k){return this.fetchSignInMethodsForEmail(k)}fetchSignInMethodsForEmail(k){return F.ad(this._delegate,k)}isSignInWithEmailLink(k){return F.ab(this._delegate,k)}getRedirectResult(){var k=this;return(0,d.Z)(function*(){Qn(gi(),k._delegate,"operation-not-supported-in-this-environment");const Y=yield F.j(k._delegate,Yn);return Y?en(k._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(k){!function yt(P,L){(0,F.aH)(P)._logFramework(L)}(this._delegate,k)}onAuthStateChanged(k,Y,Ie){const{next:st,error:Nt,complete:At}=Br(k,Y,Ie);return this._delegate.onAuthStateChanged(st,Nt,At)}onIdTokenChanged(k,Y,Ie){const{next:st,error:Nt,complete:At}=Br(k,Y,Ie);return this._delegate.onIdTokenChanged(st,Nt,At)}sendSignInLinkToEmail(k,Y){return F.aa(this._delegate,k,Y)}sendPasswordResetEmail(k,Y){return F.a3(this._delegate,k,Y||void 0)}setPersistence(k){var Y=this;return(0,d.Z)(function*(){let Ie;switch(function Zr(P,L){fs(Object.values(zn).includes(L),P,"invalid-persistence-type"),(0,se.b$)()?fs(L!==zn.SESSION,P,"unsupported-persistence-type"):(0,se.UG)()?fs(L===zn.NONE,P,"unsupported-persistence-type"):ri()?fs(L===zn.NONE||L===zn.LOCAL&&(0,se.hl)(),P,"unsupported-persistence-type"):fs(L===zn.NONE||ni(),P,"unsupported-persistence-type")}(Y._delegate,k),k){case zn.SESSION:Ie=F.a;break;case zn.LOCAL:Ie=(yield F.aC(F.i)._isAvailable())?F.i:F.b;break;case zn.NONE:Ie=F.N;break;default:return F.av("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(Ie)})()}signInAndRetrieveDataWithCredential(k){return this.signInWithCredential(k)}signInAnonymously(){return en(this._delegate,F._(this._delegate))}signInWithCredential(k){return en(this._delegate,F.$(this._delegate,k))}signInWithCustomToken(k){return en(this._delegate,F.a2(this._delegate,k))}signInWithEmailAndPassword(k,Y){return en(this._delegate,F.a9(this._delegate,k,Y))}signInWithEmailLink(k,Y){return en(this._delegate,F.ac(this._delegate,k,Y))}signInWithPhoneNumber(k,Y){return Ri(this._delegate,F.s(this._delegate,k,Y))}signInWithPopup(k){var Y=this;return(0,d.Z)(function*(){return Qn(gi(),Y._delegate,"operation-not-supported-in-this-environment"),en(Y._delegate,F.c(Y._delegate,k,Yn))})()}signInWithRedirect(k){var Y=this;return(0,d.Z)(function*(){return Qn(gi(),Y._delegate,"operation-not-supported-in-this-environment"),yield ii(Y._delegate),F.f(Y._delegate,k,Yn)})()}updateCurrentUser(k){return this._delegate.updateCurrentUser(k)}verifyPasswordResetCode(k){return F.a7(this._delegate,k)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=zn,P})();function Br(P,L,k){let Y=P;"function"!=typeof P&&({next:Y,error:L,complete:k}=P);const Ie=Y;return{next:Nt=>Ie(Nt&&Gt.getOrCreate(Nt)),error:L,complete:k}}function Jn(P,L){const k=function Xt(P,L){const k=gt();if(!k)return[];const Y=F.aD(Kn,P,L);switch(k.getItem(Y)){case zn.NONE:return[F.N];case zn.LOCAL:return[F.i,F.a];case zn.SESSION:return[F.a];default:return[]}}(P,L);if(typeof self<"u"&&!k.includes(F.i)&&k.push(F.i),typeof window<"u")for(const Y of[F.b,F.a])k.includes(Y)||k.push(Y);return k.includes(F.N)||k.push(F.N),k}class oi{constructor(){this.providerId="phone",this._delegate=new F.P(Ur(G.Z.auth()))}static credential(L,k){return F.P.credential(L,k)}verifyPhoneNumber(L,k){return this._delegate.verifyPhoneNumber(L,k)}unwrap(){return this._delegate}}oi.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,oi.PROVIDER_ID=F.P.PROVIDER_ID;const Kr=F.aA;class ai{constructor(L,k,Y=G.Z.app()){var Ie;Kr(null===(Ie=Y.options)||void 0===Ie?void 0:Ie.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new F.R(L,k,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(P){P.INTERNAL.registerComponent(new Ee.wA("auth-compat",L=>{const k=L.getProvider("app-compat").getImmediate(),Y=L.getProvider("auth");return new Bn(k,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.Q,FacebookAuthProvider:F.U,GithubAuthProvider:F.W,GoogleAuthProvider:F.V,OAuthProvider:F.X,SAMLAuthProvider:F.Y,PhoneAuthProvider:oi,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:ai,TwitterAuthProvider:F.Z,Auth:Bn,AuthCredential:F.J,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.4.2")}(G.Z)},5861:(bt,Se,j)=>{function d(F,se,le,ce,Ee,_e,ve){try{var Z=F[_e](ve),W=Z.value}catch(X){return void le(X)}Z.done?se(W):Promise.resolve(W).then(ce,Ee)}function G(F){return function(){var se=this,le=arguments;return new Promise(function(ce,Ee){var _e=F.apply(se,le);function ve(W){d(_e,ce,Ee,ve,Z,"next",W)}function Z(W){d(_e,ce,Ee,ve,Z,"throw",W)}ve(void 0)})}}j.d(Se,{Z:()=>G})}},bt=>{bt(bt.s=6201)}]);